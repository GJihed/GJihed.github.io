!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("jquery")):"function"==typeof define&&define.amd?define(["exports","jquery"],t):t(e.bootstrap={},e.jQuery)}(this,function(e,t){"use strict";function r(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}function l(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},t=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),t.forEach(function(e){var t,i,r;t=n,r=o[i=e],i in t?Object.defineProperty(t,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[i]=r})}return n}for(var n,i,o,s,h,c,u,f,p,d,m,g,E,v,y,T,_,x,R,b,w,H,S,M,C,A,P,D,L,F,O,k,V,I,N,U,z,B,j,W,G,X,q,Y,K,Q,Z,$,J,ee,te,ie,re,ne,oe,ae,se,le,he,ce,ue,fe,pe,de,me,ge,Ee,ve,ye,Te,_e,xe=function(r){var t="transitionend";function e(e){var t=this,i=!1;return r(this).one(l.TRANSITION_END,function(){i=!0}),setTimeout(function(){i||l.triggerTransitionEnd(t)},e),this}var l={TRANSITION_END:"bsTransitionEnd",getUID:function(e){for(;e+=~~(1e6*Math.random()),document.getElementById(e););return e},getSelectorFromElement:function(e){var t=e.getAttribute("data-target");t&&"#"!==t||(t=e.getAttribute("href")||"");try{return document.querySelector(t)?t:null}catch(e){return null}},getTransitionDurationFromElement:function(e){if(!e)return 0;var t=r(e).css("transition-duration");return parseFloat(t)?(t=t.split(",")[0],1e3*parseFloat(t)):0},reflow:function(e){return e.offsetHeight},triggerTransitionEnd:function(e){r(e).trigger(t)},supportsTransitionEnd:function(){return Boolean(t)},isElement:function(e){return(e[0]||e).nodeType},typeCheckConfig:function(e,t,i){for(var r in i)if(Object.prototype.hasOwnProperty.call(i,r)){var n=i[r],o=t[r],a=o&&l.isElement(o)?"element":(s=o,{}.toString.call(s).match(/\s([a-z]+)/i)[1].toLowerCase());if(!new RegExp(n).test(a))throw new Error(e.toUpperCase()+': Option "'+r+'" provided type "'+a+'" but expected type "'+n+'".')}var s}};return r.fn.emulateTransitionEnd=e,r.event.special[l.TRANSITION_END]={bindType:t,delegateType:t,handle:function(e){if(r(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}},l}(t=t&&t.hasOwnProperty("default")?t.default:t),Re=(i="alert",s="."+(o="bs.alert"),h=(n=t).fn[i],c={CLOSE:"close"+s,CLOSED:"closed"+s,CLICK_DATA_API:"click"+s+".data-api"},u="alert",f="fade",p="show",d=function(){function r(e){this._element=e}var e=r.prototype;return e.close=function(e){var t=this._element;e&&(t=this._getRootElement(e)),this._triggerCloseEvent(t).isDefaultPrevented()||this._removeElement(t)},e.dispose=function(){n.removeData(this._element,o),this._element=null},e._getRootElement=function(e){var t=xe.getSelectorFromElement(e),i=!1;return t&&(i=document.querySelector(t)),i||(i=n(e).closest("."+u)[0]),i},e._triggerCloseEvent=function(e){var t=n.Event(c.CLOSE);return n(e).trigger(t),t},e._removeElement=function(t){var i=this;if(n(t).removeClass(p),n(t).hasClass(f)){var e=xe.getTransitionDurationFromElement(t);n(t).one(xe.TRANSITION_END,function(e){return i._destroyElement(t,e)}).emulateTransitionEnd(e)}else this._destroyElement(t)},e._destroyElement=function(e){n(e).detach().trigger(c.CLOSED).remove()},r._jQueryInterface=function(i){return this.each(function(){var e=n(this),t=e.data(o);t||(t=new r(this),e.data(o,t)),"close"===i&&t[i](this)})},r._handleDismiss=function(t){return function(e){e&&e.preventDefault(),t.close(this)}},a(r,null,[{key:"VERSION",get:function(){return"4.1.3"}}]),r}(),n(document).on(c.CLICK_DATA_API,'[data-dismiss="alert"]',d._handleDismiss(new d)),n.fn[i]=d._jQueryInterface,n.fn[i].Constructor=d,n.fn[i].noConflict=function(){return n.fn[i]=h,d._jQueryInterface},d),be=(g="button",v="."+(E="bs.button"),y=".data-api",T=(m=t).fn[g],_="active",x="btn",b='[data-toggle^="button"]',w='[data-toggle="buttons"]',H="input",S=".active",M=".btn",C={CLICK_DATA_API:"click"+v+y,FOCUS_BLUR_DATA_API:(R="focus")+v+y+" blur"+v+y},A=function(){function i(e){this._element=e}var e=i.prototype;return e.toggle=function(){var e=!0,t=!0,i=m(this._element).closest(w)[0];if(i){var r=this._element.querySelector(H);if(r){if("radio"===r.type)if(r.checked&&this._element.classList.contains(_))e=!1;else{var n=i.querySelector(S);n&&m(n).removeClass(_)}if(e){if(r.hasAttribute("disabled")||i.hasAttribute("disabled")||r.classList.contains("disabled")||i.classList.contains("disabled"))return;r.checked=!this._element.classList.contains(_),m(r).trigger("change")}r.focus(),t=!1}}t&&this._element.setAttribute("aria-pressed",!this._element.classList.contains(_)),e&&m(this._element).toggleClass(_)},e.dispose=function(){m.removeData(this._element,E),this._element=null},i._jQueryInterface=function(t){return this.each(function(){var e=m(this).data(E);e||(e=new i(this),m(this).data(E,e)),"toggle"===t&&e[t]()})},a(i,null,[{key:"VERSION",get:function(){return"4.1.3"}}]),i}(),m(document).on(C.CLICK_DATA_API,b,function(e){e.preventDefault();var t=e.target;m(t).hasClass(x)||(t=m(t).closest(M)),A._jQueryInterface.call(m(t),"toggle")}).on(C.FOCUS_BLUR_DATA_API,b,function(e){var t=m(e.target).closest(M)[0];m(t).toggleClass(R,/^focus(in)?$/.test(e.type))}),m.fn[g]=A._jQueryInterface,m.fn[g].Constructor=A,m.fn[g].noConflict=function(){return m.fn[g]=T,A._jQueryInterface},A),we=(D="carousel",F="."+(L="bs.carousel"),O=".data-api",k=(P=t).fn[D],V={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0},I={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean"},N="next",U="prev",z="left",B="right",j={SLIDE:"slide"+F,SLID:"slid"+F,KEYDOWN:"keydown"+F,MOUSEENTER:"mouseenter"+F,MOUSELEAVE:"mouseleave"+F,TOUCHEND:"touchend"+F,LOAD_DATA_API:"load"+F+O,CLICK_DATA_API:"click"+F+O},W="carousel",G="active",X="slide",q="carousel-item-right",Y="carousel-item-left",K="carousel-item-next",Q="carousel-item-prev",Z=".active",$=".active.carousel-item",J=".carousel-item",ee=".carousel-item-next, .carousel-item-prev",te=".carousel-indicators",ie="[data-slide], [data-slide-to]",re='[data-ride="carousel"]',ne=function(){function o(e,t){this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this._config=this._getConfig(t),this._element=P(e)[0],this._indicatorsElement=this._element.querySelector(te),this._addEventListeners()}var e=o.prototype;return e.next=function(){this._isSliding||this._slide(N)},e.nextWhenVisible=function(){!document.hidden&&P(this._element).is(":visible")&&"hidden"!==P(this._element).css("visibility")&&this.next()},e.prev=function(){this._isSliding||this._slide(U)},e.pause=function(e){e||(this._isPaused=!0),this._element.querySelector(ee)&&(xe.triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null},e.cycle=function(e){e||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))},e.to=function(e){var t=this;this._activeElement=this._element.querySelector($);var i=this._getItemIndex(this._activeElement);if(!(e>this._items.length-1||e<0))if(this._isSliding)P(this._element).one(j.SLID,function(){return t.to(e)});else{if(i===e)return this.pause(),void this.cycle();var r=i<e?N:U;this._slide(r,this._items[e])}},e.dispose=function(){P(this._element).off(F),P.removeData(this._element,L),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null},e._getConfig=function(e){return e=l({},V,e),xe.typeCheckConfig(D,e,I),e},e._addEventListeners=function(){var t=this;this._config.keyboard&&P(this._element).on(j.KEYDOWN,function(e){return t._keydown(e)}),"hover"===this._config.pause&&(P(this._element).on(j.MOUSEENTER,function(e){return t.pause(e)}).on(j.MOUSELEAVE,function(e){return t.cycle(e)}),"ontouchstart"in document.documentElement&&P(this._element).on(j.TOUCHEND,function(){t.pause(),t.touchTimeout&&clearTimeout(t.touchTimeout),t.touchTimeout=setTimeout(function(e){return t.cycle(e)},500+t._config.interval)}))},e._keydown=function(e){if(!/input|textarea/i.test(e.target.tagName))switch(e.which){case 37:e.preventDefault(),this.prev();break;case 39:e.preventDefault(),this.next()}},e._getItemIndex=function(e){return this._items=e&&e.parentNode?[].slice.call(e.parentNode.querySelectorAll(J)):[],this._items.indexOf(e)},e._getItemByDirection=function(e,t){var i=e===N,r=e===U,n=this._getItemIndex(t),o=this._items.length-1;if((r&&0===n||i&&n===o)&&!this._config.wrap)return t;var a=(n+(e===U?-1:1))%this._items.length;return-1===a?this._items[this._items.length-1]:this._items[a]},e._triggerSlideEvent=function(e,t){var i=this._getItemIndex(e),r=this._getItemIndex(this._element.querySelector($)),n=P.Event(j.SLIDE,{relatedTarget:e,direction:t,from:r,to:i});return P(this._element).trigger(n),n},e._setActiveIndicatorElement=function(e){if(this._indicatorsElement){var t=[].slice.call(this._indicatorsElement.querySelectorAll(Z));P(t).removeClass(G);var i=this._indicatorsElement.children[this._getItemIndex(e)];i&&P(i).addClass(G)}},e._slide=function(e,t){var i,r,n,o=this,a=this._element.querySelector($),s=this._getItemIndex(a),l=t||a&&this._getItemByDirection(e,a),h=this._getItemIndex(l),c=Boolean(this._interval);if(n=e===N?(i=Y,r=K,z):(i=q,r=Q,B),l&&P(l).hasClass(G))this._isSliding=!1;else if(!this._triggerSlideEvent(l,n).isDefaultPrevented()&&a&&l){this._isSliding=!0,c&&this.pause(),this._setActiveIndicatorElement(l);var u=P.Event(j.SLID,{relatedTarget:l,direction:n,from:s,to:h});if(P(this._element).hasClass(X)){P(l).addClass(r),xe.reflow(l),P(a).addClass(i),P(l).addClass(i);var f=xe.getTransitionDurationFromElement(a);P(a).one(xe.TRANSITION_END,function(){P(l).removeClass(i+" "+r).addClass(G),P(a).removeClass(G+" "+r+" "+i),o._isSliding=!1,setTimeout(function(){return P(o._element).trigger(u)},0)}).emulateTransitionEnd(f)}else P(a).removeClass(G),P(l).addClass(G),this._isSliding=!1,P(this._element).trigger(u);c&&this.cycle()}},o._jQueryInterface=function(r){return this.each(function(){var e=P(this).data(L),t=l({},V,P(this).data());"object"==typeof r&&(t=l({},t,r));var i="string"==typeof r?r:t.slide;if(e||(e=new o(this,t),P(this).data(L,e)),"number"==typeof r)e.to(r);else if("string"==typeof i){if(void 0===e[i])throw new TypeError('No method named "'+i+'"');e[i]()}else t.interval&&(e.pause(),e.cycle())})},o._dataApiClickHandler=function(e){var t=xe.getSelectorFromElement(this);if(t){var i=P(t)[0];if(i&&P(i).hasClass(W)){var r=l({},P(i).data(),P(this).data()),n=this.getAttribute("data-slide-to");n&&(r.interval=!1),o._jQueryInterface.call(P(i),r),n&&P(i).data(L).to(n),e.preventDefault()}}},a(o,null,[{key:"VERSION",get:function(){return"4.1.3"}},{key:"Default",get:function(){return V}}]),o}(),P(document).on(j.CLICK_DATA_API,ie,ne._dataApiClickHandler),P(window).on(j.LOAD_DATA_API,function(){for(var e=[].slice.call(document.querySelectorAll(re)),t=0,i=e.length;t<i;t++){var r=P(e[t]);ne._jQueryInterface.call(r,r.data())}}),P.fn[D]=ne._jQueryInterface,P.fn[D].Constructor=ne,P.fn[D].noConflict=function(){return P.fn[D]=k,ne._jQueryInterface},ne),He=(ae="collapse",le="."+(se="bs.collapse"),he=(oe=t).fn[ae],ce={toggle:!0,parent:""},ue={toggle:"boolean",parent:"(string|element)"},fe={SHOW:"show"+le,SHOWN:"shown"+le,HIDE:"hide"+le,HIDDEN:"hidden"+le,CLICK_DATA_API:"click"+le+".data-api"},pe="show",de="collapse",me="collapsing",ge="collapsed",Ee="width",ve="height",ye=".show, .collapsing",Te='[data-toggle="collapse"]',_e=function(){function s(t,e){this._isTransitioning=!1,this._element=t,this._config=this._getConfig(e),this._triggerArray=oe.makeArray(document.querySelectorAll('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'));for(var i=[].slice.call(document.querySelectorAll(Te)),r=0,n=i.length;r<n;r++){var o=i[r],a=xe.getSelectorFromElement(o),s=[].slice.call(document.querySelectorAll(a)).filter(function(e){return e===t});null!==a&&0<s.length&&(this._selector=a,this._triggerArray.push(o))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}var e=s.prototype;return e.toggle=function(){oe(this._element).hasClass(pe)?this.hide():this.show()},e.show=function(){var e,t,i=this;if(!this._isTransitioning&&!oe(this._element).hasClass(pe)&&(this._parent&&0===(e=[].slice.call(this._parent.querySelectorAll(ye)).filter(function(e){return e.getAttribute("data-parent")===i._config.parent})).length&&(e=null),!(e&&(t=oe(e).not(this._selector).data(se))&&t._isTransitioning))){var r=oe.Event(fe.SHOW);if(oe(this._element).trigger(r),!r.isDefaultPrevented()){e&&(s._jQueryInterface.call(oe(e).not(this._selector),"hide"),t||oe(e).data(se,null));var n=this._getDimension();oe(this._element).removeClass(de).addClass(me),this._element.style[n]=0,this._triggerArray.length&&oe(this._triggerArray).removeClass(ge).attr("aria-expanded",!0),this.setTransitioning(!0);var o="scroll"+(n[0].toUpperCase()+n.slice(1)),a=xe.getTransitionDurationFromElement(this._element);oe(this._element).one(xe.TRANSITION_END,function(){oe(i._element).removeClass(me).addClass(de).addClass(pe),i._element.style[n]="",i.setTransitioning(!1),oe(i._element).trigger(fe.SHOWN)}).emulateTransitionEnd(a),this._element.style[n]=this._element[o]+"px"}}},e.hide=function(){var e=this;if(!this._isTransitioning&&oe(this._element).hasClass(pe)){var t=oe.Event(fe.HIDE);if(oe(this._element).trigger(t),!t.isDefaultPrevented()){var i=this._getDimension();this._element.style[i]=this._element.getBoundingClientRect()[i]+"px",xe.reflow(this._element),oe(this._element).addClass(me).removeClass(de).removeClass(pe);var r=this._triggerArray.length;if(0<r)for(var n=0;n<r;n++){var o=this._triggerArray[n],a=xe.getSelectorFromElement(o);if(null!==a)oe([].slice.call(document.querySelectorAll(a))).hasClass(pe)||oe(o).addClass(ge).attr("aria-expanded",!1)}this.setTransitioning(!0);this._element.style[i]="";var s=xe.getTransitionDurationFromElement(this._element);oe(this._element).one(xe.TRANSITION_END,function(){e.setTransitioning(!1),oe(e._element).removeClass(me).addClass(de).trigger(fe.HIDDEN)}).emulateTransitionEnd(s)}}},e.setTransitioning=function(e){this._isTransitioning=e},e.dispose=function(){oe.removeData(this._element,se),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null},e._getConfig=function(e){return(e=l({},ce,e)).toggle=Boolean(e.toggle),xe.typeCheckConfig(ae,e,ue),e},e._getDimension=function(){return oe(this._element).hasClass(Ee)?Ee:ve},e._getParent=function(){var i=this,e=null;xe.isElement(this._config.parent)?(e=this._config.parent,void 0!==this._config.parent.jquery&&(e=this._config.parent[0])):e=document.querySelector(this._config.parent);var t='[data-toggle="collapse"][data-parent="'+this._config.parent+'"]',r=[].slice.call(e.querySelectorAll(t));return oe(r).each(function(e,t){i._addAriaAndCollapsedClass(s._getTargetFromElement(t),[t])}),e},e._addAriaAndCollapsedClass=function(e,t){if(e){var i=oe(e).hasClass(pe);t.length&&oe(t).toggleClass(ge,!i).attr("aria-expanded",i)}},s._getTargetFromElement=function(e){var t=xe.getSelectorFromElement(e);return t?document.querySelector(t):null},s._jQueryInterface=function(r){return this.each(function(){var e=oe(this),t=e.data(se),i=l({},ce,e.data(),"object"==typeof r&&r?r:{});if(!t&&i.toggle&&/show|hide/.test(r)&&(i.toggle=!1),t||(t=new s(this,i),e.data(se,t)),"string"==typeof r){if(void 0===t[r])throw new TypeError('No method named "'+r+'"');t[r]()}})},a(s,null,[{key:"VERSION",get:function(){return"4.1.3"}},{key:"Default",get:function(){return ce}}]),s}(),oe(document).on(fe.CLICK_DATA_API,Te,function(e){"A"===e.currentTarget.tagName&&e.preventDefault();var i=oe(this),t=xe.getSelectorFromElement(this),r=[].slice.call(document.querySelectorAll(t));oe(r).each(function(){var e=oe(this),t=e.data(se)?"toggle":i.data();_e._jQueryInterface.call(e,t)})}),oe.fn[ae]=_e._jQueryInterface,oe.fn[ae].Constructor=_e,oe.fn[ae].noConflict=function(){return oe.fn[ae]=he,_e._jQueryInterface},_e),Se="undefined"!=typeof window&&"undefined"!=typeof document,Me=["Edge","Trident","Firefox"],Ce=0,Ae=0;Ae<Me.length;Ae+=1)if(Se&&0<=navigator.userAgent.indexOf(Me[Ae])){Ce=1;break}var Pe=Se&&window.Promise?function(e){var t=!1;return function(){t||(t=!0,window.Promise.resolve().then(function(){t=!1,e()}))}}:function(e){var t=!1;return function(){t||(t=!0,setTimeout(function(){t=!1,e()},Ce))}};function De(e){return e&&"[object Function]"==={}.toString.call(e)}function Le(e,t){if(1!==e.nodeType)return[];var i=getComputedStyle(e,null);return t?i[t]:i}function Fe(e){return"HTML"===e.nodeName?e:e.parentNode||e.host}function Oe(e){if(!e)return document.body;switch(e.nodeName){case"HTML":case"BODY":return e.ownerDocument.body;case"#document":return e.body}var t=Le(e),i=t.overflow,r=t.overflowX,n=t.overflowY;return/(auto|scroll|overlay)/.test(i+n+r)?e:Oe(Fe(e))}var ke=Se&&!(!window.MSInputMethodContext||!document.documentMode),Ve=Se&&/MSIE 10/.test(navigator.userAgent);function Ie(e){return 11===e?ke:10===e?Ve:ke||Ve}function Ne(e){if(!e)return document.documentElement;for(var t=Ie(10)?document.body:null,i=e.offsetParent;i===t&&e.nextElementSibling;)i=(e=e.nextElementSibling).offsetParent;var r=i&&i.nodeName;return r&&"BODY"!==r&&"HTML"!==r?-1!==["TD","TABLE"].indexOf(i.nodeName)&&"static"===Le(i,"position")?Ne(i):i:e?e.ownerDocument.documentElement:document.documentElement}function Ue(e){return null!==e.parentNode?Ue(e.parentNode):e}function ze(e,t){if(!(e&&e.nodeType&&t&&t.nodeType))return document.documentElement;var i=e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING,r=i?e:t,n=i?t:e,o=document.createRange();o.setStart(r,0),o.setEnd(n,0);var a,s,l=o.commonAncestorContainer;if(e!==l&&t!==l||r.contains(n))return"BODY"===(s=(a=l).nodeName)||"HTML"!==s&&Ne(a.firstElementChild)!==a?Ne(l):l;var h=Ue(e);return h.host?ze(h.host,t):ze(e,Ue(t).host)}function Be(e){var t="top"===(1<arguments.length&&void 0!==arguments[1]?arguments[1]:"top")?"scrollTop":"scrollLeft",i=e.nodeName;if("BODY"!==i&&"HTML"!==i)return e[t];var r=e.ownerDocument.documentElement;return(e.ownerDocument.scrollingElement||r)[t]}function je(e,t){var i="x"===t?"Left":"Top",r="Left"===i?"Right":"Bottom";return parseFloat(e["border"+i+"Width"],10)+parseFloat(e["border"+r+"Width"],10)}function We(e,t,i,r){return Math.max(t["offset"+e],t["scroll"+e],i["client"+e],i["offset"+e],i["scroll"+e],Ie(10)?i["offset"+e]+r["margin"+("Height"===e?"Top":"Left")]+r["margin"+("Height"===e?"Bottom":"Right")]:0)}function Ge(){var e=document.body,t=document.documentElement,i=Ie(10)&&getComputedStyle(t);return{height:We("Height",e,t,i),width:We("Width",e,t,i)}}var Xe=function(){function r(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}}(),qe=function(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e},Ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e};function Ke(e){return Ye({},e,{right:e.left+e.width,bottom:e.top+e.height})}function Qe(e){var t={};try{if(Ie(10)){t=e.getBoundingClientRect();var i=Be(e,"top"),r=Be(e,"left");t.top+=i,t.left+=r,t.bottom+=i,t.right+=r}else t=e.getBoundingClientRect()}catch(e){}var n={left:t.left,top:t.top,width:t.right-t.left,height:t.bottom-t.top},o="HTML"===e.nodeName?Ge():{},a=o.width||e.clientWidth||n.right-n.left,s=o.height||e.clientHeight||n.bottom-n.top,l=e.offsetWidth-a,h=e.offsetHeight-s;if(l||h){var c=Le(e);l-=je(c,"x"),h-=je(c,"y"),n.width-=l,n.height-=h}return Ke(n)}function Ze(e,t){var i=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=Ie(10),n="HTML"===t.nodeName,o=Qe(e),a=Qe(t),s=Oe(e),l=Le(t),h=parseFloat(l.borderTopWidth,10),c=parseFloat(l.borderLeftWidth,10);i&&"HTML"===t.nodeName&&(a.top=Math.max(a.top,0),a.left=Math.max(a.left,0));var u=Ke({top:o.top-a.top-h,left:o.left-a.left-c,width:o.width,height:o.height});if(u.marginTop=0,u.marginLeft=0,!r&&n){var f=parseFloat(l.marginTop,10),p=parseFloat(l.marginLeft,10);u.top-=h-f,u.bottom-=h-f,u.left-=c-p,u.right-=c-p,u.marginTop=f,u.marginLeft=p}return(r&&!i?t.contains(s):t===s&&"BODY"!==s.nodeName)&&(u=function(e,t){var i=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=Be(t,"top"),n=Be(t,"left"),o=i?-1:1;return e.top+=r*o,e.bottom+=r*o,e.left+=n*o,e.right+=n*o,e}(u,t)),u}function $e(e){if(!e||!e.parentElement||Ie())return document.documentElement;for(var t=e.parentElement;t&&"none"===Le(t,"transform");)t=t.parentElement;return t||document.documentElement}function Je(e,t,i,r){var n=4<arguments.length&&void 0!==arguments[4]&&arguments[4],o={top:0,left:0},a=n?$e(e):ze(e,t);if("viewport"===r)o=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],i=e.ownerDocument.documentElement,r=Ze(e,i),n=Math.max(i.clientWidth,window.innerWidth||0),o=Math.max(i.clientHeight,window.innerHeight||0),a=t?0:Be(i),s=t?0:Be(i,"left");return Ke({top:a-r.top+r.marginTop,left:s-r.left+r.marginLeft,width:n,height:o})}(a,n);else{var s=void 0;"scrollParent"===r?"BODY"===(s=Oe(Fe(t))).nodeName&&(s=e.ownerDocument.documentElement):s="window"===r?e.ownerDocument.documentElement:r;var l=Ze(s,a,n);if("HTML"!==s.nodeName||function e(t){var i=t.nodeName;return"BODY"!==i&&"HTML"!==i&&("fixed"===Le(t,"position")||e(Fe(t)))}(a))o=l;else{var h=Ge(),c=h.height,u=h.width;o.top+=l.top-l.marginTop,o.bottom=c+l.top,o.left+=l.left-l.marginLeft,o.right=u+l.left}}return o.left+=i,o.top+=i,o.right-=i,o.bottom-=i,o}function et(e,t,r,i,n){var o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;if(-1===e.indexOf("auto"))return e;var a=Je(r,i,o,n),s={top:{width:a.width,height:t.top-a.top},right:{width:a.right-t.right,height:a.height},bottom:{width:a.width,height:a.bottom-t.bottom},left:{width:t.left-a.left,height:a.height}},l=Object.keys(s).map(function(e){return Ye({key:e},s[e],{area:(t=s[e],t.width*t.height)});var t}).sort(function(e,t){return t.area-e.area}),h=l.filter(function(e){var t=e.width,i=e.height;return t>=r.clientWidth&&i>=r.clientHeight}),c=0<h.length?h[0].key:l[0].key,u=e.split("-")[1];return c+(u?"-"+u:"")}function tt(e,t,i){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return Ze(i,r?$e(t):ze(t,i),r)}function it(e){var t=getComputedStyle(e),i=parseFloat(t.marginTop)+parseFloat(t.marginBottom),r=parseFloat(t.marginLeft)+parseFloat(t.marginRight);return{width:e.offsetWidth+r,height:e.offsetHeight+i}}function rt(e){var t={left:"right",right:"left",bottom:"top",top:"bottom"};return e.replace(/left|right|bottom|top/g,function(e){return t[e]})}function nt(e,t,i){i=i.split("-")[0];var r=it(e),n={width:r.width,height:r.height},o=-1!==["right","left"].indexOf(i),a=o?"top":"left",s=o?"left":"top",l=o?"height":"width",h=o?"width":"height";return n[a]=t[a]+t[l]/2-r[l]/2,n[s]=i===s?t[s]-r[h]:t[rt(s)],n}function ot(e,t){return Array.prototype.find?e.find(t):e.filter(t)[0]}function at(e,i,t){return(void 0===t?e:e.slice(0,function(e,t,i){if(Array.prototype.findIndex)return e.findIndex(function(e){return e[t]===i});var r=ot(e,function(e){return e[t]===i});return e.indexOf(r)}(e,"name",t))).forEach(function(e){e.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var t=e.function||e.fn;e.enabled&&De(t)&&(i.offsets.popper=Ke(i.offsets.popper),i.offsets.reference=Ke(i.offsets.reference),i=t(i,e))}),i}function st(e,i){return e.some(function(e){var t=e.name;return e.enabled&&t===i})}function lt(e){for(var t=[!1,"ms","Webkit","Moz","O"],i=e.charAt(0).toUpperCase()+e.slice(1),r=0;r<t.length;r++){var n=t[r],o=n?""+n+i:e;if(void 0!==document.body.style[o])return o}return null}function ht(e){var t=e.ownerDocument;return t?t.defaultView:window}function ct(e,t,i,r){i.updateBound=r,ht(e).addEventListener("resize",i.updateBound,{passive:!0});var n=Oe(e);return function e(t,i,r,n){var o="BODY"===t.nodeName,a=o?t.ownerDocument.defaultView:t;a.addEventListener(i,r,{passive:!0}),o||e(Oe(a.parentNode),i,r,n),n.push(a)}(n,"scroll",i.updateBound,i.scrollParents),i.scrollElement=n,i.eventsEnabled=!0,i}function ut(){var e,t;this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=(e=this.reference,t=this.state,ht(e).removeEventListener("resize",t.updateBound),t.scrollParents.forEach(function(e){e.removeEventListener("scroll",t.updateBound)}),t.updateBound=null,t.scrollParents=[],t.scrollElement=null,t.eventsEnabled=!1,t))}function ft(e){return""!==e&&!isNaN(parseFloat(e))&&isFinite(e)}function pt(i,r){Object.keys(r).forEach(function(e){var t="";-1!==["width","height","top","right","bottom","left"].indexOf(e)&&ft(r[e])&&(t="px"),i.style[e]=r[e]+t})}function dt(e,t,i){var r=ot(e,function(e){return e.name===t}),n=!!r&&e.some(function(e){return e.name===i&&e.enabled&&e.order<r.order});if(!n){var o="`"+t+"`",a="`"+i+"`";console.warn(a+" modifier is required by "+o+" modifier in order to work, be sure to include it before "+o+"!")}return n}var mt=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],gt=mt.slice(3);function Et(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],i=gt.indexOf(e),r=gt.slice(i+1).concat(gt.slice(0,i));return t?r.reverse():r}var vt="flip",yt="clockwise",Tt="counterclockwise";function _t(e,n,o,t){var a=[0,0],s=-1!==["right","left"].indexOf(t),i=e.split(/(\+|\-)/).map(function(e){return e.trim()}),r=i.indexOf(ot(i,function(e){return-1!==e.search(/,|\s/)}));i[r]&&-1===i[r].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var l=/\s*,\s*|\s+/,h=-1!==r?[i.slice(0,r).concat([i[r].split(l)[0]]),[i[r].split(l)[1]].concat(i.slice(r+1))]:[i];return(h=h.map(function(e,t){var i=(1===t?!s:s)?"height":"width",r=!1;return e.reduce(function(e,t){return""===e[e.length-1]&&-1!==["+","-"].indexOf(t)?(e[e.length-1]=t,r=!0,e):r?(e[e.length-1]+=t,r=!1,e):e.concat(t)},[]).map(function(e){return function(e,t,i,r){var n=e.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),o=+n[1],a=n[2];if(!o)return e;if(0!==a.indexOf("%"))return"vh"!==a&&"vw"!==a?o:("vh"===a?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*o;var s=void 0;switch(a){case"%p":s=i;break;case"%":case"%r":default:s=r}return Ke(s)[t]/100*o}(e,i,n,o)})})).forEach(function(i,r){i.forEach(function(e,t){ft(e)&&(a[r]+=e*("-"===i[t-1]?-1:1))})}),a}var xt={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(e){var t=e.placement,i=t.split("-")[0],r=t.split("-")[1];if(r){var n=e.offsets,o=n.reference,a=n.popper,s=-1!==["bottom","top"].indexOf(i),l=s?"left":"top",h=s?"width":"height",c={start:qe({},l,o[l]),end:qe({},l,o[l]+o[h]-a[h])};e.offsets.popper=Ye({},a,c[r])}return e}},offset:{order:200,enabled:!0,fn:function(e,t){var i=t.offset,r=e.placement,n=e.offsets,o=n.popper,a=n.reference,s=r.split("-")[0],l=void 0;return l=ft(+i)?[+i,0]:_t(i,o,a,s),"left"===s?(o.top+=l[0],o.left-=l[1]):"right"===s?(o.top+=l[0],o.left+=l[1]):"top"===s?(o.left+=l[0],o.top-=l[1]):"bottom"===s&&(o.left+=l[0],o.top+=l[1]),e.popper=o,e},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(e,r){var t=r.boundariesElement||Ne(e.instance.popper);e.instance.reference===t&&(t=Ne(t));var i=lt("transform"),n=e.instance.popper.style,o=n.top,a=n.left,s=n[i];n.top="",n.left="",n[i]="";var l=Je(e.instance.popper,e.instance.reference,r.padding,t,e.positionFixed);n.top=o,n.left=a,n[i]=s,r.boundaries=l;var h=r.priority,c=e.offsets.popper,u={primary:function(e){var t=c[e];return c[e]<l[e]&&!r.escapeWithReference&&(t=Math.max(c[e],l[e])),qe({},e,t)},secondary:function(e){var t="right"===e?"left":"top",i=c[t];return c[e]>l[e]&&!r.escapeWithReference&&(i=Math.min(c[t],l[e]-("right"===e?c.width:c.height))),qe({},t,i)}};return h.forEach(function(e){var t=-1!==["left","top"].indexOf(e)?"primary":"secondary";c=Ye({},c,u[t](e))}),e.offsets.popper=c,e},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(e){var t=e.offsets,i=t.popper,r=t.reference,n=e.placement.split("-")[0],o=Math.floor,a=-1!==["top","bottom"].indexOf(n),s=a?"right":"bottom",l=a?"left":"top",h=a?"width":"height";return i[s]<o(r[l])&&(e.offsets.popper[l]=o(r[l])-i[h]),i[l]>o(r[s])&&(e.offsets.popper[l]=o(r[s])),e}},arrow:{order:500,enabled:!0,fn:function(e,t){var i;if(!dt(e.instance.modifiers,"arrow","keepTogether"))return e;var r=t.element;if("string"==typeof r){if(!(r=e.instance.popper.querySelector(r)))return e}else if(!e.instance.popper.contains(r))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),e;var n=e.placement.split("-")[0],o=e.offsets,a=o.popper,s=o.reference,l=-1!==["left","right"].indexOf(n),h=l?"height":"width",c=l?"Top":"Left",u=c.toLowerCase(),f=l?"left":"top",p=l?"bottom":"right",d=it(r)[h];s[p]-d<a[u]&&(e.offsets.popper[u]-=a[u]-(s[p]-d)),s[u]+d>a[p]&&(e.offsets.popper[u]+=s[u]+d-a[p]),e.offsets.popper=Ke(e.offsets.popper);var m=s[u]+s[h]/2-d/2,g=Le(e.instance.popper),E=parseFloat(g["margin"+c],10),v=parseFloat(g["border"+c+"Width"],10),y=m-e.offsets.popper[u]-E-v;return y=Math.max(Math.min(a[h]-d,y),0),e.arrowElement=r,e.offsets.arrow=(qe(i={},u,Math.round(y)),qe(i,f,""),i),e},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(d,m){if(st(d.instance.modifiers,"inner"))return d;if(d.flipped&&d.placement===d.originalPlacement)return d;var g=Je(d.instance.popper,d.instance.reference,m.padding,m.boundariesElement,d.positionFixed),E=d.placement.split("-")[0],v=rt(E),y=d.placement.split("-")[1]||"",T=[];switch(m.behavior){case vt:T=[E,v];break;case yt:T=Et(E);break;case Tt:T=Et(E,!0);break;default:T=m.behavior}return T.forEach(function(e,t){if(E!==e||T.length===t+1)return d;E=d.placement.split("-")[0],v=rt(E);var i,r=d.offsets.popper,n=d.offsets.reference,o=Math.floor,a="left"===E&&o(r.right)>o(n.left)||"right"===E&&o(r.left)<o(n.right)||"top"===E&&o(r.bottom)>o(n.top)||"bottom"===E&&o(r.top)<o(n.bottom),s=o(r.left)<o(g.left),l=o(r.right)>o(g.right),h=o(r.top)<o(g.top),c=o(r.bottom)>o(g.bottom),u="left"===E&&s||"right"===E&&l||"top"===E&&h||"bottom"===E&&c,f=-1!==["top","bottom"].indexOf(E),p=!!m.flipVariations&&(f&&"start"===y&&s||f&&"end"===y&&l||!f&&"start"===y&&h||!f&&"end"===y&&c);(a||u||p)&&(d.flipped=!0,(a||u)&&(E=T[t+1]),p&&(y="end"===(i=y)?"start":"start"===i?"end":i),d.placement=E+(y?"-"+y:""),d.offsets.popper=Ye({},d.offsets.popper,nt(d.instance.popper,d.offsets.reference,d.placement)),d=at(d.instance.modifiers,d,"flip"))}),d},behavior:"flip",padding:5,boundariesElement:"viewport"},inner:{order:700,enabled:!1,fn:function(e){var t=e.placement,i=t.split("-")[0],r=e.offsets,n=r.popper,o=r.reference,a=-1!==["left","right"].indexOf(i),s=-1===["top","left"].indexOf(i);return n[a?"left":"top"]=o[i]-(s?n[a?"width":"height"]:0),e.placement=rt(t),e.offsets.popper=Ke(n),e}},hide:{order:800,enabled:!0,fn:function(e){if(!dt(e.instance.modifiers,"hide","preventOverflow"))return e;var t=e.offsets.reference,i=ot(e.instance.modifiers,function(e){return"preventOverflow"===e.name}).boundaries;if(t.bottom<i.top||t.left>i.right||t.top>i.bottom||t.right<i.left){if(!0===e.hide)return e;e.hide=!0,e.attributes["x-out-of-boundaries"]=""}else{if(!1===e.hide)return e;e.hide=!1,e.attributes["x-out-of-boundaries"]=!1}return e}},computeStyle:{order:850,enabled:!0,fn:function(e,t){var i=t.x,r=t.y,n=e.offsets.popper,o=ot(e.instance.modifiers,function(e){return"applyStyle"===e.name}).gpuAcceleration;void 0!==o&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var a=void 0!==o?o:t.gpuAcceleration,s=Qe(Ne(e.instance.popper)),l={position:n.position},h={left:Math.floor(n.left),top:Math.round(n.top),bottom:Math.round(n.bottom),right:Math.floor(n.right)},c="bottom"===i?"top":"bottom",u="right"===r?"left":"right",f=lt("transform"),p=void 0,d=void 0;if(d="bottom"===c?-s.height+h.bottom:h.top,p="right"===u?-s.width+h.right:h.left,a&&f)l[f]="translate3d("+p+"px, "+d+"px, 0)",l[c]=0,l[u]=0,l.willChange="transform";else{var m="bottom"===c?-1:1,g="right"===u?-1:1;l[c]=d*m,l[u]=p*g,l.willChange=c+", "+u}var E={"x-placement":e.placement};return e.attributes=Ye({},E,e.attributes),e.styles=Ye({},l,e.styles),e.arrowStyles=Ye({},e.offsets.arrow,e.arrowStyles),e},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(e){var t,i;return pt(e.instance.popper,e.styles),t=e.instance.popper,i=e.attributes,Object.keys(i).forEach(function(e){!1!==i[e]?t.setAttribute(e,i[e]):t.removeAttribute(e)}),e.arrowElement&&Object.keys(e.arrowStyles).length&&pt(e.arrowElement,e.arrowStyles),e},onLoad:function(e,t,i,r,n){var o=tt(n,t,e,i.positionFixed),a=et(i.placement,o,t,e,i.modifiers.flip.boundariesElement,i.modifiers.flip.padding);return t.setAttribute("x-placement",a),pt(t,{position:i.positionFixed?"fixed":"absolute"}),i},gpuAcceleration:void 0}}},Rt=function(){function o(e,t){var i=this,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.scheduleUpdate=function(){return requestAnimationFrame(i.update)},this.update=Pe(this.update.bind(this)),this.options=Ye({},o.Defaults,r),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=e&&e.jquery?e[0]:e,this.popper=t&&t.jquery?t[0]:t,this.options.modifiers={},Object.keys(Ye({},o.Defaults.modifiers,r.modifiers)).forEach(function(e){i.options.modifiers[e]=Ye({},o.Defaults.modifiers[e]||{},r.modifiers?r.modifiers[e]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(e){return Ye({name:e},i.options.modifiers[e])}).sort(function(e,t){return e.order-t.order}),this.modifiers.forEach(function(e){e.enabled&&De(e.onLoad)&&e.onLoad(i.reference,i.popper,i.options,e,i.state)}),this.update();var n=this.options.eventsEnabled;n&&this.enableEventListeners(),this.state.eventsEnabled=n}return Xe(o,[{key:"update",value:function(){return function(){if(!this.state.isDestroyed){var e={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};e.offsets.reference=tt(this.state,this.popper,this.reference,this.options.positionFixed),e.placement=et(this.options.placement,e.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),e.originalPlacement=e.placement,e.positionFixed=this.options.positionFixed,e.offsets.popper=nt(this.popper,e.offsets.reference,e.placement),e.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",e=at(this.modifiers,e),this.state.isCreated?this.options.onUpdate(e):(this.state.isCreated=!0,this.options.onCreate(e))}}.call(this)}},{key:"destroy",value:function(){return function(){return this.state.isDestroyed=!0,st(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[lt("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}.call(this)}},{key:"enableEventListeners",value:function(){return function(){this.state.eventsEnabled||(this.state=ct(this.reference,this.options,this.state,this.scheduleUpdate))}.call(this)}},{key:"disableEventListeners",value:function(){return ut.call(this)}}]),o}();Rt.Utils=("undefined"!=typeof window?window:global).PopperUtils,Rt.placements=mt,Rt.Defaults=xt;var bt,wt,Ht,St,Mt,Ct,At,Pt,Dt,Lt,Ft,Ot,kt,Vt,It,Nt,Ut,zt,Bt,jt,Wt,Gt,Xt,qt,Yt,Kt,Qt,Zt,$t,Jt,ei,ti,ii,ri,ni,oi,ai,si,li,hi,ci,ui,fi,pi,di,mi,gi,Ei,vi,yi,Ti,_i,xi,Ri,bi,wi,Hi,Si,Mi,Ci,Ai,Pi,Di,Li,Fi,Oi,ki,Vi,Ii,Ni,Ui,zi,Bi,ji,Wi,Gi,Xi,qi,Yi,Ki,Qi,Zi,$i,Ji,er,tr,ir,rr,nr,or,ar,sr,lr,hr,cr,ur,fr,pr,dr,mr,gr,Er,vr,yr,Tr,_r,xr,Rr,br,wr,Hr,Sr,Mr,Cr,Ar,Pr,Dr,Lr,Fr,Or,kr,Vr,Ir,Nr,Ur,zr=(wt="dropdown",St="."+(Ht="bs.dropdown"),Mt=".data-api",Ct=(bt=t).fn[wt],At=new RegExp("38|40|27"),Pt={HIDE:"hide"+St,HIDDEN:"hidden"+St,SHOW:"show"+St,SHOWN:"shown"+St,CLICK:"click"+St,CLICK_DATA_API:"click"+St+Mt,KEYDOWN_DATA_API:"keydown"+St+Mt,KEYUP_DATA_API:"keyup"+St+Mt},Dt="disabled",Lt="show",Ft="dropup",Ot="dropright",kt="dropleft",Vt="dropdown-menu-right",It="position-static",Nt='[data-toggle="dropdown"]',Ut=".dropdown form",zt=".dropdown-menu",Bt=".navbar-nav",jt=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",Wt="top-start",Gt="top-end",Xt="bottom-start",qt="bottom-end",Yt="right-start",Kt="left-start",Qt={offset:0,flip:!0,boundary:"scrollParent",reference:"toggle",display:"dynamic"},Zt={offset:"(number|string|function)",flip:"boolean",boundary:"(string|element)",reference:"(string|element)",display:"string"},$t=function(){function h(e,t){this._element=e,this._popper=null,this._config=this._getConfig(t),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._addEventListeners()}var e=h.prototype;return e.toggle=function(){if(!this._element.disabled&&!bt(this._element).hasClass(Dt)){var e=h._getParentFromElement(this._element),t=bt(this._menu).hasClass(Lt);if(h._clearMenus(),!t){var i={relatedTarget:this._element},r=bt.Event(Pt.SHOW,i);if(bt(e).trigger(r),!r.isDefaultPrevented()){if(!this._inNavbar){if(void 0===Rt)throw new TypeError("Bootstrap dropdown require Popper.js (https://popper.js.org)");var n=this._element;"parent"===this._config.reference?n=e:xe.isElement(this._config.reference)&&(n=this._config.reference,void 0!==this._config.reference.jquery&&(n=this._config.reference[0])),"scrollParent"!==this._config.boundary&&bt(e).addClass(It),this._popper=new Rt(n,this._menu,this._getPopperConfig())}"ontouchstart"in document.documentElement&&0===bt(e).closest(Bt).length&&bt(document.body).children().on("mouseover",null,bt.noop),this._element.focus(),this._element.setAttribute("aria-expanded",!0),bt(this._menu).toggleClass(Lt),bt(e).toggleClass(Lt).trigger(bt.Event(Pt.SHOWN,i))}}}},e.dispose=function(){bt.removeData(this._element,Ht),bt(this._element).off(St),this._element=null,(this._menu=null)!==this._popper&&(this._popper.destroy(),this._popper=null)},e.update=function(){this._inNavbar=this._detectNavbar(),null!==this._popper&&this._popper.scheduleUpdate()},e._addEventListeners=function(){var t=this;bt(this._element).on(Pt.CLICK,function(e){e.preventDefault(),e.stopPropagation(),t.toggle()})},e._getConfig=function(e){return e=l({},this.constructor.Default,bt(this._element).data(),e),xe.typeCheckConfig(wt,e,this.constructor.DefaultType),e},e._getMenuElement=function(){if(!this._menu){var e=h._getParentFromElement(this._element);e&&(this._menu=e.querySelector(zt))}return this._menu},e._getPlacement=function(){var e=bt(this._element.parentNode),t=Xt;return e.hasClass(Ft)?(t=Wt,bt(this._menu).hasClass(Vt)&&(t=Gt)):e.hasClass(Ot)?t=Yt:e.hasClass(kt)?t=Kt:bt(this._menu).hasClass(Vt)&&(t=qt),t},e._detectNavbar=function(){return 0<bt(this._element).closest(".navbar").length},e._getPopperConfig=function(){var t=this,e={};"function"==typeof this._config.offset?e.fn=function(e){return e.offsets=l({},e.offsets,t._config.offset(e.offsets)||{}),e}:e.offset=this._config.offset;var i={placement:this._getPlacement(),modifiers:{offset:e,flip:{enabled:this._config.flip},preventOverflow:{boundariesElement:this._config.boundary}}};return"static"===this._config.display&&(i.modifiers.applyStyle={enabled:!1}),i},h._jQueryInterface=function(t){return this.each(function(){var e=bt(this).data(Ht);if(e||(e=new h(this,"object"==typeof t?t:null),bt(this).data(Ht,e)),"string"==typeof t){if(void 0===e[t])throw new TypeError('No method named "'+t+'"');e[t]()}})},h._clearMenus=function(e){if(!e||3!==e.which&&("keyup"!==e.type||9===e.which))for(var t=[].slice.call(document.querySelectorAll(Nt)),i=0,r=t.length;i<r;i++){var n=h._getParentFromElement(t[i]),o=bt(t[i]).data(Ht),a={relatedTarget:t[i]};if(e&&"click"===e.type&&(a.clickEvent=e),o){var s=o._menu;if(bt(n).hasClass(Lt)&&!(e&&("click"===e.type&&/input|textarea/i.test(e.target.tagName)||"keyup"===e.type&&9===e.which)&&bt.contains(n,e.target))){var l=bt.Event(Pt.HIDE,a);bt(n).trigger(l),l.isDefaultPrevented()||("ontouchstart"in document.documentElement&&bt(document.body).children().off("mouseover",null,bt.noop),t[i].setAttribute("aria-expanded","false"),bt(s).removeClass(Lt),bt(n).removeClass(Lt).trigger(bt.Event(Pt.HIDDEN,a)))}}}},h._getParentFromElement=function(e){var t,i=xe.getSelectorFromElement(e);return i&&(t=document.querySelector(i)),t||e.parentNode},h._dataApiKeydownHandler=function(e){if((/input|textarea/i.test(e.target.tagName)?!(32===e.which||27!==e.which&&(40!==e.which&&38!==e.which||bt(e.target).closest(zt).length)):At.test(e.which))&&(e.preventDefault(),e.stopPropagation(),!this.disabled&&!bt(this).hasClass(Dt))){var t=h._getParentFromElement(this),i=bt(t).hasClass(Lt);if((i||27===e.which&&32===e.which)&&(!i||27!==e.which&&32!==e.which)){var r=[].slice.call(t.querySelectorAll(jt));if(0!==r.length){var n=r.indexOf(e.target);38===e.which&&0<n&&n--,40===e.which&&n<r.length-1&&n++,n<0&&(n=0),r[n].focus()}}else{if(27===e.which){var o=t.querySelector(Nt);bt(o).trigger("focus")}bt(this).trigger("click")}}},a(h,null,[{key:"VERSION",get:function(){return"4.1.3"}},{key:"Default",get:function(){return Qt}},{key:"DefaultType",get:function(){return Zt}}]),h}(),bt(document).on(Pt.KEYDOWN_DATA_API,Nt,$t._dataApiKeydownHandler).on(Pt.KEYDOWN_DATA_API,zt,$t._dataApiKeydownHandler).on(Pt.CLICK_DATA_API+" "+Pt.KEYUP_DATA_API,$t._clearMenus).on(Pt.CLICK_DATA_API,Nt,function(e){e.preventDefault(),e.stopPropagation(),$t._jQueryInterface.call(bt(this),"toggle")}).on(Pt.CLICK_DATA_API,Ut,function(e){e.stopPropagation()}),bt.fn[wt]=$t._jQueryInterface,bt.fn[wt].Constructor=$t,bt.fn[wt].noConflict=function(){return bt.fn[wt]=Ct,$t._jQueryInterface},$t),Br=(ei="modal",ii="."+(ti="bs.modal"),ri=(Jt=t).fn[ei],ni={backdrop:!0,keyboard:!0,focus:!0,show:!0},oi={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},ai={HIDE:"hide"+ii,HIDDEN:"hidden"+ii,SHOW:"show"+ii,SHOWN:"shown"+ii,FOCUSIN:"focusin"+ii,RESIZE:"resize"+ii,CLICK_DISMISS:"click.dismiss"+ii,KEYDOWN_DISMISS:"keydown.dismiss"+ii,MOUSEUP_DISMISS:"mouseup.dismiss"+ii,MOUSEDOWN_DISMISS:"mousedown.dismiss"+ii,CLICK_DATA_API:"click"+ii+".data-api"},si="modal-scrollbar-measure",li="modal-backdrop",hi="modal-open",ci="fade",ui="show",fi=".modal-dialog",pi='[data-toggle="modal"]',di='[data-dismiss="modal"]',mi=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",gi=".sticky-top",Ei=function(){function n(e,t){this._config=this._getConfig(t),this._element=e,this._dialog=e.querySelector(fi),this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._scrollbarWidth=0}var e=n.prototype;return e.toggle=function(e){return this._isShown?this.hide():this.show(e)},e.show=function(e){var t=this;if(!this._isTransitioning&&!this._isShown){Jt(this._element).hasClass(ci)&&(this._isTransitioning=!0);var i=Jt.Event(ai.SHOW,{relatedTarget:e});Jt(this._element).trigger(i),this._isShown||i.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),Jt(document.body).addClass(hi),this._setEscapeEvent(),this._setResizeEvent(),Jt(this._element).on(ai.CLICK_DISMISS,di,function(e){return t.hide(e)}),Jt(this._dialog).on(ai.MOUSEDOWN_DISMISS,function(){Jt(t._element).one(ai.MOUSEUP_DISMISS,function(e){Jt(e.target).is(t._element)&&(t._ignoreBackdropClick=!0)})}),this._showBackdrop(function(){return t._showElement(e)}))}},e.hide=function(e){var t=this;if(e&&e.preventDefault(),!this._isTransitioning&&this._isShown){var i=Jt.Event(ai.HIDE);if(Jt(this._element).trigger(i),this._isShown&&!i.isDefaultPrevented()){this._isShown=!1;var r=Jt(this._element).hasClass(ci);if(r&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),Jt(document).off(ai.FOCUSIN),Jt(this._element).removeClass(ui),Jt(this._element).off(ai.CLICK_DISMISS),Jt(this._dialog).off(ai.MOUSEDOWN_DISMISS),r){var n=xe.getTransitionDurationFromElement(this._element);Jt(this._element).one(xe.TRANSITION_END,function(e){return t._hideModal(e)}).emulateTransitionEnd(n)}else this._hideModal()}}},e.dispose=function(){Jt.removeData(this._element,ti),Jt(window,document,this._element,this._backdrop).off(ii),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._scrollbarWidth=null},e.handleUpdate=function(){this._adjustDialog()},e._getConfig=function(e){return e=l({},ni,e),xe.typeCheckConfig(ei,e,oi),e},e._showElement=function(e){var t=this,i=Jt(this._element).hasClass(ci);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.scrollTop=0,i&&xe.reflow(this._element),Jt(this._element).addClass(ui),this._config.focus&&this._enforceFocus();var r=Jt.Event(ai.SHOWN,{relatedTarget:e}),n=function(){t._config.focus&&t._element.focus(),t._isTransitioning=!1,Jt(t._element).trigger(r)};if(i){var o=xe.getTransitionDurationFromElement(this._element);Jt(this._dialog).one(xe.TRANSITION_END,n).emulateTransitionEnd(o)}else n()},e._enforceFocus=function(){var t=this;Jt(document).off(ai.FOCUSIN).on(ai.FOCUSIN,function(e){document!==e.target&&t._element!==e.target&&0===Jt(t._element).has(e.target).length&&t._element.focus()})},e._setEscapeEvent=function(){var t=this;this._isShown&&this._config.keyboard?Jt(this._element).on(ai.KEYDOWN_DISMISS,function(e){27===e.which&&(e.preventDefault(),t.hide())}):this._isShown||Jt(this._element).off(ai.KEYDOWN_DISMISS)},e._setResizeEvent=function(){var t=this;this._isShown?Jt(window).on(ai.RESIZE,function(e){return t.handleUpdate(e)}):Jt(window).off(ai.RESIZE)},e._hideModal=function(){var e=this;this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._isTransitioning=!1,this._showBackdrop(function(){Jt(document.body).removeClass(hi),e._resetAdjustments(),e._resetScrollbar(),Jt(e._element).trigger(ai.HIDDEN)})},e._removeBackdrop=function(){this._backdrop&&(Jt(this._backdrop).remove(),this._backdrop=null)},e._showBackdrop=function(e){var t=this,i=Jt(this._element).hasClass(ci)?ci:"";if(this._isShown&&this._config.backdrop){if(this._backdrop=document.createElement("div"),this._backdrop.className=li,i&&this._backdrop.classList.add(i),Jt(this._backdrop).appendTo(document.body),Jt(this._element).on(ai.CLICK_DISMISS,function(e){t._ignoreBackdropClick?t._ignoreBackdropClick=!1:e.target===e.currentTarget&&("static"===t._config.backdrop?t._element.focus():t.hide())}),i&&xe.reflow(this._backdrop),Jt(this._backdrop).addClass(ui),!e)return;if(!i)return void e();var r=xe.getTransitionDurationFromElement(this._backdrop);Jt(this._backdrop).one(xe.TRANSITION_END,e).emulateTransitionEnd(r)}else if(!this._isShown&&this._backdrop){Jt(this._backdrop).removeClass(ui);var n=function(){t._removeBackdrop(),e&&e()};if(Jt(this._element).hasClass(ci)){var o=xe.getTransitionDurationFromElement(this._backdrop);Jt(this._backdrop).one(xe.TRANSITION_END,n).emulateTransitionEnd(o)}else n()}else e&&e()},e._adjustDialog=function(){var e=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&e&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!e&&(this._element.style.paddingRight=this._scrollbarWidth+"px")},e._resetAdjustments=function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""},e._checkScrollbar=function(){var e=document.body.getBoundingClientRect();this._isBodyOverflowing=e.left+e.right<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()},e._setScrollbar=function(){var n=this;if(this._isBodyOverflowing){var e=[].slice.call(document.querySelectorAll(mi)),t=[].slice.call(document.querySelectorAll(gi));Jt(e).each(function(e,t){var i=t.style.paddingRight,r=Jt(t).css("padding-right");Jt(t).data("padding-right",i).css("padding-right",parseFloat(r)+n._scrollbarWidth+"px")}),Jt(t).each(function(e,t){var i=t.style.marginRight,r=Jt(t).css("margin-right");Jt(t).data("margin-right",i).css("margin-right",parseFloat(r)-n._scrollbarWidth+"px")});var i=document.body.style.paddingRight,r=Jt(document.body).css("padding-right");Jt(document.body).data("padding-right",i).css("padding-right",parseFloat(r)+this._scrollbarWidth+"px")}},e._resetScrollbar=function(){var e=[].slice.call(document.querySelectorAll(mi));Jt(e).each(function(e,t){var i=Jt(t).data("padding-right");Jt(t).removeData("padding-right"),t.style.paddingRight=i||""});var t=[].slice.call(document.querySelectorAll(""+gi));Jt(t).each(function(e,t){var i=Jt(t).data("margin-right");void 0!==i&&Jt(t).css("margin-right",i).removeData("margin-right")});var i=Jt(document.body).data("padding-right");Jt(document.body).removeData("padding-right"),document.body.style.paddingRight=i||""},e._getScrollbarWidth=function(){var e=document.createElement("div");e.className=si,document.body.appendChild(e);var t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t},n._jQueryInterface=function(i,r){return this.each(function(){var e=Jt(this).data(ti),t=l({},ni,Jt(this).data(),"object"==typeof i&&i?i:{});if(e||(e=new n(this,t),Jt(this).data(ti,e)),"string"==typeof i){if(void 0===e[i])throw new TypeError('No method named "'+i+'"');e[i](r)}else t.show&&e.show(r)})},a(n,null,[{key:"VERSION",get:function(){return"4.1.3"}},{key:"Default",get:function(){return ni}}]),n}(),Jt(document).on(ai.CLICK_DATA_API,pi,function(e){var t,i=this,r=xe.getSelectorFromElement(this);r&&(t=document.querySelector(r));var n=Jt(t).data(ti)?"toggle":l({},Jt(t).data(),Jt(this).data());"A"!==this.tagName&&"AREA"!==this.tagName||e.preventDefault();var o=Jt(t).one(ai.SHOW,function(e){e.isDefaultPrevented()||o.one(ai.HIDDEN,function(){Jt(i).is(":visible")&&i.focus()})});Ei._jQueryInterface.call(Jt(t),n,this)}),Jt.fn[ei]=Ei._jQueryInterface,Jt.fn[ei].Constructor=Ei,Jt.fn[ei].noConflict=function(){return Jt.fn[ei]=ri,Ei._jQueryInterface},Ei),jr=(yi="tooltip",_i="."+(Ti="bs.tooltip"),xi=(vi=t).fn[yi],Ri="bs-tooltip",bi=new RegExp("(^|\\s)"+Ri+"\\S+","g"),Si={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!(Hi={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"}),selector:!(wi={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)"}),placement:"top",offset:0,container:!1,fallbackPlacement:"flip",boundary:"scrollParent"},Ci="out",Ai={HIDE:"hide"+_i,HIDDEN:"hidden"+_i,SHOW:(Mi="show")+_i,SHOWN:"shown"+_i,INSERTED:"inserted"+_i,CLICK:"click"+_i,FOCUSIN:"focusin"+_i,FOCUSOUT:"focusout"+_i,MOUSEENTER:"mouseenter"+_i,MOUSELEAVE:"mouseleave"+_i},Pi="fade",Di="show",Li=".tooltip-inner",Fi=".arrow",Oi="hover",ki="focus",Vi="click",Ii="manual",Ni=function(){function r(e,t){if(void 0===Rt)throw new TypeError("Bootstrap tooltips require Popper.js (https://popper.js.org)");this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this.element=e,this.config=this._getConfig(t),this.tip=null,this._setListeners()}var e=r.prototype;return e.enable=function(){this._isEnabled=!0},e.disable=function(){this._isEnabled=!1},e.toggleEnabled=function(){this._isEnabled=!this._isEnabled},e.toggle=function(e){if(this._isEnabled)if(e){var t=this.constructor.DATA_KEY,i=vi(e.currentTarget).data(t);i||(i=new this.constructor(e.currentTarget,this._getDelegateConfig()),vi(e.currentTarget).data(t,i)),i._activeTrigger.click=!i._activeTrigger.click,i._isWithActiveTrigger()?i._enter(null,i):i._leave(null,i)}else{if(vi(this.getTipElement()).hasClass(Di))return void this._leave(null,this);this._enter(null,this)}},e.dispose=function(){clearTimeout(this._timeout),vi.removeData(this.element,this.constructor.DATA_KEY),vi(this.element).off(this.constructor.EVENT_KEY),vi(this.element).closest(".modal").off("hide.bs.modal"),this.tip&&vi(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,(this._activeTrigger=null)!==this._popper&&this._popper.destroy(),this._popper=null,this.element=null,this.config=null,this.tip=null},e.show=function(){var t=this;if("none"===vi(this.element).css("display"))throw new Error("Please use show on visible elements");var e=vi.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){vi(this.element).trigger(e);var i=vi.contains(this.element.ownerDocument.documentElement,this.element);if(e.isDefaultPrevented()||!i)return;var r=this.getTipElement(),n=xe.getUID(this.constructor.NAME);r.setAttribute("id",n),this.element.setAttribute("aria-describedby",n),this.setContent(),this.config.animation&&vi(r).addClass(Pi);var o="function"==typeof this.config.placement?this.config.placement.call(this,r,this.element):this.config.placement,a=this._getAttachment(o);this.addAttachmentClass(a);var s=!1===this.config.container?document.body:vi(document).find(this.config.container);vi(r).data(this.constructor.DATA_KEY,this),vi.contains(this.element.ownerDocument.documentElement,this.tip)||vi(r).appendTo(s),vi(this.element).trigger(this.constructor.Event.INSERTED),this._popper=new Rt(this.element,r,{placement:a,modifiers:{offset:{offset:this.config.offset},flip:{behavior:this.config.fallbackPlacement},arrow:{element:Fi},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:function(e){e.originalPlacement!==e.placement&&t._handlePopperPlacementChange(e)},onUpdate:function(e){t._handlePopperPlacementChange(e)}}),vi(r).addClass(Di),"ontouchstart"in document.documentElement&&vi(document.body).children().on("mouseover",null,vi.noop);var l=function(){t.config.animation&&t._fixTransition();var e=t._hoverState;t._hoverState=null,vi(t.element).trigger(t.constructor.Event.SHOWN),e===Ci&&t._leave(null,t)};if(vi(this.tip).hasClass(Pi)){var h=xe.getTransitionDurationFromElement(this.tip);vi(this.tip).one(xe.TRANSITION_END,l).emulateTransitionEnd(h)}else l()}},e.hide=function(e){var t=this,i=this.getTipElement(),r=vi.Event(this.constructor.Event.HIDE),n=function(){t._hoverState!==Mi&&i.parentNode&&i.parentNode.removeChild(i),t._cleanTipClass(),t.element.removeAttribute("aria-describedby"),vi(t.element).trigger(t.constructor.Event.HIDDEN),null!==t._popper&&t._popper.destroy(),e&&e()};if(vi(this.element).trigger(r),!r.isDefaultPrevented()){if(vi(i).removeClass(Di),"ontouchstart"in document.documentElement&&vi(document.body).children().off("mouseover",null,vi.noop),this._activeTrigger[Vi]=!1,this._activeTrigger[ki]=!1,this._activeTrigger[Oi]=!1,vi(this.tip).hasClass(Pi)){var o=xe.getTransitionDurationFromElement(i);vi(i).one(xe.TRANSITION_END,n).emulateTransitionEnd(o)}else n();this._hoverState=""}},e.update=function(){null!==this._popper&&this._popper.scheduleUpdate()},e.isWithContent=function(){return Boolean(this.getTitle())},e.addAttachmentClass=function(e){vi(this.getTipElement()).addClass(Ri+"-"+e)},e.getTipElement=function(){return this.tip=this.tip||vi(this.config.template)[0],this.tip},e.setContent=function(){var e=this.getTipElement();this.setElementContent(vi(e.querySelectorAll(Li)),this.getTitle()),vi(e).removeClass(Pi+" "+Di)},e.setElementContent=function(e,t){var i=this.config.html;"object"==typeof t&&(t.nodeType||t.jquery)?i?vi(t).parent().is(e)||e.empty().append(t):e.text(vi(t).text()):e[i?"html":"text"](t)},e.getTitle=function(){var e=this.element.getAttribute("data-original-title");return e||(e="function"==typeof this.config.title?this.config.title.call(this.element):this.config.title),e},e._getAttachment=function(e){return Hi[e.toUpperCase()]},e._setListeners=function(){var r=this;this.config.trigger.split(" ").forEach(function(e){if("click"===e)vi(r.element).on(r.constructor.Event.CLICK,r.config.selector,function(e){return r.toggle(e)});else if(e!==Ii){var t=e===Oi?r.constructor.Event.MOUSEENTER:r.constructor.Event.FOCUSIN,i=e===Oi?r.constructor.Event.MOUSELEAVE:r.constructor.Event.FOCUSOUT;vi(r.element).on(t,r.config.selector,function(e){return r._enter(e)}).on(i,r.config.selector,function(e){return r._leave(e)})}vi(r.element).closest(".modal").on("hide.bs.modal",function(){return r.hide()})}),this.config.selector?this.config=l({},this.config,{trigger:"manual",selector:""}):this._fixTitle()},e._fixTitle=function(){var e=typeof this.element.getAttribute("data-original-title");(this.element.getAttribute("title")||"string"!==e)&&(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))},e._enter=function(e,t){var i=this.constructor.DATA_KEY;(t=t||vi(e.currentTarget).data(i))||(t=new this.constructor(e.currentTarget,this._getDelegateConfig()),vi(e.currentTarget).data(i,t)),e&&(t._activeTrigger["focusin"===e.type?ki:Oi]=!0),vi(t.getTipElement()).hasClass(Di)||t._hoverState===Mi?t._hoverState=Mi:(clearTimeout(t._timeout),t._hoverState=Mi,t.config.delay&&t.config.delay.show?t._timeout=setTimeout(function(){t._hoverState===Mi&&t.show()},t.config.delay.show):t.show())},e._leave=function(e,t){var i=this.constructor.DATA_KEY;(t=t||vi(e.currentTarget).data(i))||(t=new this.constructor(e.currentTarget,this._getDelegateConfig()),vi(e.currentTarget).data(i,t)),e&&(t._activeTrigger["focusout"===e.type?ki:Oi]=!1),t._isWithActiveTrigger()||(clearTimeout(t._timeout),t._hoverState=Ci,t.config.delay&&t.config.delay.hide?t._timeout=setTimeout(function(){t._hoverState===Ci&&t.hide()},t.config.delay.hide):t.hide())},e._isWithActiveTrigger=function(){for(var e in this._activeTrigger)if(this._activeTrigger[e])return!0;return!1},e._getConfig=function(e){return"number"==typeof(e=l({},this.constructor.Default,vi(this.element).data(),"object"==typeof e&&e?e:{})).delay&&(e.delay={show:e.delay,hide:e.delay}),"number"==typeof e.title&&(e.title=e.title.toString()),"number"==typeof e.content&&(e.content=e.content.toString()),xe.typeCheckConfig(yi,e,this.constructor.DefaultType),e},e._getDelegateConfig=function(){var e={};if(this.config)for(var t in this.config)this.constructor.Default[t]!==this.config[t]&&(e[t]=this.config[t]);return e},e._cleanTipClass=function(){var e=vi(this.getTipElement()),t=e.attr("class").match(bi);null!==t&&t.length&&e.removeClass(t.join(""))},e._handlePopperPlacementChange=function(e){var t=e.instance;this.tip=t.popper,this._cleanTipClass(),this.addAttachmentClass(this._getAttachment(e.placement))},e._fixTransition=function(){var e=this.getTipElement(),t=this.config.animation;null===e.getAttribute("x-placement")&&(vi(e).removeClass(Pi),this.config.animation=!1,this.hide(),this.show(),this.config.animation=t)},r._jQueryInterface=function(i){return this.each(function(){var e=vi(this).data(Ti),t="object"==typeof i&&i;if((e||!/dispose|hide/.test(i))&&(e||(e=new r(this,t),vi(this).data(Ti,e)),"string"==typeof i)){if(void 0===e[i])throw new TypeError('No method named "'+i+'"');e[i]()}})},a(r,null,[{key:"VERSION",get:function(){return"4.1.3"}},{key:"Default",get:function(){return Si}},{key:"NAME",get:function(){return yi}},{key:"DATA_KEY",get:function(){return Ti}},{key:"Event",get:function(){return Ai}},{key:"EVENT_KEY",get:function(){return _i}},{key:"DefaultType",get:function(){return wi}}]),r}(),vi.fn[yi]=Ni._jQueryInterface,vi.fn[yi].Constructor=Ni,vi.fn[yi].noConflict=function(){return vi.fn[yi]=xi,Ni._jQueryInterface},Ni),Wr=(zi="popover",ji="."+(Bi="bs.popover"),Wi=(Ui=t).fn[zi],Gi="bs-popover",Xi=new RegExp("(^|\\s)"+Gi+"\\S+","g"),qi=l({},jr.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),Yi=l({},jr.DefaultType,{content:"(string|element|function)"}),Ki="fade",Zi=".popover-header",$i=".popover-body",Ji={HIDE:"hide"+ji,HIDDEN:"hidden"+ji,SHOW:(Qi="show")+ji,SHOWN:"shown"+ji,INSERTED:"inserted"+ji,CLICK:"click"+ji,FOCUSIN:"focusin"+ji,FOCUSOUT:"focusout"+ji,MOUSEENTER:"mouseenter"+ji,MOUSELEAVE:"mouseleave"+ji},er=function(e){var t,i;function r(){return e.apply(this,arguments)||this}i=e,(t=r).prototype=Object.create(i.prototype),(t.prototype.constructor=t).__proto__=i;var n=r.prototype;return n.isWithContent=function(){return this.getTitle()||this._getContent()},n.addAttachmentClass=function(e){Ui(this.getTipElement()).addClass(Gi+"-"+e)},n.getTipElement=function(){return this.tip=this.tip||Ui(this.config.template)[0],this.tip},n.setContent=function(){var e=Ui(this.getTipElement());this.setElementContent(e.find(Zi),this.getTitle());var t=this._getContent();"function"==typeof t&&(t=t.call(this.element)),this.setElementContent(e.find($i),t),e.removeClass(Ki+" "+Qi)},n._getContent=function(){return this.element.getAttribute("data-content")||this.config.content},n._cleanTipClass=function(){var e=Ui(this.getTipElement()),t=e.attr("class").match(Xi);null!==t&&0<t.length&&e.removeClass(t.join(""))},r._jQueryInterface=function(i){return this.each(function(){var e=Ui(this).data(Bi),t="object"==typeof i?i:null;if((e||!/destroy|hide/.test(i))&&(e||(e=new r(this,t),Ui(this).data(Bi,e)),"string"==typeof i)){if(void 0===e[i])throw new TypeError('No method named "'+i+'"');e[i]()}})},a(r,null,[{key:"VERSION",get:function(){return"4.1.3"}},{key:"Default",get:function(){return qi}},{key:"NAME",get:function(){return zi}},{key:"DATA_KEY",get:function(){return Bi}},{key:"Event",get:function(){return Ji}},{key:"EVENT_KEY",get:function(){return ji}},{key:"DefaultType",get:function(){return Yi}}]),r}(jr),Ui.fn[zi]=er._jQueryInterface,Ui.fn[zi].Constructor=er,Ui.fn[zi].noConflict=function(){return Ui.fn[zi]=Wi,er._jQueryInterface},er),Gr=(ir="scrollspy",nr="."+(rr="bs.scrollspy"),or=(tr=t).fn[ir],ar={offset:10,method:"auto",target:""},sr={offset:"number",method:"string",target:"(string|element)"},lr={ACTIVATE:"activate"+nr,SCROLL:"scroll"+nr,LOAD_DATA_API:"load"+nr+".data-api"},hr="dropdown-item",cr="active",ur='[data-spy="scroll"]',fr=".active",pr=".nav, .list-group",dr=".nav-link",mr=".nav-item",gr=".list-group-item",Er=".dropdown",vr=".dropdown-item",yr=".dropdown-toggle",Tr="offset",_r="position",xr=function(){function i(e,t){var i=this;this._element=e,this._scrollElement="BODY"===e.tagName?window:e,this._config=this._getConfig(t),this._selector=this._config.target+" "+dr+","+this._config.target+" "+gr+","+this._config.target+" "+vr,this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,tr(this._scrollElement).on(lr.SCROLL,function(e){return i._process(e)}),this.refresh(),this._process()}var e=i.prototype;return e.refresh=function(){var t=this,e=this._scrollElement===this._scrollElement.window?Tr:_r,n="auto"===this._config.method?e:this._config.method,o=n===_r?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),[].slice.call(document.querySelectorAll(this._selector)).map(function(e){var t,i=xe.getSelectorFromElement(e);if(i&&(t=document.querySelector(i)),t){var r=t.getBoundingClientRect();if(r.width||r.height)return[tr(t)[n]().top+o,i]}return null}).filter(function(e){return e}).sort(function(e,t){return e[0]-t[0]}).forEach(function(e){t._offsets.push(e[0]),t._targets.push(e[1])})},e.dispose=function(){tr.removeData(this._element,rr),tr(this._scrollElement).off(nr),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null},e._getConfig=function(e){if("string"!=typeof(e=l({},ar,"object"==typeof e&&e?e:{})).target){var t=tr(e.target).attr("id");t||(t=xe.getUID(ir),tr(e.target).attr("id",t)),e.target="#"+t}return xe.typeCheckConfig(ir,e,sr),e},e._getScrollTop=function(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop},e._getScrollHeight=function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},e._getOffsetHeight=function(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height},e._process=function(){var e=this._getScrollTop()+this._config.offset,t=this._getScrollHeight(),i=this._config.offset+t-this._getOffsetHeight();if(this._scrollHeight!==t&&this.refresh(),i<=e){var r=this._targets[this._targets.length-1];this._activeTarget!==r&&this._activate(r)}else{if(this._activeTarget&&e<this._offsets[0]&&0<this._offsets[0])return this._activeTarget=null,void this._clear();for(var n=this._offsets.length;n--;){this._activeTarget!==this._targets[n]&&e>=this._offsets[n]&&(void 0===this._offsets[n+1]||e<this._offsets[n+1])&&this._activate(this._targets[n])}}},e._activate=function(t){this._activeTarget=t,this._clear();var e=this._selector.split(",");e=e.map(function(e){return e+'[data-target="'+t+'"],'+e+'[href="'+t+'"]'});var i=tr([].slice.call(document.querySelectorAll(e.join(","))));i.hasClass(hr)?(i.closest(Er).find(yr).addClass(cr),i.addClass(cr)):(i.addClass(cr),i.parents(pr).prev(dr+", "+gr).addClass(cr),i.parents(pr).prev(mr).children(dr).addClass(cr)),tr(this._scrollElement).trigger(lr.ACTIVATE,{relatedTarget:t})},e._clear=function(){var e=[].slice.call(document.querySelectorAll(this._selector));tr(e).filter(fr).removeClass(cr)},i._jQueryInterface=function(t){return this.each(function(){var e=tr(this).data(rr);if(e||(e=new i(this,"object"==typeof t&&t),tr(this).data(rr,e)),"string"==typeof t){if(void 0===e[t])throw new TypeError('No method named "'+t+'"');e[t]()}})},a(i,null,[{key:"VERSION",get:function(){return"4.1.3"}},{key:"Default",get:function(){return ar}}]),i}(),tr(window).on(lr.LOAD_DATA_API,function(){for(var e=[].slice.call(document.querySelectorAll(ur)),t=e.length;t--;){var i=tr(e[t]);xr._jQueryInterface.call(i,i.data())}}),tr.fn[ir]=xr._jQueryInterface,tr.fn[ir].Constructor=xr,tr.fn[ir].noConflict=function(){return tr.fn[ir]=or,xr._jQueryInterface},xr),Xr=(wr="."+(br="bs.tab"),Hr=(Rr=t).fn.tab,Sr={HIDE:"hide"+wr,HIDDEN:"hidden"+wr,SHOW:"show"+wr,SHOWN:"shown"+wr,CLICK_DATA_API:"click"+wr+".data-api"},Mr="dropdown-menu",Cr="active",Ar="disabled",Pr="fade",Dr="show",Lr=".dropdown",Fr=".nav, .list-group",Or=".active",kr="> li > .active",Vr='[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',Ir=".dropdown-toggle",Nr="> .dropdown-menu .active",Ur=function(){function r(e){this._element=e}var e=r.prototype;return e.show=function(){var i=this;if(!(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&Rr(this._element).hasClass(Cr)||Rr(this._element).hasClass(Ar))){var e,r,t=Rr(this._element).closest(Fr)[0],n=xe.getSelectorFromElement(this._element);if(t){var o="UL"===t.nodeName?kr:Or;r=(r=Rr.makeArray(Rr(t).find(o)))[r.length-1]}var a=Rr.Event(Sr.HIDE,{relatedTarget:this._element}),s=Rr.Event(Sr.SHOW,{relatedTarget:r});if(r&&Rr(r).trigger(a),Rr(this._element).trigger(s),!s.isDefaultPrevented()&&!a.isDefaultPrevented()){n&&(e=document.querySelector(n)),this._activate(this._element,t);var l=function(){var e=Rr.Event(Sr.HIDDEN,{relatedTarget:i._element}),t=Rr.Event(Sr.SHOWN,{relatedTarget:r});Rr(r).trigger(e),Rr(i._element).trigger(t)};e?this._activate(e,e.parentNode,l):l()}}},e.dispose=function(){Rr.removeData(this._element,br),this._element=null},e._activate=function(e,t,i){var r=this,n=("UL"===t.nodeName?Rr(t).find(kr):Rr(t).children(Or))[0],o=i&&n&&Rr(n).hasClass(Pr),a=function(){return r._transitionComplete(e,n,i)};if(n&&o){var s=xe.getTransitionDurationFromElement(n);Rr(n).one(xe.TRANSITION_END,a).emulateTransitionEnd(s)}else a()},e._transitionComplete=function(e,t,i){if(t){Rr(t).removeClass(Dr+" "+Cr);var r=Rr(t.parentNode).find(Nr)[0];r&&Rr(r).removeClass(Cr),"tab"===t.getAttribute("role")&&t.setAttribute("aria-selected",!1)}if(Rr(e).addClass(Cr),"tab"===e.getAttribute("role")&&e.setAttribute("aria-selected",!0),xe.reflow(e),Rr(e).addClass(Dr),e.parentNode&&Rr(e.parentNode).hasClass(Mr)){var n=Rr(e).closest(Lr)[0];if(n){var o=[].slice.call(n.querySelectorAll(Ir));Rr(o).addClass(Cr)}e.setAttribute("aria-expanded",!0)}i&&i()},r._jQueryInterface=function(i){return this.each(function(){var e=Rr(this),t=e.data(br);if(t||(t=new r(this),e.data(br,t)),"string"==typeof i){if(void 0===t[i])throw new TypeError('No method named "'+i+'"');t[i]()}})},a(r,null,[{key:"VERSION",get:function(){return"4.1.3"}}]),r}(),Rr(document).on(Sr.CLICK_DATA_API,Vr,function(e){e.preventDefault(),Ur._jQueryInterface.call(Rr(this),"show")}),Rr.fn.tab=Ur._jQueryInterface,Rr.fn.tab.Constructor=Ur,Rr.fn.tab.noConflict=function(){return Rr.fn.tab=Hr,Ur._jQueryInterface},Ur);!function(e){if(void 0===e)throw new TypeError("Bootstrap's JavaScript requires jQuery. jQuery must be included before Bootstrap's JavaScript.");var t=e.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1===t[0]&&9===t[1]&&t[2]<1||4<=t[0])throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0")}(t),e.Util=xe,e.Alert=Re,e.Button=be,e.Carousel=we,e.Collapse=He,e.Dropdown=zr,e.Modal=Br,e.Popover=Wr,e.Scrollspy=Gr,e.Tab=Xr,e.Tooltip=jr,Object.defineProperty(e,"__esModule",{value:!0})});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(i){"function"==typeof define&&define.amd?define(["jquery"],i):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=function(e,t){return void 0===t&&(t="undefined"!=typeof window?require("jquery"):require("jquery")(e)),i(t),t}:i(jQuery)}(function(c){return c.fn.tilt=function(t){var i=function(){this.ticking||(requestAnimationFrame(e.bind(this)),this.ticking=!0)},r=function(){var e=this;void 0!==this.timeout&&clearTimeout(this.timeout),c(this).css({transition:this.settings.speed+"ms "+this.settings.easing}),this.settings.glare&&this.glareElement.css({transition:"opacity "+this.settings.speed+"ms "+this.settings.easing}),this.timeout=setTimeout(function(){c(e).css({transition:""}),e.settings.glare&&e.glareElement.css({transition:""})},this.settings.speed)},n=function(e){this.ticking=!1,c(this).css({"will-change":"transform"}),r.call(this),c(this).trigger("tilt.mouseEnter")},o=function(e){return void 0===e&&(e={pageX:c(this).offset().left+c(this).outerWidth()/2,pageY:c(this).offset().top+c(this).outerHeight()/2}),{x:e.pageX,y:e.pageY}},a=function(e){this.mousePositions=o(e),i.call(this)},s=function(){r.call(this),this.reset=!0,i.call(this),c(this).trigger("tilt.mouseLeave")},l=function(){var e=c(this).outerWidth(),t=c(this).outerHeight(),i=c(this).offset().left,r=c(this).offset().top,n=(this.mousePositions.x-i)/e,o=(this.mousePositions.y-r)/t;return{tiltX:(this.settings.maxTilt/2-n*this.settings.maxTilt).toFixed(2),tiltY:(o*this.settings.maxTilt-this.settings.maxTilt/2).toFixed(2),percentageX:100*n,percentageY:100*o,angle:Math.atan2(this.mousePositions.x-(i+e/2),-(this.mousePositions.y-(r+t/2)))*(180/Math.PI)}},e=function(){return this.transforms=l.call(this),this.reset?(this.reset=!1,c(this).css("transform","perspective("+this.settings.perspective+"px) rotateX(0deg) rotateY(0deg)"),void(this.settings.glare&&(this.glareElement.css("transform","rotate(180deg) translate(-50%, -50%)"),this.glareElement.css("opacity","0")))):(c(this).css("transform","perspective("+this.settings.perspective+"px) rotateX("+("x"===this.settings.disableAxis?0:this.transforms.tiltY)+"deg) rotateY("+("y"===this.settings.disableAxis?0:this.transforms.tiltX)+"deg) scale3d("+this.settings.scale+","+this.settings.scale+","+this.settings.scale+")"),this.settings.glare&&(this.glareElement.css("transform","rotate("+this.transforms.angle+"deg) translate(-50%, -50%)"),this.glareElement.css("opacity",""+this.transforms.percentageY*this.settings.maxGlare/100)),c(this).trigger("change",[this.transforms]),void(this.ticking=!1))},h=function(){this.glareElement.css({width:""+2*c(this).outerWidth(),height:""+2*c(this).outerWidth()})};return c.fn.tilt.destroy=function(){c(this).each(function(){c(this).find(".js-tilt-glare").remove(),c(this).css({"will-change":"",transform:""}),c(this).off("mousemove mouseenter mouseleave")})},c.fn.tilt.getValues=function(){var e=[];return c(this).each(function(){this.mousePositions=o.call(this),e.push(l.call(this))}),e},c.fn.tilt.reset=function(){c(this).each(function(){var e=this;this.mousePositions=o.call(this),this.settings=c(this).data("settings"),s.call(this),setTimeout(function(){e.reset=!1},this.settings.transition)})},this.each(function(){var e=this;this.settings=c.extend({maxTilt:c(this).is("[data-tilt-max]")?c(this).data("tilt-max"):20,perspective:c(this).is("[data-tilt-perspective]")?c(this).data("tilt-perspective"):300,easing:c(this).is("[data-tilt-easing]")?c(this).data("tilt-easing"):"cubic-bezier(.03,.98,.52,.99)",scale:c(this).is("[data-tilt-scale]")?c(this).data("tilt-scale"):"1",speed:c(this).is("[data-tilt-speed]")?c(this).data("tilt-speed"):"400",transition:!c(this).is("[data-tilt-transition]")||c(this).data("tilt-transition"),disableAxis:c(this).is("[data-tilt-disable-axis]")?c(this).data("tilt-disable-axis"):null,axis:c(this).is("[data-tilt-axis]")?c(this).data("tilt-axis"):null,reset:!c(this).is("[data-tilt-reset]")||c(this).data("tilt-reset"),glare:!!c(this).is("[data-tilt-glare]")&&c(this).data("tilt-glare"),maxGlare:c(this).is("[data-tilt-maxglare]")?c(this).data("tilt-maxglare"):1},t),null!==this.settings.axis&&(console.warn("Tilt.js: the axis setting has been renamed to disableAxis. See https://github.com/gijsroge/tilt.js/pull/26 for more information"),this.settings.disableAxis=this.settings.axis),this.init=function(){c(e).data("settings",e.settings),e.settings.glare&&function(){var e=this.settings.glarePrerender;e||c(this).append('<div class="js-tilt-glare"><div class="js-tilt-glare-inner"></div></div>'),this.glareElementWrapper=c(this).find(".js-tilt-glare"),this.glareElement=c(this).find(".js-tilt-glare-inner"),e||(this.glareElementWrapper.css({position:"absolute",top:"0",left:"0",width:"100%",height:"100%"}).css({overflow:"hidden","pointer-events":"none"}),this.glareElement.css({position:"absolute",top:"50%",left:"50%","background-image":"linear-gradient(0deg, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 100%)",width:""+2*c(this).outerWidth(),height:""+2*c(this).outerWidth(),transform:"rotate(180deg) translate(-50%, -50%)","transform-origin":"0% 0%",opacity:"0"}))}.call(e),function(){c(this).on("mousemove",a),c(this).on("mouseenter",n),this.settings.reset&&c(this).on("mouseleave",s),this.settings.glare&&c(window).on("resize",h.bind(this))}.call(e)},this.init()})},c("[data-tilt]").tilt(),!0});var THREE=THREE||{REVISION:"61"};self.console=self.console||{info:function(){},log:function(){},debug:function(){},warn:function(){},error:function(){}},String.prototype.trim=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")},THREE.extend=function(e,t){if(Object.keys)for(var i=Object.keys(t),r=0,n=i.length;r<n;r++){var o=i[r];Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))}else{var a={}.hasOwnProperty;for(var o in t)a.call(t,o)&&(e[o]=t[o])}return e},function(){for(var n=0,e=["ms","moz","webkit","o"],t=0;t<e.length&&!self.requestAnimationFrame;++t)self.requestAnimationFrame=self[e[t]+"RequestAnimationFrame"],self.cancelAnimationFrame=self[e[t]+"CancelAnimationFrame"]||self[e[t]+"CancelRequestAnimationFrame"];void 0===self.requestAnimationFrame&&void 0!==self.setTimeout&&(self.requestAnimationFrame=function(e){var t=Date.now(),i=Math.max(0,16-(t-n)),r=self.setTimeout(function(){e(t+i)},i);return n=t+i,r}),void 0===self.cancelAnimationFrame&&void 0!==self.clearTimeout&&(self.cancelAnimationFrame=function(e){self.clearTimeout(e)})}(),THREE.CullFaceNone=0,THREE.CullFaceBack=1,THREE.CullFaceFront=2,THREE.CullFaceFrontBack=3,THREE.FrontFaceDirectionCW=0,THREE.FrontFaceDirectionCCW=1,THREE.BasicShadowMap=0,THREE.PCFShadowMap=1,THREE.PCFSoftShadowMap=2,THREE.FrontSide=0,THREE.BackSide=1,THREE.DoubleSide=2,THREE.NoShading=0,THREE.FlatShading=1,THREE.SmoothShading=2,THREE.NoColors=0,THREE.FaceColors=1,THREE.VertexColors=2,THREE.NoBlending=0,THREE.NormalBlending=1,THREE.AdditiveBlending=2,THREE.SubtractiveBlending=3,THREE.MultiplyBlending=4,THREE.CustomBlending=5,THREE.AddEquation=100,THREE.SubtractEquation=101,THREE.ReverseSubtractEquation=102,THREE.ZeroFactor=200,THREE.OneFactor=201,THREE.SrcColorFactor=202,THREE.OneMinusSrcColorFactor=203,THREE.SrcAlphaFactor=204,THREE.OneMinusSrcAlphaFactor=205,THREE.DstAlphaFactor=206,THREE.OneMinusDstAlphaFactor=207,THREE.DstColorFactor=208,THREE.OneMinusDstColorFactor=209,THREE.SrcAlphaSaturateFactor=210,THREE.MultiplyOperation=0,THREE.MixOperation=1,THREE.AddOperation=2,THREE.UVMapping=function(){},THREE.CubeReflectionMapping=function(){},THREE.CubeRefractionMapping=function(){},THREE.SphericalReflectionMapping=function(){},THREE.SphericalRefractionMapping=function(){},THREE.RepeatWrapping=1e3,THREE.ClampToEdgeWrapping=1001,THREE.MirroredRepeatWrapping=1002,THREE.NearestFilter=1003,THREE.NearestMipMapNearestFilter=1004,THREE.NearestMipMapLinearFilter=1005,THREE.LinearFilter=1006,THREE.LinearMipMapNearestFilter=1007,THREE.LinearMipMapLinearFilter=1008,THREE.UnsignedByteType=1009,THREE.ByteType=1010,THREE.ShortType=1011,THREE.UnsignedShortType=1012,THREE.IntType=1013,THREE.UnsignedIntType=1014,THREE.FloatType=1015,THREE.UnsignedShort4444Type=1016,THREE.UnsignedShort5551Type=1017,THREE.UnsignedShort565Type=1018,THREE.AlphaFormat=1019,THREE.RGBFormat=1020,THREE.RGBAFormat=1021,THREE.LuminanceFormat=1022,THREE.LuminanceAlphaFormat=1023,THREE.RGB_S3TC_DXT1_Format=2001,THREE.RGBA_S3TC_DXT1_Format=2002,THREE.RGBA_S3TC_DXT3_Format=2003,THREE.RGBA_S3TC_DXT5_Format=2004,THREE.Color=function(e){return void 0!==e&&this.set(e),this},THREE.Color.prototype={constructor:THREE.Color,r:1,g:1,b:1,set:function(e){return e instanceof THREE.Color?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,i){return this.r=e,this.g=t,this.b=i,this},setHSL:function(e,t,i){if(0===t)this.r=this.g=this.b=i;else{var r=function(e,t,i){return i<0&&(i+=1),1<i&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+6*(t-e)*(2/3-i):e},n=i<=.5?i*(1+t):i+t-i*t,o=2*i-n;this.r=r(o,n,e+1/3),this.g=r(o,n,e),this.b=r(o,n,e-1/3)}return this},setStyle:function(e){if(/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.test(e)){var t=/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.exec(e);return this.r=Math.min(255,parseInt(t[1],10))/255,this.g=Math.min(255,parseInt(t[2],10))/255,this.b=Math.min(255,parseInt(t[3],10))/255,this}if(/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.test(e)){t=/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.exec(e);return this.r=Math.min(100,parseInt(t[1],10))/100,this.g=Math.min(100,parseInt(t[2],10))/100,this.b=Math.min(100,parseInt(t[3],10))/100,this}if(/^\#([0-9a-f]{6})$/i.test(e)){t=/^\#([0-9a-f]{6})$/i.exec(e);return this.setHex(parseInt(t[1],16)),this}if(/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test(e)){t=/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(e);return this.setHex(parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3],16)),this}if(/^(\w+)$/i.test(e))return this.setHex(THREE.ColorKeywords[e]),this},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e){return this.r=e.r*e.r,this.g=e.g*e.g,this.b=e.b*e.b,this},copyLinearToGamma:function(e){return this.r=Math.sqrt(e.r),this.g=Math.sqrt(e.g),this.b=Math.sqrt(e.b),this},convertGammaToLinear:function(){var e=this.r,t=this.g,i=this.b;return this.r=e*e,this.g=t*t,this.b=i*i,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(){var h={h:0,s:0,l:0};return function(){var e,t,i=this.r,r=this.g,n=this.b,o=Math.max(i,r,n),a=Math.min(i,r,n),s=(a+o)/2;if(a===o)t=e=0;else{var l=o-a;switch(t=s<=.5?l/(o+a):l/(2-o-a),o){case i:e=(r-n)/l+(r<n?6:0);break;case r:e=(n-i)/l+2;break;case n:e=(i-r)/l+4}e/=6}return h.h=e,h.s=t,h.l=s,h}}(),getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,i){var r=this.getHSL();return r.h+=e,r.s+=t,r.l+=i,this.setHSL(r.h,r.s,r.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e){return this.r=e[0],this.g=e[1],this.b=e[2],this},toArray:function(){return[this.r,this.g,this.b]},clone:function(){return(new THREE.Color).setRGB(this.r,this.g,this.b)}},THREE.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},THREE.Quaternion=function(e,t,i,r){this._x=e||0,this._y=t||0,this._z=i||0,this._w=void 0!==r?r:1},THREE.Quaternion.prototype={constructor:THREE.Quaternion,_x:0,_y:0,_z:0,_w:0,_euler:void 0,_updateEuler:function(e){void 0!==this._euler&&this._euler.setFromQuaternion(this,void 0,!1)},get x(){return this._x},set x(e){this._x=e,this._updateEuler()},get y(){return this._y},set y(e){this._y=e,this._updateEuler()},get z(){return this._z},set z(e){this._z=e,this._updateEuler()},get w(){return this._w},set w(e){this._w=e,this._updateEuler()},set:function(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._updateEuler(),this},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._w=e._w,this._updateEuler(),this},setFromEuler:function(e,t){if(e instanceof THREE.Euler==!1)throw new Error("ERROR: Quaternion's .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.  Please update your code.");var i=Math.cos(e._x/2),r=Math.cos(e._y/2),n=Math.cos(e._z/2),o=Math.sin(e._x/2),a=Math.sin(e._y/2),s=Math.sin(e._z/2);return"XYZ"===e.order?(this._x=o*r*n+i*a*s,this._y=i*a*n-o*r*s,this._z=i*r*s+o*a*n,this._w=i*r*n-o*a*s):"YXZ"===e.order?(this._x=o*r*n+i*a*s,this._y=i*a*n-o*r*s,this._z=i*r*s-o*a*n,this._w=i*r*n+o*a*s):"ZXY"===e.order?(this._x=o*r*n-i*a*s,this._y=i*a*n+o*r*s,this._z=i*r*s+o*a*n,this._w=i*r*n-o*a*s):"ZYX"===e.order?(this._x=o*r*n-i*a*s,this._y=i*a*n+o*r*s,this._z=i*r*s-o*a*n,this._w=i*r*n+o*a*s):"YZX"===e.order?(this._x=o*r*n+i*a*s,this._y=i*a*n+o*r*s,this._z=i*r*s-o*a*n,this._w=i*r*n-o*a*s):"XZY"===e.order&&(this._x=o*r*n-i*a*s,this._y=i*a*n-o*r*s,this._z=i*r*s+o*a*n,this._w=i*r*n+o*a*s),!1!==t&&this._updateEuler(),this},setFromAxisAngle:function(e,t){var i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._updateEuler(),this},setFromRotationMatrix:function(e){var t,i=e.elements,r=i[0],n=i[4],o=i[8],a=i[1],s=i[5],l=i[9],h=i[2],c=i[6],u=i[10],f=r+s+u;return this._z=0<f?(t=.5/Math.sqrt(f+1),this._w=.25/t,this._x=(c-l)*t,this._y=(o-h)*t,(a-n)*t):s<r&&u<r?(t=2*Math.sqrt(1+r-s-u),this._w=(c-l)/t,this._x=.25*t,this._y=(n+a)/t,(o+h)/t):u<s?(t=2*Math.sqrt(1+s-r-u),this._w=(o-h)/t,this._x=(n+a)/t,this._y=.25*t,(l+c)/t):(t=2*Math.sqrt(1+u-r-s),this._w=(a-n)/t,this._x=(o+h)/t,this._y=(l+c)/t,.25*t),this._updateEuler(),this},inverse:function(){return this.conjugate().normalize(),this},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._updateEuler(),this},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return this._w=0===e?(this._x=0,this._y=0,this._z=0,1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w*e),this},multiply:function(e,t){return void 0!==t?(console.warn("DEPRECATED: Quaternion's .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},multiplyQuaternions:function(e,t){var i=e._x,r=e._y,n=e._z,o=e._w,a=t._x,s=t._y,l=t._z,h=t._w;return this._x=i*h+o*a+r*l-n*s,this._y=r*h+o*s+n*a-i*l,this._z=n*h+o*l+i*s-r*a,this._w=o*h-i*a-r*s-n*l,this._updateEuler(),this},multiplyVector3:function(e){return console.warn("DEPRECATED: Quaternion's .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},slerp:function(e,t){var i=this._x,r=this._y,n=this._z,o=this._w,a=o*e._w+i*e._x+r*e._y+n*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),1<=a)return this._w=o,this._x=i,this._y=r,this._z=n,this;var s=Math.acos(a),l=Math.sqrt(1-a*a);if(Math.abs(l)<.001)return this._w=.5*(o+this._w),this._x=.5*(i+this._x),this._y=.5*(r+this._y),this._z=.5*(n+this._z),this;var h=Math.sin((1-t)*s)/l,c=Math.sin(t*s)/l;return this._w=o*h+this._w*c,this._x=i*h+this._x*c,this._y=r*h+this._y*c,this._z=n*h+this._z*c,this._updateEuler(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],this._w=e[3],this._updateEuler(),this},toArray:function(){return[this._x,this._y,this._z,this._w]},clone:function(){return new THREE.Quaternion(this._x,this._y,this._z,this._w)}},THREE.Quaternion.slerp=function(e,t,i,r){return i.copy(e).slerp(t,r)},THREE.Vector2=function(e,t){this.x=e||0,this.y=t||0},THREE.Vector2.prototype={constructor:THREE.Vector2,set:function(e,t){return this.x=e,this.y=t,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("DEPRECATED: Vector2's .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScalar:function(e){return this.x+=e,this.y+=e,this},sub:function(e,t){return void 0!==t?(console.warn("DEPRECATED: Vector2's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divideScalar:function(e){if(0!==e){var t=1/e;this.x*=t,this.y*=t}else this.x=0,this.y=0;return this},min:function(e){return this.x>e.x&&(this.x=e.x),this.y>e.y&&(this.y=e.y),this},max:function(e){return this.x<e.x&&(this.x=e.x),this.y<e.y&&(this.y=e.y),this},clamp:function(e,t){return this.x<e.x?this.x=e.x:this.x>t.x&&(this.x=t.x),this.y<e.y?this.y=e.y:this.y>t.y&&(this.y=t.y),this},negate:function(){return this.multiplyScalar(-1)},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,i=this.y-e.y;return t*t+i*i},setLength:function(e){var t=this.length();return 0!==t&&e!==t&&this.multiplyScalar(e/t),this},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e){return this.x=e[0],this.y=e[1],this},toArray:function(){return[this.x,this.y]},clone:function(){return new THREE.Vector2(this.x,this.y)}},THREE.Vector3=function(e,t,i){this.x=e||0,this.y=t||0,this.z=i||0},THREE.Vector3.prototype={constructor:THREE.Vector3,set:function(e,t,i){return this.x=e,this.y=t,this.z=i,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("DEPRECATED: Vector3's .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},sub:function(e,t){return void 0!==t?(console.warn("DEPRECATED: Vector3's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("DEPRECATED: Vector3's .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyMatrix3:function(e){var t=this.x,i=this.y,r=this.z,n=e.elements;return this.x=n[0]*t+n[3]*i+n[6]*r,this.y=n[1]*t+n[4]*i+n[7]*r,this.z=n[2]*t+n[5]*i+n[8]*r,this},applyMatrix4:function(e){var t=this.x,i=this.y,r=this.z,n=e.elements;return this.x=n[0]*t+n[4]*i+n[8]*r+n[12],this.y=n[1]*t+n[5]*i+n[9]*r+n[13],this.z=n[2]*t+n[6]*i+n[10]*r+n[14],this},applyProjection:function(e){var t=this.x,i=this.y,r=this.z,n=e.elements,o=1/(n[3]*t+n[7]*i+n[11]*r+n[15]);return this.x=(n[0]*t+n[4]*i+n[8]*r+n[12])*o,this.y=(n[1]*t+n[5]*i+n[9]*r+n[13])*o,this.z=(n[2]*t+n[6]*i+n[10]*r+n[14])*o,this},applyQuaternion:function(e){var t=this.x,i=this.y,r=this.z,n=e.x,o=e.y,a=e.z,s=e.w,l=s*t+o*r-a*i,h=s*i+a*t-n*r,c=s*r+n*i-o*t,u=-n*t-o*i-a*r;return this.x=l*s+u*-n+h*-a-c*-o,this.y=h*s+u*-o+c*-n-l*-a,this.z=c*s+u*-a+l*-o-h*-n,this},transformDirection:function(e){var t=this.x,i=this.y,r=this.z,n=e.elements;return this.x=n[0]*t+n[4]*i+n[8]*r,this.y=n[1]*t+n[5]*i+n[9]*r,this.z=n[2]*t+n[6]*i+n[10]*r,this.normalize(),this},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){if(0!==e){var t=1/e;this.x*=t,this.y*=t,this.z*=t}else this.x=0,this.y=0,this.z=0;return this},min:function(e){return this.x>e.x&&(this.x=e.x),this.y>e.y&&(this.y=e.y),this.z>e.z&&(this.z=e.z),this},max:function(e){return this.x<e.x&&(this.x=e.x),this.y<e.y&&(this.y=e.y),this.z<e.z&&(this.z=e.z),this},clamp:function(e,t){return this.x<e.x?this.x=e.x:this.x>t.x&&(this.x=t.x),this.y<e.y?this.y=e.y:this.y>t.y&&(this.y=t.y),this.z<e.z?this.z=e.z:this.z>t.z&&(this.z=t.z),this},negate:function(){return this.multiplyScalar(-1)},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){var t=this.length();return 0!==t&&e!==t&&this.multiplyScalar(e/t),this},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},cross:function(e,t){if(void 0!==t)return console.warn("DEPRECATED: Vector3's .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t);var i=this.x,r=this.y,n=this.z;return this.x=r*e.z-n*e.y,this.y=n*e.x-i*e.z,this.z=i*e.y-r*e.x,this},crossVectors:function(e,t){var i=e.x,r=e.y,n=e.z,o=t.x,a=t.y,s=t.z;return this.x=r*s-n*a,this.y=n*o-i*s,this.z=i*a-r*o,this},angleTo:function(e){var t=this.dot(e)/(this.length()*e.length());return Math.acos(THREE.Math.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r},setEulerFromRotationMatrix:function(e,t){console.error("REMOVED: Vector3's setEulerFromRotationMatrix has been removed in favor of Euler.setFromRotationMatrix(), please update your code.")},setEulerFromQuaternion:function(e,t){console.error("REMOVED: Vector3's setEulerFromQuaternion: has been removed in favor of Euler.setFromQuaternion(), please update your code.")},getPositionFromMatrix:function(e){return this.x=e.elements[12],this.y=e.elements[13],this.z=e.elements[14],this},getScaleFromMatrix:function(e){var t=this.set(e.elements[0],e.elements[1],e.elements[2]).length(),i=this.set(e.elements[4],e.elements[5],e.elements[6]).length(),r=this.set(e.elements[8],e.elements[9],e.elements[10]).length();return this.x=t,this.y=i,this.z=r,this},getColumnFromMatrix:function(e,t){var i=4*e,r=t.elements;return this.x=r[i],this.y=r[i+1],this.z=r[i+2],this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e){return this.x=e[0],this.y=e[1],this.z=e[2],this},toArray:function(){return[this.x,this.y,this.z]},clone:function(){return new THREE.Vector3(this.x,this.y,this.z)}},THREE.extend(THREE.Vector3.prototype,{applyEuler:function(){var t=new THREE.Quaternion;return function(e){return e instanceof THREE.Euler==!1&&console.error("ERROR: Vector3's .applyEuler() now expects a Euler rotation rather than a Vector3 and order.  Please update your code."),this.applyQuaternion(t.setFromEuler(e)),this}}(),applyAxisAngle:function(){var i=new THREE.Quaternion;return function(e,t){return this.applyQuaternion(i.setFromAxisAngle(e,t)),this}}(),projectOnVector:function(){var i=new THREE.Vector3;return function(e){i.copy(e).normalize();var t=this.dot(i);return this.copy(i).multiplyScalar(t)}}(),projectOnPlane:function(){var t=new THREE.Vector3;return function(e){return t.copy(this).projectOnVector(e),this.sub(t)}}(),reflect:function(){var t=new THREE.Vector3;return function(e){return t.copy(this).projectOnVector(e).multiplyScalar(2),this.subVectors(t,this)}}()}),THREE.Vector4=function(e,t,i,r){this.x=e||0,this.y=t||0,this.z=i||0,this.w=void 0!==r?r:1},THREE.Vector4.prototype={constructor:THREE.Vector4,set:function(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("DEPRECATED: Vector4's .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},sub:function(e,t){return void 0!==t?(console.warn("DEPRECATED: Vector4's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,i=this.y,r=this.z,n=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*n,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*n,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*n,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*n,this},divideScalar:function(e){if(0!==e){var t=1/e;this.x*=t,this.y*=t,this.z*=t,this.w*=t}else this.x=0,this.y=0,this.z=0,this.w=1;return this},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return this.z=t<1e-4?(this.x=1,this.y=0):(this.x=e.x/t,this.y=e.y/t,e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,i,r,n,o=e.elements,a=o[0],s=o[4],l=o[8],h=o[1],c=o[5],u=o[9],f=o[2],p=o[6],d=o[10];if(Math.abs(s-h)<.01&&Math.abs(l-f)<.01&&Math.abs(u-p)<.01){if(Math.abs(s+h)<.1&&Math.abs(l+f)<.1&&Math.abs(u+p)<.1&&Math.abs(a+c+d-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var m=(a+1)/2,g=(c+1)/2,E=(d+1)/2,v=(s+h)/4,y=(l+f)/4,T=(u+p)/4;return g<m&&E<m?n=m<.01?(i=0,r=.707106781):(r=v/(i=Math.sqrt(m)),y/i):E<g?n=g<.01?(r=0,i=.707106781):(i=v/(r=Math.sqrt(g)),T/r):E<.01?(r=i=.707106781,n=0):(i=y/(n=Math.sqrt(E)),r=T/n),this.set(i,r,n,t),this}var _=Math.sqrt((p-u)*(p-u)+(l-f)*(l-f)+(h-s)*(h-s));return Math.abs(_)<.001&&(_=1),this.x=(p-u)/_,this.y=(l-f)/_,this.z=(h-s)/_,this.w=Math.acos((a+c+d-1)/2),this},min:function(e){return this.x>e.x&&(this.x=e.x),this.y>e.y&&(this.y=e.y),this.z>e.z&&(this.z=e.z),this.w>e.w&&(this.w=e.w),this},max:function(e){return this.x<e.x&&(this.x=e.x),this.y<e.y&&(this.y=e.y),this.z<e.z&&(this.z=e.z),this.w<e.w&&(this.w=e.w),this},clamp:function(e,t){return this.x<e.x?this.x=e.x:this.x>t.x&&(this.x=t.x),this.y<e.y?this.y=e.y:this.y>t.y&&(this.y=t.y),this.z<e.z?this.z=e.z:this.z>t.z&&(this.z=t.z),this.w<e.w?this.w=e.w:this.w>t.w&&(this.w=t.w),this},negate:function(){return this.multiplyScalar(-1)},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){var t=this.length();return 0!==t&&e!==t&&this.multiplyScalar(e/t),this},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e){return this.x=e[0],this.y=e[1],this.z=e[2],this.w=e[3],this},toArray:function(){return[this.x,this.y,this.z,this.w]},clone:function(){return new THREE.Vector4(this.x,this.y,this.z,this.w)}},THREE.Euler=function(e,t,i,r){this._x=e||0,this._y=t||0,this._z=i||0,this._order=r||THREE.Euler.DefaultOrder},THREE.Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],THREE.Euler.DefaultOrder="XYZ",THREE.Euler.prototype={constructor:THREE.Euler,_x:0,_y:0,_z:0,_order:THREE.Euler.DefaultOrder,_quaternion:void 0,_updateQuaternion:function(){void 0!==this._quaternion&&this._quaternion.setFromEuler(this,!1)},get x(){return this._x},set x(e){this._x=e,this._updateQuaternion()},get y(){return this._y},set y(e){this._y=e,this._updateQuaternion()},get z(){return this._z},set z(e){this._z=e,this._updateQuaternion()},get order(){return this._order},set order(e){this._order=e,this._updateQuaternion()},set:function(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._order=r||this._order,this._updateQuaternion(),this},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._updateQuaternion(),this},setFromRotationMatrix:function(e,t){function i(e){return Math.min(Math.max(e,-1),1)}var r=e.elements,n=r[0],o=r[4],a=r[8],s=r[1],l=r[5],h=r[9],c=r[2],u=r[6],f=r[10];return"XYZ"===(t=t||this._order)?(this._y=Math.asin(i(a)),Math.abs(a)<.99999?(this._x=Math.atan2(-h,f),this._z=Math.atan2(-o,n)):(this._x=Math.atan2(u,l),this._z=0)):"YXZ"===t?(this._x=Math.asin(-i(h)),Math.abs(h)<.99999?(this._y=Math.atan2(a,f),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-c,n),this._z=0)):"ZXY"===t?(this._x=Math.asin(i(u)),Math.abs(u)<.99999?(this._y=Math.atan2(-c,f),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(s,n))):"ZYX"===t?(this._y=Math.asin(-i(c)),Math.abs(c)<.99999?(this._x=Math.atan2(u,f),this._z=Math.atan2(s,n)):(this._x=0,this._z=Math.atan2(-o,l))):"YZX"===t?(this._z=Math.asin(i(s)),Math.abs(s)<.99999?(this._x=Math.atan2(-h,l),this._y=Math.atan2(-c,n)):(this._x=0,this._y=Math.atan2(a,f))):"XZY"===t?(this._z=Math.asin(-i(o)),Math.abs(o)<.99999?(this._x=Math.atan2(u,l),this._y=Math.atan2(a,n)):(this._x=Math.atan2(-h,f),this._y=0)):console.warn("WARNING: Euler.setFromRotationMatrix() given unsupported order: "+t),this._order=t,this._updateQuaternion(),this},setFromQuaternion:function(e,t,i){function r(e){return Math.min(Math.max(e,-1),1)}var n=e.x*e.x,o=e.y*e.y,a=e.z*e.z,s=e.w*e.w;return"XYZ"===(t=t||this._order)?(this._x=Math.atan2(2*(e.x*e.w-e.y*e.z),s-n-o+a),this._y=Math.asin(r(2*(e.x*e.z+e.y*e.w))),this._z=Math.atan2(2*(e.z*e.w-e.x*e.y),s+n-o-a)):"YXZ"===t?(this._x=Math.asin(r(2*(e.x*e.w-e.y*e.z))),this._y=Math.atan2(2*(e.x*e.z+e.y*e.w),s-n-o+a),this._z=Math.atan2(2*(e.x*e.y+e.z*e.w),s-n+o-a)):"ZXY"===t?(this._x=Math.asin(r(2*(e.x*e.w+e.y*e.z))),this._y=Math.atan2(2*(e.y*e.w-e.z*e.x),s-n-o+a),this._z=Math.atan2(2*(e.z*e.w-e.x*e.y),s-n+o-a)):"ZYX"===t?(this._x=Math.atan2(2*(e.x*e.w+e.z*e.y),s-n-o+a),this._y=Math.asin(r(2*(e.y*e.w-e.x*e.z))),this._z=Math.atan2(2*(e.x*e.y+e.z*e.w),s+n-o-a)):"YZX"===t?(this._x=Math.atan2(2*(e.x*e.w-e.z*e.y),s-n+o-a),this._y=Math.atan2(2*(e.y*e.w-e.x*e.z),s+n-o-a),this._z=Math.asin(r(2*(e.x*e.y+e.z*e.w)))):"XZY"===t?(this._x=Math.atan2(2*(e.x*e.w+e.y*e.z),s-n+o-a),this._y=Math.atan2(2*(e.x*e.z+e.y*e.w),s+n-o-a),this._z=Math.asin(r(2*(e.z*e.w-e.x*e.y)))):console.warn("WARNING: Euler.setFromQuaternion() given unsupported order: "+t),this._order=t,!1!==i&&this._updateQuaternion(),this},reorder:function(){var t=new THREE.Quaternion;return function(e){t.setFromEuler(this),this.setFromQuaternion(t,e)}}(),fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._updateQuaternion(),this},toArray:function(){return[this._x,this._y,this._z,this._order]},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},clone:function(){return new THREE.Euler(this._x,this._y,this._z,this._order)}},THREE.Line3=function(e,t){this.start=void 0!==e?e:new THREE.Vector3,this.end=void 0!==t?t:new THREE.Vector3},THREE.Line3.prototype={constructor:THREE.Line3,set:function(e,t){return this.start.copy(e),this.end.copy(t),this},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},center:function(e){return(e||new THREE.Vector3).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return(e||new THREE.Vector3).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){var i=t||new THREE.Vector3;return this.delta(i).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var n=new THREE.Vector3,o=new THREE.Vector3;return function(e,t){n.subVectors(e,this.start),o.subVectors(this.end,this.start);var i=o.dot(o),r=o.dot(n)/i;return t&&(r=THREE.Math.clamp(r,0,1)),r}}(),closestPointToPoint:function(e,t,i){var r=this.closestPointToPointParameter(e,t),n=i||new THREE.Vector3;return this.delta(n).multiplyScalar(r).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)},clone:function(){return(new THREE.Line3).copy(this)}},THREE.Box2=function(e,t){this.min=void 0!==e?e:new THREE.Vector2(1/0,1/0),this.max=void 0!==t?t:new THREE.Vector2(-1/0,-1/0)},THREE.Box2.prototype={constructor:THREE.Box2,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){if(0<e.length){var t=e[0];this.min.copy(t),this.max.copy(t);for(var i=1,r=e.length;i<r;i++)(t=e[i]).x<this.min.x?this.min.x=t.x:t.x>this.max.x&&(this.max.x=t.x),t.y<this.min.y?this.min.y=t.y:t.y>this.max.y&&(this.max.y=t.y)}else this.makeEmpty();return this},setFromCenterAndSize:function(){var r=new THREE.Vector2;return function(e,t){var i=r.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}}(),copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(e){return(e||new THREE.Vector2).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(e){return(e||new THREE.Vector2).subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e){return new THREE.Vector2((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},isIntersectionBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return(t||new THREE.Vector2).copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var t=new THREE.Vector2;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)},clone:function(){return(new THREE.Box2).copy(this)}},THREE.Box3=function(e,t){this.min=void 0!==e?e:new THREE.Vector3(1/0,1/0,1/0),this.max=void 0!==t?t:new THREE.Vector3(-1/0,-1/0,-1/0)},THREE.Box3.prototype={constructor:THREE.Box3,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},addPoint:function(e){e.x<this.min.x?this.min.x=e.x:e.x>this.max.x&&(this.max.x=e.x),e.y<this.min.y?this.min.y=e.y:e.y>this.max.y&&(this.max.y=e.y),e.z<this.min.z?this.min.z=e.z:e.z>this.max.z&&(this.max.z=e.z)},setFromPoints:function(e){if(0<e.length){var t=e[0];this.min.copy(t),this.max.copy(t);for(var i=1,r=e.length;i<r;i++)this.addPoint(e[i])}else this.makeEmpty();return this},setFromCenterAndSize:function(){var r=new THREE.Vector3;return function(e,t){var i=r.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}}(),setFromObject:function(){var o=new THREE.Vector3;return function(e){var n=this;return e.updateMatrixWorld(!0),this.makeEmpty(),e.traverse(function(e){if(void 0!==e.geometry&&void 0!==e.geometry.vertices)for(var t=e.geometry.vertices,i=0,r=t.length;i<r;i++)o.copy(t[i]),o.applyMatrix4(e.matrixWorld),n.expandByPoint(o)}),this}}(),copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(e){return(e||new THREE.Vector3).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(e){return(e||new THREE.Vector3).subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e){return new THREE.Vector3((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},isIntersectionBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},clampPoint:function(e,t){return(t||new THREE.Vector3).copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var t=new THREE.Vector3;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),getBoundingSphere:function(){var i=new THREE.Vector3;return function(e){var t=e||new THREE.Sphere;return t.center=this.center(),t.radius=.5*this.size(i).length(),t}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(){var t=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];return function(e){return t[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),t[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),t[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),t[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),t[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),t[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),t[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),t[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.makeEmpty(),this.setFromPoints(t),this}}(),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)},clone:function(){return(new THREE.Box3).copy(this)}},THREE.Matrix3=function(e,t,i,r,n,o,a,s,l){this.elements=new Float32Array(9),this.set(void 0!==e?e:1,t||0,i||0,r||0,void 0!==n?n:1,o||0,a||0,s||0,void 0!==l?l:1)},THREE.Matrix3.prototype={constructor:THREE.Matrix3,set:function(e,t,i,r,n,o,a,s,l){var h=this.elements;return h[0]=e,h[3]=t,h[6]=i,h[1]=r,h[4]=n,h[7]=o,h[2]=a,h[5]=s,h[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},copy:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8]),this},multiplyVector3:function(e){return console.warn("DEPRECATED: Matrix3's .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){var r=new THREE.Vector3;return function(e){for(var t=0,i=e.length;t<i;t+=3)r.x=e[t],r.y=e[t+1],r.z=e[t+2],r.applyMatrix3(this),e[t]=r.x,e[t+1]=r.y,e[t+2]=r.z;return e}}(),multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],i=e[1],r=e[2],n=e[3],o=e[4],a=e[5],s=e[6],l=e[7],h=e[8];return t*o*h-t*a*l-i*n*h+i*a*s+r*n*l-r*o*s},getInverse:function(e,t){var i=e.elements,r=this.elements;r[0]=i[10]*i[5]-i[6]*i[9],r[1]=-i[10]*i[1]+i[2]*i[9],r[2]=i[6]*i[1]-i[2]*i[5],r[3]=-i[10]*i[4]+i[6]*i[8],r[4]=i[10]*i[0]-i[2]*i[8],r[5]=-i[6]*i[0]+i[2]*i[4],r[6]=i[9]*i[4]-i[5]*i[8],r[7]=-i[9]*i[0]+i[1]*i[8],r[8]=i[5]*i[0]-i[1]*i[4];var n=i[0]*r[0]+i[1]*r[3]+i[2]*r[6];if(0!==n)return this.multiplyScalar(1/n),this;var o="Matrix3.getInverse(): can't invert matrix, determinant is 0";if(t)throw new Error(o);return console.warn(o),this.identity(),this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.getInverse(e).transpose(),this},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},clone:function(){var e=this.elements;return new THREE.Matrix3(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8])}},THREE.Matrix4=function(e,t,i,r,n,o,a,s,l,h,c,u,f,p,d,m){this.elements=new Float32Array(16);var g=this.elements;g[0]=void 0!==e?e:1,g[4]=t||0,g[8]=i||0,g[12]=r||0,g[1]=n||0,g[5]=void 0!==o?o:1,g[9]=a||0,g[13]=s||0,g[2]=l||0,g[6]=h||0,g[10]=void 0!==c?c:1,g[14]=u||0,g[3]=f||0,g[7]=p||0,g[11]=d||0,g[15]=void 0!==m?m:1},THREE.Matrix4.prototype={constructor:THREE.Matrix4,set:function(e,t,i,r,n,o,a,s,l,h,c,u,f,p,d,m){var g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=r,g[1]=n,g[5]=o,g[9]=a,g[13]=s,g[2]=l,g[6]=h,g[10]=c,g[14]=u,g[3]=f,g[7]=p,g[11]=d,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},copy:function(e){return this.elements.set(e.elements),this},extractPosition:function(e){return console.warn("DEPRECATED: Matrix4's .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},copyPosition:function(e){var t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this},extractRotation:function(){var a=new THREE.Vector3;return function(e){var t=this.elements,i=e.elements,r=1/a.set(i[0],i[1],i[2]).length(),n=1/a.set(i[4],i[5],i[6]).length(),o=1/a.set(i[8],i[9],i[10]).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[4]=i[4]*n,t[5]=i[5]*n,t[6]=i[6]*n,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,this}}(),makeRotationFromEuler:function(e){e instanceof THREE.Euler==!1&&console.error("ERROR: Matrix's .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.  Please update your code.");var t=this.elements,i=e.x,r=e.y,n=e.z,o=Math.cos(i),a=Math.sin(i),s=Math.cos(r),l=Math.sin(r),h=Math.cos(n),c=Math.sin(n);if("XYZ"===e.order){var u=o*h,f=o*c,p=a*h,d=a*c;t[0]=s*h,t[4]=-s*c,t[8]=l,t[1]=f+p*l,t[5]=u-d*l,t[9]=-a*s,t[2]=d-u*l,t[6]=p+f*l,t[10]=o*s}else if("YXZ"===e.order){var m=s*h,g=s*c,E=l*h,v=l*c;t[0]=m+v*a,t[4]=E*a-g,t[8]=o*l,t[1]=o*c,t[5]=o*h,t[9]=-a,t[2]=g*a-E,t[6]=v+m*a,t[10]=o*s}else if("ZXY"===e.order){m=s*h,g=s*c,E=l*h,v=l*c;t[0]=m-v*a,t[4]=-o*c,t[8]=E+g*a,t[1]=g+E*a,t[5]=o*h,t[9]=v-m*a,t[2]=-o*l,t[6]=a,t[10]=o*s}else if("ZYX"===e.order){u=o*h,f=o*c,p=a*h,d=a*c;t[0]=s*h,t[4]=p*l-f,t[8]=u*l+d,t[1]=s*c,t[5]=d*l+u,t[9]=f*l-p,t[2]=-l,t[6]=a*s,t[10]=o*s}else if("YZX"===e.order){var y=o*s,T=o*l,_=a*s,x=a*l;t[0]=s*h,t[4]=x-y*c,t[8]=_*c+T,t[1]=c,t[5]=o*h,t[9]=-a*h,t[2]=-l*h,t[6]=T*c+_,t[10]=y-x*c}else if("XZY"===e.order){y=o*s,T=o*l,_=a*s,x=a*l;t[0]=s*h,t[4]=-c,t[8]=l*h,t[1]=y*c+x,t[5]=o*h,t[9]=T*c-_,t[2]=_*c-T,t[6]=a*h,t[10]=x*c+y}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},setRotationFromQuaternion:function(e){return console.warn("DEPRECATED: Matrix4's .setRotationFromQuaternion() has been deprecated in favor of makeRotationFromQuaternion.  Please update your code."),this.makeRotationFromQuaternion(e)},makeRotationFromQuaternion:function(e){var t=this.elements,i=e.x,r=e.y,n=e.z,o=e.w,a=i+i,s=r+r,l=n+n,h=i*a,c=i*s,u=i*l,f=r*s,p=r*l,d=n*l,m=o*a,g=o*s,E=o*l;return t[0]=1-(f+d),t[4]=c-E,t[8]=u+g,t[1]=c+E,t[5]=1-(h+d),t[9]=p-m,t[2]=u-g,t[6]=p+m,t[10]=1-(h+f),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:function(){var n=new THREE.Vector3,o=new THREE.Vector3,a=new THREE.Vector3;return function(e,t,i){var r=this.elements;return a.subVectors(e,t).normalize(),0===a.length()&&(a.z=1),n.crossVectors(i,a).normalize(),0===n.length()&&(a.x+=1e-4,n.crossVectors(i,a).normalize()),o.crossVectors(a,n),r[0]=n.x,r[4]=o.x,r[8]=a.x,r[1]=n.y,r[5]=o.y,r[9]=a.y,r[2]=n.z,r[6]=o.z,r[10]=a.z,this}}(),multiply:function(e,t){return void 0!==t?(console.warn("DEPRECATED: Matrix4's .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},multiplyMatrices:function(e,t){var i=e.elements,r=t.elements,n=this.elements,o=i[0],a=i[4],s=i[8],l=i[12],h=i[1],c=i[5],u=i[9],f=i[13],p=i[2],d=i[6],m=i[10],g=i[14],E=i[3],v=i[7],y=i[11],T=i[15],_=r[0],x=r[4],R=r[8],b=r[12],w=r[1],H=r[5],S=r[9],M=r[13],C=r[2],A=r[6],P=r[10],D=r[14],L=r[3],F=r[7],O=r[11],k=r[15];return n[0]=o*_+a*w+s*C+l*L,n[4]=o*x+a*H+s*A+l*F,n[8]=o*R+a*S+s*P+l*O,n[12]=o*b+a*M+s*D+l*k,n[1]=h*_+c*w+u*C+f*L,n[5]=h*x+c*H+u*A+f*F,n[9]=h*R+c*S+u*P+f*O,n[13]=h*b+c*M+u*D+f*k,n[2]=p*_+d*w+m*C+g*L,n[6]=p*x+d*H+m*A+g*F,n[10]=p*R+d*S+m*P+g*O,n[14]=p*b+d*M+m*D+g*k,n[3]=E*_+v*w+y*C+T*L,n[7]=E*x+v*H+y*A+T*F,n[11]=E*R+v*S+y*P+T*O,n[15]=E*b+v*M+y*D+T*k,this},multiplyToArray:function(e,t,i){var r=this.elements;return this.multiplyMatrices(e,t),i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],i[4]=r[4],i[5]=r[5],i[6]=r[6],i[7]=r[7],i[8]=r[8],i[9]=r[9],i[10]=r[10],i[11]=r[11],i[12]=r[12],i[13]=r[13],i[14]=r[14],i[15]=r[15],this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},multiplyVector3:function(e){return console.warn("DEPRECATED: Matrix4's .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),e.applyProjection(this)},multiplyVector4:function(e){return console.warn("DEPRECATED: Matrix4's .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){var r=new THREE.Vector3;return function(e){for(var t=0,i=e.length;t<i;t+=3)r.x=e[t],r.y=e[t+1],r.z=e[t+2],r.applyProjection(this),e[t]=r.x,e[t+1]=r.y,e[t+2]=r.z;return e}}(),rotateAxis:function(e){console.warn("DEPRECATED: Matrix4's .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("DEPRECATED: Matrix4's .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},determinant:function(){var e=this.elements,t=e[0],i=e[4],r=e[8],n=e[12],o=e[1],a=e[5],s=e[9],l=e[13],h=e[2],c=e[6],u=e[10],f=e[14];return e[3]*(+n*s*c-r*l*c-n*a*u+i*l*u+r*a*f-i*s*f)+e[7]*(+t*s*f-t*l*u+n*o*u-r*o*f+r*l*h-n*s*h)+e[11]*(+t*l*c-t*a*f-n*o*c+i*o*f+n*a*h-i*l*h)+e[15]*(-r*a*h-t*s*c+t*a*u+r*o*c-i*o*u+i*s*h)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},flattenToArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},flattenToArrayOffset:function(e,t){var i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e},getPosition:function(){var t=new THREE.Vector3;return function(){console.warn("DEPRECATED: Matrix4's .getPosition() has been removed. Use Vector3.getPositionFromMatrix( matrix ) instead.");var e=this.elements;return t.set(e[12],e[13],e[14])}}(),setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var i=this.elements,r=e.elements,n=r[0],o=r[4],a=r[8],s=r[12],l=r[1],h=r[5],c=r[9],u=r[13],f=r[2],p=r[6],d=r[10],m=r[14],g=r[3],E=r[7],v=r[11],y=r[15];i[0]=c*m*E-u*d*E+u*p*v-h*m*v-c*p*y+h*d*y,i[4]=s*d*E-a*m*E-s*p*v+o*m*v+a*p*y-o*d*y,i[8]=a*u*E-s*c*E+s*h*v-o*u*v-a*h*y+o*c*y,i[12]=s*c*p-a*u*p-s*h*d+o*u*d+a*h*m-o*c*m,i[1]=u*d*g-c*m*g-u*f*v+l*m*v+c*f*y-l*d*y,i[5]=a*m*g-s*d*g+s*f*v-n*m*v-a*f*y+n*d*y,i[9]=s*c*g-a*u*g-s*l*v+n*u*v+a*l*y-n*c*y,i[13]=a*u*f-s*c*f+s*l*d-n*u*d-a*l*m+n*c*m,i[2]=h*m*g-u*p*g+u*f*E-l*m*E-h*f*y+l*p*y,i[6]=s*p*g-o*m*g-s*f*E+n*m*E+o*f*y-n*p*y,i[10]=o*u*g-s*h*g+s*l*E-n*u*E-o*l*y+n*h*y,i[14]=s*h*f-o*u*f-s*l*p+n*u*p+o*l*m-n*h*m,i[3]=c*p*g-h*d*g-c*f*E+l*d*E+h*f*v-l*p*v,i[7]=o*d*g-a*p*g+a*f*E-n*d*E-o*f*v+n*p*v,i[11]=a*h*g-o*c*g-a*l*E+n*c*E+o*l*v-n*h*v,i[15]=o*c*f-a*h*f+a*l*p-n*c*p-o*l*d+n*h*d;var T=n*i[0]+l*i[4]+f*i[8]+g*i[12];if(0!=T)return this.multiplyScalar(1/T),this;var _="Matrix4.getInverse(): can't invert matrix, determinant is 0";if(t)throw new Error(_);return console.warn(_),this.identity(),this},translate:function(e){console.warn("DEPRECATED: Matrix4's .translate() has been removed.")},rotateX:function(e){console.warn("DEPRECATED: Matrix4's .rotateX() has been removed.")},rotateY:function(e){console.warn("DEPRECATED: Matrix4's .rotateY() has been removed.")},rotateZ:function(e){console.warn("DEPRECATED: Matrix4's .rotateZ() has been removed.")},rotateByAxis:function(e,t){console.warn("DEPRECATED: Matrix4's .rotateByAxis() has been removed.")},scale:function(e){var t=this.elements,i=e.x,r=e.y,n=e.z;return t[0]*=i,t[4]*=r,t[8]*=n,t[1]*=i,t[5]*=r,t[9]*=n,t[2]*=i,t[6]*=r,t[10]*=n,t[3]*=i,t[7]*=r,t[11]*=n,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,Math.max(i,r)))},makeTranslation:function(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var i=Math.cos(t),r=Math.sin(t),n=1-i,o=e.x,a=e.y,s=e.z,l=n*o,h=n*a;return this.set(l*o+i,l*a-r*s,l*s+r*a,0,l*a+r*s,h*a+i,h*s-r*o,0,l*s-r*a,h*s+r*o,n*s*s+i,0,0,0,0,1),this},makeScale:function(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this},compose:function(e,t,i){return this.makeRotationFromQuaternion(t),this.scale(i),this.setPosition(e),this},decompose:function(){var c=new THREE.Vector3,u=new THREE.Matrix4;return function(e,t,i){var r=this.elements,n=c.set(r[0],r[1],r[2]).length(),o=c.set(r[4],r[5],r[6]).length(),a=c.set(r[8],r[9],r[10]).length();e.x=r[12],e.y=r[13],e.z=r[14],u.elements.set(this.elements);var s=1/n,l=1/o,h=1/a;return u.elements[0]*=s,u.elements[1]*=s,u.elements[2]*=s,u.elements[4]*=l,u.elements[5]*=l,u.elements[6]*=l,u.elements[8]*=h,u.elements[9]*=h,u.elements[10]*=h,t.setFromRotationMatrix(u),i.x=n,i.y=o,i.z=a,this}}(),makeFrustum:function(e,t,i,r,n,o){var a=this.elements,s=2*n/(t-e),l=2*n/(r-i),h=(t+e)/(t-e),c=(r+i)/(r-i),u=-(o+n)/(o-n),f=-2*o*n/(o-n);return a[0]=s,a[4]=0,a[8]=h,a[12]=0,a[1]=0,a[5]=l,a[9]=c,a[13]=0,a[2]=0,a[6]=0,a[10]=u,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makePerspective:function(e,t,i,r){var n=i*Math.tan(THREE.Math.degToRad(.5*e)),o=-n,a=o*t,s=n*t;return this.makeFrustum(a,s,o,n,i,r)},makeOrthographic:function(e,t,i,r,n,o){var a=this.elements,s=t-e,l=i-r,h=o-n,c=(t+e)/s,u=(i+r)/l,f=(o+n)/h;return a[0]=2/s,a[4]=0,a[8]=0,a[12]=-c,a[1]=0,a[5]=2/l,a[9]=0,a[13]=-u,a[2]=0,a[6]=0,a[10]=-2/h,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},fromArray:function(e){return this.elements.set(e),this},toArray:function(){var e=this.elements;return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]},clone:function(){var e=this.elements;return new THREE.Matrix4(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15])}},THREE.Ray=function(e,t){this.origin=void 0!==e?e:new THREE.Vector3,this.direction=void 0!==t?t:new THREE.Vector3},THREE.Ray.prototype={constructor:THREE.Ray,set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return(t||new THREE.Vector3).copy(this.direction).multiplyScalar(e).add(this.origin)},recast:function(){var t=new THREE.Vector3;return function(e){return this.origin.copy(this.at(e,t)),this}}(),closestPointToPoint:function(e,t){var i=t||new THREE.Vector3;i.subVectors(e,this.origin);var r=i.dot(this.direction);return r<0?i.copy(this.origin):i.copy(this.direction).multiplyScalar(r).add(this.origin)},distanceToPoint:function(){var i=new THREE.Vector3;return function(e){var t=i.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceTo(e):(i.copy(this.direction).multiplyScalar(t).add(this.origin),i.distanceTo(e))}}(),distanceSqToSegment:function(e,t,i,r){var n,o,a,s,l=e.clone().add(t).multiplyScalar(.5),h=t.clone().sub(e).normalize(),c=.5*e.distanceTo(t),u=this.origin.clone().sub(l),f=-this.direction.dot(h),p=u.dot(this.direction),d=-u.dot(h),m=u.lengthSq(),g=Math.abs(1-f*f);if(0<=g)if(o=f*p-d,s=c*g,0<=(n=f*d-p))if(-s<=o)if(o<=s){var E=1/g;a=(n*=E)*(n+f*(o*=E)+2*p)+o*(f*n+o+2*d)+m}else o=c,a=-(n=Math.max(0,-(f*o+p)))*n+o*(o+2*d)+m;else o=-c,a=-(n=Math.max(0,-(f*o+p)))*n+o*(o+2*d)+m;else a=o<=-s?-(n=Math.max(0,-(-f*c+p)))*n+(o=0<n?-c:Math.min(Math.max(-c,-d),c))*(o+2*d)+m:o<=s?(n=0,(o=Math.min(Math.max(-c,-d),c))*(o+2*d)+m):-(n=Math.max(0,-(f*c+p)))*n+(o=0<n?c:Math.min(Math.max(-c,-d),c))*(o+2*d)+m;else o=0<f?-c:c,a=-(n=Math.max(0,-(f*o+p)))*n+o*(o+2*d)+m;return i&&i.copy(this.direction.clone().multiplyScalar(n).add(this.origin)),r&&r.copy(h.clone().multiplyScalar(o).add(l)),a},isIntersectionSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},isIntersectionPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0==t)return 0==e.distanceToPoint(this.origin)?0:null;var i=-(this.origin.dot(e.normal)+e.constant)/t;return 0<=i?i:null},intersectPlane:function(e,t){var i=this.distanceToPlane(e);return null===i?null:this.at(i,t)},isIntersectionBox:function(){var t=new THREE.Vector3;return function(e){return null!==this.intersectBox(e,t)}}(),intersectBox:function(e,t){var i,r,n,o,a,s,l=1/this.direction.x,h=1/this.direction.y,c=1/this.direction.z,u=this.origin;return r=0<=l?(i=(e.min.x-u.x)*l,(e.max.x-u.x)*l):(i=(e.max.x-u.x)*l,(e.min.x-u.x)*l),(o=0<=h?(n=(e.min.y-u.y)*h,(e.max.y-u.y)*h):(n=(e.max.y-u.y)*h,(e.min.y-u.y)*h))<i||r<n?null:((i<n||i!=i)&&(i=n),(o<r||r!=r)&&(r=o),(s=0<=c?(a=(e.min.z-u.z)*c,(e.max.z-u.z)*c):(a=(e.max.z-u.z)*c,(e.min.z-u.z)*c))<i||r<a?null:((i<a||i!=i)&&(i=a),(s<r||r!=r)&&(r=s),r<0?null:this.at(0<=i?i:r,t)))},intersectTriangle:function(){var c=new THREE.Vector3,u=new THREE.Vector3,f=new THREE.Vector3,p=new THREE.Vector3;return function(e,t,i,r,n){u.subVectors(t,e),f.subVectors(i,e),p.crossVectors(u,f);var o,a=this.direction.dot(p);if(0<a){if(r)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}c.subVectors(this.origin,e);var s=o*this.direction.dot(f.crossVectors(c,f));if(s<0)return null;var l=o*this.direction.dot(u.cross(c));if(l<0)return null;if(a<s+l)return null;var h=-o*c.dot(p);return h<0?null:this.at(h/a,n)}}(),applyMatrix4:function(e){return this.direction.add(this.origin).applyMatrix4(e),this.origin.applyMatrix4(e),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)},clone:function(){return(new THREE.Ray).copy(this)}},THREE.Sphere=function(e,t){this.center=void 0!==e?e:new THREE.Vector3,this.radius=void 0!==t?t:0},THREE.Sphere.prototype={constructor:THREE.Sphere,set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(){var a=new THREE.Box3;return function(e,t){var i=this.center;void 0!==t?i.copy(t):a.setFromPoints(e).center(i);for(var r=0,n=0,o=e.length;n<o;n++)r=Math.max(r,i.distanceToSquared(e[n]));return this.radius=Math.sqrt(r),this}}(),copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},clampPoint:function(e,t){var i=this.center.distanceToSquared(e),r=t||new THREE.Vector3;return r.copy(e),i>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r},getBoundingBox:function(e){var t=e||new THREE.Box3;return t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius},clone:function(){return(new THREE.Sphere).copy(this)}},THREE.Frustum=function(e,t,i,r,n,o){this.planes=[void 0!==e?e:new THREE.Plane,void 0!==t?t:new THREE.Plane,void 0!==i?i:new THREE.Plane,void 0!==r?r:new THREE.Plane,void 0!==n?n:new THREE.Plane,void 0!==o?o:new THREE.Plane]},THREE.Frustum.prototype={constructor:THREE.Frustum,set:function(e,t,i,r,n,o){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(n),a[5].copy(o),this},copy:function(e){for(var t=this.planes,i=0;i<6;i++)t[i].copy(e.planes[i]);return this},setFromMatrix:function(e){var t=this.planes,i=e.elements,r=i[0],n=i[1],o=i[2],a=i[3],s=i[4],l=i[5],h=i[6],c=i[7],u=i[8],f=i[9],p=i[10],d=i[11],m=i[12],g=i[13],E=i[14],v=i[15];return t[0].setComponents(a-r,c-s,d-u,v-m).normalize(),t[1].setComponents(a+r,c+s,d+u,v+m).normalize(),t[2].setComponents(a+n,c+l,d+f,v+g).normalize(),t[3].setComponents(a-n,c-l,d-f,v-g).normalize(),t[4].setComponents(a-o,c-h,d-p,v-E).normalize(),t[5].setComponents(a+o,c+h,d+p,v+E).normalize(),this},intersectsObject:function(){var i=new THREE.Sphere;return function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),i.copy(t.boundingSphere),i.applyMatrix4(e.matrixWorld),this.intersectsSphere(i)}}(),intersectsSphere:function(e){for(var t=this.planes,i=e.center,r=-e.radius,n=0;n<6;n++){if(t[n].distanceToPoint(i)<r)return!1}return!0},intersectsBox:function(){var a=new THREE.Vector3,s=new THREE.Vector3;return function(e){for(var t=this.planes,i=0;i<6;i++){var r=t[i];a.x=0<r.normal.x?e.min.x:e.max.x,s.x=0<r.normal.x?e.max.x:e.min.x,a.y=0<r.normal.y?e.min.y:e.max.y,s.y=0<r.normal.y?e.max.y:e.min.y,a.z=0<r.normal.z?e.min.z:e.max.z,s.z=0<r.normal.z?e.max.z:e.min.z;var n=r.distanceToPoint(a),o=r.distanceToPoint(s);if(n<0&&o<0)return!1}return!0}}(),containsPoint:function(e){for(var t=this.planes,i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0},clone:function(){return(new THREE.Frustum).copy(this)}},THREE.Plane=function(e,t){this.normal=void 0!==e?e:new THREE.Vector3(1,0,0),this.constant=void 0!==t?t:0},THREE.Plane.prototype={constructor:THREE.Plane,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var n=new THREE.Vector3,o=new THREE.Vector3;return function(e,t,i){var r=n.subVectors(i,t).cross(o.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}}(),copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return this.orthoPoint(e,t).sub(e).negate()},orthoPoint:function(e,t){var i=this.distanceToPoint(e);return(t||new THREE.Vector3).copy(this.normal).multiplyScalar(i)},isIntersectionLine:function(e){var t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&0<i||i<0&&0<t},intersectLine:function(){var a=new THREE.Vector3;return function(e,t){var i=t||new THREE.Vector3,r=e.delta(a),n=this.normal.dot(r);if(0==n)return 0==this.distanceToPoint(e.start)?i.copy(e.start):void 0;var o=-(e.start.dot(this.normal)+this.constant)/n;return o<0||1<o?void 0:i.copy(r).multiplyScalar(o).add(e.start)}}(),coplanarPoint:function(e){return(e||new THREE.Vector3).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var n=new THREE.Vector3,o=new THREE.Vector3;return function(e,t){t=t||(new THREE.Matrix3).getNormalMatrix(e);var i=n.copy(this.normal).applyMatrix3(t),r=this.coplanarPoint(o);return r.applyMatrix4(e),this.setFromNormalAndCoplanarPoint(i,r),this}}(),translate:function(e){return this.constant=this.constant-e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant==this.constant},clone:function(){return(new THREE.Plane).copy(this)}},THREE.Math={PI2:2*Math.PI,generateUUID:function(){var t,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),r=new Array(36),n=0;return function(){for(var e=0;e<36;e++)r[e]=8==e||13==e||18==e||23==e?"-":14==e?"4":(n<=2&&(n=33554432+16777216*Math.random()|0),t=15&n,n>>=4,i[19==e?3&t|8:t]);return r.join("")}}(),clamp:function(e,t,i){return e<t?t:i<e?i:e},clampBottom:function(e,t){return e<t?t:e},mapLinear:function(e,t,i,r,n){return r+(e-t)*(n-r)/(i-t)},smoothstep:function(e,t,i){return e<=t?0:i<=e?1:(e=(e-t)/(i-t))*e*(3-2*e)},smootherstep:function(e,t,i){return e<=t?0:i<=e?1:(e=(e-t)/(i-t))*e*e*(e*(6*e-15)+10)},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},sign:function(e){return e<0?-1:0<e?1:0},degToRad:function(){var t=Math.PI/180;return function(e){return e*t}}(),radToDeg:function(){var t=180/Math.PI;return function(e){return e*t}}()},THREE.Spline=function(e){this.points=e;var t,i,r,n,o,a,s,l,h,c=[],u={x:0,y:0,z:0};function f(e,t,i,r,n,o,a){var s=.5*(i-e),l=.5*(r-t);return(2*(t-i)+s+l)*a+(-3*(t-i)-2*s-l)*o+s*n+t}this.initFromArray=function(e){this.points=[];for(var t=0;t<e.length;t++)this.points[t]={x:e[t][0],y:e[t][1],z:e[t][2]}},this.getPoint=function(e){return t=(this.points.length-1)*e,i=Math.floor(t),r=t-i,c[0]=0===i?i:i-1,c[1]=i,c[2]=i>this.points.length-2?this.points.length-1:i+1,c[3]=i>this.points.length-3?this.points.length-1:i+2,a=this.points[c[0]],s=this.points[c[1]],l=this.points[c[2]],h=this.points[c[3]],o=r*(n=r*r),u.x=f(a.x,s.x,l.x,h.x,r,n,o),u.y=f(a.y,s.y,l.y,h.y,r,n,o),u.z=f(a.z,s.z,l.z,h.z,r,n,o),u},this.getControlPointsArray=function(){var e,t,i=this.points.length,r=[];for(e=0;e<i;e++)t=this.points[e],r[e]=[t.x,t.y,t.z];return r},this.getLength=function(e){var t,i,r,n,o=0,a=0,s=0,l=new THREE.Vector3,h=new THREE.Vector3,c=[],u=0;for(c[0]=0,e||(e=100),r=this.points.length*e,l.copy(this.points[0]),t=1;t<r;t++)i=t/r,n=this.getPoint(i),h.copy(n),u+=h.distanceTo(l),l.copy(n),o=(this.points.length-1)*i,(a=Math.floor(o))!=s&&(c[a]=u,s=a);return c[c.length]=u,{chunks:c,total:u}},this.reparametrizeByArcLength=function(e){var t,i,r,n,o,a,s,l,h=[],c=new THREE.Vector3,u=this.getLength();for(h.push(c.copy(this.points[0]).clone()),t=1;t<this.points.length;t++){for(a=u.chunks[t]-u.chunks[t-1],s=Math.ceil(e*a/u.total),n=(t-1)/(this.points.length-1),o=t/(this.points.length-1),i=1;i<s-1;i++)r=n+i*(1/s)*(o-n),l=this.getPoint(r),h.push(c.copy(l).clone());h.push(c.copy(this.points[t]).clone())}this.points=h}},THREE.Triangle=function(e,t,i){this.a=void 0!==e?e:new THREE.Vector3,this.b=void 0!==t?t:new THREE.Vector3,this.c=void 0!==i?i:new THREE.Vector3},THREE.Triangle.normal=function(){var a=new THREE.Vector3;return function(e,t,i,r){var n=r||new THREE.Vector3;n.subVectors(i,t),a.subVectors(e,t),n.cross(a);var o=n.lengthSq();return 0<o?n.multiplyScalar(1/Math.sqrt(o)):n.set(0,0,0)}}(),THREE.Triangle.barycoordFromPoint=function(){var m=new THREE.Vector3,g=new THREE.Vector3,E=new THREE.Vector3;return function(e,t,i,r,n){m.subVectors(r,t),g.subVectors(i,t),E.subVectors(e,t);var o=m.dot(m),a=m.dot(g),s=m.dot(E),l=g.dot(g),h=g.dot(E),c=o*l-a*a,u=n||new THREE.Vector3;if(0==c)return u.set(-2,-1,-1);var f=1/c,p=(l*s-a*h)*f,d=(o*h-a*s)*f;return u.set(1-p-d,d,p)}}(),THREE.Triangle.containsPoint=function(){var o=new THREE.Vector3;return function(e,t,i,r){var n=THREE.Triangle.barycoordFromPoint(e,t,i,r,o);return 0<=n.x&&0<=n.y&&n.x+n.y<=1}}(),THREE.Triangle.prototype={constructor:THREE.Triangle,set:function(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this},setFromPointsAndIndices:function(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},area:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),midpoint:function(e){return(e||new THREE.Vector3).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return THREE.Triangle.normal(this.a,this.b,this.c,e)},plane:function(e){return(e||new THREE.Plane).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,t){return THREE.Triangle.barycoordFromPoint(e,this.a,this.b,this.c,t)},containsPoint:function(e){return THREE.Triangle.containsPoint(e,this.a,this.b,this.c)},equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)},clone:function(){return(new THREE.Triangle).copy(this)}},THREE.Vertex=function(e){return console.warn("THREE.Vertex has been DEPRECATED. Use THREE.Vector3 instead."),e},THREE.UV=function(e,t){return console.warn("THREE.UV has been DEPRECATED. Use THREE.Vector2 instead."),new THREE.Vector2(e,t)},THREE.Clock=function(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1},THREE.Clock.prototype={constructor:THREE.Clock,start:function(){this.startTime=void 0!==self.performance&&void 0!==self.performance.now?self.performance.now():Date.now(),this.oldTime=this.startTime,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running&&this.start(),this.running){var t=void 0!==self.performance&&void 0!==self.performance.now?self.performance.now():Date.now();e=.001*(t-this.oldTime),this.oldTime=t,this.elapsedTime+=e}return e}},THREE.EventDispatcher=function(){},THREE.EventDispatcher.prototype={constructor:THREE.EventDispatcher,apply:function(e){e.addEventListener=THREE.EventDispatcher.prototype.addEventListener,e.hasEventListener=THREE.EventDispatcher.prototype.hasEventListener,e.removeEventListener=THREE.EventDispatcher.prototype.removeEventListener,e.dispatchEvent=THREE.EventDispatcher.prototype.dispatchEvent},addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var i=this._listeners,r=i[e].indexOf(t);-1!==r&&i[e].splice(r,1)}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var i=0,r=t.length;i<r;i++)t[i].call(this,e)}}}},function(D){D.Raycaster=function(e,t,i,r){this.ray=new D.Ray(e,t),this.near=i||0,this.far=r||1/0};var L=new D.Sphere,F=new D.Ray,O=(new D.Plane,new D.Vector3,new D.Vector3),k=new D.Matrix4,o=function(e,t){return e.distance-t.distance},V=new D.Vector3,I=new D.Vector3,N=new D.Vector3,U=function(e,t,i){if(e instanceof D.Particle){if(O.getPositionFromMatrix(e.matrixWorld),(r=t.ray.distanceToPoint(O))>e.scale.x)return i;i.push({distance:r,point:e.position,face:null,object:e})}else if(e instanceof D.LOD){O.getPositionFromMatrix(e.matrixWorld);var r=t.ray.origin.distanceTo(O);U(e.getObjectForDistance(r),t,i)}else if(e instanceof D.Mesh){if(null===(H=e.geometry).boundingSphere&&H.computeBoundingSphere(),L.copy(H.boundingSphere),L.applyMatrix4(e.matrixWorld),!1===t.ray.isIntersectionSphere(L))return i;if(k.getInverse(e.matrixWorld),F.copy(t.ray).applyMatrix4(k),null!==H.boundingBox&&!1===F.isIntersectionBox(H.boundingBox))return i;if(H instanceof D.BufferGeometry){if(void 0===(R=e.material))return i;if(!1===H.dynamic)return i;var n=t.precision;if(void 0!==H.attributes.index)for(var o=H.offsets,a=H.attributes.index.array,s=H.attributes.position.array,l=H.offsets.length,h=H.attributes.index.array.length/3,c=0;c<l;++c)for(var u=o[c].start,f=o[c].count,p=o[c].index,d=u,m=u+f;d<m;d+=3){if(g=p+a[d],E=p+a[d+1],v=p+a[d+2],V.set(s[3*g],s[3*g+1],s[3*g+2]),I.set(s[3*E],s[3*E+1],s[3*E+2]),N.set(s[3*v],s[3*v+1],s[3*v+2]),null!==(b=F.intersectTriangle(V,I,N,R.side!==D.DoubleSide)))b.applyMatrix4(e.matrixWorld),(r=t.ray.origin.distanceTo(b))<n||r<t.near||r>t.far||i.push({distance:r,point:b,face:null,faceIndex:null,object:e})}else for(o=H.offsets,s=H.attributes.position.array,l=H.offsets.length,h=H.attributes.position.array.length,d=0;d<h;d+=3){if(E=(g=d)+1,v=d+2,V.set(s[3*g],s[3*g+1],s[3*g+2]),I.set(s[3*E],s[3*E+1],s[3*E+2]),N.set(s[3*v],s[3*v+1],s[3*v+2]),null!==(b=F.intersectTriangle(V,I,N,R.side!==D.DoubleSide)))b.applyMatrix4(e.matrixWorld),(r=t.ray.origin.distanceTo(b))<n||r<t.near||r>t.far||i.push({distance:r,point:b,face:null,faceIndex:null,object:e})}}else if(H instanceof D.Geometry){var g,E,v,y=e.material instanceof D.MeshFaceMaterial,T=!0===y?e.material.materials:null,_=(n=t.precision,H.vertices),x=0;for(h=H.faces.length;x<h;x++){var R,b,w=H.faces[x];if(void 0!==(R=!0===y?T[w.materialIndex]:e.material))if(g=_[w.a],E=_[w.b],v=_[w.c],null!==(b=F.intersectTriangle(g,E,v,R.side!==D.DoubleSide)))b.applyMatrix4(e.matrixWorld),(r=t.ray.origin.distanceTo(b))<n||r<t.near||r>t.far||i.push({distance:r,point:b,face:w,faceIndex:x,object:e})}}}else if(e instanceof D.Line){var H,S=(n=t.linePrecision)*n;if(null===(H=e.geometry).boundingSphere&&H.computeBoundingSphere(),L.copy(H.boundingSphere),L.applyMatrix4(e.matrixWorld),!1===t.ray.isIntersectionSphere(L))return i;if(k.getInverse(e.matrixWorld),F.copy(t.ray).applyMatrix4(k),H instanceof D.Geometry){var M=(_=H.vertices).length,C=new D.Vector3,A=new D.Vector3,P=e.type===D.LineStrip?1:2;for(d=0;d<M-1;d+=P){if(!(S<F.distanceSqToSegment(_[d],_[d+1],A,C)))(r=F.origin.distanceTo(A))<t.near||r>t.far||i.push({distance:r,point:C.clone().applyMatrix4(e.matrixWorld),face:null,faceIndex:null,object:e})}}}},a=function(e,t,i){for(var r=e.getDescendants(),n=0,o=r.length;n<o;n++)U(r[n],t,i)};D.Raycaster.prototype.precision=1e-4,D.Raycaster.prototype.linePrecision=1,D.Raycaster.prototype.set=function(e,t){this.ray.set(e,t)},D.Raycaster.prototype.intersectObject=function(e,t){var i=[];return!0===t&&a(e,this,i),U(e,this,i),i.sort(o),i},D.Raycaster.prototype.intersectObjects=function(e,t){for(var i=[],r=0,n=e.length;r<n;r++)U(e[r],this,i),!0===t&&a(e[r],this,i);return i.sort(o),i}}(THREE),THREE.Object3D=function(){this.id=THREE.Object3DIdCount++,this.uuid=THREE.Math.generateUUID(),this.name="",this.parent=void 0,this.children=[],this.up=new THREE.Vector3(0,1,0),this.position=new THREE.Vector3,this.rotation=new THREE.Euler,this.quaternion=new THREE.Quaternion,this.scale=new THREE.Vector3(1,1,1),this.rotation._quaternion=this.quaternion,this.quaternion._euler=this.rotation,this.renderDepth=null,this.rotationAutoUpdate=!0,this.matrix=new THREE.Matrix4,this.matrixWorld=new THREE.Matrix4,this.matrixAutoUpdate=!0,this.matrixWorldNeedsUpdate=!0,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.userData={}},THREE.Object3D.prototype={constructor:THREE.Object3D,get eulerOrder(){return console.warn("DEPRECATED: Object3D's .eulerOrder has been moved to Object3D's .rotation.order."),this.rotation.order},set eulerOrder(e){console.warn("DEPRECATED: Object3D's .eulerOrder has been moved to Object3D's .rotation.order."),this.rotation.order=e},get useQuaternion(){console.warn("DEPRECATED: Object3D's .useQuaternion has been removed. The library now uses quaternions by default.")},set useQuaternion(e){console.warn("DEPRECATED: Object3D's .useQuaternion has been removed. The library now uses quaternions by default.")},applyMatrix:function(){var t=new THREE.Matrix4;return function(e){this.matrix.multiplyMatrices(e,this.matrix),this.position.getPositionFromMatrix(this.matrix),this.scale.getScaleFromMatrix(this.matrix),t.extractRotation(this.matrix),this.quaternion.setFromRotationMatrix(t)}}(),setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var i=new THREE.Quaternion;return function(e,t){return i.setFromAxisAngle(e,t),this.quaternion.multiply(i),this}}(),rotateX:function(){var t=new THREE.Vector3(1,0,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateY:function(){var t=new THREE.Vector3(0,1,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateZ:function(){var t=new THREE.Vector3(0,0,1);return function(e){return this.rotateOnAxis(t,e)}}(),translateOnAxis:function(){var i=new THREE.Vector3;return function(e,t){return i.copy(e),i.applyQuaternion(this.quaternion),this.position.add(i.multiplyScalar(t)),this}}(),translate:function(e,t){return console.warn("DEPRECATED: Object3D's .translate() has been removed. Use .translateOnAxis( axis, distance ) instead. Note args have been changed."),this.translateOnAxis(t,e)},translateX:function(){var t=new THREE.Vector3(1,0,0);return function(e){return this.translateOnAxis(t,e)}}(),translateY:function(){var t=new THREE.Vector3(0,1,0);return function(e){return this.translateOnAxis(t,e)}}(),translateZ:function(){var t=new THREE.Vector3(0,0,1);return function(e){return this.translateOnAxis(t,e)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var t=new THREE.Matrix4;return function(e){return e.applyMatrix4(t.getInverse(this.matrixWorld))}}(),lookAt:function(){var t=new THREE.Matrix4;return function(e){t.lookAt(e,this.position,this.up),this.quaternion.setFromRotationMatrix(t)}}(),add:function(e){if(e!==this){if(e instanceof THREE.Object3D){void 0!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e);for(var t=this;void 0!==t.parent;)t=t.parent;void 0!==t&&t instanceof THREE.Scene&&t.__addObject(e)}}else console.warn("THREE.Object3D.add: An object can't be added as a child of itself.")},remove:function(e){var t=this.children.indexOf(e);if(-1!==t){e.parent=void 0,e.dispatchEvent({type:"removed"}),this.children.splice(t,1);for(var i=this;void 0!==i.parent;)i=i.parent;void 0!==i&&i instanceof THREE.Scene&&i.__removeObject(e)}},traverse:function(e){e(this);for(var t=0,i=this.children.length;t<i;t++)this.children[t].traverse(e)},getObjectById:function(e,t){for(var i=0,r=this.children.length;i<r;i++){var n=this.children[i];if(n.id===e)return n;if(!0===t&&void 0!==(n=n.getObjectById(e,t)))return n}},getObjectByName:function(e,t){for(var i=0,r=this.children.length;i<r;i++){var n=this.children[i];if(n.name===e)return n;if(!0===t&&void 0!==(n=n.getObjectByName(e,t)))return n}},getChildByName:function(e,t){return console.warn("DEPRECATED: Object3D's .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e,t)},getDescendants:function(e){void 0===e&&(e=[]),Array.prototype.push.apply(e,this.children);for(var t=0,i=this.children.length;t<i;t++)this.children[t].getDescendants(e);return e},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){!0===this.matrixAutoUpdate&&this.updateMatrix(),!0!==this.matrixWorldNeedsUpdate&&!0!==e||(void 0===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),e=!(this.matrixWorldNeedsUpdate=!1));for(var t=0,i=this.children.length;t<i;t++)this.children[t].updateMatrixWorld(e)},clone:function(e,t){if(void 0===e&&(e=new THREE.Object3D),void 0===t&&(t=!0),e.name=this.name,e.up.copy(this.up),e.position.copy(this.position),e.quaternion.copy(this.quaternion),e.scale.copy(this.scale),e.renderDepth=this.renderDepth,e.rotationAutoUpdate=this.rotationAutoUpdate,e.matrix.copy(this.matrix),e.matrixWorld.copy(this.matrixWorld),e.matrixAutoUpdate=this.matrixAutoUpdate,e.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate,e.visible=this.visible,e.castShadow=this.castShadow,e.receiveShadow=this.receiveShadow,e.frustumCulled=this.frustumCulled,e.userData=JSON.parse(JSON.stringify(this.userData)),!0===t)for(var i=0;i<this.children.length;i++){var r=this.children[i];e.add(r.clone())}return e}},THREE.EventDispatcher.prototype.apply(THREE.Object3D.prototype),THREE.Object3DIdCount=0,THREE.Projector=function(){var t,V,I,N,U,z,B,j,W,G,X,i=[],r=0,q=[],n=0,o=[],a=0,s=[],l=0,h=[],c=0,Y={objects:[],sprites:[],lights:[],elements:[]},u=new THREE.Vector3,K=new THREE.Vector4,Q=new THREE.Box3(new THREE.Vector3(-1,-1,-1),new THREE.Vector3(1,1,1)),Z=new THREE.Box3,$=new Array(3),J=(new Array(4),new THREE.Matrix4),ee=new THREE.Matrix4,te=new THREE.Matrix4,ie=new THREE.Matrix3,re=new THREE.Matrix3,ne=new THREE.Vector3,oe=new THREE.Frustum,ae=new THREE.Vector4,se=new THREE.Vector4;this.projectVector=function(e,t){return t.matrixWorldInverse.getInverse(t.matrixWorld),ee.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),e.applyProjection(ee)},this.unprojectVector=function(e,t){return t.projectionMatrixInverse.getInverse(t.projectionMatrix),ee.multiplyMatrices(t.matrixWorld,t.projectionMatrixInverse),e.applyProjection(ee)},this.pickingRay=function(e,t){e.z=-1;var i=new THREE.Vector3(e.x,e.y,1);return this.unprojectVector(e,t),this.unprojectVector(i,t),i.sub(e).normalize(),new THREE.Raycaster(e,i)};var f=function(e){return(t=function(){if(V!==r)return i[V++];var e=new THREE.RenderableObject;return i.push(e),r++,V++,e}()).id=e.id,null!==(t.object=e).renderDepth?t.z=e.renderDepth:(u.getPositionFromMatrix(e.matrixWorld),u.applyProjection(ee),t.z=u.z),t},le=function(e){if(!1!==e.visible){e instanceof THREE.Light?Y.lights.push(e):e instanceof THREE.Mesh||e instanceof THREE.Line?!1!==e.frustumCulled&&!0!==oe.intersectsObject(e)||Y.objects.push(f(e)):(e instanceof THREE.Sprite||e instanceof THREE.Particle)&&Y.sprites.push(f(e));for(var t=0,i=e.children.length;t<i;t++)le(e.children[t])}};function he(){if(N!==n)return q[N++];var e=new THREE.RenderableVertex;return q.push(e),n++,N++,e}function ce(){if(z!==a)return o[z++];var e=new THREE.RenderableFace3;return o.push(e),a++,z++,e}function ue(){if(j!==l)return s[j++];var e=new THREE.RenderableLine;return s.push(e),l++,j++,e}function fe(){if(G!==c)return h[G++];var e=new THREE.RenderableParticle;return h.push(e),c++,G++,e}function pe(e,t){return e.z!==t.z?t.z-e.z:e.id!==t.id?e.id-t.id:0}function de(e,t){var i=0,r=1,n=e.z+e.w,o=t.z+t.w,a=-e.z+e.w,s=-t.z+t.w;return 0<=n&&0<=o&&0<=a&&0<=s||!(n<0&&o<0||a<0&&s<0)&&(n<0?i=Math.max(i,n/(n-o)):o<0&&(r=Math.min(r,n/(n-o))),a<0?i=Math.max(i,a/(a-s)):s<0&&(r=Math.min(r,a/(a-s))),!(r<i)&&(e.lerp(t,i),t.lerp(e,1-r),!0))}this.projectScene=function(e,t,i,r){var n,o,a,s,l,h,c,u,f,p,d,m,g,E,v,y,T,_,x,R,b,w,H,S,M,C,A,P=!1;for(G=j=z=0,!(Y.elements.length=0)===e.autoUpdate&&e.updateMatrixWorld(),void 0===t.parent&&t.updateMatrixWorld(),J.copy(t.matrixWorldInverse.getInverse(t.matrixWorld)),ee.multiplyMatrices(t.projectionMatrix,J),re.getNormalMatrix(J),oe.setFromMatrix(ee),C=e,A=i,V=0,Y.objects.length=0,Y.sprites.length=0,Y.lights.length=0,le(C),!0===A&&Y.objects.sort(pe),n=0,o=Y.objects.length;n<o;n++)if(g=Y.objects[n].object,X=g.matrixWorld,N=0,g instanceof THREE.Mesh){for(v=(E=g.geometry).vertices,y=E.faces,x=E.faceVertexUvs,ie.getNormalMatrix(X),M=!0===(S=g.material instanceof THREE.MeshFaceMaterial)?g.material:null,a=0,s=v.length;a<s;a++){(I=he()).positionWorld.copy(v[a]).applyMatrix4(X),I.positionScreen.copy(I.positionWorld).applyMatrix4(ee);var D=1/I.positionScreen.w;I.positionScreen.x*=D,I.positionScreen.y*=D,I.positionScreen.z*=D,I.visible=!(I.positionScreen.x<-1||1<I.positionScreen.x||I.positionScreen.y<-1||1<I.positionScreen.y||I.positionScreen.z<-1||1<I.positionScreen.z)}for(l=0,h=y.length;l<h;l++){T=y[l];var L=!0===S?M.materials[T.materialIndex]:g.material;if(void 0!==L){var F=L.side;if(b=q[T.a],w=q[T.b],H=q[T.c],$[0]=b.positionScreen,$[1]=w.positionScreen,$[2]=H.positionScreen,(!0===b.visible||!0===w.visible||!0===H.visible||Q.isIntersectionBox(Z.setFromPoints($)))&&(P=(H.positionScreen.x-b.positionScreen.x)*(w.positionScreen.y-b.positionScreen.y)-(H.positionScreen.y-b.positionScreen.y)*(w.positionScreen.x-b.positionScreen.x)<0,F===THREE.DoubleSide||P===(F===THREE.FrontSide))){for((U=ce()).id=g.id,U.v1.copy(b),U.v2.copy(w),U.v3.copy(H),U.normalModel.copy(T.normal),!1!==P||F!==THREE.BackSide&&F!==THREE.DoubleSide||U.normalModel.negate(),U.normalModel.applyMatrix3(ie).normalize(),U.normalModelView.copy(U.normalModel).applyMatrix3(re),U.centroidModel.copy(T.centroid).applyMatrix4(X),_=T.vertexNormals,c=0,u=Math.min(_.length,3);c<u;c++){var O=U.vertexNormalsModel[c];O.copy(_[c]),!1!==P||F!==THREE.BackSide&&F!==THREE.DoubleSide||O.negate(),O.applyMatrix3(ie).normalize(),U.vertexNormalsModelView[c].copy(O).applyMatrix3(re)}for(U.vertexNormalsLength=_.length,f=0,p=Math.min(x.length,3);f<p;f++)if(void 0!==(R=x[f][l]))for(d=0,m=R.length;d<m;d++)U.uvs[f][d]=R[d];U.color=T.color,U.material=L,ne.copy(U.centroidModel).applyProjection(ee),U.z=ne.z,Y.elements.push(U)}}}}else if(g instanceof THREE.Line){te.multiplyMatrices(ee,X),v=g.geometry.vertices,(b=he()).positionScreen.copy(v[0]).applyMatrix4(te);var k=g.type===THREE.LinePieces?2:1;for(a=1,s=v.length;a<s;a++)(b=he()).positionScreen.copy(v[a]).applyMatrix4(te),0<(a+1)%k||(w=q[N-2],ae.copy(b.positionScreen),se.copy(w.positionScreen),!0===de(ae,se)&&(ae.multiplyScalar(1/ae.w),se.multiplyScalar(1/se.w),(B=ue()).id=g.id,B.v1.positionScreen.copy(ae),B.v2.positionScreen.copy(se),B.z=Math.max(ae.z,se.z),B.material=g.material,g.material.vertexColors===THREE.VertexColors&&(B.vertexColors[0].copy(g.geometry.colors[a]),B.vertexColors[1].copy(g.geometry.colors[a-1])),Y.elements.push(B)))}for(n=0,o=Y.sprites.length;n<o;n++)if(g=Y.sprites[n].object,X=g.matrixWorld,g instanceof THREE.Particle){K.set(X.elements[12],X.elements[13],X.elements[14],1),K.applyMatrix4(ee);D=1/K.w;K.z*=D,0<K.z&&K.z<1&&((W=fe()).id=g.id,W.x=K.x*D,W.y=K.y*D,W.z=K.z,W.object=g,W.rotation=g.rotation.z,W.scale.x=g.scale.x*Math.abs(W.x-(K.x+t.projectionMatrix.elements[0])/(K.w+t.projectionMatrix.elements[12])),W.scale.y=g.scale.y*Math.abs(W.y-(K.y+t.projectionMatrix.elements[5])/(K.w+t.projectionMatrix.elements[13])),W.material=g.material,Y.elements.push(W))}return!0===r&&Y.elements.sort(pe),Y}},THREE.Face3=function(e,t,i,r,n,o){this.a=e,this.b=t,this.c=i,this.normal=r instanceof THREE.Vector3?r:new THREE.Vector3,this.vertexNormals=r instanceof Array?r:[],this.color=n instanceof THREE.Color?n:new THREE.Color,this.vertexColors=n instanceof Array?n:[],this.vertexTangents=[],this.materialIndex=void 0!==o?o:0,this.centroid=new THREE.Vector3},THREE.Face3.prototype={constructor:THREE.Face3,clone:function(){var e,t,i=new THREE.Face3(this.a,this.b,this.c);for(i.normal.copy(this.normal),i.color.copy(this.color),i.centroid.copy(this.centroid),i.materialIndex=this.materialIndex,e=0,t=this.vertexNormals.length;e<t;e++)i.vertexNormals[e]=this.vertexNormals[e].clone();for(e=0,t=this.vertexColors.length;e<t;e++)i.vertexColors[e]=this.vertexColors[e].clone();for(e=0,t=this.vertexTangents.length;e<t;e++)i.vertexTangents[e]=this.vertexTangents[e].clone();return i}},THREE.Face4=function(e,t,i,r,n,o,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new THREE.Face3(e,t,i,n,o,a)},THREE.Geometry=function(){this.id=THREE.GeometryIdCount++,this.uuid=THREE.Math.generateUUID(),this.name="",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphColors=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.hasTangents=!1,this.dynamic=!0,this.verticesNeedUpdate=!1,this.elementsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.tangentsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.buffersNeedUpdate=!1},THREE.Geometry.prototype={constructor:THREE.Geometry,applyMatrix:function(e){for(var t=(new THREE.Matrix3).getNormalMatrix(e),i=0,r=this.vertices.length;i<r;i++){this.vertices[i].applyMatrix4(e)}for(i=0,r=this.faces.length;i<r;i++){var n=this.faces[i];n.normal.applyMatrix3(t).normalize();for(var o=0,a=n.vertexNormals.length;o<a;o++)n.vertexNormals[o].applyMatrix3(t).normalize();n.centroid.applyMatrix4(e)}this.boundingBox instanceof THREE.Box3&&this.computeBoundingBox(),this.boundingSphere instanceof THREE.Sphere&&this.computeBoundingSphere()},computeCentroids:function(){var e,t,i;for(e=0,t=this.faces.length;e<t;e++)(i=this.faces[e]).centroid.set(0,0,0),i.centroid.add(this.vertices[i.a]),i.centroid.add(this.vertices[i.b]),i.centroid.add(this.vertices[i.c]),i.centroid.divideScalar(3)},computeFaceNormals:function(){for(var e=new THREE.Vector3,t=new THREE.Vector3,i=0,r=this.faces.length;i<r;i++){var n=this.faces[i],o=this.vertices[n.a],a=this.vertices[n.b],s=this.vertices[n.c];e.subVectors(s,a),t.subVectors(o,a),e.cross(t),e.normalize(),n.normal.copy(e)}},computeVertexNormals:function(e){var t,i,r,n,o,a;if(void 0===this.__tmpVertices){for(this.__tmpVertices=new Array(this.vertices.length),a=this.__tmpVertices,t=0,i=this.vertices.length;t<i;t++)a[t]=new THREE.Vector3;for(r=0,n=this.faces.length;r<n;r++)(o=this.faces[r]).vertexNormals=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3]}else for(a=this.__tmpVertices,t=0,i=this.vertices.length;t<i;t++)a[t].set(0,0,0);if(e){var s,l,h,c=new THREE.Vector3,u=new THREE.Vector3;new THREE.Vector3,new THREE.Vector3,new THREE.Vector3;for(r=0,n=this.faces.length;r<n;r++)o=this.faces[r],s=this.vertices[o.a],l=this.vertices[o.b],h=this.vertices[o.c],c.subVectors(h,l),u.subVectors(s,l),c.cross(u),a[o.a].add(c),a[o.b].add(c),a[o.c].add(c)}else for(r=0,n=this.faces.length;r<n;r++)a[(o=this.faces[r]).a].add(o.normal),a[o.b].add(o.normal),a[o.c].add(o.normal);for(t=0,i=this.vertices.length;t<i;t++)a[t].normalize();for(r=0,n=this.faces.length;r<n;r++)(o=this.faces[r]).vertexNormals[0].copy(a[o.a]),o.vertexNormals[1].copy(a[o.b]),o.vertexNormals[2].copy(a[o.c])},computeMorphNormals:function(){var e,t,i,r,n;for(i=0,r=this.faces.length;i<r;i++)for((n=this.faces[i]).__originalFaceNormal?n.__originalFaceNormal.copy(n.normal):n.__originalFaceNormal=n.normal.clone(),n.__originalVertexNormals||(n.__originalVertexNormals=[]),e=0,t=n.vertexNormals.length;e<t;e++)n.__originalVertexNormals[e]?n.__originalVertexNormals[e].copy(n.vertexNormals[e]):n.__originalVertexNormals[e]=n.vertexNormals[e].clone();var o=new THREE.Geometry;for(o.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var a=this.morphNormals[e].faceNormals,s=this.morphNormals[e].vertexNormals;for(i=0,r=this.faces.length;i<r;i++)n=this.faces[i],l=new THREE.Vector3,h={a:new THREE.Vector3,b:new THREE.Vector3,c:new THREE.Vector3},a.push(l),s.push(h)}var l,h,c=this.morphNormals[e];for(o.vertices=this.morphTargets[e].vertices,o.computeFaceNormals(),o.computeVertexNormals(),i=0,r=this.faces.length;i<r;i++)n=this.faces[i],l=c.faceNormals[i],h=c.vertexNormals[i],l.copy(n.normal),h.a.copy(n.vertexNormals[0]),h.b.copy(n.vertexNormals[1]),h.c.copy(n.vertexNormals[2])}for(i=0,r=this.faces.length;i<r;i++)(n=this.faces[i]).normal=n.__originalFaceNormal,n.vertexNormals=n.__originalVertexNormals},computeTangents:function(){var e,t,i,r,n,o,a,s,l,h,c,u,f,p,d,m,g,E,v,y,T,_,x,R,b,w,H,S,M,C,A,P,D,L,F=[],O=[],k=new THREE.Vector3,V=new THREE.Vector3,I=new THREE.Vector3,N=new THREE.Vector3,U=new THREE.Vector3;for(i=0,r=this.vertices.length;i<r;i++)F[i]=new THREE.Vector3,O[i]=new THREE.Vector3;for(e=0,t=this.faces.length;e<t;e++)a=this.faces[e],s=this.faceVertexUvs[0][e],S=this,M=a.a,C=a.b,A=a.c,P=0,D=1,L=2,l=S.vertices[M],h=S.vertices[C],c=S.vertices[A],u=s[P],f=s[D],p=s[L],d=h.x-l.x,m=c.x-l.x,g=h.y-l.y,E=c.y-l.y,v=h.z-l.z,y=c.z-l.z,T=f.x-u.x,_=p.x-u.x,x=f.y-u.y,R=p.y-u.y,b=1/(T*R-_*x),k.set((R*d-x*m)*b,(R*g-x*E)*b,(R*v-x*y)*b),V.set((T*m-_*d)*b,(T*E-_*g)*b,(T*y-_*v)*b),F[M].add(k),F[C].add(k),F[A].add(k),O[M].add(V),O[C].add(V),O[A].add(V);var z=["a","b","c","d"];for(e=0,t=this.faces.length;e<t;e++)for(a=this.faces[e],n=0;n<Math.min(a.vertexNormals.length,3);n++)U.copy(a.vertexNormals[n]),o=a[z[n]],w=F[o],I.copy(w),I.sub(U.multiplyScalar(U.dot(w))).normalize(),N.crossVectors(a.vertexNormals[n],w),H=N.dot(O[o])<0?-1:1,a.vertexTangents[n]=new THREE.Vector4(I.x,I.y,I.z,H);this.hasTangents=!0},computeLineDistances:function(){for(var e=0,t=this.vertices,i=0,r=t.length;i<r;i++)0<i&&(e+=t[i].distanceTo(t[i-1])),this.lineDistances[i]=e},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere),this.boundingSphere.setFromPoints(this.vertices)},mergeVertices:function(){var e,t,i,r,n,o,a,s,l={},h=[],c=[],u=Math.pow(10,4);for(this.__tmpVertices=void 0,i=0,r=this.vertices.length;i<r;i++)e=this.vertices[i],void 0===l[t=Math.round(e.x*u)+"_"+Math.round(e.y*u)+"_"+Math.round(e.z*u)]?(l[t]=i,h.push(this.vertices[i]),c[i]=h.length-1):c[i]=c[l[t]];var f=[];for(i=0,r=this.faces.length;i<r;i++){(n=this.faces[i]).a=c[n.a],n.b=c[n.b],n.c=c[n.c],o=[n.a,n.b,n.c];for(var p=0;p<3;p++)if(o[p]==o[(p+1)%3]){p,f.push(i);break}}for(i=f.length-1;0<=i;i--){var d=f[i];for(this.faces.splice(d,1),a=0,s=this.faceVertexUvs.length;a<s;a++)this.faceVertexUvs[a].splice(d,1)}var m=this.vertices.length-h.length;return this.vertices=h,m},clone:function(){for(var e=new THREE.Geometry,t=this.vertices,i=0,r=t.length;i<r;i++)e.vertices.push(t[i].clone());var n=this.faces;for(i=0,r=n.length;i<r;i++)e.faces.push(n[i].clone());var o=this.faceVertexUvs[0];for(i=0,r=o.length;i<r;i++){for(var a=o[i],s=[],l=0,h=a.length;l<h;l++)s.push(new THREE.Vector2(a[l].x,a[l].y));e.faceVertexUvs[0].push(s)}return e},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.Geometry.prototype),THREE.GeometryIdCount=0,THREE.BufferGeometry=function(){this.id=THREE.GeometryIdCount++,this.uuid=THREE.Math.generateUUID(),this.name="",this.attributes={},this.dynamic=!0,this.offsets=[],this.boundingBox=null,this.boundingSphere=null,this.hasTangents=!1,this.morphTargets=[]},THREE.BufferGeometry.prototype={constructor:THREE.BufferGeometry,applyMatrix:function(e){var t,i;(this.attributes.position&&(t=this.attributes.position.array),this.attributes.normal&&(i=this.attributes.normal.array),void 0!==t&&(e.multiplyVector3Array(t),this.verticesNeedUpdate=!0),void 0!==i)&&((new THREE.Matrix3).getNormalMatrix(e).multiplyVector3Array(i),this.normalizeNormals(),this.normalsNeedUpdate=!0)},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);var e=this.attributes.position.array;if(e){var t,i,r,n=this.boundingBox;3<=e.length&&(n.min.x=n.max.x=e[0],n.min.y=n.max.y=e[1],n.min.z=n.max.z=e[2]);for(var o=3,a=e.length;o<a;o+=3)t=e[o],i=e[o+1],r=e[o+2],t<n.min.x?n.min.x=t:t>n.max.x&&(n.max.x=t),i<n.min.y?n.min.y=i:i>n.max.y&&(n.max.y=i),r<n.min.z?n.min.z=r:r>n.max.z&&(n.max.z=r)}void 0!==e&&0!==e.length||(this.boundingBox.min.set(0,0,0),this.boundingBox.max.set(0,0,0))},computeBoundingSphere:function(){var o=new THREE.Box3,a=new THREE.Vector3;return function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);var e=this.attributes.position.array;if(e){for(var t=this.boundingSphere.center,i=0,r=e.length;i<r;i+=3)a.set(e[i],e[i+1],e[i+2]),o.addPoint(a);o.center(t);var n=0;for(i=0,r=e.length;i<r;i+=3)a.set(e[i],e[i+1],e[i+2]),n=Math.max(n,t.distanceToSquared(a));this.boundingSphere.radius=Math.sqrt(n)}}}(),computeVertexNormals:function(){if(this.attributes.position){var e,t,i,r,n=this.attributes.position.array.length;if(void 0===this.attributes.normal)this.attributes.normal={itemSize:3,array:new Float32Array(n)};else for(e=0,t=this.attributes.normal.array.length;e<t;e++)this.attributes.normal.array[e]=0;var o,a,s,l,h,c,u=this.attributes.position.array,f=this.attributes.normal.array,p=new THREE.Vector3,d=new THREE.Vector3,m=new THREE.Vector3,g=new THREE.Vector3,E=new THREE.Vector3;if(this.attributes.index){var v=this.attributes.index.array,y=this.offsets;for(i=0,r=y.length;i<r;++i){var T=y[i].start,_=y[i].count,x=y[i].index;for(t=(e=T)+_;e<t;e+=3)o=x+v[e],a=x+v[e+1],s=x+v[e+2],l=u[3*o],h=u[3*o+1],c=u[3*o+2],p.set(l,h,c),l=u[3*a],h=u[3*a+1],c=u[3*a+2],d.set(l,h,c),l=u[3*s],h=u[3*s+1],c=u[3*s+2],m.set(l,h,c),g.subVectors(m,d),E.subVectors(p,d),g.cross(E),f[3*o]+=g.x,f[3*o+1]+=g.y,f[3*o+2]+=g.z,f[3*a]+=g.x,f[3*a+1]+=g.y,f[3*a+2]+=g.z,f[3*s]+=g.x,f[3*s+1]+=g.y,f[3*s+2]+=g.z}}else for(e=0,t=u.length;e<t;e+=9)l=u[e],h=u[e+1],c=u[e+2],p.set(l,h,c),l=u[e+3],h=u[e+4],c=u[e+5],d.set(l,h,c),l=u[e+6],h=u[e+7],c=u[e+8],m.set(l,h,c),g.subVectors(m,d),E.subVectors(p,d),g.cross(E),f[e]=g.x,f[e+1]=g.y,f[e+2]=g.z,f[e+3]=g.x,f[e+4]=g.y,f[e+5]=g.z,f[e+6]=g.x,f[e+7]=g.y,f[e+8]=g.z;this.normalizeNormals(),this.normalsNeedUpdate=!0}},normalizeNormals:function(){for(var e,t,i,r,n=this.attributes.normal.array,o=0,a=n.length;o<a;o+=3)e=n[o],t=n[o+1],i=n[o+2],r=1/Math.sqrt(e*e+t*t+i*i),n[o]*=r,n[o+1]*=r,n[o+2]*=r},computeTangents:function(){if(void 0!==this.attributes.index&&void 0!==this.attributes.position&&void 0!==this.attributes.normal&&void 0!==this.attributes.uv){var e=this.attributes.index.array,t=this.attributes.position.array,i=this.attributes.normal.array,r=this.attributes.uv.array,n=t.length/3;if(void 0===this.attributes.tangent){var o=4*n;this.attributes.tangent={itemSize:4,array:new Float32Array(o)}}for(var a,s,l,h,c,u,f,p,d,m,g,E,v,y,T,_,x,R,b,w,H,S,M,C,A,P,D=this.attributes.tangent.array,L=[],F=[],O=0;O<n;O++)L[O]=new THREE.Vector3,F[O]=new THREE.Vector3;var k,V,I,N,U,z,B,j,W,G,X=new THREE.Vector3,q=new THREE.Vector3,Y=this.offsets;for(I=0,N=Y.length;I<N;++I){var K=Y[I].start,Q=Y[I].count,Z=Y[I].index;for(V=(k=K)+Q;k<V;k+=3)U=Z+e[k],z=Z+e[k+1],B=Z+e[k+2],W=z,G=B,a=t[3*(j=U)],s=t[3*j+1],l=t[3*j+2],h=t[3*W],c=t[3*W+1],u=t[3*W+2],f=t[3*G],p=t[3*G+1],d=t[3*G+2],m=r[2*j],g=r[2*j+1],E=r[2*W],v=r[2*W+1],y=r[2*G],T=r[2*G+1],_=h-a,x=f-a,R=c-s,b=p-s,w=u-l,H=d-l,P=1/((S=E-m)*(A=T-g)-(M=y-m)*(C=v-g)),X.set((A*_-C*x)*P,(A*R-C*b)*P,(A*w-C*H)*P),q.set((S*x-M*_)*P,(S*b-M*R)*P,(S*H-M*w)*P),L[j].add(X),L[W].add(X),L[G].add(X),F[j].add(q),F[W].add(q),F[G].add(q)}var $,J,ee,te=new THREE.Vector3,ie=new THREE.Vector3,re=new THREE.Vector3,ne=new THREE.Vector3;for(I=0,N=Y.length;I<N;++I){K=Y[I].start,Q=Y[I].count,Z=Y[I].index;for(V=(k=K)+Q;k<V;k+=3)U=Z+e[k],z=Z+e[k+1],B=Z+e[k+2],oe(U),oe(z),oe(B)}this.hasTangents=!0,this.tangentsNeedUpdate=!0}else console.warn("Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");function oe(e){re.x=i[3*e],re.y=i[3*e+1],re.z=i[3*e+2],ne.copy(re),J=L[e],te.copy(J),te.sub(re.multiplyScalar(re.dot(J))).normalize(),ie.crossVectors(ne,J),ee=ie.dot(F[e]),$=ee<0?-1:1,D[4*e]=te.x,D[4*e+1]=te.y,D[4*e+2]=te.z,D[4*e+3]=$}},clone:function(){var e=new THREE.BufferGeometry,t=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];for(var i in this.attributes){for(var r=this.attributes[i],n=r.array,o={itemSize:r.itemSize,numItems:r.numItems,array:null},a=0,s=t.length;a<s;a++){var l=t[a];if(n instanceof l){o.array=new l(n);break}}e.attributes[i]=o}for(a=0,s=this.offsets.length;a<s;a++){var h=this.offsets[a];e.offsets.push({start:h.start,index:h.index,count:h.count})}return e},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.BufferGeometry.prototype),THREE.Camera=function(){THREE.Object3D.call(this),this.matrixWorldInverse=new THREE.Matrix4,this.projectionMatrix=new THREE.Matrix4,this.projectionMatrixInverse=new THREE.Matrix4},THREE.Camera.prototype=Object.create(THREE.Object3D.prototype),THREE.Camera.prototype.lookAt=function(){var t=new THREE.Matrix4;return function(e){t.lookAt(this.position,e,this.up),this.quaternion.setFromRotationMatrix(t)}}(),THREE.Camera.prototype.clone=function(e){return void 0===e&&(e=new THREE.Camera),THREE.Object3D.prototype.clone.call(this,e),e.matrixWorldInverse.copy(this.matrixWorldInverse),e.projectionMatrix.copy(this.projectionMatrix),e.projectionMatrixInverse.copy(this.projectionMatrixInverse),e},THREE.OrthographicCamera=function(e,t,i,r,n,o){THREE.Camera.call(this),this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=void 0!==n?n:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()},THREE.OrthographicCamera.prototype=Object.create(THREE.Camera.prototype),THREE.OrthographicCamera.prototype.updateProjectionMatrix=function(){this.projectionMatrix.makeOrthographic(this.left,this.right,this.top,this.bottom,this.near,this.far)},THREE.OrthographicCamera.prototype.clone=function(){var e=new THREE.OrthographicCamera;return THREE.Camera.prototype.clone.call(this,e),e.left=this.left,e.right=this.right,e.top=this.top,e.bottom=this.bottom,e.near=this.near,e.far=this.far,e},THREE.PerspectiveCamera=function(e,t,i,r){THREE.Camera.call(this),this.fov=void 0!==e?e:50,this.aspect=void 0!==t?t:1,this.near=void 0!==i?i:.1,this.far=void 0!==r?r:2e3,this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype=Object.create(THREE.Camera.prototype),THREE.PerspectiveCamera.prototype.setLens=function(e,t){void 0===t&&(t=24),this.fov=2*THREE.Math.radToDeg(Math.atan(t/(2*e))),this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype.setViewOffset=function(e,t,i,r,n,o){this.fullWidth=e,this.fullHeight=t,this.x=i,this.y=r,this.width=n,this.height=o,this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype.updateProjectionMatrix=function(){if(this.fullWidth){var e=this.fullWidth/this.fullHeight,t=Math.tan(THREE.Math.degToRad(.5*this.fov))*this.near,i=-t,r=e*i,n=e*t,o=Math.abs(n-r),a=Math.abs(t-i);this.projectionMatrix.makeFrustum(r+this.x*o/this.fullWidth,r+(this.x+this.width)*o/this.fullWidth,t-(this.y+this.height)*a/this.fullHeight,t-this.y*a/this.fullHeight,this.near,this.far)}else this.projectionMatrix.makePerspective(this.fov,this.aspect,this.near,this.far)},THREE.PerspectiveCamera.prototype.clone=function(){var e=new THREE.PerspectiveCamera;return THREE.Camera.prototype.clone.call(this,e),e.fov=this.fov,e.aspect=this.aspect,e.near=this.near,e.far=this.far,e},THREE.Light=function(e){THREE.Object3D.call(this),this.color=new THREE.Color(e)},THREE.Light.prototype=Object.create(THREE.Object3D.prototype),THREE.Light.prototype.clone=function(e){return void 0===e&&(e=new THREE.Light),THREE.Object3D.prototype.clone.call(this,e),e.color.copy(this.color),e},THREE.AmbientLight=function(e){THREE.Light.call(this,e)},THREE.AmbientLight.prototype=Object.create(THREE.Light.prototype),THREE.AmbientLight.prototype.clone=function(){var e=new THREE.AmbientLight;return THREE.Light.prototype.clone.call(this,e),e},THREE.AreaLight=function(e,t){THREE.Light.call(this,e),this.normal=new THREE.Vector3(0,-1,0),this.right=new THREE.Vector3(1,0,0),this.intensity=void 0!==t?t:1,this.width=1,this.height=1,this.constantAttenuation=1.5,this.linearAttenuation=.5,this.quadraticAttenuation=.1},THREE.AreaLight.prototype=Object.create(THREE.Light.prototype),THREE.DirectionalLight=function(e,t){THREE.Light.call(this,e),this.position.set(0,1,0),this.target=new THREE.Object3D,this.intensity=void 0!==t?t:1,this.castShadow=!1,this.onlyShadow=!1,this.shadowCameraNear=50,this.shadowCameraFar=5e3,this.shadowCameraLeft=-500,this.shadowCameraRight=500,this.shadowCameraTop=500,this.shadowCameraBottom=-500,this.shadowCameraVisible=!1,this.shadowBias=0,this.shadowDarkness=.5,this.shadowMapWidth=512,this.shadowMapHeight=512,this.shadowCascade=!1,this.shadowCascadeOffset=new THREE.Vector3(0,0,-1e3),this.shadowCascadeCount=2,this.shadowCascadeBias=[0,0,0],this.shadowCascadeWidth=[512,512,512],this.shadowCascadeHeight=[512,512,512],this.shadowCascadeNearZ=[-1,.99,.998],this.shadowCascadeFarZ=[.99,.998,1],this.shadowCascadeArray=[],this.shadowMap=null,this.shadowMapSize=null,this.shadowCamera=null,this.shadowMatrix=null},THREE.DirectionalLight.prototype=Object.create(THREE.Light.prototype),THREE.DirectionalLight.prototype.clone=function(){var e=new THREE.DirectionalLight;return THREE.Light.prototype.clone.call(this,e),e.target=this.target.clone(),e.intensity=this.intensity,e.castShadow=this.castShadow,e.onlyShadow=this.onlyShadow,e},THREE.HemisphereLight=function(e,t,i){THREE.Light.call(this,e),this.position.set(0,100,0),this.groundColor=new THREE.Color(t),this.intensity=void 0!==i?i:1},THREE.HemisphereLight.prototype=Object.create(THREE.Light.prototype),THREE.HemisphereLight.prototype.clone=function(){var e=new THREE.HemisphereLight;return THREE.Light.prototype.clone.call(this,e),e.groundColor.copy(this.groundColor),e.intensity=this.intensity,e},THREE.PointLight=function(e,t,i){THREE.Light.call(this,e),this.intensity=void 0!==t?t:1,this.distance=void 0!==i?i:0},THREE.PointLight.prototype=Object.create(THREE.Light.prototype),THREE.PointLight.prototype.clone=function(){var e=new THREE.PointLight;return THREE.Light.prototype.clone.call(this,e),e.intensity=this.intensity,e.distance=this.distance,e},THREE.SpotLight=function(e,t,i,r,n){THREE.Light.call(this,e),this.position.set(0,1,0),this.target=new THREE.Object3D,this.intensity=void 0!==t?t:1,this.distance=void 0!==i?i:0,this.angle=void 0!==r?r:Math.PI/3,this.exponent=void 0!==n?n:10,this.castShadow=!1,this.onlyShadow=!1,this.shadowCameraNear=50,this.shadowCameraFar=5e3,this.shadowCameraFov=50,this.shadowCameraVisible=!1,this.shadowBias=0,this.shadowDarkness=.5,this.shadowMapWidth=512,this.shadowMapHeight=512,this.shadowMap=null,this.shadowMapSize=null,this.shadowCamera=null,this.shadowMatrix=null},THREE.SpotLight.prototype=Object.create(THREE.Light.prototype),THREE.SpotLight.prototype.clone=function(){var e=new THREE.SpotLight;return THREE.Light.prototype.clone.call(this,e),e.target=this.target.clone(),e.intensity=this.intensity,e.distance=this.distance,e.angle=this.angle,e.exponent=this.exponent,e.castShadow=this.castShadow,e.onlyShadow=this.onlyShadow,e},THREE.Loader=function(e){this.showStatus=e,this.statusDomElement=e?THREE.Loader.prototype.addStatusElement():null,this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}},THREE.Loader.prototype={constructor:THREE.Loader,crossOrigin:"anonymous",addStatusElement:function(){var e=document.createElement("div");return e.style.position="absolute",e.style.right="0px",e.style.top="0px",e.style.fontSize="0.8em",e.style.textAlign="left",e.style.background="rgba(0,0,0,0.25)",e.style.color="#fff",e.style.width="120px",e.style.padding="0.5em 0.5em 0.5em 0.5em",e.style.zIndex=1e3,e.innerHTML="Loading ...",e},updateProgress:function(e){var t="Loaded ";e.total?t+=(100*e.loaded/e.total).toFixed(0)+"%":t+=(e.loaded/1e3).toFixed(2)+" KB",this.statusDomElement.innerHTML=t},extractUrlBase:function(e){var t=e.split("/");return t.pop(),(t.length<1?".":t.join("/"))+"/"},initMaterials:function(e,t){for(var i=[],r=0;r<e.length;++r)i[r]=THREE.Loader.prototype.createMaterial(e[r],t);return i},needsTangents:function(e){for(var t=0,i=e.length;t<i;t++){if(e[t]instanceof THREE.ShaderMaterial)return!0}return!1},createMaterial:function(e,d){var m=this;function g(e){var t=Math.log(e)/Math.LN2;return Math.floor(t)==t}function E(e){var t=Math.log(e)/Math.LN2;return Math.pow(2,Math.round(t))}function t(e,t,i,r,n,o,a){var s,l,h,c=/\.dds$/i.test(i),u=d+"/"+i;if(c){var f=THREE.ImageUtils.loadCompressedTexture(u);e[t]=f}else{f=document.createElement("canvas");e[t]=new THREE.Texture(f)}if(e[t].sourceFile=i,r&&(e[t].repeat.set(r[0],r[1]),1!==r[0]&&(e[t].wrapS=THREE.RepeatWrapping),1!==r[1]&&(e[t].wrapT=THREE.RepeatWrapping)),n&&e[t].offset.set(n[0],n[1]),o){var p={repeat:THREE.RepeatWrapping,mirror:THREE.MirroredRepeatWrapping};void 0!==p[o[0]]&&(e[t].wrapS=p[o[0]]),void 0!==p[o[1]]&&(e[t].wrapT=p[o[1]])}a&&(e[t].anisotropy=a),c||(s=e[t],l=u,(h=new Image).onload=function(){if(g(this.width)&&g(this.height))s.image=this;else{var e=E(this.width),t=E(this.height);s.image.width=e,s.image.height=t,s.image.getContext("2d").drawImage(this,0,0,e,t)}s.needsUpdate=!0},h.crossOrigin=m.crossOrigin,h.src=l)}function i(e){return(255*e[0]<<16)+(255*e[1]<<8)+255*e[2]}var r="MeshLambertMaterial",n={color:15658734,opacity:1,map:null,lightMap:null,normalMap:null,bumpMap:null,wireframe:!1};if(e.shading){var o=e.shading.toLowerCase();"phong"===o?r="MeshPhongMaterial":"basic"===o&&(r="MeshBasicMaterial")}if(void 0!==e.blending&&void 0!==THREE[e.blending]&&(n.blending=THREE[e.blending]),(void 0!==e.transparent||e.opacity<1)&&(n.transparent=e.transparent),void 0!==e.depthTest&&(n.depthTest=e.depthTest),void 0!==e.depthWrite&&(n.depthWrite=e.depthWrite),void 0!==e.visible&&(n.visible=e.visible),void 0!==e.flipSided&&(n.side=THREE.BackSide),void 0!==e.doubleSided&&(n.side=THREE.DoubleSide),void 0!==e.wireframe&&(n.wireframe=e.wireframe),void 0!==e.vertexColors&&("face"===e.vertexColors?n.vertexColors=THREE.FaceColors:e.vertexColors&&(n.vertexColors=THREE.VertexColors)),e.colorDiffuse?n.color=i(e.colorDiffuse):e.DbgColor&&(n.color=e.DbgColor),e.colorSpecular&&(n.specular=i(e.colorSpecular)),e.colorAmbient&&(n.ambient=i(e.colorAmbient)),e.transparency&&(n.opacity=e.transparency),e.specularCoef&&(n.shininess=e.specularCoef),e.mapDiffuse&&d&&t(n,"map",e.mapDiffuse,e.mapDiffuseRepeat,e.mapDiffuseOffset,e.mapDiffuseWrap,e.mapDiffuseAnisotropy),e.mapLight&&d&&t(n,"lightMap",e.mapLight,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy),e.mapBump&&d&&t(n,"bumpMap",e.mapBump,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy),e.mapNormal&&d&&t(n,"normalMap",e.mapNormal,e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy),e.mapSpecular&&d&&t(n,"specularMap",e.mapSpecular,e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy),e.mapBumpScale&&(n.bumpScale=e.mapBumpScale),e.mapNormal){var a=THREE.ShaderLib.normalmap,s=THREE.UniformsUtils.clone(a.uniforms);s.tNormal.value=n.normalMap,e.mapNormalFactor&&s.uNormalScale.value.set(e.mapNormalFactor,e.mapNormalFactor),n.map&&(s.tDiffuse.value=n.map,s.enableDiffuse.value=!0),n.specularMap&&(s.tSpecular.value=n.specularMap,s.enableSpecular.value=!0),n.lightMap&&(s.tAO.value=n.lightMap,s.enableAO.value=!0),s.uDiffuseColor.value.setHex(n.color),s.uSpecularColor.value.setHex(n.specular),s.uAmbientColor.value.setHex(n.ambient),s.uShininess.value=n.shininess,void 0!==n.opacity&&(s.uOpacity.value=n.opacity);var l={fragmentShader:a.fragmentShader,vertexShader:a.vertexShader,uniforms:s,lights:!0,fog:!0},h=new THREE.ShaderMaterial(l);n.transparent&&(h.transparent=!0)}else h=new THREE[r](n);return void 0!==e.DbgName&&(h.name=e.DbgName),h}},THREE.XHRLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.XHRLoader.prototype={constructor:THREE.XHRLoader,load:function(t,i,r,n){var o=this,e=new XMLHttpRequest;void 0!==i&&e.addEventListener("load",function(e){i(e.target.responseText),o.manager.itemEnd(t)},!1),void 0!==r&&e.addEventListener("progress",function(e){r(e)},!1),void 0!==n&&e.addEventListener("error",function(e){n(e)},!1),void 0!==this.crossOrigin&&(e.crossOrigin=this.crossOrigin),e.open("GET",t,!0),e.send(null),o.manager.itemStart(t)},setCrossOrigin:function(e){this.crossOrigin=e}},THREE.ImageLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.ImageLoader.prototype={constructor:THREE.ImageLoader,load:function(t,i,r,n){var o=this,e=document.createElement("img");return void 0!==i&&e.addEventListener("load",function(e){o.manager.itemEnd(t),i(this)},!1),void 0!==r&&e.addEventListener("progress",function(e){r(e)},!1),void 0!==n&&e.addEventListener("error",function(e){n(e)},!1),void 0!==this.crossOrigin&&(e.crossOrigin=this.crossOrigin),e.src=t,o.manager.itemStart(t),e},setCrossOrigin:function(e){this.crossOrigin=e}},THREE.JSONLoader=function(e){THREE.Loader.call(this,e),this.withCredentials=!1},THREE.JSONLoader.prototype=Object.create(THREE.Loader.prototype),THREE.JSONLoader.prototype.load=function(e,t,i){i=i&&"string"==typeof i?i:this.extractUrlBase(e),this.onLoadStart(),this.loadAjaxJSON(this,e,t,i)},THREE.JSONLoader.prototype.loadAjaxJSON=function(i,r,n,o,a){var s=new XMLHttpRequest,l=0;s.onreadystatechange=function(){if(s.readyState===s.DONE)if(200===s.status||0===s.status){if(s.responseText){var e=JSON.parse(s.responseText),t=i.parse(e,o);n(t.geometry,t.materials)}else console.warn("THREE.JSONLoader: ["+r+"] seems to be unreachable or file there is empty");i.onLoadComplete()}else console.error("THREE.JSONLoader: Couldn't load ["+r+"] ["+s.status+"]");else s.readyState===s.LOADING?a&&(0===l&&(l=s.getResponseHeader("Content-Length")),a({total:l,loaded:s.responseText.length})):s.readyState===s.HEADERS_RECEIVED&&void 0!==a&&(l=s.getResponseHeader("Content-Length"))},s.open("GET",r,!0),s.withCredentials=this.withCredentials,s.send(null)},THREE.JSONLoader.prototype.parse=function(F,e){var O=new THREE.Geometry,t=void 0!==F.scale?1/F.scale:1;if(function(e){function t(e,t){return e&1<<t}var i,r,n,o,a,s,l,h,c,u,f,p,d,m,g,E,v,y,T,_,x,R,b,w,H,S,M,C=F.faces,A=F.vertices,P=F.normals,D=F.colors,L=0;if(void 0!==F.uvs){for(i=0;i<F.uvs.length;i++)F.uvs[i].length&&L++;for(i=0;i<L;i++)O.faceVertexUvs[i]=[]}o=0,a=A.length;for(;o<a;)(y=new THREE.Vector3).x=A[o++]*e,y.y=A[o++]*e,y.z=A[o++]*e,O.vertices.push(y);o=0,a=C.length;for(;o<a;)if(u=C[o++],f=t(u,0),p=t(u,1),d=t(u,3),m=t(u,4),g=t(u,5),E=t(u,6),v=t(u,7),f){if((_=new THREE.Face3).a=C[o],_.b=C[o+1],_.c=C[o+3],(x=new THREE.Face3).a=C[o+1],x.b=C[o+2],x.c=C[o+3],o+=4,p&&(c=C[o++],_.materialIndex=c,x.materialIndex=c),n=O.faces.length,d)for(i=0;i<L;i++)for(w=F.uvs[i],O.faceVertexUvs[i][n]=[],O.faceVertexUvs[i][n+1]=[],r=0;r<4;r++)h=C[o++],S=w[2*h],M=w[2*h+1],H=new THREE.Vector2(S,M),2!==r&&O.faceVertexUvs[i][n].push(H),0!==r&&O.faceVertexUvs[i][n+1].push(H);if(m&&(l=3*C[o++],_.normal.set(P[l++],P[l++],P[l]),x.normal.copy(_.normal)),g)for(i=0;i<4;i++)l=3*C[o++],b=new THREE.Vector3(P[l++],P[l++],P[l]),2!==i&&_.vertexNormals.push(b),0!==i&&x.vertexNormals.push(b);if(E&&(s=C[o++],R=D[s],_.color.setHex(R),x.color.setHex(R)),v)for(i=0;i<4;i++)s=C[o++],R=D[s],2!==i&&_.vertexColors.push(new THREE.Color(R)),0!==i&&x.vertexColors.push(new THREE.Color(R));O.faces.push(_),O.faces.push(x)}else{if((T=new THREE.Face3).a=C[o++],T.b=C[o++],T.c=C[o++],p&&(c=C[o++],T.materialIndex=c),n=O.faces.length,d)for(i=0;i<L;i++)for(w=F.uvs[i],O.faceVertexUvs[i][n]=[],r=0;r<3;r++)h=C[o++],S=w[2*h],M=w[2*h+1],H=new THREE.Vector2(S,M),O.faceVertexUvs[i][n].push(H);if(m&&(l=3*C[o++],T.normal.set(P[l++],P[l++],P[l])),g)for(i=0;i<3;i++)l=3*C[o++],b=new THREE.Vector3(P[l++],P[l++],P[l]),T.vertexNormals.push(b);if(E&&(s=C[o++],T.color.setHex(D[s])),v)for(i=0;i<3;i++)s=C[o++],T.vertexColors.push(new THREE.Color(D[s]));O.faces.push(T)}}(t),function(){var e,t,i,r,n,o;if(F.skinWeights)for(e=0,t=F.skinWeights.length;e<t;e+=2)i=F.skinWeights[e],r=F.skinWeights[e+1],0,O.skinWeights.push(new THREE.Vector4(i,r,0,0));if(F.skinIndices)for(e=0,t=F.skinIndices.length;e<t;e+=2)n=F.skinIndices[e],o=F.skinIndices[e+1],0,O.skinIndices.push(new THREE.Vector4(n,o,0,0));O.bones=F.bones,O.animation=F.animation}(),function(e){var t,i,r,n,o,a,s,l,h,c,u;if(void 0!==F.morphTargets)for(o=0,a=F.morphTargets.length;o<a;o++)for(O.morphTargets[o]={},O.morphTargets[o].name=F.morphTargets[o].name,O.morphTargets[o].vertices=[],r=O.morphTargets[o].vertices,n=F.morphTargets[o].vertices,t=0,i=n.length;t<i;t+=3){var f=new THREE.Vector3;f.x=n[t]*e,f.y=n[t+1]*e,f.z=n[t+2]*e,r.push(f)}if(void 0!==F.morphColors)for(o=0,a=F.morphColors.length;o<a;o++)for(O.morphColors[o]={},O.morphColors[o].name=F.morphColors[o].name,O.morphColors[o].colors=[],h=O.morphColors[o].colors,c=F.morphColors[o].colors,s=0,l=c.length;s<l;s+=3)(u=new THREE.Color(16755200)).setRGB(c[s],c[s+1],c[s+2]),h.push(u)}(t),O.computeCentroids(),O.computeFaceNormals(),O.computeBoundingSphere(),void 0===F.materials)return{geometry:O};var i=this.initMaterials(F.materials,e);return this.needsTangents(i)&&O.computeTangents(),{geometry:O,materials:i}},THREE.LoadingManager=function(e,t,i){var r=this,n=0,o=0;this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(e){o++},this.itemEnd=function(e){n++,void 0!==r.onProgress&&r.onProgress(e,n,o),n===o&&void 0!==r.onLoad&&r.onLoad()}},THREE.DefaultLoadingManager=new THREE.LoadingManager,THREE.BufferGeometryLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.BufferGeometryLoader.prototype={constructor:THREE.BufferGeometryLoader,load:function(e,t,i,r){var n=this,o=new THREE.XHRLoader;o.setCrossOrigin(this.crossOrigin),o.load(e,function(e){t(n.parse(JSON.parse(e)))})},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e){var t=new THREE.BufferGeometry,i=e.attributes,r=e.offsets,n=e.boundingSphere;for(var o in i){var a=i[o];t.attributes[o]={itemSize:a.itemSize,array:new self[a.type](a.array)}}return void 0!==r&&(t.offsets=JSON.parse(JSON.stringify(r))),void 0!==n&&(t.boundingSphere=new THREE.Sphere((new THREE.Vector3).fromArray(void 0!==n.center?n.center:[0,0,0]),n.radius)),t}},THREE.GeometryLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.GeometryLoader.prototype={constructor:THREE.GeometryLoader,load:function(e,t,i,r){var n=this,o=new THREE.XHRLoader;o.setCrossOrigin(this.crossOrigin),o.load(e,function(e){t(n.parse(JSON.parse(e)))})},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e){}},THREE.MaterialLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.MaterialLoader.prototype={constructor:THREE.MaterialLoader,load:function(e,t,i,r){var n=this,o=new THREE.XHRLoader;o.setCrossOrigin(this.crossOrigin),o.load(e,function(e){t(n.parse(JSON.parse(e)))})},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e){var t=new THREE[e.type];if(void 0!==e.color&&t.color.setHex(e.color),void 0!==e.ambient&&t.ambient.setHex(e.ambient),void 0!==e.emissive&&t.emissive.setHex(e.emissive),void 0!==e.specular&&t.specular.setHex(e.specular),void 0!==e.shininess&&(t.shininess=e.shininess),void 0!==e.vertexColors&&(t.vertexColors=e.vertexColors),void 0!==e.blending&&(t.blending=e.blending),void 0!==e.opacity&&(t.opacity=e.opacity),void 0!==e.transparent&&(t.transparent=e.transparent),void 0!==e.wireframe&&(t.wireframe=e.wireframe),void 0!==e.materials)for(var i=0,r=e.materials.length;i<r;i++)t.materials.push(this.parse(e.materials[i]));return t}},THREE.ObjectLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.ObjectLoader.prototype={constructor:THREE.ObjectLoader,load:function(e,t,i,r){var n=this,o=new THREE.XHRLoader(n.manager);o.setCrossOrigin(this.crossOrigin),o.load(e,function(e){t(n.parse(JSON.parse(e)))})},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e){var t=this.parseGeometries(e.geometries),i=this.parseMaterials(e.materials);return this.parseObject(e.object,t,i)},parseGeometries:function(e){var t={};if(void 0!==e)for(var i=new THREE.JSONLoader,r=new THREE.BufferGeometryLoader,n=0,o=e.length;n<o;n++){var a,s=e[n];switch(s.type){case"PlaneGeometry":a=new THREE.PlaneGeometry(s.width,s.height,s.widthSegments,s.heightSegments);break;case"CircleGeometry":a=new THREE.CircleGeometry(s.radius,s.segments);break;case"CubeGeometry":a=new THREE.CubeGeometry(s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CylinderGeometry":a=new THREE.CylinderGeometry(s.radiusTop,s.radiusBottom,s.height,s.radiusSegments,s.heightSegments,s.openEnded);break;case"SphereGeometry":a=new THREE.SphereGeometry(s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"IcosahedronGeometry":a=new THREE.IcosahedronGeometry(s.radius,s.detail);break;case"TorusGeometry":a=new THREE.TorusGeometry(s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":a=new THREE.TorusKnotGeometry(s.radius,s.tube,s.radialSegments,s.tubularSegments,s.p,s.q,s.heightScale);break;case"BufferGeometry":a=r.parse(s.data);break;case"Geometry":a=i.parse(s.data).geometry}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),t[s.uuid]=a}return t},parseMaterials:function(e){var t={};if(void 0!==e)for(var i=new THREE.MaterialLoader,r=0,n=e.length;r<n;r++){var o=e[r],a=i.parse(o);a.uuid=o.uuid,void 0!==o.name&&(a.name=o.name),t[o.uuid]=a}return t},parseObject:function(){var s=new THREE.Matrix4;return function(e,t,i){var r;switch(e.type){case"Scene":r=new THREE.Scene;break;case"PerspectiveCamera":r=new THREE.PerspectiveCamera(e.fov,e.aspect,e.near,e.far);break;case"OrthographicCamera":r=new THREE.OrthographicCamera(e.left,e.right,e.top,e.bottom,e.near,e.far);break;case"AmbientLight":r=new THREE.AmbientLight(e.color);break;case"DirectionalLight":r=new THREE.DirectionalLight(e.color,e.intensity);break;case"PointLight":r=new THREE.PointLight(e.color,e.intensity,e.distance);break;case"SpotLight":r=new THREE.SpotLight(e.color,e.intensity,e.distance,e.angle,e.exponent);break;case"HemisphereLight":r=new THREE.HemisphereLight(e.color,e.groundColor,e.intensity);break;case"Mesh":var n=t[e.geometry],o=i[e.material];void 0===n&&console.error("THREE.ObjectLoader: Undefined geometry "+e.geometry),void 0===o&&console.error("THREE.ObjectLoader: Undefined material "+e.material),r=new THREE.Mesh(n,o);break;default:r=new THREE.Object3D}if(r.uuid=e.uuid,void 0!==e.name&&(r.name=e.name),void 0!==e.matrix?(s.fromArray(e.matrix),s.decompose(r.position,r.quaternion,r.scale)):(void 0!==e.position&&r.position.fromArray(e.position),void 0!==e.rotation&&r.rotation.fromArray(e.rotation),void 0!==e.scale&&r.scale.fromArray(e.scale)),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.children)for(var a in e.children)r.add(this.parseObject(e.children[a],t,i));return r}}()},THREE.SceneLoader=function(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){},this.callbackSync=function(){},this.callbackProgress=function(){},this.geometryHandlers={},this.hierarchyHandlers={},this.addGeometryHandler("ascii",THREE.JSONLoader)},THREE.SceneLoader.prototype={constructor:THREE.SceneLoader,load:function(t,i,e,r){var n=this,o=new THREE.XHRLoader(n.manager);o.setCrossOrigin(this.crossOrigin),o.load(t,function(e){n.parse(JSON.parse(e),i,t)})},setCrossOrigin:function(e){this.crossOrigin=e},addGeometryHandler:function(e,t){this.geometryHandlers[e]={loaderClass:t}},addHierarchyHandler:function(e,t){this.hierarchyHandlers[e]={loaderClass:t}},parse:function(e,t,i){var _,x,R,r,n,o,b,w,H,a,s,l,h,S,M=this,c=THREE.Loader.prototype.extractUrlBase(i),C=[],A=e;for(var u in this.geometryHandlers){var f=this.geometryHandlers[u].loaderClass;this.geometryHandlers[u].loaderObject=new f}for(var u in this.hierarchyHandlers){f=this.hierarchyHandlers[u].loaderClass;this.hierarchyHandlers[u].loaderObject=new f}if(s=a=0,S={scene:new THREE.Scene,geometries:{},face_materials:{},materials:{},textures:{},objects:{},cameras:{},lights:{},fogs:{},empties:{},groups:{}},A.transform){var p=A.transform.position,d=A.transform.rotation,m=A.transform.scale;p&&S.scene.position.fromArray(p),d&&S.scene.rotation.fromArray(d),m&&S.scene.scale.fromArray(m),(p||d||m)&&(S.scene.updateMatrix(),S.scene.updateMatrixWorld())}function P(e,t){return"relativeToHTML"==t?e:c+"/"+e}function g(){!function e(t,i){var r,n,o,a,s,l;for(var h in i){var c=S.objects[h],u=i[h];if(void 0===c){if(u.type&&u.type in M.hierarchyHandlers){if(void 0===u.loading){var f={type:1,url:1,material:1,position:1,rotation:1,scale:1,visible:1,children:1,userData:1,skin:1,morph:1,mirroredLoop:1,duration:1},p={};for(var d in u)d in f||(p[d]=u[d]);x=S.materials[u.material],u.loading=!0;var m=M.hierarchyHandlers[u.type].loaderObject;m.options?m.load(P(u.url,A.urlBaseType),D(h,t,x,u)):m.load(P(u.url,A.urlBaseType),D(h,t,x,u),p)}}else if(void 0!==u.geometry){if(_=S.geometries[u.geometry]){var g=!1;if(x=S.materials[u.material],g=x instanceof THREE.ShaderMaterial,o=u.position,a=u.rotation,s=u.scale,r=u.matrix,l=u.quaternion,u.material||(x=new THREE.MeshFaceMaterial(S.face_materials[u.geometry])),x instanceof THREE.MeshFaceMaterial&&0===x.materials.length&&(x=new THREE.MeshFaceMaterial(S.face_materials[u.geometry])),x instanceof THREE.MeshFaceMaterial)for(var E=0;E<x.materials.length;E++)g=g||x.materials[E]instanceof THREE.ShaderMaterial;g&&_.computeTangents(),u.skin?c=new THREE.SkinnedMesh(_,x):u.morph?(c=new THREE.MorphAnimMesh(_,x),void 0!==u.duration&&(c.duration=u.duration),void 0!==u.time&&(c.time=u.time),void 0!==u.mirroredLoop&&(c.mirroredLoop=u.mirroredLoop),x.morphNormals&&_.computeMorphNormals()):c=new THREE.Mesh(_,x),c.name=h,r?(c.matrixAutoUpdate=!1,c.matrix.set(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15])):(c.position.fromArray(o),l?c.quaternion.fromArray(l):c.rotation.fromArray(a),c.scale.fromArray(s)),c.visible=u.visible,c.castShadow=u.castShadow,c.receiveShadow=u.receiveShadow,t.add(c),S.objects[h]=c}}else"DirectionalLight"===u.type||"PointLight"===u.type||"AmbientLight"===u.type?(w=void 0!==u.color?u.color:16777215,H=void 0!==u.intensity?u.intensity:1,"DirectionalLight"===u.type?(o=u.direction,(b=new THREE.DirectionalLight(w,H)).position.fromArray(o),u.target&&(C.push({object:b,targetName:u.target}),b.target=null)):"PointLight"===u.type?(o=u.position,n=u.distance,(b=new THREE.PointLight(w,H,n)).position.fromArray(o)):"AmbientLight"===u.type&&(b=new THREE.AmbientLight(w)),t.add(b),b.name=h,S.lights[h]=b,S.objects[h]=b):"PerspectiveCamera"===u.type||"OrthographicCamera"===u.type?(o=u.position,a=u.rotation,l=u.quaternion,"PerspectiveCamera"===u.type?R=new THREE.PerspectiveCamera(u.fov,u.aspect,u.near,u.far):"OrthographicCamera"===u.type&&(R=new THREE.OrthographicCamera(u.left,u.right,u.top,u.bottom,u.near,u.far)),R.name=h,R.position.fromArray(o),void 0!==l?R.quaternion.fromArray(l):void 0!==a&&R.rotation.fromArray(a),t.add(R),S.cameras[h]=R,S.objects[h]=R):(o=u.position,a=u.rotation,s=u.scale,l=u.quaternion,(c=new THREE.Object3D).name=h,c.position.fromArray(o),l?c.quaternion.fromArray(l):c.rotation.fromArray(a),c.scale.fromArray(s),c.visible=void 0!==u.visible&&u.visible,t.add(c),S.objects[h]=c,S.empties[h]=c);if(c){if(void 0!==u.userData)for(var v in u.userData){var y=u.userData[v];c.userData[v]=y}if(void 0!==u.groups)for(var E=0;E<u.groups.length;E++){var T=u.groups[E];void 0===S.groups[T]&&(S.groups[T]=[]),S.groups[T].push(h)}}}void 0!==c&&void 0!==u.children&&e(c,u.children)}}(S.scene,A.objects)}function E(o){return function(e,t){var i,r,n;e.name=o,i=e,r=t,n=o,S.geometries[n]=i,S.face_materials[n]=r,g(),a-=1,M.onLoadComplete(),y()}}function D(t,i,r,n){return function(e){(function(e,t,i,r,n){var o=n.position,a=n.rotation,s=n.quaternion,l=n.scale;e.position.fromArray(o),s?e.quaternion.fromArray(s):e.rotation.fromArray(a),e.scale.fromArray(l),r&&e.traverse(function(e){e.material=r});var h=void 0===n.visible||n.visible;e.traverse(function(e){e.visible=h}),i.add(e),e.name=t,S.objects[t]=e,g()})(e.content?e.content:e.dae?e.scene:e,t,i,r,n),a-=1,M.onLoadComplete(),y()}}function v(i){return function(e,t){e.name=i,S.geometries[i]=e,S.face_materials[i]=t}}function y(){var e={totalModels:l,totalTextures:h,loadedModels:l-a,loadedTextures:h-s};M.callbackProgress(e,S),M.onLoadProgress(),0===a&&0===s&&(!function(){for(var e=0;e<C.length;e++){var t=C[e],i=S.objects[t.targetName];i?t.object.target=i:(t.object.target=new THREE.Object3D,S.scene.add(t.object.target)),t.object.target.userData.targetInverse=t.object}}(),t(S))}var T,L,F,O,k,V,I,N,U,z=function(e){return function(){s-=e,y(),M.onLoadComplete()}};function B(e,t){if(t(e),void 0!==e.children)for(var i in e.children)B(e.children[i],t)}for(T in A.fogs)"linear"===(L=A.fogs[T]).type?r=new THREE.Fog(0,L.near,L.far):"exp2"===L.type&&(r=new THREE.FogExp2(0,L.density)),o=L.color,r.color.setRGB(o[0],o[1],o[2]),S.fogs[T]=r;for(F in A.geometries)(O=A.geometries[F]).type in this.geometryHandlers&&(a+=1,M.onLoadStart());for(var j in A.objects)B(A.objects[j],function(e){e.type&&e.type in M.hierarchyHandlers&&(a+=1,M.onLoadStart())});for(F in l=a,A.geometries)if("cube"===(O=A.geometries[F]).type)(_=new THREE.CubeGeometry(O.width,O.height,O.depth,O.widthSegments,O.heightSegments,O.depthSegments)).name=F,S.geometries[F]=_;else if("plane"===O.type)(_=new THREE.PlaneGeometry(O.width,O.height,O.widthSegments,O.heightSegments)).name=F,S.geometries[F]=_;else if("sphere"===O.type)(_=new THREE.SphereGeometry(O.radius,O.widthSegments,O.heightSegments)).name=F,S.geometries[F]=_;else if("cylinder"===O.type)(_=new THREE.CylinderGeometry(O.topRad,O.botRad,O.height,O.radSegs,O.heightSegs)).name=F,S.geometries[F]=_;else if("torus"===O.type)(_=new THREE.TorusGeometry(O.radius,O.tube,O.segmentsR,O.segmentsT)).name=F,S.geometries[F]=_;else if("icosahedron"===O.type)(_=new THREE.IcosahedronGeometry(O.radius,O.subdivisions)).name=F,S.geometries[F]=_;else if(O.type in this.geometryHandlers){var W={};for(var G in O)"type"!==G&&"url"!==G&&(W[G]=O[G]);this.geometryHandlers[O.type].loaderObject.load(P(O.url,A.urlBaseType),E(F),W)}else if("embedded"===O.type){var X=A.embeds[O.id];if(X.metadata=A.metadata,X){var q=this.geometryHandlers.ascii.loaderObject.parse(X,"");v(F)(q.geometry,q.materials)}}for(k in A.textures)if((V=A.textures[k]).url instanceof Array){s+=V.url.length;for(var Y=0;Y<V.url.length;Y++)M.onLoadStart()}else s+=1,M.onLoadStart();for(k in h=s,A.textures){if(void 0!==(V=A.textures[k]).mapping&&void 0!==THREE[V.mapping]&&(V.mapping=new THREE[V.mapping]),V.url instanceof Array){for(var K=V.url.length,Q=[],Z=0;Z<K;Z++)Q[Z]=P(V.url[Z],A.urlBaseType);n=($=/\.dds$/i.test(Q[0]))?THREE.ImageUtils.loadCompressedTextureCube(Q,V.mapping,z(K)):THREE.ImageUtils.loadTextureCube(Q,V.mapping,z(K))}else{var $=/\.dds$/i.test(V.url),J=P(V.url,A.urlBaseType),ee=z(1);if(n=$?THREE.ImageUtils.loadCompressedTexture(J,V.mapping,ee):THREE.ImageUtils.loadTexture(J,V.mapping,ee),void 0!==THREE[V.minFilter]&&(n.minFilter=THREE[V.minFilter]),void 0!==THREE[V.magFilter]&&(n.magFilter=THREE[V.magFilter]),V.anisotropy&&(n.anisotropy=V.anisotropy),V.repeat&&(n.repeat.set(V.repeat[0],V.repeat[1]),1!==V.repeat[0]&&(n.wrapS=THREE.RepeatWrapping),1!==V.repeat[1]&&(n.wrapT=THREE.RepeatWrapping)),V.offset&&n.offset.set(V.offset[0],V.offset[1]),V.wrap){var te={repeat:THREE.RepeatWrapping,mirror:THREE.MirroredRepeatWrapping};void 0!==te[V.wrap[0]]&&(n.wrapS=te[V.wrap[0]]),void 0!==te[V.wrap[1]]&&(n.wrapT=te[V.wrap[1]])}}S.textures[k]=n}for(I in A.materials){for(U in(N=A.materials[I]).parameters)if("envMap"===U||"map"===U||"lightMap"===U||"bumpMap"===U)N.parameters[U]=S.textures[N.parameters[U]];else if("shading"===U)N.parameters[U]="flat"===N.parameters[U]?THREE.FlatShading:THREE.SmoothShading;else if("side"===U)"double"==N.parameters[U]?N.parameters[U]=THREE.DoubleSide:"back"==N.parameters[U]?N.parameters[U]=THREE.BackSide:N.parameters[U]=THREE.FrontSide;else if("blending"===U)N.parameters[U]=N.parameters[U]in THREE?THREE[N.parameters[U]]:THREE.NormalBlending;else if("combine"===U)N.parameters[U]=N.parameters[U]in THREE?THREE[N.parameters[U]]:THREE.MultiplyOperation;else if("vertexColors"===U)"face"==N.parameters[U]?N.parameters[U]=THREE.FaceColors:N.parameters[U]&&(N.parameters[U]=THREE.VertexColors);else if("wrapRGB"===U){var ie=N.parameters[U];N.parameters[U]=new THREE.Vector3(ie[0],ie[1],ie[2])}if(void 0!==N.parameters.opacity&&N.parameters.opacity<1&&(N.parameters.transparent=!0),N.parameters.normalMap){var re=THREE.ShaderLib.normalmap,ne=THREE.UniformsUtils.clone(re.uniforms),oe=N.parameters.color,ae=N.parameters.specular,se=N.parameters.ambient,le=N.parameters.shininess;ne.tNormal.value=S.textures[N.parameters.normalMap],N.parameters.normalScale&&ne.uNormalScale.value.set(N.parameters.normalScale[0],N.parameters.normalScale[1]),N.parameters.map&&(ne.tDiffuse.value=N.parameters.map,ne.enableDiffuse.value=!0),N.parameters.envMap&&(ne.tCube.value=N.parameters.envMap,ne.enableReflection.value=!0,ne.uReflectivity.value=N.parameters.reflectivity),N.parameters.lightMap&&(ne.tAO.value=N.parameters.lightMap,ne.enableAO.value=!0),N.parameters.specularMap&&(ne.tSpecular.value=S.textures[N.parameters.specularMap],ne.enableSpecular.value=!0),N.parameters.displacementMap&&(ne.tDisplacement.value=S.textures[N.parameters.displacementMap],ne.enableDisplacement.value=!0,ne.uDisplacementBias.value=N.parameters.displacementBias,ne.uDisplacementScale.value=N.parameters.displacementScale),ne.uDiffuseColor.value.setHex(oe),ne.uSpecularColor.value.setHex(ae),ne.uAmbientColor.value.setHex(se),ne.uShininess.value=le,N.parameters.opacity&&(ne.uOpacity.value=N.parameters.opacity);var he={fragmentShader:re.fragmentShader,vertexShader:re.vertexShader,uniforms:ne,lights:!0,fog:!0};x=new THREE.ShaderMaterial(he)}else x=new THREE[N.type](N.parameters);x.name=I,S.materials[I]=x}for(I in A.materials)if((N=A.materials[I]).parameters.materials){var ce=[];for(Z=0;Z<N.parameters.materials.length;Z++){var ue=N.parameters.materials[Z];ce.push(S.materials[ue])}S.materials[I].materials=ce}g(),S.cameras&&A.defaults.camera&&(S.currentCamera=S.cameras[A.defaults.camera]),S.fogs&&A.defaults.fog&&(S.scene.fog=S.fogs[A.defaults.fog]),M.callbackSync(S),y()}},THREE.TextureLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.TextureLoader.prototype={constructor:THREE.TextureLoader,load:function(e,i,t,r){var n=new THREE.ImageLoader(this.manager);n.setCrossOrigin(this.crossOrigin),n.load(e,function(e){var t=new THREE.Texture(e);t.needsUpdate=!0,void 0!==i&&i(t)})},setCrossOrigin:function(e){this.crossOrigin=e}},THREE.Material=function(){this.id=THREE.MaterialIdCount++,this.uuid=THREE.Math.generateUUID(),this.name="",this.side=THREE.FrontSide,this.opacity=1,this.transparent=!1,this.blending=THREE.NormalBlending,this.blendSrc=THREE.SrcAlphaFactor,this.blendDst=THREE.OneMinusSrcAlphaFactor,this.blendEquation=THREE.AddEquation,this.depthTest=!0,this.depthWrite=!0,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.overdraw=0,this.visible=!0,this.needsUpdate=!0},THREE.Material.prototype={constructor:THREE.Material,setValues:function(e){if(void 0!==e)for(var t in e){var i=e[t];if(void 0!==i){if(t in this){var r=this[t];r instanceof THREE.Color?r.set(i):r instanceof THREE.Vector3&&i instanceof THREE.Vector3?r.copy(i):this[t]="overdraw"==t?Number(i):i}}else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},clone:function(e){return void 0===e&&(e=new THREE.Material),e.name=this.name,e.side=this.side,e.opacity=this.opacity,e.transparent=this.transparent,e.blending=this.blending,e.blendSrc=this.blendSrc,e.blendDst=this.blendDst,e.blendEquation=this.blendEquation,e.depthTest=this.depthTest,e.depthWrite=this.depthWrite,e.polygonOffset=this.polygonOffset,e.polygonOffsetFactor=this.polygonOffsetFactor,e.polygonOffsetUnits=this.polygonOffsetUnits,e.alphaTest=this.alphaTest,e.overdraw=this.overdraw,e.visible=this.visible,e},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.Material.prototype),THREE.MaterialIdCount=0,THREE.LineBasicMaterial=function(e){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.vertexColors=!1,this.fog=!0,this.setValues(e)},THREE.LineBasicMaterial.prototype=Object.create(THREE.Material.prototype),THREE.LineBasicMaterial.prototype.clone=function(){var e=new THREE.LineBasicMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.linewidth=this.linewidth,e.linecap=this.linecap,e.linejoin=this.linejoin,e.vertexColors=this.vertexColors,e.fog=this.fog,e},THREE.LineDashedMaterial=function(e){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.vertexColors=!1,this.fog=!0,this.setValues(e)},THREE.LineDashedMaterial.prototype=Object.create(THREE.Material.prototype),THREE.LineDashedMaterial.prototype.clone=function(){var e=new THREE.LineDashedMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.linewidth=this.linewidth,e.scale=this.scale,e.dashSize=this.dashSize,e.gapSize=this.gapSize,e.vertexColors=this.vertexColors,e.fog=this.fog,e},THREE.MeshBasicMaterial=function(e){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.map=null,this.lightMap=null,this.specularMap=null,this.envMap=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=THREE.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=THREE.NoColors,this.skinning=!1,this.morphTargets=!1,this.setValues(e)},THREE.MeshBasicMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshBasicMaterial.prototype.clone=function(){var e=new THREE.MeshBasicMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.map=this.map,e.lightMap=this.lightMap,e.specularMap=this.specularMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.wireframeLinecap=this.wireframeLinecap,e.wireframeLinejoin=this.wireframeLinejoin,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e},THREE.MeshLambertMaterial=function(e){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.ambient=new THREE.Color(16777215),this.emissive=new THREE.Color(0),this.wrapAround=!1,this.wrapRGB=new THREE.Vector3(1,1,1),this.map=null,this.lightMap=null,this.specularMap=null,this.envMap=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=THREE.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=THREE.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)},THREE.MeshLambertMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshLambertMaterial.prototype.clone=function(){var e=new THREE.MeshLambertMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.ambient.copy(this.ambient),e.emissive.copy(this.emissive),e.wrapAround=this.wrapAround,e.wrapRGB.copy(this.wrapRGB),e.map=this.map,e.lightMap=this.lightMap,e.specularMap=this.specularMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.wireframeLinecap=this.wireframeLinecap,e.wireframeLinejoin=this.wireframeLinejoin,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e},THREE.MeshPhongMaterial=function(e){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.ambient=new THREE.Color(16777215),this.emissive=new THREE.Color(0),this.specular=new THREE.Color(1118481),this.shininess=30,this.metal=!1,this.perPixel=!0,this.wrapAround=!1,this.wrapRGB=new THREE.Vector3(1,1,1),this.map=null,this.lightMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new THREE.Vector2(1,1),this.specularMap=null,this.envMap=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=THREE.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=THREE.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)},THREE.MeshPhongMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshPhongMaterial.prototype.clone=function(){var e=new THREE.MeshPhongMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.ambient.copy(this.ambient),e.emissive.copy(this.emissive),e.specular.copy(this.specular),e.shininess=this.shininess,e.metal=this.metal,e.perPixel=this.perPixel,e.wrapAround=this.wrapAround,e.wrapRGB.copy(this.wrapRGB),e.map=this.map,e.lightMap=this.lightMap,e.bumpMap=this.bumpMap,e.bumpScale=this.bumpScale,e.normalMap=this.normalMap,e.normalScale.copy(this.normalScale),e.specularMap=this.specularMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.wireframeLinecap=this.wireframeLinecap,e.wireframeLinejoin=this.wireframeLinejoin,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e},THREE.MeshDepthMaterial=function(e){THREE.Material.call(this),this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)},THREE.MeshDepthMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshDepthMaterial.prototype.clone=function(){var e=new THREE.MeshDepthMaterial;return THREE.Material.prototype.clone.call(this,e),e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e},THREE.MeshNormalMaterial=function(e){THREE.Material.call(this,e),this.shading=THREE.FlatShading,this.wireframe=!1,this.wireframeLinewidth=1,this.morphTargets=!1,this.setValues(e)},THREE.MeshNormalMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshNormalMaterial.prototype.clone=function(){var e=new THREE.MeshNormalMaterial;return THREE.Material.prototype.clone.call(this,e),e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e},THREE.MeshFaceMaterial=function(e){this.materials=e instanceof Array?e:[]},THREE.MeshFaceMaterial.prototype.clone=function(){for(var e=new THREE.MeshFaceMaterial,t=0;t<this.materials.length;t++)e.materials.push(this.materials[t].clone());return e},THREE.ParticleBasicMaterial=function(e){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.vertexColors=!1,this.fog=!0,this.setValues(e)},THREE.ParticleBasicMaterial.prototype=Object.create(THREE.Material.prototype),THREE.ParticleBasicMaterial.prototype.clone=function(){var e=new THREE.ParticleBasicMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.map=this.map,e.size=this.size,e.sizeAttenuation=this.sizeAttenuation,e.vertexColors=this.vertexColors,e.fog=this.fog,e},THREE.ParticleCanvasMaterial=function(e){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.program=function(e,t){},this.setValues(e)},THREE.ParticleCanvasMaterial.prototype=Object.create(THREE.Material.prototype),THREE.ParticleCanvasMaterial.prototype.clone=function(){var e=new THREE.ParticleCanvasMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.program=this.program,e},THREE.ShaderMaterial=function(e){THREE.Material.call(this),this.fragmentShader="void main() {}",this.vertexShader="void main() {}",this.uniforms={},this.defines={},this.attributes=null,this.shading=THREE.SmoothShading,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.vertexColors=THREE.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName="position",this.setValues(e)},THREE.ShaderMaterial.prototype=Object.create(THREE.Material.prototype),THREE.ShaderMaterial.prototype.clone=function(){var e=new THREE.ShaderMaterial;return THREE.Material.prototype.clone.call(this,e),e.fragmentShader=this.fragmentShader,e.vertexShader=this.vertexShader,e.uniforms=THREE.UniformsUtils.clone(this.uniforms),e.attributes=this.attributes,e.defines=this.defines,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.fog=this.fog,e.lights=this.lights,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e},THREE.SpriteMaterial=function(e){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.map=new THREE.Texture,this.useScreenCoordinates=!0,this.depthTest=!this.useScreenCoordinates,this.sizeAttenuation=!this.useScreenCoordinates,this.scaleByViewport=!this.sizeAttenuation,this.alignment=THREE.SpriteAlignment.center.clone(),this.fog=!1,this.uvOffset=new THREE.Vector2(0,0),this.uvScale=new THREE.Vector2(1,1),this.setValues(e),void 0===(e=e||{}).depthTest&&(this.depthTest=!this.useScreenCoordinates),void 0===e.sizeAttenuation&&(this.sizeAttenuation=!this.useScreenCoordinates),void 0===e.scaleByViewport&&(this.scaleByViewport=!this.sizeAttenuation)},THREE.SpriteMaterial.prototype=Object.create(THREE.Material.prototype),THREE.SpriteMaterial.prototype.clone=function(){var e=new THREE.SpriteMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.map=this.map,e.useScreenCoordinates=this.useScreenCoordinates,e.sizeAttenuation=this.sizeAttenuation,e.scaleByViewport=this.scaleByViewport,e.alignment.copy(this.alignment),e.uvOffset.copy(this.uvOffset),e.uvScale.copy(this.uvScale),e.fog=this.fog,e},THREE.SpriteAlignment={},THREE.SpriteAlignment.topLeft=new THREE.Vector2(1,-1),THREE.SpriteAlignment.topCenter=new THREE.Vector2(0,-1),THREE.SpriteAlignment.topRight=new THREE.Vector2(-1,-1),THREE.SpriteAlignment.centerLeft=new THREE.Vector2(1,0),THREE.SpriteAlignment.center=new THREE.Vector2(0,0),THREE.SpriteAlignment.centerRight=new THREE.Vector2(-1,0),THREE.SpriteAlignment.bottomLeft=new THREE.Vector2(1,1),THREE.SpriteAlignment.bottomCenter=new THREE.Vector2(0,1),THREE.SpriteAlignment.bottomRight=new THREE.Vector2(-1,1),THREE.Texture=function(e,t,i,r,n,o,a,s,l){this.id=THREE.TextureIdCount++,this.uuid=THREE.Math.generateUUID(),this.name="",this.image=e,this.mipmaps=[],this.mapping=void 0!==t?t:new THREE.UVMapping,this.wrapS=void 0!==i?i:THREE.ClampToEdgeWrapping,this.wrapT=void 0!==r?r:THREE.ClampToEdgeWrapping,this.magFilter=void 0!==n?n:THREE.LinearFilter,this.minFilter=void 0!==o?o:THREE.LinearMipMapLinearFilter,this.anisotropy=void 0!==l?l:1,this.format=void 0!==a?a:THREE.RGBAFormat,this.type=void 0!==s?s:THREE.UnsignedByteType,this.offset=new THREE.Vector2(0,0),this.repeat=new THREE.Vector2(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.needsUpdate=!1,this.onUpdate=null},THREE.Texture.prototype={constructor:THREE.Texture,clone:function(e){return void 0===e&&(e=new THREE.Texture),e.image=this.image,e.mipmaps=this.mipmaps.slice(0),e.mapping=this.mapping,e.wrapS=this.wrapS,e.wrapT=this.wrapT,e.magFilter=this.magFilter,e.minFilter=this.minFilter,e.anisotropy=this.anisotropy,e.format=this.format,e.type=this.type,e.offset.copy(this.offset),e.repeat.copy(this.repeat),e.generateMipmaps=this.generateMipmaps,e.premultiplyAlpha=this.premultiplyAlpha,e.flipY=this.flipY,e.unpackAlignment=this.unpackAlignment,e},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.Texture.prototype),THREE.TextureIdCount=0,THREE.CompressedTexture=function(e,t,i,r,n,o,a,s,l,h,c){THREE.Texture.call(this,null,o,a,s,l,h,r,n,c),this.image={width:t,height:i},this.mipmaps=e,this.generateMipmaps=!1},THREE.CompressedTexture.prototype=Object.create(THREE.Texture.prototype),THREE.CompressedTexture.prototype.clone=function(){var e=new THREE.CompressedTexture;return THREE.Texture.prototype.clone.call(this,e),e},THREE.DataTexture=function(e,t,i,r,n,o,a,s,l,h,c){THREE.Texture.call(this,null,o,a,s,l,h,r,n,c),this.image={data:e,width:t,height:i}},THREE.DataTexture.prototype=Object.create(THREE.Texture.prototype),THREE.DataTexture.prototype.clone=function(){var e=new THREE.DataTexture;return THREE.Texture.prototype.clone.call(this,e),e},THREE.Particle=function(e){THREE.Object3D.call(this),this.material=e},THREE.Particle.prototype=Object.create(THREE.Object3D.prototype),THREE.Particle.prototype.clone=function(e){return void 0===e&&(e=new THREE.Particle(this.material)),THREE.Object3D.prototype.clone.call(this,e),e},THREE.ParticleSystem=function(e,t){THREE.Object3D.call(this),this.geometry=void 0!==e?e:new THREE.Geometry,this.material=void 0!==t?t:new THREE.ParticleBasicMaterial({color:16777215*Math.random()}),this.sortParticles=!1,this.frustumCulled=!1},THREE.ParticleSystem.prototype=Object.create(THREE.Object3D.prototype),THREE.ParticleSystem.prototype.clone=function(e){return void 0===e&&(e=new THREE.ParticleSystem(this.geometry,this.material)),e.sortParticles=this.sortParticles,THREE.Object3D.prototype.clone.call(this,e),e},THREE.Line=function(e,t,i){THREE.Object3D.call(this),this.geometry=void 0!==e?e:new THREE.Geometry,this.material=void 0!==t?t:new THREE.LineBasicMaterial({color:16777215*Math.random()}),this.type=void 0!==i?i:THREE.LineStrip},THREE.LineStrip=0,THREE.LinePieces=1,THREE.Line.prototype=Object.create(THREE.Object3D.prototype),THREE.Line.prototype.clone=function(e){return void 0===e&&(e=new THREE.Line(this.geometry,this.material,this.type)),THREE.Object3D.prototype.clone.call(this,e),e},THREE.Mesh=function(e,t){THREE.Object3D.call(this),this.geometry=void 0!==e?e:new THREE.Geometry,this.material=void 0!==t?t:new THREE.MeshBasicMaterial({color:16777215*Math.random()}),this.updateMorphTargets()},THREE.Mesh.prototype=Object.create(THREE.Object3D.prototype),THREE.Mesh.prototype.updateMorphTargets=function(){if(0<this.geometry.morphTargets.length){this.morphTargetBase=-1,this.morphTargetForcedOrder=[],this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var e=0,t=this.geometry.morphTargets.length;e<t;e++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[e].name]=e}},THREE.Mesh.prototype.getMorphTargetIndexByName=function(e){return void 0!==this.morphTargetDictionary[e]?this.morphTargetDictionary[e]:(console.log("THREE.Mesh.getMorphTargetIndexByName: morph target "+e+" does not exist. Returning 0."),0)},THREE.Mesh.prototype.clone=function(e){return void 0===e&&(e=new THREE.Mesh(this.geometry,this.material)),THREE.Object3D.prototype.clone.call(this,e),e},THREE.Bone=function(e){THREE.Object3D.call(this),this.skin=e,this.skinMatrix=new THREE.Matrix4},THREE.Bone.prototype=Object.create(THREE.Object3D.prototype),THREE.Bone.prototype.update=function(e,t){this.matrixAutoUpdate&&(t|=this.updateMatrix()),(t||this.matrixWorldNeedsUpdate)&&(e?this.skinMatrix.multiplyMatrices(e,this.matrix):this.skinMatrix.copy(this.matrix),t=!(this.matrixWorldNeedsUpdate=!1));var i,r=this.children.length;for(i=0;i<r;i++)this.children[i].update(this.skinMatrix,t)},THREE.SkinnedMesh=function(e,t,i){var r,n,o,a,s,l;if(THREE.Mesh.call(this,e,t),this.useVertexTexture=void 0===i||i,this.identityMatrix=new THREE.Matrix4,this.bones=[],this.boneMatrices=[],this.geometry&&void 0!==this.geometry.bones){for(r=0;r<this.geometry.bones.length;r++)a=(o=this.geometry.bones[r]).pos,s=o.rotq,l=o.scl,(n=this.addBone()).name=o.name,n.position.set(a[0],a[1],a[2]),n.quaternion.set(s[0],s[1],s[2],s[3]),void 0!==l?n.scale.set(l[0],l[1],l[2]):n.scale.set(1,1,1);for(r=0;r<this.bones.length;r++)o=this.geometry.bones[r],n=this.bones[r],-1===o.parent?this.add(n):this.bones[o.parent].add(n);var h,c=this.bones.length;if(this.useVertexTexture)h=256<c?64:64<c?32:16<c?16:8,this.boneTextureWidth=h,this.boneTextureHeight=h,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new THREE.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,THREE.RGBAFormat,THREE.FloatType),this.boneTexture.minFilter=THREE.NearestFilter,this.boneTexture.magFilter=THREE.NearestFilter,this.boneTexture.generateMipmaps=!1,this.boneTexture.flipY=!1;else this.boneMatrices=new Float32Array(16*c);this.pose()}},THREE.SkinnedMesh.prototype=Object.create(THREE.Mesh.prototype),THREE.SkinnedMesh.prototype.addBone=function(e){return void 0===e&&(e=new THREE.Bone(this)),this.bones.push(e),e},THREE.SkinnedMesh.prototype.updateMatrixWorld=function(){var s=new THREE.Matrix4;return function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent?this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix):this.matrixWorld.copy(this.matrix),e=!(this.matrixWorldNeedsUpdate=!1));for(var t=0,i=this.children.length;t<i;t++){var r=this.children[t];r instanceof THREE.Bone?r.update(this.identityMatrix,!1):r.updateMatrixWorld(!0)}if(null==this.boneInverses){this.boneInverses=[];for(var n=0,o=this.bones.length;n<o;n++){var a=new THREE.Matrix4;a.getInverse(this.bones[n].skinMatrix),this.boneInverses.push(a)}}for(n=0,o=this.bones.length;n<o;n++)s.multiplyMatrices(this.bones[n].skinMatrix,this.boneInverses[n]),s.flattenToArrayOffset(this.boneMatrices,16*n);this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),THREE.SkinnedMesh.prototype.pose=function(){this.updateMatrixWorld(!0),this.normalizeSkinWeights()},THREE.SkinnedMesh.prototype.normalizeSkinWeights=function(){if(this.geometry instanceof THREE.Geometry)for(var e=0;e<this.geometry.skinIndices.length;e++){var t=this.geometry.skinWeights[e],i=1/t.lengthManhattan();i!==1/0?t.multiplyScalar(i):t.set(1)}},THREE.SkinnedMesh.prototype.clone=function(e){return void 0===e&&(e=new THREE.SkinnedMesh(this.geometry,this.material,this.useVertexTexture)),THREE.Mesh.prototype.clone.call(this,e),e},THREE.MorphAnimMesh=function(e,t){THREE.Mesh.call(this,e,t),this.duration=1e3,this.mirroredLoop=!1,this.time=0,this.lastKeyframe=0,this.currentKeyframe=0,this.direction=1,this.directionBackwards=!1,this.setFrameRange(0,this.geometry.morphTargets.length-1)},THREE.MorphAnimMesh.prototype=Object.create(THREE.Mesh.prototype),THREE.MorphAnimMesh.prototype.setFrameRange=function(e,t){this.startKeyframe=e,this.endKeyframe=t,this.length=this.endKeyframe-this.startKeyframe+1},THREE.MorphAnimMesh.prototype.setDirectionForward=function(){this.direction=1,this.directionBackwards=!1},THREE.MorphAnimMesh.prototype.setDirectionBackward=function(){this.direction=-1,this.directionBackwards=!0},THREE.MorphAnimMesh.prototype.parseAnimations=function(){var e=this.geometry;e.animations||(e.animations={});for(var t,i=e.animations,r=/([a-z]+)(\d+)/,n=0,o=e.morphTargets.length;n<o;n++){var a=e.morphTargets[n].name.match(r);if(a&&1<a.length){var s=a[1];a[2];i[s]||(i[s]={start:1/0,end:-1/0});var l=i[s];n<l.start&&(l.start=n),n>l.end&&(l.end=n),t||(t=s)}}e.firstAnimation=t},THREE.MorphAnimMesh.prototype.setAnimationLabel=function(e,t,i){this.geometry.animations||(this.geometry.animations={}),this.geometry.animations[e]={start:t,end:i}},THREE.MorphAnimMesh.prototype.playAnimation=function(e,t){var i=this.geometry.animations[e];i?(this.setFrameRange(i.start,i.end),this.duration=(i.end-i.start)/t*1e3,this.time=0):console.warn("animation["+e+"] undefined")},THREE.MorphAnimMesh.prototype.updateAnimation=function(e){var t=this.duration/this.length;this.time+=this.direction*e,this.mirroredLoop?(this.time>this.duration||this.time<0)&&(this.direction*=-1,this.time>this.duration&&(this.time=this.duration,this.directionBackwards=!0),this.time<0&&(this.time=0,this.directionBackwards=!1)):(this.time=this.time%this.duration,this.time<0&&(this.time+=this.duration));var i=this.startKeyframe+THREE.Math.clamp(Math.floor(this.time/t),0,this.length-1);i!==this.currentKeyframe&&(this.morphTargetInfluences[this.lastKeyframe]=0,this.morphTargetInfluences[this.currentKeyframe]=1,this.morphTargetInfluences[i]=0,this.lastKeyframe=this.currentKeyframe,this.currentKeyframe=i);var r=this.time%t/t;this.directionBackwards&&(r=1-r),this.morphTargetInfluences[this.currentKeyframe]=r,this.morphTargetInfluences[this.lastKeyframe]=1-r},THREE.MorphAnimMesh.prototype.clone=function(e){return void 0===e&&(e=new THREE.MorphAnimMesh(this.geometry,this.material)),e.duration=this.duration,e.mirroredLoop=this.mirroredLoop,e.time=this.time,e.lastKeyframe=this.lastKeyframe,e.currentKeyframe=this.currentKeyframe,e.direction=this.direction,e.directionBackwards=this.directionBackwards,THREE.Mesh.prototype.clone.call(this,e),e},THREE.LOD=function(){THREE.Object3D.call(this),this.objects=[]},THREE.LOD.prototype=Object.create(THREE.Object3D.prototype),THREE.LOD.prototype.addLevel=function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var i=0;i<this.objects.length&&!(t<this.objects[i].distance);i++);this.objects.splice(i,0,{distance:t,object:e}),this.add(e)},THREE.LOD.prototype.getObjectForDistance=function(e){for(var t=1,i=this.objects.length;t<i&&!(e<this.objects[t].distance);t++);return this.objects[t-1].object},THREE.LOD.prototype.update=function(){var n=new THREE.Vector3,o=new THREE.Vector3;return function(e){if(1<this.objects.length){n.getPositionFromMatrix(e.matrixWorld),o.getPositionFromMatrix(this.matrixWorld);var t=n.distanceTo(o);this.objects[0].object.visible=!0;for(var i=1,r=this.objects.length;i<r&&t>=this.objects[i].distance;i++)this.objects[i-1].object.visible=!1,this.objects[i].object.visible=!0;for(;i<r;i++)this.objects[i].object.visible=!1}}}(),THREE.LOD.prototype.clone=function(){},THREE.Sprite=function(e){THREE.Object3D.call(this),this.material=void 0!==e?e:new THREE.SpriteMaterial,this.rotation3d=this.rotation,this.rotation=0},THREE.Sprite.prototype=Object.create(THREE.Object3D.prototype),THREE.Sprite.prototype.updateMatrix=function(){this.rotation3d.set(0,0,this.rotation,this.rotation3d.order),this.quaternion.setFromEuler(this.rotation3d),this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},THREE.Sprite.prototype.clone=function(e){return void 0===e&&(e=new THREE.Sprite(this.material)),THREE.Object3D.prototype.clone.call(this,e),e},THREE.Scene=function(){THREE.Object3D.call(this),this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,this.matrixAutoUpdate=!1,this.__lights=[],this.__objectsAdded=[],this.__objectsRemoved=[]},THREE.Scene.prototype=Object.create(THREE.Object3D.prototype),THREE.Scene.prototype.__addObject=function(e){if(e instanceof THREE.Light)-1===this.__lights.indexOf(e)&&this.__lights.push(e),e.target&&void 0===e.target.parent&&this.add(e.target);else if(!(e instanceof THREE.Camera||e instanceof THREE.Bone)){this.__objectsAdded.push(e);var t=this.__objectsRemoved.indexOf(e);-1!==t&&this.__objectsRemoved.splice(t,1)}for(var i=0;i<e.children.length;i++)this.__addObject(e.children[i])},THREE.Scene.prototype.__removeObject=function(e){if(e instanceof THREE.Light){if(-1!==(i=this.__lights.indexOf(e))&&this.__lights.splice(i,1),e.shadowCascadeArray)for(var t=0;t<e.shadowCascadeArray.length;t++)this.__removeObject(e.shadowCascadeArray[t])}else if(!(e instanceof THREE.Camera)){var i;this.__objectsRemoved.push(e),-1!==(i=this.__objectsAdded.indexOf(e))&&this.__objectsAdded.splice(i,1)}for(var r=0;r<e.children.length;r++)this.__removeObject(e.children[r])},THREE.Scene.prototype.clone=function(e){return void 0===e&&(e=new THREE.Scene),THREE.Object3D.prototype.clone.call(this,e),null!==this.fog&&(e.fog=this.fog.clone()),null!==this.overrideMaterial&&(e.overrideMaterial=this.overrideMaterial.clone()),e.autoUpdate=this.autoUpdate,e.matrixAutoUpdate=this.matrixAutoUpdate,e},THREE.Fog=function(e,t,i){this.name="",this.color=new THREE.Color(e),this.near=void 0!==t?t:1,this.far=void 0!==i?i:1e3},THREE.Fog.prototype.clone=function(){return new THREE.Fog(this.color.getHex(),this.near,this.far)},THREE.FogExp2=function(e,t){this.name="",this.color=new THREE.Color(e),this.density=void 0!==t?t:25e-5},THREE.FogExp2.prototype.clone=function(){return new THREE.FogExp2(this.color.getHex(),this.density)},THREE.CanvasRenderer=function(e){console.log("THREE.CanvasRenderer",THREE.REVISION);var m=THREE.Math.smoothstep;e=e||{};var a,s,l,r,n,c,u,g,h,f,p,E,v,y,T,_,x,R,b,w,H,S,M,C,A,P,D,o,d,L,F,O,k,V=this,I=new THREE.Projector,N=void 0!==e.canvas?e.canvas:document.createElement("canvas"),U=N.getContext("2d"),i=new THREE.Color(0),z=0,B=1,j=0,W=null,G=null,X=null,q=null,Y=null,K=null,Q=0,Z=(new THREE.RenderableVertex,new THREE.RenderableVertex,new THREE.Color),$=new THREE.Color,J=new THREE.Color,ee=new THREE.Color,te=new THREE.Color,ie=new THREE.Color,re=new THREE.Color,ne=new THREE.Color,oe={},ae={},se=new THREE.Box2,le=new THREE.Box2,he=new THREE.Box2,ce=new THREE.Color,ue=new THREE.Color,fe=new THREE.Color,pe=new THREE.Vector3,t=16;function de(e,t,i){for(var r=0,n=l.length;r<n;r++){var o=l[r];if(ne.copy(o.color),o instanceof THREE.DirectionalLight){var a=pe.getPositionFromMatrix(o.matrixWorld).normalize();if((s=t.dot(a))<=0)continue;s*=o.intensity,i.add(ne.multiplyScalar(s))}else if(o instanceof THREE.PointLight){var s;a=pe.getPositionFromMatrix(o.matrixWorld);if((s=t.dot(pe.subVectors(a,e).normalize()))<=0)continue;if(0==(s*=0==o.distance?1:1-Math.min(e.distanceTo(a)/o.distance,1)))continue;s*=o.intensity,i.add(ne.multiplyScalar(s))}}}function me(e,t,i){var r,n,o,a,s,l,h;if(be(i.opacity),we(i.blending),i instanceof THREE.ParticleBasicMaterial)if(null===i.map){if(o=t.object.scale.x,a=t.object.scale.y,o*=t.scale.x*c,a*=t.scale.y*u,he.min.set(e.x-o,e.y-a),he.max.set(e.x+o,e.y+a),!1===se.isIntersectionBox(he))return void he.makeEmpty();Ae(i.color.getStyle()),U.save(),U.translate(e.x,e.y),U.rotate(-t.rotation),U.scale(o,a),U.fillRect(-1,-1,2,2),U.restore()}else{if(l=(s=i.map.image).width>>1,h=s.height>>1,r=(o=t.scale.x*c)*l,n=(a=t.scale.y*u)*h,he.min.set(e.x-r,e.y-n),he.max.set(e.x+r,e.y+n),!1===se.isIntersectionBox(he))return void he.makeEmpty();U.save(),U.translate(e.x,e.y),U.rotate(-t.rotation),U.scale(o,-a),U.translate(-l,-h),U.drawImage(s,0,0),U.restore()}else if(i instanceof THREE.ParticleCanvasMaterial){if(r=t.scale.x*c,n=t.scale.y*u,he.min.set(e.x-r,e.y-n),he.max.set(e.x+r,e.y+n),!1===se.isIntersectionBox(he))return void he.makeEmpty();Ce(i.color.getStyle()),Ae(i.color.getStyle()),U.save(),U.translate(e.x,e.y),U.rotate(-t.rotation),U.scale(r,n),i.program(U),U.restore()}}function ge(e,t,i,r){if(be(r.opacity),we(r.blending),U.beginPath(),U.moveTo(e.positionScreen.x,e.positionScreen.y),U.lineTo(t.positionScreen.x,t.positionScreen.y),r instanceof THREE.LineBasicMaterial){if(He(r.linewidth),Se(r.linecap),Me(r.linejoin),r.vertexColors!==THREE.VertexColors)Ce(r.color.getStyle());else{var n=i.vertexColors[0].getStyle(),o=i.vertexColors[1].getStyle();if(n===o)Ce(n);else{try{var a=U.createLinearGradient(e.positionScreen.x,e.positionScreen.y,t.positionScreen.x,t.positionScreen.y);a.addColorStop(0,n),a.addColorStop(1,o)}catch(e){a=n}Ce(a)}}U.stroke(),he.expandByScalar(2*r.linewidth)}else r instanceof THREE.LineDashedMaterial&&(He(r.linewidth),Se(r.linecap),Me(r.linejoin),Ce(r.color.getStyle()),Pe(r.dashSize,r.gapSize),U.stroke(),he.expandByScalar(2*r.linewidth),Pe(null,null))}function Ee(e,t,i,r,n,o,a,s){var l,h,c,u,f,p;if(V.info.render.vertices+=3,V.info.render.faces++,be(s.opacity),we(s.blending),E=e.positionScreen.x,v=e.positionScreen.y,y=t.positionScreen.x,T=t.positionScreen.y,_=i.positionScreen.x,x=i.positionScreen.y,l=E,h=v,c=y,u=T,f=_,p=x,U.beginPath(),U.moveTo(l,h),U.lineTo(c,u),U.lineTo(f,p),U.closePath(),(s instanceof THREE.MeshLambertMaterial||s instanceof THREE.MeshPhongMaterial)&&null===s.map)ie.copy(s.color),re.copy(s.emissive),s.vertexColors===THREE.FaceColors&&ie.multiply(a.color),!1===s.wireframe&&s.shading==THREE.SmoothShading&&3==a.vertexNormalsLength?($.copy(ce),J.copy(ce),ee.copy(ce),de(a.v1.positionWorld,a.vertexNormalsModel[0],$),de(a.v2.positionWorld,a.vertexNormalsModel[1],J),de(a.v3.positionWorld,a.vertexNormalsModel[2],ee),$.multiply(ie).add(re),J.multiply(ie).add(re),ee.multiply(ie).add(re),te.addColors(J,ee).multiplyScalar(.5),w=xe($,J,ee,te),_e(E,v,y,T,_,x,0,0,1,0,0,1,w)):(Z.copy(ce),de(a.centroidModel,a.normalModel,Z),Z.multiply(ie).add(re),!0===s.wireframe?ve(Z,s.wireframeLinewidth,s.wireframeLinecap,s.wireframeLinejoin):ye(Z));else if(s instanceof THREE.MeshBasicMaterial||s instanceof THREE.MeshLambertMaterial||s instanceof THREE.MeshPhongMaterial)null!==s.map?s.map.mapping instanceof THREE.UVMapping&&(H=a.uvs[0],Te(E,v,y,T,_,x,H[r].x,H[r].y,H[n].x,H[n].y,H[o].x,H[o].y,s.map)):null!==s.envMap?s.envMap.mapping instanceof THREE.SphericalReflectionMapping&&(pe.copy(a.vertexNormalsModelView[r]),S=.5*pe.x+.5,M=.5*pe.y+.5,pe.copy(a.vertexNormalsModelView[n]),C=.5*pe.x+.5,A=.5*pe.y+.5,pe.copy(a.vertexNormalsModelView[o]),P=.5*pe.x+.5,D=.5*pe.y+.5,Te(E,v,y,T,_,x,S,M,C,A,P,D,s.envMap)):(Z.copy(s.color),s.vertexColors===THREE.FaceColors&&Z.multiply(a.color),!0===s.wireframe?ve(Z,s.wireframeLinewidth,s.wireframeLinecap,s.wireframeLinejoin):ye(Z));else if(s instanceof THREE.MeshDepthMaterial)R=g.near,b=g.far,$.r=$.g=$.b=1-m(e.positionScreen.z*e.positionScreen.w,R,b),J.r=J.g=J.b=1-m(t.positionScreen.z*t.positionScreen.w,R,b),ee.r=ee.g=ee.b=1-m(i.positionScreen.z*i.positionScreen.w,R,b),te.addColors(J,ee).multiplyScalar(.5),w=xe($,J,ee,te),_e(E,v,y,T,_,x,0,0,1,0,0,1,w);else if(s instanceof THREE.MeshNormalMaterial){var d;s.shading==THREE.FlatShading?(d=a.normalModelView,Z.setRGB(d.x,d.y,d.z).multiplyScalar(.5).addScalar(.5),!0===s.wireframe?ve(Z,s.wireframeLinewidth,s.wireframeLinecap,s.wireframeLinejoin):ye(Z)):s.shading==THREE.SmoothShading&&(d=a.vertexNormalsModelView[r],$.setRGB(d.x,d.y,d.z).multiplyScalar(.5).addScalar(.5),d=a.vertexNormalsModelView[n],J.setRGB(d.x,d.y,d.z).multiplyScalar(.5).addScalar(.5),d=a.vertexNormalsModelView[o],ee.setRGB(d.x,d.y,d.z).multiplyScalar(.5).addScalar(.5),te.addColors(J,ee).multiplyScalar(.5),w=xe($,J,ee,te),_e(E,v,y,T,_,x,0,0,1,0,0,1,w))}}function ve(e,t,i,r){He(t),Se(i),Me(r),Ce(e.getStyle()),U.stroke(),he.expandByScalar(2*t)}function ye(e){Ae(e.getStyle()),U.fill()}function Te(e,t,i,r,n,o,a,s,l,h,c,u,f){if(!(f instanceof THREE.DataTexture||void 0===f.image||0==f.image.width)){if(!0===f.needsUpdate){var p=f.wrapS==THREE.RepeatWrapping,d=f.wrapT==THREE.RepeatWrapping;oe[f.id]=U.createPattern(f.image,!0===p&&!0===d?"repeat":!0===p&&!1===d?"repeat-x":!1===p&&!0===d?"repeat-y":"no-repeat"),f.needsUpdate=!1}void 0===oe[f.id]?Ae("rgba(0,0,0,1)"):Ae(oe[f.id]);var m,g,E,v,y,T,_,x,R=f.offset.x/f.repeat.x,b=f.offset.y/f.repeat.y,w=f.image.width*f.repeat.x,H=f.image.height*f.repeat.y;if(l=(l+R)*w,h=(1-h+b)*H,c=(c+R)*w,u=(1-u+b)*H,i-=e,r-=t,n-=e,o-=t,0===(_=(l-=a=(a+R)*w)*(u-=s=(1-s+b)*H)-(c-=a)*(h-=s))){if(void 0===ae[f.id]){var S=document.createElement("canvas");S.width=f.image.width,S.height=f.image.height;var M=S.getContext("2d");M.drawImage(f.image,0,0),ae[f.id]=M.getImageData(0,0,f.image.width,f.image.height).data}var C=ae[f.id],A=4*(Math.floor(a)+Math.floor(s)*f.image.width);return Z.setRGB(C[A]/255,C[A+1]/255,C[A+2]/255),void ye(Z)}y=e-(m=(u*i-h*n)*(x=1/_))*a-(E=(l*n-c*i)*x)*s,T=t-(g=(u*r-h*o)*x)*a-(v=(l*o-c*r)*x)*s,U.save(),U.transform(m,g,E,v,y,T),U.fill(),U.restore()}}function _e(e,t,i,r,n,o,a,s,l,h,c,u,f){var p,d,m,g,E,v,y,T=f.width-1,_=f.height-1;l*=T,h*=_,c*=T,u*=_,E=e-(p=((u-=s*=_)*(i-=e)-(h-=s)*(n-=e))*(y=1/((l-=a*=T)*u-(c-=a)*h)))*a-(m=(l*n-c*i)*y)*s,v=t-(d=(u*(r-=t)-h*(o-=t))*y)*a-(g=(l*o-c*r)*y)*s,U.save(),U.transform(p,d,m,g,E,v),U.clip(),U.drawImage(f,0,0),U.restore()}function xe(e,t,i,r){return F[0]=255*e.r|0,F[1]=255*e.g|0,F[2]=255*e.b|0,F[4]=255*t.r|0,F[5]=255*t.g|0,F[6]=255*t.b|0,F[8]=255*i.r|0,F[9]=255*i.g|0,F[10]=255*i.b|0,F[12]=255*r.r|0,F[13]=255*r.g|0,F[14]=255*r.b|0,d.putImageData(L,0,0),k.drawImage(o,0,0),O}function Re(e,t,i){var r,n=t.x-e.x,o=t.y-e.y,a=n*n+o*o;0!==a&&(n*=r=i/Math.sqrt(a),o*=r,t.x+=n,t.y+=o,e.x-=n,e.y-=o)}function be(e){B!==e&&(U.globalAlpha=e,B=e)}function we(e){j!==e&&(e===THREE.NormalBlending?U.globalCompositeOperation="source-over":e===THREE.AdditiveBlending?U.globalCompositeOperation="lighter":e===THREE.SubtractiveBlending&&(U.globalCompositeOperation="darker"),j=e)}function He(e){X!==e&&(U.lineWidth=e,X=e)}function Se(e){q!==e&&(U.lineCap=e,q=e)}function Me(e){Y!==e&&(U.lineJoin=e,Y=e)}function Ce(e){W!==e&&(U.strokeStyle=e,W=e)}function Ae(e){G!==e&&(U.fillStyle=e,G=e)}function Pe(e,t){K===e&&Q===t||(U.setLineDash([e,t]),K=e,Q=t)}(o=document.createElement("canvas")).width=o.height=2,(d=o.getContext("2d")).fillStyle="rgba(0,0,0,1)",d.fillRect(0,0,2,2),L=d.getImageData(0,0,2,2),F=L.data,(O=document.createElement("canvas")).width=O.height=t,(k=O.getContext("2d")).translate(-t/2,-t/2),k.scale(t,t),t--,void 0===U.setLineDash&&(void 0!==U.mozDash?U.setLineDash=function(e){U.mozDash=null!==e[0]?e:null}:U.setLineDash=function(){}),this.domElement=N,this.devicePixelRatio=void 0!==e.devicePixelRatio?e.devicePixelRatio:void 0!==self.devicePixelRatio?self.devicePixelRatio:1,this.autoClear=!0,this.sortObjects=!0,this.sortElements=!0,this.info={render:{vertices:0,faces:0}},this.supportsVertexTextures=function(){},this.setFaceCulling=function(){},this.setSize=function(e,t,i){r=e*this.devicePixelRatio,n=t*this.devicePixelRatio,c=Math.floor(r/2),u=Math.floor(n/2),N.width=r,N.height=n,1!==this.devicePixelRatio&&!1!==i&&(N.style.width=e+"px",N.style.height=t+"px"),se.set(new THREE.Vector2(-c,-u),new THREE.Vector2(c,u)),le.set(new THREE.Vector2(-c,-u),new THREE.Vector2(c,u)),B=1,j=0,Y=q=X=G=W=null},this.setClearColor=function(e,t){i.set(e),z=void 0!==t?t:1,le.set(new THREE.Vector2(-c,-u),new THREE.Vector2(c,u))},this.setClearColorHex=function(e,t){console.warn("DEPRECATED: .setClearColorHex() is being removed. Use .setClearColor() instead."),this.setClearColor(e,t)},this.getMaxAnisotropy=function(){return 0},this.clear=function(){U.setTransform(1,0,0,-1,c,u),!1===le.empty()&&(le.intersect(se),le.expandByScalar(2),z<1&&U.clearRect(0|le.min.x,0|le.min.y,le.max.x-le.min.x|0,le.max.y-le.min.y|0),0<z&&(we(THREE.NormalBlending),be(1),Ae("rgba("+Math.floor(255*i.r)+","+Math.floor(255*i.g)+","+Math.floor(255*i.b)+","+z+")"),U.fillRect(0|le.min.x,0|le.min.y,le.max.x-le.min.x|0,le.max.y-le.min.y|0)),le.makeEmpty())},this.render=function(e,t){if(t instanceof THREE.Camera!=!1){!0===this.autoClear&&this.clear(),U.setTransform(1,0,0,-1,c,u),V.info.render.vertices=0,V.info.render.faces=0,a=I.projectScene(e,t,this.sortObjects,this.sortElements),s=a.elements,l=a.lights,g=t,function(){ce.setRGB(0,0,0),ue.setRGB(0,0,0),fe.setRGB(0,0,0);for(var e=0,t=l.length;e<t;e++){var i=l[e],r=i.color;i instanceof THREE.AmbientLight?ce.add(r):i instanceof THREE.DirectionalLight?ue.add(r):i instanceof THREE.PointLight&&fe.add(r)}}();for(var i=0,r=s.length;i<r;i++){var n=s[i],o=n.material;if(void 0!==o&&!1!==o.visible){if(he.makeEmpty(),n instanceof THREE.RenderableParticle)(h=n).x*=c,h.y*=u,me(h,n,o);else if(n instanceof THREE.RenderableLine)h=n.v1,f=n.v2,h.positionScreen.x*=c,h.positionScreen.y*=u,f.positionScreen.x*=c,f.positionScreen.y*=u,he.setFromPoints([h.positionScreen,f.positionScreen]),!0===se.isIntersectionBox(he)&&ge(h,f,n,o);else if(n instanceof THREE.RenderableFace3){if(h=n.v1,f=n.v2,p=n.v3,h.positionScreen.z<-1||1<h.positionScreen.z)continue;if(f.positionScreen.z<-1||1<f.positionScreen.z)continue;if(p.positionScreen.z<-1||1<p.positionScreen.z)continue;h.positionScreen.x*=c,h.positionScreen.y*=u,f.positionScreen.x*=c,f.positionScreen.y*=u,p.positionScreen.x*=c,p.positionScreen.y*=u,0<o.overdraw&&(Re(h.positionScreen,f.positionScreen,o.overdraw),Re(f.positionScreen,p.positionScreen,o.overdraw),Re(p.positionScreen,h.positionScreen,o.overdraw)),he.setFromPoints([h.positionScreen,f.positionScreen,p.positionScreen]),!0===se.isIntersectionBox(he)&&Ee(h,f,p,0,1,2,n,o)}le.union(he)}}U.setTransform(1,0,0,1,0,0)}else console.error("THREE.CanvasRenderer.render: camera is not an instance of THREE.Camera.")}},THREE.ShaderChunk={fog_pars_fragment:["#ifdef USE_FOG","uniform vec3 fogColor;","#ifdef FOG_EXP2","uniform float fogDensity;","#else","uniform float fogNear;","uniform float fogFar;","#endif","#endif"].join("\n"),fog_fragment:["#ifdef USE_FOG","float depth = gl_FragCoord.z / gl_FragCoord.w;","#ifdef FOG_EXP2","const float LOG2 = 1.442695;","float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","#else","float fogFactor = smoothstep( fogNear, fogFar, depth );","#endif","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","#endif"].join("\n"),envmap_pars_fragment:["#ifdef USE_ENVMAP","uniform float reflectivity;","uniform samplerCube envMap;","uniform float flipEnvMap;","uniform int combine;","#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )","uniform bool useRefract;","uniform float refractionRatio;","#else","varying vec3 vReflect;","#endif","#endif"].join("\n"),envmap_fragment:["#ifdef USE_ENVMAP","vec3 reflectVec;","#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )","vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );","if ( useRefract ) {","reflectVec = refract( cameraToVertex, normal, refractionRatio );","} else { ","reflectVec = reflect( cameraToVertex, normal );","}","#else","reflectVec = vReflect;","#endif","#ifdef DOUBLE_SIDED","float flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );","vec4 cubeColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );","#else","vec4 cubeColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );","#endif","#ifdef GAMMA_INPUT","cubeColor.xyz *= cubeColor.xyz;","#endif","if ( combine == 1 ) {","gl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularStrength * reflectivity );","} else if ( combine == 2 ) {","gl_FragColor.xyz += cubeColor.xyz * specularStrength * reflectivity;","} else {","gl_FragColor.xyz = mix( gl_FragColor.xyz, gl_FragColor.xyz * cubeColor.xyz, specularStrength * reflectivity );","}","#endif"].join("\n"),envmap_pars_vertex:["#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )","varying vec3 vReflect;","uniform float refractionRatio;","uniform bool useRefract;","#endif"].join("\n"),worldpos_vertex:["#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )","#ifdef USE_SKINNING","vec4 worldPosition = modelMatrix * skinned;","#endif","#if defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )","vec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );","#endif","#if ! defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )","vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","#endif","#endif"].join("\n"),envmap_vertex:["#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )","vec3 worldNormal = mat3( modelMatrix[ 0 ].xyz, modelMatrix[ 1 ].xyz, modelMatrix[ 2 ].xyz ) * objectNormal;","worldNormal = normalize( worldNormal );","vec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );","if ( useRefract ) {","vReflect = refract( cameraToVertex, worldNormal, refractionRatio );","} else {","vReflect = reflect( cameraToVertex, worldNormal );","}","#endif"].join("\n"),map_particle_pars_fragment:["#ifdef USE_MAP","uniform sampler2D map;","#endif"].join("\n"),map_particle_fragment:["#ifdef USE_MAP","gl_FragColor = gl_FragColor * texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) );","#endif"].join("\n"),map_pars_vertex:["#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )","varying vec2 vUv;","uniform vec4 offsetRepeat;","#endif"].join("\n"),map_pars_fragment:["#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )","varying vec2 vUv;","#endif","#ifdef USE_MAP","uniform sampler2D map;","#endif"].join("\n"),map_vertex:["#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )","vUv = uv * offsetRepeat.zw + offsetRepeat.xy;","#endif"].join("\n"),map_fragment:["#ifdef USE_MAP","vec4 texelColor = texture2D( map, vUv );","#ifdef GAMMA_INPUT","texelColor.xyz *= texelColor.xyz;","#endif","gl_FragColor = gl_FragColor * texelColor;","#endif"].join("\n"),lightmap_pars_fragment:["#ifdef USE_LIGHTMAP","varying vec2 vUv2;","uniform sampler2D lightMap;","#endif"].join("\n"),lightmap_pars_vertex:["#ifdef USE_LIGHTMAP","varying vec2 vUv2;","#endif"].join("\n"),lightmap_fragment:["#ifdef USE_LIGHTMAP","gl_FragColor = gl_FragColor * texture2D( lightMap, vUv2 );","#endif"].join("\n"),lightmap_vertex:["#ifdef USE_LIGHTMAP","vUv2 = uv2;","#endif"].join("\n"),bumpmap_pars_fragment:["#ifdef USE_BUMPMAP","uniform sampler2D bumpMap;","uniform float bumpScale;","vec2 dHdxy_fwd() {","vec2 dSTdx = dFdx( vUv );","vec2 dSTdy = dFdy( vUv );","float Hll = bumpScale * texture2D( bumpMap, vUv ).x;","float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;","float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;","return vec2( dBx, dBy );","}","vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {","vec3 vSigmaX = dFdx( surf_pos );","vec3 vSigmaY = dFdy( surf_pos );","vec3 vN = surf_norm;","vec3 R1 = cross( vSigmaY, vN );","vec3 R2 = cross( vN, vSigmaX );","float fDet = dot( vSigmaX, R1 );","vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );","return normalize( abs( fDet ) * surf_norm - vGrad );","}","#endif"].join("\n"),normalmap_pars_fragment:["#ifdef USE_NORMALMAP","uniform sampler2D normalMap;","uniform vec2 normalScale;","vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {","vec3 q0 = dFdx( eye_pos.xyz );","vec3 q1 = dFdy( eye_pos.xyz );","vec2 st0 = dFdx( vUv.st );","vec2 st1 = dFdy( vUv.st );","vec3 S = normalize(  q0 * st1.t - q1 * st0.t );","vec3 T = normalize( -q0 * st1.s + q1 * st0.s );","vec3 N = normalize( surf_norm );","vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;","mapN.xy = normalScale * mapN.xy;","mat3 tsn = mat3( S, T, N );","return normalize( tsn * mapN );","}","#endif"].join("\n"),specularmap_pars_fragment:["#ifdef USE_SPECULARMAP","uniform sampler2D specularMap;","#endif"].join("\n"),specularmap_fragment:["float specularStrength;","#ifdef USE_SPECULARMAP","vec4 texelSpecular = texture2D( specularMap, vUv );","specularStrength = texelSpecular.r;","#else","specularStrength = 1.0;","#endif"].join("\n"),lights_lambert_pars_vertex:["uniform vec3 ambient;","uniform vec3 diffuse;","uniform vec3 emissive;","uniform vec3 ambientLightColor;","#if MAX_DIR_LIGHTS > 0","uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];","uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];","#endif","#if MAX_HEMI_LIGHTS > 0","uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];","uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];","uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];","#endif","#if MAX_POINT_LIGHTS > 0","uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];","uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];","uniform float pointLightDistance[ MAX_POINT_LIGHTS ];","#endif","#if MAX_SPOT_LIGHTS > 0","uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];","uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];","uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];","uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];","uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];","uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];","#endif","#ifdef WRAP_AROUND","uniform vec3 wrapRGB;","#endif"].join("\n"),lights_lambert_vertex:["vLightFront = vec3( 0.0 );","#ifdef DOUBLE_SIDED","vLightBack = vec3( 0.0 );","#endif","transformedNormal = normalize( transformedNormal );","#if MAX_DIR_LIGHTS > 0","for( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {","vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );","vec3 dirVector = normalize( lDirection.xyz );","float dotProduct = dot( transformedNormal, dirVector );","vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );","#ifdef DOUBLE_SIDED","vec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );","#ifdef WRAP_AROUND","vec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );","#endif","#endif","#ifdef WRAP_AROUND","vec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );","directionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );","#ifdef DOUBLE_SIDED","directionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );","#endif","#endif","vLightFront += directionalLightColor[ i ] * directionalLightWeighting;","#ifdef DOUBLE_SIDED","vLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;","#endif","}","#endif","#if MAX_POINT_LIGHTS > 0","for( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {","vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );","vec3 lVector = lPosition.xyz - mvPosition.xyz;","float lDistance = 1.0;","if ( pointLightDistance[ i ] > 0.0 )","lDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );","lVector = normalize( lVector );","float dotProduct = dot( transformedNormal, lVector );","vec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );","#ifdef DOUBLE_SIDED","vec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );","#ifdef WRAP_AROUND","vec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );","#endif","#endif","#ifdef WRAP_AROUND","vec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );","pointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );","#ifdef DOUBLE_SIDED","pointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );","#endif","#endif","vLightFront += pointLightColor[ i ] * pointLightWeighting * lDistance;","#ifdef DOUBLE_SIDED","vLightBack += pointLightColor[ i ] * pointLightWeightingBack * lDistance;","#endif","}","#endif","#if MAX_SPOT_LIGHTS > 0","for( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {","vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );","vec3 lVector = lPosition.xyz - mvPosition.xyz;","float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - worldPosition.xyz ) );","if ( spotEffect > spotLightAngleCos[ i ] ) {","spotEffect = max( pow( spotEffect, spotLightExponent[ i ] ), 0.0 );","float lDistance = 1.0;","if ( spotLightDistance[ i ] > 0.0 )","lDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );","lVector = normalize( lVector );","float dotProduct = dot( transformedNormal, lVector );","vec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );","#ifdef DOUBLE_SIDED","vec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );","#ifdef WRAP_AROUND","vec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );","#endif","#endif","#ifdef WRAP_AROUND","vec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );","spotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );","#ifdef DOUBLE_SIDED","spotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );","#endif","#endif","vLightFront += spotLightColor[ i ] * spotLightWeighting * lDistance * spotEffect;","#ifdef DOUBLE_SIDED","vLightBack += spotLightColor[ i ] * spotLightWeightingBack * lDistance * spotEffect;","#endif","}","}","#endif","#if MAX_HEMI_LIGHTS > 0","for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {","vec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );","vec3 lVector = normalize( lDirection.xyz );","float dotProduct = dot( transformedNormal, lVector );","float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;","float hemiDiffuseWeightBack = -0.5 * dotProduct + 0.5;","vLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );","#ifdef DOUBLE_SIDED","vLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );","#endif","}","#endif","vLightFront = vLightFront * diffuse + ambient * ambientLightColor + emissive;","#ifdef DOUBLE_SIDED","vLightBack = vLightBack * diffuse + ambient * ambientLightColor + emissive;","#endif"].join("\n"),lights_phong_pars_vertex:["#ifndef PHONG_PER_PIXEL","#if MAX_POINT_LIGHTS > 0","uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];","uniform float pointLightDistance[ MAX_POINT_LIGHTS ];","varying vec4 vPointLight[ MAX_POINT_LIGHTS ];","#endif","#if MAX_SPOT_LIGHTS > 0","uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];","uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];","varying vec4 vSpotLight[ MAX_SPOT_LIGHTS ];","#endif","#endif","#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )","varying vec3 vWorldPosition;","#endif"].join("\n"),lights_phong_vertex:["#ifndef PHONG_PER_PIXEL","#if MAX_POINT_LIGHTS > 0","for( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {","vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );","vec3 lVector = lPosition.xyz - mvPosition.xyz;","float lDistance = 1.0;","if ( pointLightDistance[ i ] > 0.0 )","lDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );","vPointLight[ i ] = vec4( lVector, lDistance );","}","#endif","#if MAX_SPOT_LIGHTS > 0","for( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {","vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );","vec3 lVector = lPosition.xyz - mvPosition.xyz;","float lDistance = 1.0;","if ( spotLightDistance[ i ] > 0.0 )","lDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );","vSpotLight[ i ] = vec4( lVector, lDistance );","}","#endif","#endif","#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )","vWorldPosition = worldPosition.xyz;","#endif"].join("\n"),lights_phong_pars_fragment:["uniform vec3 ambientLightColor;","#if MAX_DIR_LIGHTS > 0","uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];","uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];","#endif","#if MAX_HEMI_LIGHTS > 0","uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];","uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];","uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];","#endif","#if MAX_POINT_LIGHTS > 0","uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];","#ifdef PHONG_PER_PIXEL","uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];","uniform float pointLightDistance[ MAX_POINT_LIGHTS ];","#else","varying vec4 vPointLight[ MAX_POINT_LIGHTS ];","#endif","#endif","#if MAX_SPOT_LIGHTS > 0","uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];","uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];","uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];","uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];","uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];","#ifdef PHONG_PER_PIXEL","uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];","#else","varying vec4 vSpotLight[ MAX_SPOT_LIGHTS ];","#endif","#endif","#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )","varying vec3 vWorldPosition;","#endif","#ifdef WRAP_AROUND","uniform vec3 wrapRGB;","#endif","varying vec3 vViewPosition;","varying vec3 vNormal;"].join("\n"),lights_phong_fragment:["vec3 normal = normalize( vNormal );","vec3 viewPosition = normalize( vViewPosition );","#ifdef DOUBLE_SIDED","normal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );","#endif","#ifdef USE_NORMALMAP","normal = perturbNormal2Arb( -vViewPosition, normal );","#elif defined( USE_BUMPMAP )","normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );","#endif","#if MAX_POINT_LIGHTS > 0","vec3 pointDiffuse  = vec3( 0.0 );","vec3 pointSpecular = vec3( 0.0 );","for ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {","#ifdef PHONG_PER_PIXEL","vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );","vec3 lVector = lPosition.xyz + vViewPosition.xyz;","float lDistance = 1.0;","if ( pointLightDistance[ i ] > 0.0 )","lDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );","lVector = normalize( lVector );","#else","vec3 lVector = normalize( vPointLight[ i ].xyz );","float lDistance = vPointLight[ i ].w;","#endif","float dotProduct = dot( normal, lVector );","#ifdef WRAP_AROUND","float pointDiffuseWeightFull = max( dotProduct, 0.0 );","float pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );","vec3 pointDiffuseWeight = mix( vec3 ( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );","#else","float pointDiffuseWeight = max( dotProduct, 0.0 );","#endif","pointDiffuse  += diffuse * pointLightColor[ i ] * pointDiffuseWeight * lDistance;","vec3 pointHalfVector = normalize( lVector + viewPosition );","float pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );","float pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininess ), 0.0 );","#ifdef PHYSICALLY_BASED_SHADING","float specularNormalization = ( shininess + 2.0001 ) / 8.0;","vec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, pointHalfVector ), 5.0 );","pointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance * specularNormalization;","#else","pointSpecular += specular * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance;","#endif","}","#endif","#if MAX_SPOT_LIGHTS > 0","vec3 spotDiffuse  = vec3( 0.0 );","vec3 spotSpecular = vec3( 0.0 );","for ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {","#ifdef PHONG_PER_PIXEL","vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );","vec3 lVector = lPosition.xyz + vViewPosition.xyz;","float lDistance = 1.0;","if ( spotLightDistance[ i ] > 0.0 )","lDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );","lVector = normalize( lVector );","#else","vec3 lVector = normalize( vSpotLight[ i ].xyz );","float lDistance = vSpotLight[ i ].w;","#endif","float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );","if ( spotEffect > spotLightAngleCos[ i ] ) {","spotEffect = max( pow( spotEffect, spotLightExponent[ i ] ), 0.0 );","float dotProduct = dot( normal, lVector );","#ifdef WRAP_AROUND","float spotDiffuseWeightFull = max( dotProduct, 0.0 );","float spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );","vec3 spotDiffuseWeight = mix( vec3 ( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );","#else","float spotDiffuseWeight = max( dotProduct, 0.0 );","#endif","spotDiffuse += diffuse * spotLightColor[ i ] * spotDiffuseWeight * lDistance * spotEffect;","vec3 spotHalfVector = normalize( lVector + viewPosition );","float spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );","float spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininess ), 0.0 );","#ifdef PHYSICALLY_BASED_SHADING","float specularNormalization = ( shininess + 2.0001 ) / 8.0;","vec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, spotHalfVector ), 5.0 );","spotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * specularNormalization * spotEffect;","#else","spotSpecular += specular * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * spotEffect;","#endif","}","}","#endif","#if MAX_DIR_LIGHTS > 0","vec3 dirDiffuse  = vec3( 0.0 );","vec3 dirSpecular = vec3( 0.0 );","for( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {","vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );","vec3 dirVector = normalize( lDirection.xyz );","float dotProduct = dot( normal, dirVector );","#ifdef WRAP_AROUND","float dirDiffuseWeightFull = max( dotProduct, 0.0 );","float dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );","vec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );","#else","float dirDiffuseWeight = max( dotProduct, 0.0 );","#endif","dirDiffuse  += diffuse * directionalLightColor[ i ] * dirDiffuseWeight;","vec3 dirHalfVector = normalize( dirVector + viewPosition );","float dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );","float dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininess ), 0.0 );","#ifdef PHYSICALLY_BASED_SHADING","float specularNormalization = ( shininess + 2.0001 ) / 8.0;","vec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( dirVector, dirHalfVector ), 5.0 );","dirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;","#else","dirSpecular += specular * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight;","#endif","}","#endif","#if MAX_HEMI_LIGHTS > 0","vec3 hemiDiffuse  = vec3( 0.0 );","vec3 hemiSpecular = vec3( 0.0 );","for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {","vec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );","vec3 lVector = normalize( lDirection.xyz );","float dotProduct = dot( normal, lVector );","float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;","vec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );","hemiDiffuse += diffuse * hemiColor;","vec3 hemiHalfVectorSky = normalize( lVector + viewPosition );","float hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;","float hemiSpecularWeightSky = specularStrength * max( pow( hemiDotNormalHalfSky, shininess ), 0.0 );","vec3 lVectorGround = -lVector;","vec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );","float hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;","float hemiSpecularWeightGround = specularStrength * max( pow( hemiDotNormalHalfGround, shininess ), 0.0 );","#ifdef PHYSICALLY_BASED_SHADING","float dotProductGround = dot( normal, lVectorGround );","float specularNormalization = ( shininess + 2.0001 ) / 8.0;","vec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, hemiHalfVectorSky ), 5.0 );","vec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 5.0 );","hemiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );","#else","hemiSpecular += specular * hemiColor * ( hemiSpecularWeightSky + hemiSpecularWeightGround ) * hemiDiffuseWeight;","#endif","}","#endif","vec3 totalDiffuse = vec3( 0.0 );","vec3 totalSpecular = vec3( 0.0 );","#if MAX_DIR_LIGHTS > 0","totalDiffuse += dirDiffuse;","totalSpecular += dirSpecular;","#endif","#if MAX_HEMI_LIGHTS > 0","totalDiffuse += hemiDiffuse;","totalSpecular += hemiSpecular;","#endif","#if MAX_POINT_LIGHTS > 0","totalDiffuse += pointDiffuse;","totalSpecular += pointSpecular;","#endif","#if MAX_SPOT_LIGHTS > 0","totalDiffuse += spotDiffuse;","totalSpecular += spotSpecular;","#endif","#ifdef METAL","gl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient + totalSpecular );","#else","gl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient ) + totalSpecular;","#endif"].join("\n"),color_pars_fragment:["#ifdef USE_COLOR","varying vec3 vColor;","#endif"].join("\n"),color_fragment:["#ifdef USE_COLOR","gl_FragColor = gl_FragColor * vec4( vColor, opacity );","#endif"].join("\n"),color_pars_vertex:["#ifdef USE_COLOR","varying vec3 vColor;","#endif"].join("\n"),color_vertex:["#ifdef USE_COLOR","#ifdef GAMMA_INPUT","vColor = color * color;","#else","vColor = color;","#endif","#endif"].join("\n"),skinning_pars_vertex:["#ifdef USE_SKINNING","#ifdef BONE_TEXTURE","uniform sampler2D boneTexture;","uniform int boneTextureWidth;","uniform int boneTextureHeight;","mat4 getBoneMatrix( const in float i ) {","float j = i * 4.0;","float x = mod( j, float( boneTextureWidth ) );","float y = floor( j / float( boneTextureWidth ) );","float dx = 1.0 / float( boneTextureWidth );","float dy = 1.0 / float( boneTextureHeight );","y = dy * ( y + 0.5 );","vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );","vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );","vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );","vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );","mat4 bone = mat4( v1, v2, v3, v4 );","return bone;","}","#else","uniform mat4 boneGlobalMatrices[ MAX_BONES ];","mat4 getBoneMatrix( const in float i ) {","mat4 bone = boneGlobalMatrices[ int(i) ];","return bone;","}","#endif","#endif"].join("\n"),skinbase_vertex:["#ifdef USE_SKINNING","mat4 boneMatX = getBoneMatrix( skinIndex.x );","mat4 boneMatY = getBoneMatrix( skinIndex.y );","#endif"].join("\n"),skinning_vertex:["#ifdef USE_SKINNING","#ifdef USE_MORPHTARGETS","vec4 skinVertex = vec4( morphed, 1.0 );","#else","vec4 skinVertex = vec4( position, 1.0 );","#endif","vec4 skinned  = boneMatX * skinVertex * skinWeight.x;","skinned \t  += boneMatY * skinVertex * skinWeight.y;","#endif"].join("\n"),morphtarget_pars_vertex:["#ifdef USE_MORPHTARGETS","#ifndef USE_MORPHNORMALS","uniform float morphTargetInfluences[ 8 ];","#else","uniform float morphTargetInfluences[ 4 ];","#endif","#endif"].join("\n"),morphtarget_vertex:["#ifdef USE_MORPHTARGETS","vec3 morphed = vec3( 0.0 );","morphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];","morphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];","morphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];","morphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];","#ifndef USE_MORPHNORMALS","morphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];","morphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];","morphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];","morphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];","#endif","morphed += position;","#endif"].join("\n"),default_vertex:["vec4 mvPosition;","#ifdef USE_SKINNING","mvPosition = modelViewMatrix * skinned;","#endif","#if !defined( USE_SKINNING ) && defined( USE_MORPHTARGETS )","mvPosition = modelViewMatrix * vec4( morphed, 1.0 );","#endif","#if !defined( USE_SKINNING ) && ! defined( USE_MORPHTARGETS )","mvPosition = modelViewMatrix * vec4( position, 1.0 );","#endif","gl_Position = projectionMatrix * mvPosition;"].join("\n"),morphnormal_vertex:["#ifdef USE_MORPHNORMALS","vec3 morphedNormal = vec3( 0.0 );","morphedNormal +=  ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];","morphedNormal +=  ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];","morphedNormal +=  ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];","morphedNormal +=  ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];","morphedNormal += normal;","#endif"].join("\n"),skinnormal_vertex:["#ifdef USE_SKINNING","mat4 skinMatrix = skinWeight.x * boneMatX;","skinMatrix \t+= skinWeight.y * boneMatY;","#ifdef USE_MORPHNORMALS","vec4 skinnedNormal = skinMatrix * vec4( morphedNormal, 0.0 );","#else","vec4 skinnedNormal = skinMatrix * vec4( normal, 0.0 );","#endif","#endif"].join("\n"),defaultnormal_vertex:["vec3 objectNormal;","#ifdef USE_SKINNING","objectNormal = skinnedNormal.xyz;","#endif","#if !defined( USE_SKINNING ) && defined( USE_MORPHNORMALS )","objectNormal = morphedNormal;","#endif","#if !defined( USE_SKINNING ) && ! defined( USE_MORPHNORMALS )","objectNormal = normal;","#endif","#ifdef FLIP_SIDED","objectNormal = -objectNormal;","#endif","vec3 transformedNormal = normalMatrix * objectNormal;"].join("\n"),shadowmap_pars_fragment:["#ifdef USE_SHADOWMAP","uniform sampler2D shadowMap[ MAX_SHADOWS ];","uniform vec2 shadowMapSize[ MAX_SHADOWS ];","uniform float shadowDarkness[ MAX_SHADOWS ];","uniform float shadowBias[ MAX_SHADOWS ];","varying vec4 vShadowCoord[ MAX_SHADOWS ];","float unpackDepth( const in vec4 rgba_depth ) {","const vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );","float depth = dot( rgba_depth, bit_shift );","return depth;","}","#endif"].join("\n"),shadowmap_fragment:["#ifdef USE_SHADOWMAP","#ifdef SHADOWMAP_DEBUG","vec3 frustumColors[3];","frustumColors[0] = vec3( 1.0, 0.5, 0.0 );","frustumColors[1] = vec3( 0.0, 1.0, 0.8 );","frustumColors[2] = vec3( 0.0, 0.5, 1.0 );","#endif","#ifdef SHADOWMAP_CASCADE","int inFrustumCount = 0;","#endif","float fDepth;","vec3 shadowColor = vec3( 1.0 );","for( int i = 0; i < MAX_SHADOWS; i ++ ) {","vec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;","bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );","bool inFrustum = all( inFrustumVec );","#ifdef SHADOWMAP_CASCADE","inFrustumCount += int( inFrustum );","bvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );","#else","bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );","#endif","bool frustumTest = all( frustumTestVec );","if ( frustumTest ) {","shadowCoord.z += shadowBias[ i ];","#if defined( SHADOWMAP_TYPE_PCF )","float shadow = 0.0;","const float shadowDelta = 1.0 / 9.0;","float xPixelOffset = 1.0 / shadowMapSize[ i ].x;","float yPixelOffset = 1.0 / shadowMapSize[ i ].y;","float dx0 = -1.25 * xPixelOffset;","float dy0 = -1.25 * yPixelOffset;","float dx1 = 1.25 * xPixelOffset;","float dy1 = 1.25 * yPixelOffset;","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","shadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );","#elif defined( SHADOWMAP_TYPE_PCF_SOFT )","float shadow = 0.0;","float xPixelOffset = 1.0 / shadowMapSize[ i ].x;","float yPixelOffset = 1.0 / shadowMapSize[ i ].y;","float dx0 = -1.0 * xPixelOffset;","float dy0 = -1.0 * yPixelOffset;","float dx1 = 1.0 * xPixelOffset;","float dy1 = 1.0 * yPixelOffset;","mat3 shadowKernel;","mat3 depthKernel;","depthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );","depthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );","depthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );","depthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );","depthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );","depthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );","depthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );","depthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );","depthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );","vec3 shadowZ = vec3( shadowCoord.z );","shadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));","shadowKernel[0] *= vec3(0.25);","shadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));","shadowKernel[1] *= vec3(0.25);","shadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));","shadowKernel[2] *= vec3(0.25);","vec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );","shadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );","shadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );","vec4 shadowValues;","shadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );","shadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );","shadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );","shadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );","shadow = dot( shadowValues, vec4( 1.0 ) );","shadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );","#else","vec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );","float fDepth = unpackDepth( rgbaDepth );","if ( fDepth < shadowCoord.z )","shadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );","#endif","}","#ifdef SHADOWMAP_DEBUG","#ifdef SHADOWMAP_CASCADE","if ( inFrustum && inFrustumCount == 1 ) gl_FragColor.xyz *= frustumColors[ i ];","#else","if ( inFrustum ) gl_FragColor.xyz *= frustumColors[ i ];","#endif","#endif","}","#ifdef GAMMA_OUTPUT","shadowColor *= shadowColor;","#endif","gl_FragColor.xyz = gl_FragColor.xyz * shadowColor;","#endif"].join("\n"),shadowmap_pars_vertex:["#ifdef USE_SHADOWMAP","varying vec4 vShadowCoord[ MAX_SHADOWS ];","uniform mat4 shadowMatrix[ MAX_SHADOWS ];","#endif"].join("\n"),shadowmap_vertex:["#ifdef USE_SHADOWMAP","for( int i = 0; i < MAX_SHADOWS; i ++ ) {","vShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;","}","#endif"].join("\n"),alphatest_fragment:["#ifdef ALPHATEST","if ( gl_FragColor.a < ALPHATEST ) discard;","#endif"].join("\n"),linear_to_gamma_fragment:["#ifdef GAMMA_OUTPUT","gl_FragColor.xyz = sqrt( gl_FragColor.xyz );","#endif"].join("\n")},THREE.UniformsUtils={merge:function(e){var t,i,r,n={};for(t=0;t<e.length;t++)for(i in r=this.clone(e[t]))n[i]=r[i];return n},clone:function(e){var t,i,r,n={};for(t in e)for(i in n[t]={},e[t])(r=e[t][i])instanceof THREE.Color||r instanceof THREE.Vector2||r instanceof THREE.Vector3||r instanceof THREE.Vector4||r instanceof THREE.Matrix4||r instanceof THREE.Texture?n[t][i]=r.clone():r instanceof Array?n[t][i]=r.slice():n[t][i]=r;return n}},THREE.UniformsLib={common:{diffuse:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new THREE.Vector4(0,0,1,1)},lightMap:{type:"t",value:null},specularMap:{type:"t",value:null},envMap:{type:"t",value:null},flipEnvMap:{type:"f",value:-1},useRefract:{type:"i",value:0},reflectivity:{type:"f",value:1},refractionRatio:{type:"f",value:.98},combine:{type:"i",value:0},morphTargetInfluences:{type:"f",value:0}},bump:{bumpMap:{type:"t",value:null},bumpScale:{type:"f",value:1}},normalmap:{normalMap:{type:"t",value:null},normalScale:{type:"v2",value:new THREE.Vector2(1,1)}},fog:{fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new THREE.Color(16777215)}},lights:{ambientLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]},directionalLightColor:{type:"fv",value:[]},hemisphereLightDirection:{type:"fv",value:[]},hemisphereLightSkyColor:{type:"fv",value:[]},hemisphereLightGroundColor:{type:"fv",value:[]},pointLightColor:{type:"fv",value:[]},pointLightPosition:{type:"fv",value:[]},pointLightDistance:{type:"fv1",value:[]},spotLightColor:{type:"fv",value:[]},spotLightPosition:{type:"fv",value:[]},spotLightDirection:{type:"fv",value:[]},spotLightDistance:{type:"fv1",value:[]},spotLightAngleCos:{type:"fv1",value:[]},spotLightExponent:{type:"fv1",value:[]}},particle:{psColor:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},size:{type:"f",value:1},scale:{type:"f",value:1},map:{type:"t",value:null},fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new THREE.Color(16777215)}},shadowmap:{shadowMap:{type:"tv",value:[]},shadowMapSize:{type:"v2v",value:[]},shadowBias:{type:"fv1",value:[]},shadowDarkness:{type:"fv1",value:[]},shadowMatrix:{type:"m4v",value:[]}}},THREE.ShaderLib={basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.shadowmap]),vertexShader:[THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.skinbase_vertex,"#ifdef USE_ENVMAP",THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"#endif",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform float opacity;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,"void main() {","gl_FragColor = vec4( diffuse, opacity );",THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},lambert:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{ambient:{type:"c",value:new THREE.Color(16777215)},emissive:{type:"c",value:new THREE.Color(0)},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["#define LAMBERT","varying vec3 vLightFront;","#ifdef DOUBLE_SIDED","varying vec3 vLightBack;","#endif",THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_lambert_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_lambert_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;","varying vec3 vLightFront;","#ifdef DOUBLE_SIDED","varying vec3 vLightBack;","#endif",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,"void main() {","gl_FragColor = vec4( vec3 ( 1.0 ), opacity );",THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,"#ifdef DOUBLE_SIDED","if ( gl_FrontFacing )","gl_FragColor.xyz *= vLightFront;","else","gl_FragColor.xyz *= vLightBack;","#else","gl_FragColor.xyz *= vLightFront;","#endif",THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},phong:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.bump,THREE.UniformsLib.normalmap,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{ambient:{type:"c",value:new THREE.Color(16777215)},emissive:{type:"c",value:new THREE.Color(0)},specular:{type:"c",value:new THREE.Color(1118481)},shininess:{type:"f",value:30},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["#define PHONG","varying vec3 vViewPosition;","varying vec3 vNormal;",THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_phong_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"vNormal = normalize( transformedNormal );",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,"vViewPosition = -mvPosition.xyz;",THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_phong_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform float opacity;","uniform vec3 ambient;","uniform vec3 emissive;","uniform vec3 specular;","uniform float shininess;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.lights_phong_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.bumpmap_pars_fragment,THREE.ShaderChunk.normalmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,"void main() {","gl_FragColor = vec4( vec3 ( 1.0 ), opacity );",THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.lights_phong_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},particle_basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.particle,THREE.UniformsLib.shadowmap]),vertexShader:["uniform float size;","uniform float scale;",THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","#ifdef USE_SIZEATTENUATION","gl_PointSize = size * ( scale / length( mvPosition.xyz ) );","#else","gl_PointSize = size;","#endif","gl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 psColor;","uniform float opacity;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_particle_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,"void main() {","gl_FragColor = vec4( psColor, opacity );",THREE.ShaderChunk.map_particle_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},dashed:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,{scale:{type:"f",value:1},dashSize:{type:"f",value:1},totalSize:{type:"f",value:2}}]),vertexShader:["uniform float scale;","attribute float lineDistance;","varying float vLineDistance;",THREE.ShaderChunk.color_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"vLineDistance = scale * lineDistance;","vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","gl_Position = projectionMatrix * mvPosition;","}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform float opacity;","uniform float dashSize;","uniform float totalSize;","varying float vLineDistance;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,"void main() {","if ( mod( vLineDistance, totalSize ) > dashSize ) {","discard;","}","gl_FragColor = vec4( diffuse, opacity );",THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},depth:{uniforms:{mNear:{type:"f",value:1},mFar:{type:"f",value:2e3},opacity:{type:"f",value:1}},vertexShader:["void main() {","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float mNear;","uniform float mFar;","uniform float opacity;","void main() {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float color = 1.0 - smoothstep( mNear, mFar, depth );","gl_FragColor = vec4( vec3( color ), opacity );","}"].join("\n")},normal:{uniforms:{opacity:{type:"f",value:1}},vertexShader:["varying vec3 vNormal;",THREE.ShaderChunk.morphtarget_pars_vertex,"void main() {","vNormal = normalize( normalMatrix * normal );",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.default_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;","varying vec3 vNormal;","void main() {","gl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );","}"].join("\n")},normalmap:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{enableAO:{type:"i",value:0},enableDiffuse:{type:"i",value:0},enableSpecular:{type:"i",value:0},enableReflection:{type:"i",value:0},enableDisplacement:{type:"i",value:0},tDisplacement:{type:"t",value:null},tDiffuse:{type:"t",value:null},tCube:{type:"t",value:null},tNormal:{type:"t",value:null},tSpecular:{type:"t",value:null},tAO:{type:"t",value:null},uNormalScale:{type:"v2",value:new THREE.Vector2(1,1)},uDisplacementBias:{type:"f",value:0},uDisplacementScale:{type:"f",value:1},uDiffuseColor:{type:"c",value:new THREE.Color(16777215)},uSpecularColor:{type:"c",value:new THREE.Color(1118481)},uAmbientColor:{type:"c",value:new THREE.Color(16777215)},uShininess:{type:"f",value:30},uOpacity:{type:"f",value:1},useRefract:{type:"i",value:0},uRefractionRatio:{type:"f",value:.98},uReflectivity:{type:"f",value:.5},uOffset:{type:"v2",value:new THREE.Vector2(0,0)},uRepeat:{type:"v2",value:new THREE.Vector2(1,1)},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),fragmentShader:["uniform vec3 uAmbientColor;","uniform vec3 uDiffuseColor;","uniform vec3 uSpecularColor;","uniform float uShininess;","uniform float uOpacity;","uniform bool enableDiffuse;","uniform bool enableSpecular;","uniform bool enableAO;","uniform bool enableReflection;","uniform sampler2D tDiffuse;","uniform sampler2D tNormal;","uniform sampler2D tSpecular;","uniform sampler2D tAO;","uniform samplerCube tCube;","uniform vec2 uNormalScale;","uniform bool useRefract;","uniform float uRefractionRatio;","uniform float uReflectivity;","varying vec3 vTangent;","varying vec3 vBinormal;","varying vec3 vNormal;","varying vec2 vUv;","uniform vec3 ambientLightColor;","#if MAX_DIR_LIGHTS > 0","uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];","uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];","#endif","#if MAX_HEMI_LIGHTS > 0","uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];","uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];","uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];","#endif","#if MAX_POINT_LIGHTS > 0","uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];","uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];","uniform float pointLightDistance[ MAX_POINT_LIGHTS ];","#endif","#if MAX_SPOT_LIGHTS > 0","uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];","uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];","uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];","uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];","uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];","uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];","#endif","#ifdef WRAP_AROUND","uniform vec3 wrapRGB;","#endif","varying vec3 vWorldPosition;","varying vec3 vViewPosition;",THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,"void main() {","gl_FragColor = vec4( vec3( 1.0 ), uOpacity );","vec3 specularTex = vec3( 1.0 );","vec3 normalTex = texture2D( tNormal, vUv ).xyz * 2.0 - 1.0;","normalTex.xy *= uNormalScale;","normalTex = normalize( normalTex );","if( enableDiffuse ) {","#ifdef GAMMA_INPUT","vec4 texelColor = texture2D( tDiffuse, vUv );","texelColor.xyz *= texelColor.xyz;","gl_FragColor = gl_FragColor * texelColor;","#else","gl_FragColor = gl_FragColor * texture2D( tDiffuse, vUv );","#endif","}","if( enableAO ) {","#ifdef GAMMA_INPUT","vec4 aoColor = texture2D( tAO, vUv );","aoColor.xyz *= aoColor.xyz;","gl_FragColor.xyz = gl_FragColor.xyz * aoColor.xyz;","#else","gl_FragColor.xyz = gl_FragColor.xyz * texture2D( tAO, vUv ).xyz;","#endif","}","if( enableSpecular )","specularTex = texture2D( tSpecular, vUv ).xyz;","mat3 tsb = mat3( normalize( vTangent ), normalize( vBinormal ), normalize( vNormal ) );","vec3 finalNormal = tsb * normalTex;","#ifdef FLIP_SIDED","finalNormal = -finalNormal;","#endif","vec3 normal = normalize( finalNormal );","vec3 viewPosition = normalize( vViewPosition );","#if MAX_POINT_LIGHTS > 0","vec3 pointDiffuse = vec3( 0.0 );","vec3 pointSpecular = vec3( 0.0 );","for ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {","vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );","vec3 pointVector = lPosition.xyz + vViewPosition.xyz;","float pointDistance = 1.0;","if ( pointLightDistance[ i ] > 0.0 )","pointDistance = 1.0 - min( ( length( pointVector ) / pointLightDistance[ i ] ), 1.0 );","pointVector = normalize( pointVector );","#ifdef WRAP_AROUND","float pointDiffuseWeightFull = max( dot( normal, pointVector ), 0.0 );","float pointDiffuseWeightHalf = max( 0.5 * dot( normal, pointVector ) + 0.5, 0.0 );","vec3 pointDiffuseWeight = mix( vec3 ( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );","#else","float pointDiffuseWeight = max( dot( normal, pointVector ), 0.0 );","#endif","pointDiffuse += pointDistance * pointLightColor[ i ] * uDiffuseColor * pointDiffuseWeight;","vec3 pointHalfVector = normalize( pointVector + viewPosition );","float pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );","float pointSpecularWeight = specularTex.r * max( pow( pointDotNormalHalf, uShininess ), 0.0 );","#ifdef PHYSICALLY_BASED_SHADING","float specularNormalization = ( uShininess + 2.0001 ) / 8.0;","vec3 schlick = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( pointVector, pointHalfVector ), 5.0 );","pointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * pointDistance * specularNormalization;","#else","pointSpecular += pointDistance * pointLightColor[ i ] * uSpecularColor * pointSpecularWeight * pointDiffuseWeight;","#endif","}","#endif","#if MAX_SPOT_LIGHTS > 0","vec3 spotDiffuse = vec3( 0.0 );","vec3 spotSpecular = vec3( 0.0 );","for ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {","vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );","vec3 spotVector = lPosition.xyz + vViewPosition.xyz;","float spotDistance = 1.0;","if ( spotLightDistance[ i ] > 0.0 )","spotDistance = 1.0 - min( ( length( spotVector ) / spotLightDistance[ i ] ), 1.0 );","spotVector = normalize( spotVector );","float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );","if ( spotEffect > spotLightAngleCos[ i ] ) {","spotEffect = max( pow( spotEffect, spotLightExponent[ i ] ), 0.0 );","#ifdef WRAP_AROUND","float spotDiffuseWeightFull = max( dot( normal, spotVector ), 0.0 );","float spotDiffuseWeightHalf = max( 0.5 * dot( normal, spotVector ) + 0.5, 0.0 );","vec3 spotDiffuseWeight = mix( vec3 ( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );","#else","float spotDiffuseWeight = max( dot( normal, spotVector ), 0.0 );","#endif","spotDiffuse += spotDistance * spotLightColor[ i ] * uDiffuseColor * spotDiffuseWeight * spotEffect;","vec3 spotHalfVector = normalize( spotVector + viewPosition );","float spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );","float spotSpecularWeight = specularTex.r * max( pow( spotDotNormalHalf, uShininess ), 0.0 );","#ifdef PHYSICALLY_BASED_SHADING","float specularNormalization = ( uShininess + 2.0001 ) / 8.0;","vec3 schlick = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( spotVector, spotHalfVector ), 5.0 );","spotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * spotDistance * specularNormalization * spotEffect;","#else","spotSpecular += spotDistance * spotLightColor[ i ] * uSpecularColor * spotSpecularWeight * spotDiffuseWeight * spotEffect;","#endif","}","}","#endif","#if MAX_DIR_LIGHTS > 0","vec3 dirDiffuse = vec3( 0.0 );","vec3 dirSpecular = vec3( 0.0 );","for( int i = 0; i < MAX_DIR_LIGHTS; i++ ) {","vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );","vec3 dirVector = normalize( lDirection.xyz );","#ifdef WRAP_AROUND","float directionalLightWeightingFull = max( dot( normal, dirVector ), 0.0 );","float directionalLightWeightingHalf = max( 0.5 * dot( normal, dirVector ) + 0.5, 0.0 );","vec3 dirDiffuseWeight = mix( vec3( directionalLightWeightingFull ), vec3( directionalLightWeightingHalf ), wrapRGB );","#else","float dirDiffuseWeight = max( dot( normal, dirVector ), 0.0 );","#endif","dirDiffuse += directionalLightColor[ i ] * uDiffuseColor * dirDiffuseWeight;","vec3 dirHalfVector = normalize( dirVector + viewPosition );","float dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );","float dirSpecularWeight = specularTex.r * max( pow( dirDotNormalHalf, uShininess ), 0.0 );","#ifdef PHYSICALLY_BASED_SHADING","float specularNormalization = ( uShininess + 2.0001 ) / 8.0;","vec3 schlick = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( dirVector, dirHalfVector ), 5.0 );","dirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;","#else","dirSpecular += directionalLightColor[ i ] * uSpecularColor * dirSpecularWeight * dirDiffuseWeight;","#endif","}","#endif","#if MAX_HEMI_LIGHTS > 0","vec3 hemiDiffuse  = vec3( 0.0 );","vec3 hemiSpecular = vec3( 0.0 );","for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {","vec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );","vec3 lVector = normalize( lDirection.xyz );","float dotProduct = dot( normal, lVector );","float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;","vec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );","hemiDiffuse += uDiffuseColor * hemiColor;","vec3 hemiHalfVectorSky = normalize( lVector + viewPosition );","float hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;","float hemiSpecularWeightSky = specularTex.r * max( pow( hemiDotNormalHalfSky, uShininess ), 0.0 );","vec3 lVectorGround = -lVector;","vec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );","float hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;","float hemiSpecularWeightGround = specularTex.r * max( pow( hemiDotNormalHalfGround, uShininess ), 0.0 );","#ifdef PHYSICALLY_BASED_SHADING","float dotProductGround = dot( normal, lVectorGround );","float specularNormalization = ( uShininess + 2.0001 ) / 8.0;","vec3 schlickSky = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( lVector, hemiHalfVectorSky ), 5.0 );","vec3 schlickGround = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 5.0 );","hemiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );","#else","hemiSpecular += uSpecularColor * hemiColor * ( hemiSpecularWeightSky + hemiSpecularWeightGround ) * hemiDiffuseWeight;","#endif","}","#endif","vec3 totalDiffuse = vec3( 0.0 );","vec3 totalSpecular = vec3( 0.0 );","#if MAX_DIR_LIGHTS > 0","totalDiffuse += dirDiffuse;","totalSpecular += dirSpecular;","#endif","#if MAX_HEMI_LIGHTS > 0","totalDiffuse += hemiDiffuse;","totalSpecular += hemiSpecular;","#endif","#if MAX_POINT_LIGHTS > 0","totalDiffuse += pointDiffuse;","totalSpecular += pointSpecular;","#endif","#if MAX_SPOT_LIGHTS > 0","totalDiffuse += spotDiffuse;","totalSpecular += spotSpecular;","#endif","#ifdef METAL","gl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * uAmbientColor + totalSpecular );","#else","gl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * uAmbientColor ) + totalSpecular;","#endif","if ( enableReflection ) {","vec3 vReflect;","vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );","if ( useRefract ) {","vReflect = refract( cameraToVertex, normal, uRefractionRatio );","} else {","vReflect = reflect( cameraToVertex, normal );","}","vec4 cubeColor = textureCube( tCube, vec3( -vReflect.x, vReflect.yz ) );","#ifdef GAMMA_INPUT","cubeColor.xyz *= cubeColor.xyz;","#endif","gl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularTex.r * uReflectivity );","}",THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n"),vertexShader:["attribute vec4 tangent;","uniform vec2 uOffset;","uniform vec2 uRepeat;","uniform bool enableDisplacement;","#ifdef VERTEX_TEXTURES","uniform sampler2D tDisplacement;","uniform float uDisplacementScale;","uniform float uDisplacementBias;","#endif","varying vec3 vTangent;","varying vec3 vBinormal;","varying vec3 vNormal;","varying vec2 vUv;","varying vec3 vWorldPosition;","varying vec3 vViewPosition;",THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,"void main() {",THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,"#ifdef USE_SKINNING","vNormal = normalize( normalMatrix * skinnedNormal.xyz );","vec4 skinnedTangent = skinMatrix * vec4( tangent.xyz, 0.0 );","vTangent = normalize( normalMatrix * skinnedTangent.xyz );","#else","vNormal = normalize( normalMatrix * normal );","vTangent = normalize( normalMatrix * tangent.xyz );","#endif","vBinormal = normalize( cross( vNormal, vTangent ) * tangent.w );","vUv = uv * uRepeat + uOffset;","vec3 displacedPosition;","#ifdef VERTEX_TEXTURES","if ( enableDisplacement ) {","vec3 dv = texture2D( tDisplacement, uv ).xyz;","float df = uDisplacementScale * dv.x + uDisplacementBias;","displacedPosition = position + normalize( normal ) * df;","} else {","#ifdef USE_SKINNING","vec4 skinVertex = vec4( position, 1.0 );","vec4 skinned  = boneMatX * skinVertex * skinWeight.x;","skinned \t  += boneMatY * skinVertex * skinWeight.y;","displacedPosition  = skinned.xyz;","#else","displacedPosition = position;","#endif","}","#else","#ifdef USE_SKINNING","vec4 skinVertex = vec4( position, 1.0 );","vec4 skinned  = boneMatX * skinVertex * skinWeight.x;","skinned \t  += boneMatY * skinVertex * skinWeight.y;","displacedPosition  = skinned.xyz;","#else","displacedPosition = position;","#endif","#endif","vec4 mvPosition = modelViewMatrix * vec4( displacedPosition, 1.0 );","vec4 worldPosition = modelMatrix * vec4( displacedPosition, 1.0 );","gl_Position = projectionMatrix * mvPosition;","vWorldPosition = worldPosition.xyz;","vViewPosition = -mvPosition.xyz;","#ifdef USE_SHADOWMAP","for( int i = 0; i < MAX_SHADOWS; i ++ ) {","vShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;","}","#endif","}"].join("\n")},cube:{uniforms:{tCube:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;","void main() {","vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","vWorldPosition = worldPosition.xyz;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform samplerCube tCube;","uniform float tFlip;","varying vec3 vWorldPosition;","void main() {","gl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );","}"].join("\n")},depthRGBA:{uniforms:{},vertexShader:[THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,"void main() {",THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,"}"].join("\n"),fragmentShader:["vec4 pack_depth( const in float depth ) {","const vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );","const vec4 bit_mask  = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );","vec4 res = fract( depth * bit_shift );","res -= res.xxyz * bit_mask;","return res;","}","void main() {","gl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );","}"].join("\n")}},THREE.WebGLRenderer=function(e){console.log("THREE.WebGLRenderer",THREE.REVISION);var T=void 0!==(e=e||{}).canvas?e.canvas:document.createElement("canvas"),w=void 0!==e.precision?e.precision:"highp",t=void 0===e.alpha||e.alpha,i=void 0===e.premultipliedAlpha||e.premultipliedAlpha,r=void 0!==e.antialias&&e.antialias,n=void 0===e.stencil||e.stencil,o=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,a=new THREE.Color(0),s=0;this.domElement=T,this.context=null,this.devicePixelRatio=void 0!==e.devicePixelRatio?e.devicePixelRatio:void 0!==self.devicePixelRatio?self.devicePixelRatio:1,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.autoUpdateObjects=!0,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyBasedShading=!1,this.shadowMapEnabled=!1,this.shadowMapAutoUpdate=!0,this.shadowMapType=THREE.PCFShadowMap,this.shadowMapCullFace=THREE.CullFaceFront,this.shadowMapDebug=!1,this.shadowMapCascade=!1,this.maxMorphTargets=8,this.maxMorphNormals=4,this.autoScaleCubemaps=!0,this.renderPluginsPre=[],this.renderPluginsPost=[],this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}};var Ne,l,h,c,u,z=this,H=[],S=0,_=null,f=null,x=-1,R=null,b=null,g=0,M=0,p=-1,d=-1,m=-1,E=-1,v=-1,y=-1,C=-1,A=-1,P=null,D=null,L=null,F=null,O=0,k=0,V=0,I=0,N=0,U=0,B={},j=new THREE.Frustum,W=new THREE.Matrix4,G=new THREE.Matrix4,X=new THREE.Vector3,q=new THREE.Vector3,Y=!0,K={ambient:[0,0,0],directional:{length:0,colors:new Array,positions:new Array},point:{length:0,colors:new Array,positions:new Array,distances:new Array},spot:{length:0,colors:new Array,positions:new Array,distances:new Array,directions:new Array,anglesCos:new Array,exponents:new Array},hemi:{length:0,skyColors:new Array,groundColors:new Array,positions:new Array}};!function(){try{var e={alpha:t,premultipliedAlpha:i,antialias:r,stencil:n,preserveDrawingBuffer:o};if(null===(Ne=T.getContext("webgl",e)||T.getContext("experimental-webgl",e)))throw"Error creating WebGL context."}catch(e){console.error(e)}l=Ne.getExtension("OES_texture_float"),Ne.getExtension("OES_texture_float_linear"),h=Ne.getExtension("OES_standard_derivatives"),c=Ne.getExtension("EXT_texture_filter_anisotropic")||Ne.getExtension("MOZ_EXT_texture_filter_anisotropic")||Ne.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),u=Ne.getExtension("WEBGL_compressed_texture_s3tc")||Ne.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||Ne.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc"),l||console.log("THREE.WebGLRenderer: Float textures not supported.");h||console.log("THREE.WebGLRenderer: Standard derivatives not supported.");c||console.log("THREE.WebGLRenderer: Anisotropic texture filtering not supported.");u||console.log("THREE.WebGLRenderer: S3TC compressed textures not supported.");void 0===Ne.getShaderPrecisionFormat&&(Ne.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}(),Ne.clearColor(0,0,0,1),Ne.clearDepth(1),Ne.clearStencil(0),Ne.enable(Ne.DEPTH_TEST),Ne.depthFunc(Ne.LEQUAL),Ne.frontFace(Ne.CCW),Ne.cullFace(Ne.BACK),Ne.enable(Ne.CULL_FACE),Ne.enable(Ne.BLEND),Ne.blendEquation(Ne.FUNC_ADD),Ne.blendFunc(Ne.SRC_ALPHA,Ne.ONE_MINUS_SRC_ALPHA),Ne.clearColor(a.r,a.g,a.b,s);var Q=(this.context=Ne).getParameter(Ne.MAX_TEXTURE_IMAGE_UNITS),Z=Ne.getParameter(Ne.MAX_VERTEX_TEXTURE_IMAGE_UNITS),$=(Ne.getParameter(Ne.MAX_TEXTURE_SIZE),Ne.getParameter(Ne.MAX_CUBE_MAP_TEXTURE_SIZE)),J=c?Ne.getParameter(c.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,ee=0<Z,te=ee&&l,ie=(u&&Ne.getParameter(Ne.COMPRESSED_TEXTURE_FORMATS),Ne.getShaderPrecisionFormat(Ne.VERTEX_SHADER,Ne.HIGH_FLOAT)),re=Ne.getShaderPrecisionFormat(Ne.VERTEX_SHADER,Ne.MEDIUM_FLOAT),ne=(Ne.getShaderPrecisionFormat(Ne.VERTEX_SHADER,Ne.LOW_FLOAT),Ne.getShaderPrecisionFormat(Ne.FRAGMENT_SHADER,Ne.HIGH_FLOAT)),oe=Ne.getShaderPrecisionFormat(Ne.FRAGMENT_SHADER,Ne.MEDIUM_FLOAT),ae=(Ne.getShaderPrecisionFormat(Ne.FRAGMENT_SHADER,Ne.LOW_FLOAT),Ne.getShaderPrecisionFormat(Ne.VERTEX_SHADER,Ne.HIGH_INT),Ne.getShaderPrecisionFormat(Ne.VERTEX_SHADER,Ne.MEDIUM_INT),Ne.getShaderPrecisionFormat(Ne.VERTEX_SHADER,Ne.LOW_INT),Ne.getShaderPrecisionFormat(Ne.FRAGMENT_SHADER,Ne.HIGH_INT),Ne.getShaderPrecisionFormat(Ne.FRAGMENT_SHADER,Ne.MEDIUM_INT),Ne.getShaderPrecisionFormat(Ne.FRAGMENT_SHADER,Ne.LOW_INT),0<ie.precision&&0<ne.precision),se=0<re.precision&&0<oe.precision;function le(e){var t,i;if(e.__webglVertexBuffer=Ne.createBuffer(),e.__webglNormalBuffer=Ne.createBuffer(),e.__webglTangentBuffer=Ne.createBuffer(),e.__webglColorBuffer=Ne.createBuffer(),e.__webglUVBuffer=Ne.createBuffer(),e.__webglUV2Buffer=Ne.createBuffer(),e.__webglSkinIndicesBuffer=Ne.createBuffer(),e.__webglSkinWeightsBuffer=Ne.createBuffer(),e.__webglFaceBuffer=Ne.createBuffer(),e.__webglLineBuffer=Ne.createBuffer(),e.numMorphTargets)for(e.__webglMorphTargetsBuffers=[],t=0,i=e.numMorphTargets;t<i;t++)e.__webglMorphTargetsBuffers.push(Ne.createBuffer());if(e.numMorphNormals)for(e.__webglMorphNormalsBuffers=[],t=0,i=e.numMorphNormals;t<i;t++)e.__webglMorphNormalsBuffers.push(Ne.createBuffer());z.info.memory.geometries++}"highp"!==w||ae||(se?(w="mediump",console.warn("WebGLRenderer: highp not supported, using mediump")):(w="lowp",console.warn("WebGLRenderer: highp and mediump not supported, using lowp"))),"mediump"!==w||se||(w="lowp",console.warn("WebGLRenderer: mediump not supported, using lowp")),this.getContext=function(){return Ne},this.supportsVertexTextures=function(){return ee},this.supportsFloatTextures=function(){return l},this.supportsStandardDerivatives=function(){return h},this.supportsCompressedTextureS3TC=function(){return u},this.getMaxAnisotropy=function(){return J},this.getPrecision=function(){return w},this.setSize=function(e,t,i){T.width=e*this.devicePixelRatio,T.height=t*this.devicePixelRatio,1!==this.devicePixelRatio&&!1!==i&&(T.style.width=e+"px",T.style.height=t+"px"),this.setViewport(0,0,T.width,T.height)},this.setViewport=function(e,t,i,r){O=void 0!==e?e:0,k=void 0!==t?t:0,V=void 0!==i?i:T.width,I=void 0!==r?r:T.height,Ne.viewport(O,k,V,I)},this.setScissor=function(e,t,i,r){Ne.scissor(e,t,i,r)},this.enableScissorTest=function(e){e?Ne.enable(Ne.SCISSOR_TEST):Ne.disable(Ne.SCISSOR_TEST)},this.setClearColor=function(e,t){a.set(e),s=void 0!==t?t:1,Ne.clearColor(a.r,a.g,a.b,s)},this.setClearColorHex=function(e,t){console.warn("DEPRECATED: .setClearColorHex() is being removed. Use .setClearColor() instead."),this.setClearColor(e,t)},this.getClearColor=function(){return a},this.getClearAlpha=function(){return s},this.clear=function(e,t,i){var r=0;(void 0===e||e)&&(r|=Ne.COLOR_BUFFER_BIT),(void 0===t||t)&&(r|=Ne.DEPTH_BUFFER_BIT),(void 0===i||i)&&(r|=Ne.STENCIL_BUFFER_BIT),Ne.clear(r)},this.clearTarget=function(e,t,i,r){this.setRenderTarget(e),this.clear(t,i,r)},this.addPostPlugin=function(e){e.init(this),this.renderPluginsPost.push(e)},this.addPrePlugin=function(e){e.init(this),this.renderPluginsPre.push(e)},this.updateShadowMap=function(e,t){Y=!(_=null),d=p=x=R=A=C=m=-1,this.shadowMapPlugin.update(e,t)};var he=function(e){var t=e.target;t.removeEventListener("dispose",he),de(t)},ce=function(e){var t=e.target;t.removeEventListener("dispose",ce),me(t),z.info.memory.textures--},ue=function(e){var t=e.target;t.removeEventListener("dispose",ue),ge(t),z.info.memory.textures--},fe=function(e){var t=e.target;t.removeEventListener("dispose",fe),Ee(t)},pe=function(e){if(void 0!==e.__webglVertexBuffer&&Ne.deleteBuffer(e.__webglVertexBuffer),void 0!==e.__webglNormalBuffer&&Ne.deleteBuffer(e.__webglNormalBuffer),void 0!==e.__webglTangentBuffer&&Ne.deleteBuffer(e.__webglTangentBuffer),void 0!==e.__webglColorBuffer&&Ne.deleteBuffer(e.__webglColorBuffer),void 0!==e.__webglUVBuffer&&Ne.deleteBuffer(e.__webglUVBuffer),void 0!==e.__webglUV2Buffer&&Ne.deleteBuffer(e.__webglUV2Buffer),void 0!==e.__webglSkinIndicesBuffer&&Ne.deleteBuffer(e.__webglSkinIndicesBuffer),void 0!==e.__webglSkinWeightsBuffer&&Ne.deleteBuffer(e.__webglSkinWeightsBuffer),void 0!==e.__webglFaceBuffer&&Ne.deleteBuffer(e.__webglFaceBuffer),void 0!==e.__webglLineBuffer&&Ne.deleteBuffer(e.__webglLineBuffer),void 0!==e.__webglLineDistanceBuffer&&Ne.deleteBuffer(e.__webglLineDistanceBuffer),void 0!==e.__webglCustomAttributesList)for(var t in e.__webglCustomAttributesList)Ne.deleteBuffer(e.__webglCustomAttributesList[t].buffer);z.info.memory.geometries--},de=function(e){if(e.__webglInit=void 0,e instanceof THREE.BufferGeometry){var t=e.attributes;for(var i in t)void 0!==t[i].buffer&&Ne.deleteBuffer(t[i].buffer);z.info.memory.geometries--}else if(void 0!==e.geometryGroups)for(var r in e.geometryGroups){var n=e.geometryGroups[r];if(void 0!==n.numMorphTargets)for(var o=0,a=n.numMorphTargets;o<a;o++)Ne.deleteBuffer(n.__webglMorphTargetsBuffers[o]);if(void 0!==n.numMorphNormals)for(o=0,a=n.numMorphNormals;o<a;o++)Ne.deleteBuffer(n.__webglMorphNormalsBuffers[o]);pe(n)}else pe(e)},me=function(e){if(e.image&&e.image.__webglTextureCube)Ne.deleteTexture(e.image.__webglTextureCube);else{if(!e.__webglInit)return;e.__webglInit=!1,Ne.deleteTexture(e.__webglTexture)}},ge=function(e){if(e&&e.__webglTexture)if(Ne.deleteTexture(e.__webglTexture),e instanceof THREE.WebGLRenderTargetCube)for(var t=0;t<6;t++)Ne.deleteFramebuffer(e.__webglFramebuffer[t]),Ne.deleteRenderbuffer(e.__webglRenderbuffer[t]);else Ne.deleteFramebuffer(e.__webglFramebuffer),Ne.deleteRenderbuffer(e.__webglRenderbuffer)},Ee=function(e){var t=e.program;if(void 0!==t){var i,r,n;e.program=void 0;var o=!1;for(i=0,r=H.length;i<r;i++)if((n=H[i]).program===t){n.usedTimes--,0===n.usedTimes&&(o=!0);break}if(!0===o){var a=[];for(i=0,r=H.length;i<r;i++)(n=H[i]).program!==t&&a.push(n);H=a,Ne.deleteProgram(t),z.info.memory.programs--}}};function ve(e,t){var i=e.vertices.length,r=t.material;if(r.attributes)for(var n in void 0===e.__webglCustomAttributesList&&(e.__webglCustomAttributesList=[]),r.attributes){var o=r.attributes[n];if(!o.__webglInitialized||o.createUniqueBuffers){o.__webglInitialized=!0;var a=1;"v2"===o.type?a=2:"v3"===o.type?a=3:"v4"===o.type?a=4:"c"===o.type&&(a=3),o.size=a,o.array=new Float32Array(i*a),o.buffer=Ne.createBuffer(),o.buffer.belongsToAttribute=n,o.needsUpdate=!0}e.__webglCustomAttributesList.push(o)}}function ye(e,t){var i,r,n=t.geometry,o=e.faces3,a=3*o.length,s=1*o.length,l=3*o.length,h=Te(t,e),c=Be(h),u=Ue(h),f=ze(h);if(e.__vertexArray=new Float32Array(3*a),u&&(e.__normalArray=new Float32Array(3*a)),n.hasTangents&&(e.__tangentArray=new Float32Array(4*a)),f&&(e.__colorArray=new Float32Array(3*a)),c&&(0<n.faceVertexUvs.length&&(e.__uvArray=new Float32Array(2*a)),1<n.faceVertexUvs.length&&(e.__uv2Array=new Float32Array(2*a))),t.geometry.skinWeights.length&&t.geometry.skinIndices.length&&(e.__skinIndexArray=new Float32Array(4*a),e.__skinWeightArray=new Float32Array(4*a)),e.__faceArray=new Uint16Array(3*s),e.__lineArray=new Uint16Array(2*l),e.numMorphTargets)for(e.__morphTargetsArrays=[],i=0,r=e.numMorphTargets;i<r;i++)e.__morphTargetsArrays.push(new Float32Array(3*a));if(e.numMorphNormals)for(e.__morphNormalsArrays=[],i=0,r=e.numMorphNormals;i<r;i++)e.__morphNormalsArrays.push(new Float32Array(3*a));if(e.__webglFaceCount=3*s,e.__webglLineCount=2*l,h.attributes)for(var p in void 0===e.__webglCustomAttributesList&&(e.__webglCustomAttributesList=[]),h.attributes){var d=h.attributes[p],m={};for(var g in d)m[g]=d[g];if(!m.__webglInitialized||m.createUniqueBuffers){m.__webglInitialized=!0;var E=1;"v2"===m.type?E=2:"v3"===m.type?E=3:"v4"===m.type?E=4:"c"===m.type&&(E=3),m.size=E,m.array=new Float32Array(a*E),m.buffer=Ne.createBuffer(),m.buffer.belongsToAttribute=p,d.needsUpdate=!0,m.__original=d}e.__webglCustomAttributesList.push(m)}e.__inittedArrays=!0}function Te(e,t){return e.material instanceof THREE.MeshFaceMaterial?e.material.materials[t.materialIndex]:e.material}function Ue(e){return!(e instanceof THREE.MeshBasicMaterial&&!e.envMap||e instanceof THREE.MeshDepthMaterial)&&((t=e)&&void 0!==t.shading&&t.shading===THREE.SmoothShading?THREE.SmoothShading:THREE.FlatShading);var t}function ze(e){return!!e.vertexColors&&e.vertexColors}function Be(e){return!!(e.map||e.lightMap||e.bumpMap||e.normalMap||e.specularMap||e instanceof THREE.ShaderMaterial)}function _e(e,t,i,r,n){if(e.__inittedArrays){var o,a,s,l,h,c,u,f,p,d,m,g,E,v,y,T,_,x,R,b,w,H,S,M,C,A,P,D,L,F,O,k,V,I,N,U,z,B,j,W,G,X=Ue(n),q=ze(n),Y=Be(n),K=X===THREE.SmoothShading,Q=0,Z=0,$=0,J=0,ee=0,te=0,ie=0,re=0,ne=0,oe=0,ae=0,se=0,le=e.__vertexArray,he=e.__uvArray,ce=e.__uv2Array,ue=e.__normalArray,fe=e.__tangentArray,pe=e.__colorArray,de=e.__skinIndexArray,me=e.__skinWeightArray,ge=e.__morphTargetsArrays,Ee=e.__morphNormalsArrays,ve=e.__webglCustomAttributesList,ye=e.__faceArray,Te=e.__lineArray,_e=t.geometry,xe=_e.verticesNeedUpdate,Re=_e.elementsNeedUpdate,be=_e.uvsNeedUpdate,we=_e.normalsNeedUpdate,He=_e.tangentsNeedUpdate,Se=_e.colorsNeedUpdate,Me=_e.morphTargetsNeedUpdate,Ce=_e.vertices,Ae=e.faces3,Pe=_e.faces,De=_e.faceVertexUvs[0],Le=_e.faceVertexUvs[1],Fe=(_e.colors,_e.skinIndices),Oe=_e.skinWeights,ke=_e.morphTargets,Ve=_e.morphNormals;if(xe){for(o=0,a=Ae.length;o<a;o++)m=Ce[(s=Pe[Ae[o]]).a],g=Ce[s.b],E=Ce[s.c],le[Z]=m.x,le[Z+1]=m.y,le[Z+2]=m.z,le[Z+3]=g.x,le[Z+4]=g.y,le[Z+5]=g.z,le[Z+6]=E.x,le[Z+7]=E.y,le[Z+8]=E.z,Z+=9;Ne.bindBuffer(Ne.ARRAY_BUFFER,e.__webglVertexBuffer),Ne.bufferData(Ne.ARRAY_BUFFER,le,i)}if(Me)for(I=0,N=ke.length;I<N;I++){for(o=ae=0,a=Ae.length;o<a;o++)s=Pe[B=Ae[o]],m=ke[I].vertices[s.a],g=ke[I].vertices[s.b],E=ke[I].vertices[s.c],(U=ge[I])[ae]=m.x,U[ae+1]=m.y,U[ae+2]=m.z,U[ae+3]=g.x,U[ae+4]=g.y,U[ae+5]=g.z,U[ae+6]=E.x,U[ae+7]=E.y,U[ae+8]=E.z,n.morphNormals&&(R=K?(_=(j=Ve[I].vertexNormals[B]).a,x=j.b,j.c):x=_=Ve[I].faceNormals[B],(z=Ee[I])[ae]=_.x,z[ae+1]=_.y,z[ae+2]=_.z,z[ae+3]=x.x,z[ae+4]=x.y,z[ae+5]=x.z,z[ae+6]=R.x,z[ae+7]=R.y,z[ae+8]=R.z),ae+=9;Ne.bindBuffer(Ne.ARRAY_BUFFER,e.__webglMorphTargetsBuffers[I]),Ne.bufferData(Ne.ARRAY_BUFFER,ge[I],i),n.morphNormals&&(Ne.bindBuffer(Ne.ARRAY_BUFFER,e.__webglMorphNormalsBuffers[I]),Ne.bufferData(Ne.ARRAY_BUFFER,Ee[I],i))}if(Oe.length){for(o=0,a=Ae.length;o<a;o++)S=Oe[(s=Pe[Ae[o]]).a],M=Oe[s.b],C=Oe[s.c],me[oe]=S.x,me[oe+1]=S.y,me[oe+2]=S.z,me[oe+3]=S.w,me[oe+4]=M.x,me[oe+5]=M.y,me[oe+6]=M.z,me[oe+7]=M.w,me[oe+8]=C.x,me[oe+9]=C.y,me[oe+10]=C.z,me[oe+11]=C.w,A=Fe[s.a],P=Fe[s.b],D=Fe[s.c],de[oe]=A.x,de[oe+1]=A.y,de[oe+2]=A.z,de[oe+3]=A.w,de[oe+4]=P.x,de[oe+5]=P.y,de[oe+6]=P.z,de[oe+7]=P.w,de[oe+8]=D.x,de[oe+9]=D.y,de[oe+10]=D.z,de[oe+11]=D.w,oe+=12;0<oe&&(Ne.bindBuffer(Ne.ARRAY_BUFFER,e.__webglSkinIndicesBuffer),Ne.bufferData(Ne.ARRAY_BUFFER,de,i),Ne.bindBuffer(Ne.ARRAY_BUFFER,e.__webglSkinWeightsBuffer),Ne.bufferData(Ne.ARRAY_BUFFER,me,i))}if(Se&&q){for(o=0,a=Ae.length;o<a;o++)c=(s=Pe[Ae[o]]).vertexColors,u=s.color,H=3===c.length&&q===THREE.VertexColors?(b=c[0],w=c[1],c[2]):w=b=u,pe[ne]=b.r,pe[ne+1]=b.g,pe[ne+2]=b.b,pe[ne+3]=w.r,pe[ne+4]=w.g,pe[ne+5]=w.b,pe[ne+6]=H.r,pe[ne+7]=H.g,pe[ne+8]=H.b,ne+=9;0<ne&&(Ne.bindBuffer(Ne.ARRAY_BUFFER,e.__webglColorBuffer),Ne.bufferData(Ne.ARRAY_BUFFER,pe,i))}if(He&&_e.hasTangents){for(o=0,a=Ae.length;o<a;o++)v=(f=(s=Pe[Ae[o]]).vertexTangents)[0],y=f[1],T=f[2],fe[ie]=v.x,fe[ie+1]=v.y,fe[ie+2]=v.z,fe[ie+3]=v.w,fe[ie+4]=y.x,fe[ie+5]=y.y,fe[ie+6]=y.z,fe[ie+7]=y.w,fe[ie+8]=T.x,fe[ie+9]=T.y,fe[ie+10]=T.z,fe[ie+11]=T.w,ie+=12;Ne.bindBuffer(Ne.ARRAY_BUFFER,e.__webglTangentBuffer),Ne.bufferData(Ne.ARRAY_BUFFER,fe,i)}if(we&&X){for(o=0,a=Ae.length;o<a;o++)if(l=(s=Pe[Ae[o]]).vertexNormals,h=s.normal,3===l.length&&K)for(L=0;L<3;L++)O=l[L],ue[te]=O.x,ue[te+1]=O.y,ue[te+2]=O.z,te+=3;else for(L=0;L<3;L++)ue[te]=h.x,ue[te+1]=h.y,ue[te+2]=h.z,te+=3;Ne.bindBuffer(Ne.ARRAY_BUFFER,e.__webglNormalBuffer),Ne.bufferData(Ne.ARRAY_BUFFER,ue,i)}if(be&&De&&Y){for(o=0,a=Ae.length;o<a;o++)if(void 0!==(p=De[Ae[o]]))for(L=0;L<3;L++)k=p[L],he[$]=k.x,he[$+1]=k.y,$+=2;0<$&&(Ne.bindBuffer(Ne.ARRAY_BUFFER,e.__webglUVBuffer),Ne.bufferData(Ne.ARRAY_BUFFER,he,i))}if(be&&Le&&Y){for(o=0,a=Ae.length;o<a;o++)if(void 0!==(d=Le[Ae[o]]))for(L=0;L<3;L++)V=d[L],ce[J]=V.x,ce[J+1]=V.y,J+=2;0<J&&(Ne.bindBuffer(Ne.ARRAY_BUFFER,e.__webglUV2Buffer),Ne.bufferData(Ne.ARRAY_BUFFER,ce,i))}if(Re){for(o=0,a=Ae.length;o<a;o++)ye[ee]=Q,ye[ee+1]=Q+1,ye[ee+2]=Q+2,ee+=3,Te[re]=Q,Te[re+1]=Q+1,Te[re+2]=Q,Te[re+3]=Q+2,Te[re+4]=Q+1,Te[re+5]=Q+2,re+=6,Q+=3;Ne.bindBuffer(Ne.ELEMENT_ARRAY_BUFFER,e.__webglFaceBuffer),Ne.bufferData(Ne.ELEMENT_ARRAY_BUFFER,ye,i),Ne.bindBuffer(Ne.ELEMENT_ARRAY_BUFFER,e.__webglLineBuffer),Ne.bufferData(Ne.ELEMENT_ARRAY_BUFFER,Te,i)}if(ve)for(L=0,F=ve.length;L<F;L++)if((G=ve[L]).__original.needsUpdate){if(se=0,1===G.size){if(void 0===G.boundTo||"vertices"===G.boundTo)for(o=0,a=Ae.length;o<a;o++)s=Pe[Ae[o]],G.array[se]=G.value[s.a],G.array[se+1]=G.value[s.b],G.array[se+2]=G.value[s.c],se+=3;else if("faces"===G.boundTo)for(o=0,a=Ae.length;o<a;o++)W=G.value[Ae[o]],G.array[se]=W,G.array[se+1]=W,G.array[se+2]=W,se+=3}else if(2===G.size){if(void 0===G.boundTo||"vertices"===G.boundTo)for(o=0,a=Ae.length;o<a;o++)s=Pe[Ae[o]],m=G.value[s.a],g=G.value[s.b],E=G.value[s.c],G.array[se]=m.x,G.array[se+1]=m.y,G.array[se+2]=g.x,G.array[se+3]=g.y,G.array[se+4]=E.x,G.array[se+5]=E.y,se+=6;else if("faces"===G.boundTo)for(o=0,a=Ae.length;o<a;o++)E=g=m=W=G.value[Ae[o]],G.array[se]=m.x,G.array[se+1]=m.y,G.array[se+2]=g.x,G.array[se+3]=g.y,G.array[se+4]=E.x,G.array[se+5]=E.y,se+=6}else if(3===G.size){var Ie;if(Ie="c"===G.type?["r","g","b"]:["x","y","z"],void 0===G.boundTo||"vertices"===G.boundTo)for(o=0,a=Ae.length;o<a;o++)s=Pe[Ae[o]],m=G.value[s.a],g=G.value[s.b],E=G.value[s.c],G.array[se]=m[Ie[0]],G.array[se+1]=m[Ie[1]],G.array[se+2]=m[Ie[2]],G.array[se+3]=g[Ie[0]],G.array[se+4]=g[Ie[1]],G.array[se+5]=g[Ie[2]],G.array[se+6]=E[Ie[0]],G.array[se+7]=E[Ie[1]],G.array[se+8]=E[Ie[2]],se+=9;else if("faces"===G.boundTo)for(o=0,a=Ae.length;o<a;o++)E=g=m=W=G.value[Ae[o]],G.array[se]=m[Ie[0]],G.array[se+1]=m[Ie[1]],G.array[se+2]=m[Ie[2]],G.array[se+3]=g[Ie[0]],G.array[se+4]=g[Ie[1]],G.array[se+5]=g[Ie[2]],G.array[se+6]=E[Ie[0]],G.array[se+7]=E[Ie[1]],G.array[se+8]=E[Ie[2]],se+=9;else if("faceVertices"===G.boundTo)for(o=0,a=Ae.length;o<a;o++)m=(W=G.value[Ae[o]])[0],g=W[1],E=W[2],G.array[se]=m[Ie[0]],G.array[se+1]=m[Ie[1]],G.array[se+2]=m[Ie[2]],G.array[se+3]=g[Ie[0]],G.array[se+4]=g[Ie[1]],G.array[se+5]=g[Ie[2]],G.array[se+6]=E[Ie[0]],G.array[se+7]=E[Ie[1]],G.array[se+8]=E[Ie[2]],se+=9}else if(4===G.size)if(void 0===G.boundTo||"vertices"===G.boundTo)for(o=0,a=Ae.length;o<a;o++)s=Pe[Ae[o]],m=G.value[s.a],g=G.value[s.b],E=G.value[s.c],G.array[se]=m.x,G.array[se+1]=m.y,G.array[se+2]=m.z,G.array[se+3]=m.w,G.array[se+4]=g.x,G.array[se+5]=g.y,G.array[se+6]=g.z,G.array[se+7]=g.w,G.array[se+8]=E.x,G.array[se+9]=E.y,G.array[se+10]=E.z,G.array[se+11]=E.w,se+=12;else if("faces"===G.boundTo)for(o=0,a=Ae.length;o<a;o++)E=g=m=W=G.value[Ae[o]],G.array[se]=m.x,G.array[se+1]=m.y,G.array[se+2]=m.z,G.array[se+3]=m.w,G.array[se+4]=g.x,G.array[se+5]=g.y,G.array[se+6]=g.z,G.array[se+7]=g.w,G.array[se+8]=E.x,G.array[se+9]=E.y,G.array[se+10]=E.z,G.array[se+11]=E.w,se+=12;else if("faceVertices"===G.boundTo)for(o=0,a=Ae.length;o<a;o++)m=(W=G.value[Ae[o]])[0],g=W[1],E=W[2],G.array[se]=m.x,G.array[se+1]=m.y,G.array[se+2]=m.z,G.array[se+3]=m.w,G.array[se+4]=g.x,G.array[se+5]=g.y,G.array[se+6]=g.z,G.array[se+7]=g.w,G.array[se+8]=E.x,G.array[se+9]=E.y,G.array[se+10]=E.z,G.array[se+11]=E.w,se+=12;Ne.bindBuffer(Ne.ARRAY_BUFFER,G.buffer),Ne.bufferData(Ne.ARRAY_BUFFER,G.array,i)}r&&(delete e.__inittedArrays,delete e.__colorArray,delete e.__normalArray,delete e.__tangentArray,delete e.__uvArray,delete e.__uv2Array,delete e.__faceArray,delete e.__vertexArray,delete e.__lineArray,delete e.__skinIndexArray,delete e.__skinWeightArray)}}function xe(e){B[e]||(Ne.enableVertexAttribArray(e),B[e]=!0)}function Re(){for(var e in B)B[e]&&(Ne.disableVertexAttribArray(e),B[e]=!1)}function be(e,t){return e.z!==t.z?t.z-e.z:e.id-t.id}function we(e,t){return t[0]-e[0]}function He(e,t,i){if(e.length)for(var r=0,n=e.length;r<n;r++)x=R=d=p=A=C=m=-1,Y=!(b=_=null),e[r].render(t,i,N,U),x=R=d=p=A=C=m=-1,Y=!(b=_=null)}function Se(e,t,i,r,n,o,a,s){var l,h,c,u,f,p,d;d=t?(f=e.length-1,p=-1):(f=0,p=e.length,1);for(var m=f;m!==p;m+=d)if((l=e[m]).render){if(h=l.object,c=l.buffer,s)u=s;else{if(!(u=l[i]))continue;a&&z.setBlending(u.blending,u.blendEquation,u.blendSrc,u.blendDst),z.setDepthTest(u.depthTest),z.setDepthWrite(u.depthWrite),Qe(u.polygonOffset,u.polygonOffsetFactor,u.polygonOffsetUnits)}z.setMaterialFaces(u),c instanceof THREE.BufferGeometry?z.renderBufferDirect(r,n,o,u,c,h):z.renderBuffer(r,n,o,u,c,h)}}function Me(e,t,i,r,n,o,a){for(var s,l,h,c=0,u=e.length;c<u;c++)if((l=(s=e[c]).object).visible){if(a)h=a;else{if(!(h=s[t]))continue;o&&z.setBlending(h.blending,h.blendEquation,h.blendSrc,h.blendDst),z.setDepthTest(h.depthTest),z.setDepthWrite(h.depthWrite),Qe(h.polygonOffset,h.polygonOffsetFactor,h.polygonOffsetUnits)}z.renderImmediateObject(i,r,n,h,l)}}function Ce(e){var t=e.object.material;t.transparent?(e.transparent=t,e.opaque=null):(e.opaque=t,e.transparent=null)}function Ae(e){var t,i,r,n=e.object,o=e.buffer;(r=n.material)instanceof THREE.MeshFaceMaterial?(i=o.materialIndex,(t=r.materials[i]).transparent?(e.transparent=t,e.opaque=null):(e.opaque=t,e.transparent=null)):(t=r)&&(t.transparent?(e.transparent=t,e.opaque=null):(e.opaque=t,e.transparent=null))}function Pe(e,t){var i,r,n,o,a,s,l,h,c,u,f,p,d,m;if(void 0===e.__webglInit)if(e.__webglInit=!0,e._modelViewMatrix=new THREE.Matrix4,e._normalMatrix=new THREE.Matrix3,void 0!==e.geometry&&void 0===e.geometry.__webglInit&&(e.geometry.__webglInit=!0,e.geometry.addEventListener("dispose",he)),void 0===(r=e.geometry));else if(r instanceof THREE.BufferGeometry)!function(e){var t,i,r;for(t in e.attributes)r="index"===t?Ne.ELEMENT_ARRAY_BUFFER:Ne.ARRAY_BUFFER,void 0===(i=e.attributes[t]).numItems&&(i.numItems=i.array.length),i.buffer=Ne.createBuffer(),Ne.bindBuffer(r,i.buffer),Ne.bufferData(r,i.array,Ne.STATIC_DRAW)}(r);else if(e instanceof THREE.Mesh)for(i in n=e.material,void 0===r.geometryGroups&&function(e,t){var i,r,n,o,a,s={},l=e.morphTargets.length,h=e.morphNormals.length,c=t instanceof THREE.MeshFaceMaterial;for(e.geometryGroups={},i=0,r=e.faces.length;i<r;i++)n=e.faces[i],void 0===s[o=c?n.materialIndex:0]&&(s[o]={hash:o,counter:0}),a=s[o].hash+"_"+s[o].counter,void 0===e.geometryGroups[a]&&(e.geometryGroups[a]={faces3:[],materialIndex:o,vertices:0,numMorphTargets:l,numMorphNormals:h}),65535<e.geometryGroups[a].vertices+3&&(s[o].counter+=1,a=s[o].hash+"_"+s[o].counter,void 0===e.geometryGroups[a]&&(e.geometryGroups[a]={faces3:[],materialIndex:o,vertices:0,numMorphTargets:l,numMorphNormals:h})),e.geometryGroups[a].faces3.push(i),e.geometryGroups[a].vertices+=3;for(var u in e.geometryGroupsList=[],e.geometryGroups)e.geometryGroups[u].id=g++,e.geometryGroupsList.push(e.geometryGroups[u])}(r,n),r.geometryGroups)(o=r.geometryGroups[i]).__webglVertexBuffer||(le(o),ye(o,e),r.verticesNeedUpdate=!0,r.morphTargetsNeedUpdate=!0,r.elementsNeedUpdate=!0,r.uvsNeedUpdate=!0,r.normalsNeedUpdate=!0,r.tangentsNeedUpdate=!0,r.colorsNeedUpdate=!0);else e instanceof THREE.Line?r.__webglVertexBuffer||((p=r).__webglVertexBuffer=Ne.createBuffer(),p.__webglColorBuffer=Ne.createBuffer(),p.__webglLineDistanceBuffer=Ne.createBuffer(),z.info.memory.geometries++,u=e,f=(c=r).vertices.length,c.__vertexArray=new Float32Array(3*f),c.__colorArray=new Float32Array(3*f),c.__lineDistanceArray=new Float32Array(1*f),c.__webglLineCount=f,ve(c,u),r.verticesNeedUpdate=!0,r.colorsNeedUpdate=!0,r.lineDistancesNeedUpdate=!0):e instanceof THREE.ParticleSystem&&(r.__webglVertexBuffer||((h=r).__webglVertexBuffer=Ne.createBuffer(),h.__webglColorBuffer=Ne.createBuffer(),z.info.memory.geometries++,s=e,l=(a=r).vertices.length,a.__vertexArray=new Float32Array(3*l),a.__colorArray=new Float32Array(3*l),a.__sortArray=[],a.__webglParticleCount=l,ve(a,s),r.verticesNeedUpdate=!0,r.colorsNeedUpdate=!0));if(void 0===e.__webglActive){if(e instanceof THREE.Mesh){if((r=e.geometry)instanceof THREE.BufferGeometry)De(t.__webglObjects,r,e);else if(r instanceof THREE.Geometry)for(i in r.geometryGroups)o=r.geometryGroups[i],De(t.__webglObjects,o,e)}else e instanceof THREE.Line||e instanceof THREE.ParticleSystem?(r=e.geometry,De(t.__webglObjects,r,e)):e instanceof THREE.ImmediateRenderObject||e.immediateRenderCallback?(d=t.__webglObjectsImmediate,m=e,d.push({id:null,object:m,opaque:null,transparent:null,z:0})):e instanceof THREE.Sprite?t.__webglSprites.push(e):e instanceof THREE.LensFlare&&t.__webglFlares.push(e);e.__webglActive=!0}}function De(e,t,i){e.push({id:null,buffer:t,object:i,opaque:null,transparent:null,z:0})}function Le(e){var t,i,r,n=e.geometry;if(n instanceof THREE.BufferGeometry)!function(e,t,i){var r,n,o=e.attributes;for(r in o)(n=o[r]).needsUpdate&&("index"===r?(Ne.bindBuffer(Ne.ELEMENT_ARRAY_BUFFER,n.buffer),Ne.bufferData(Ne.ELEMENT_ARRAY_BUFFER,n.array,t)):(Ne.bindBuffer(Ne.ARRAY_BUFFER,n.buffer),Ne.bufferData(Ne.ARRAY_BUFFER,n.array,t)),n.needsUpdate=!1),i&&!n.dynamic&&(n.array=null)}(n,Ne.DYNAMIC_DRAW,!n.dynamic);else if(e instanceof THREE.Mesh){for(var o=0,a=n.geometryGroupsList.length;o<a;o++)r=Te(e,t=n.geometryGroupsList[o]),n.buffersNeedUpdate&&ye(t,e),i=r.attributes&&Fe(r),(n.verticesNeedUpdate||n.morphTargetsNeedUpdate||n.elementsNeedUpdate||n.uvsNeedUpdate||n.normalsNeedUpdate||n.colorsNeedUpdate||n.tangentsNeedUpdate||i)&&_e(t,e,Ne.DYNAMIC_DRAW,!n.dynamic,r);n.verticesNeedUpdate=!1,n.morphTargetsNeedUpdate=!1,n.elementsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.tangentsNeedUpdate=!1,n.buffersNeedUpdate=!1,r.attributes&&Oe(r)}else e instanceof THREE.Line?(i=(r=Te(e,n)).attributes&&Fe(r),(n.verticesNeedUpdate||n.colorsNeedUpdate||n.lineDistancesNeedUpdate||i)&&function(e,t){var i,r,n,o,a,s,l,h,c,u,f,p,d=e.vertices,m=e.colors,g=e.lineDistances,E=d.length,v=m.length,y=g.length,T=e.__vertexArray,_=e.__colorArray,x=e.__lineDistanceArray,R=e.verticesNeedUpdate,b=e.colorsNeedUpdate,w=e.lineDistancesNeedUpdate,H=e.__webglCustomAttributesList;if(R){for(i=0;i<E;i++)o=d[i],T[a=3*i]=o.x,T[a+1]=o.y,T[a+2]=o.z;Ne.bindBuffer(Ne.ARRAY_BUFFER,e.__webglVertexBuffer),Ne.bufferData(Ne.ARRAY_BUFFER,T,t)}if(b){for(r=0;r<v;r++)s=m[r],_[a=3*r]=s.r,_[a+1]=s.g,_[a+2]=s.b;Ne.bindBuffer(Ne.ARRAY_BUFFER,e.__webglColorBuffer),Ne.bufferData(Ne.ARRAY_BUFFER,_,t)}if(w){for(n=0;n<y;n++)x[n]=g[n];Ne.bindBuffer(Ne.ARRAY_BUFFER,e.__webglLineDistanceBuffer),Ne.bufferData(Ne.ARRAY_BUFFER,x,t)}if(H)for(l=0,h=H.length;l<h;l++)if((p=H[l]).needsUpdate&&(void 0===p.boundTo||"vertices"===p.boundTo)){if(a=0,u=p.value.length,1===p.size)for(c=0;c<u;c++)p.array[c]=p.value[c];else if(2===p.size)for(c=0;c<u;c++)f=p.value[c],p.array[a]=f.x,p.array[a+1]=f.y,a+=2;else if(3===p.size)if("c"===p.type)for(c=0;c<u;c++)f=p.value[c],p.array[a]=f.r,p.array[a+1]=f.g,p.array[a+2]=f.b,a+=3;else for(c=0;c<u;c++)f=p.value[c],p.array[a]=f.x,p.array[a+1]=f.y,p.array[a+2]=f.z,a+=3;else if(4===p.size)for(c=0;c<u;c++)f=p.value[c],p.array[a]=f.x,p.array[a+1]=f.y,p.array[a+2]=f.z,p.array[a+3]=f.w,a+=4;Ne.bindBuffer(Ne.ARRAY_BUFFER,p.buffer),Ne.bufferData(Ne.ARRAY_BUFFER,p.array,t)}}(n,Ne.DYNAMIC_DRAW),n.verticesNeedUpdate=!1,n.colorsNeedUpdate=!1,n.lineDistancesNeedUpdate=!1,r.attributes&&Oe(r)):e instanceof THREE.ParticleSystem&&(i=(r=Te(e,n)).attributes&&Fe(r),(n.verticesNeedUpdate||n.colorsNeedUpdate||e.sortParticles||i)&&function(e,t,i){var r,n,o,a,s,l,h,c,u,f,p,d,m=e.vertices,g=m.length,E=e.colors,v=E.length,y=e.__vertexArray,T=e.__colorArray,_=e.__sortArray,x=e.verticesNeedUpdate,R=(e.elementsNeedUpdate,e.colorsNeedUpdate),b=e.__webglCustomAttributesList;if(i.sortParticles){for(G.copy(W),G.multiply(i.matrixWorld),r=0;r<g;r++)o=m[r],X.copy(o),X.applyProjection(G),_[r]=[X.z,r];for(_.sort(we),r=0;r<g;r++)o=m[_[r][1]],y[a=3*r]=o.x,y[a+1]=o.y,y[a+2]=o.z;for(n=0;n<v;n++)a=3*n,l=E[_[n][1]],T[a]=l.r,T[a+1]=l.g,T[a+2]=l.b;if(b)for(h=0,c=b.length;h<c;h++)if(void 0===(d=b[h]).boundTo||"vertices"===d.boundTo)if(a=0,f=d.value.length,1===d.size)for(u=0;u<f;u++)s=_[u][1],d.array[u]=d.value[s];else if(2===d.size)for(u=0;u<f;u++)s=_[u][1],p=d.value[s],d.array[a]=p.x,d.array[a+1]=p.y,a+=2;else if(3===d.size)if("c"===d.type)for(u=0;u<f;u++)s=_[u][1],p=d.value[s],d.array[a]=p.r,d.array[a+1]=p.g,d.array[a+2]=p.b,a+=3;else for(u=0;u<f;u++)s=_[u][1],p=d.value[s],d.array[a]=p.x,d.array[a+1]=p.y,d.array[a+2]=p.z,a+=3;else if(4===d.size)for(u=0;u<f;u++)s=_[u][1],p=d.value[s],d.array[a]=p.x,d.array[a+1]=p.y,d.array[a+2]=p.z,d.array[a+3]=p.w,a+=4}else{if(x)for(r=0;r<g;r++)o=m[r],y[a=3*r]=o.x,y[a+1]=o.y,y[a+2]=o.z;if(R)for(n=0;n<v;n++)l=E[n],T[a=3*n]=l.r,T[a+1]=l.g,T[a+2]=l.b;if(b)for(h=0,c=b.length;h<c;h++)if((d=b[h]).needsUpdate&&(void 0===d.boundTo||"vertices"===d.boundTo))if(f=d.value.length,a=0,1===d.size)for(u=0;u<f;u++)d.array[u]=d.value[u];else if(2===d.size)for(u=0;u<f;u++)p=d.value[u],d.array[a]=p.x,d.array[a+1]=p.y,a+=2;else if(3===d.size)if("c"===d.type)for(u=0;u<f;u++)p=d.value[u],d.array[a]=p.r,d.array[a+1]=p.g,d.array[a+2]=p.b,a+=3;else for(u=0;u<f;u++)p=d.value[u],d.array[a]=p.x,d.array[a+1]=p.y,d.array[a+2]=p.z,a+=3;else if(4===d.size)for(u=0;u<f;u++)p=d.value[u],d.array[a]=p.x,d.array[a+1]=p.y,d.array[a+2]=p.z,d.array[a+3]=p.w,a+=4}if((x||i.sortParticles)&&(Ne.bindBuffer(Ne.ARRAY_BUFFER,e.__webglVertexBuffer),Ne.bufferData(Ne.ARRAY_BUFFER,y,t)),(R||i.sortParticles)&&(Ne.bindBuffer(Ne.ARRAY_BUFFER,e.__webglColorBuffer),Ne.bufferData(Ne.ARRAY_BUFFER,T,t)),b)for(h=0,c=b.length;h<c;h++)((d=b[h]).needsUpdate||i.sortParticles)&&(Ne.bindBuffer(Ne.ARRAY_BUFFER,d.buffer),Ne.bufferData(Ne.ARRAY_BUFFER,d.array,t))}(n,Ne.DYNAMIC_DRAW,e),n.verticesNeedUpdate=!1,n.colorsNeedUpdate=!1,r.attributes&&Oe(r))}function Fe(e){for(var t in e.attributes)if(e.attributes[t].needsUpdate)return!0;return!1}function Oe(e){for(var t in e.attributes)e.attributes[t].needsUpdate=!1}function ke(e,t){e instanceof THREE.Mesh||e instanceof THREE.ParticleSystem||e instanceof THREE.Line?Ve(t.__webglObjects,e):e instanceof THREE.Sprite?Ie(t.__webglSprites,e):e instanceof THREE.LensFlare?Ie(t.__webglFlares,e):(e instanceof THREE.ImmediateRenderObject||e.immediateRenderCallback)&&Ve(t.__webglObjectsImmediate,e),delete e.__webglActive}function Ve(e,t){for(var i=e.length-1;0<=i;i--)e[i].object===t&&e.splice(i,1)}function Ie(e,t){for(var i=e.length-1;0<=i;i--)e[i]===t&&e.splice(i,1)}function je(e,t,i,r,n){M=0,r.needsUpdate&&(r.program&&Ee(r),z.initMaterial(r,t,i,n),r.needsUpdate=!1),r.morphTargets&&(n.__webglMorphTargetInfluences||(n.__webglMorphTargetInfluences=new Float32Array(z.maxMorphTargets)));var o,a,s,l,h,c,u,f,p,d,m=!1,g=r.program,E=g.uniforms,v=r.uniforms;if(g!==_&&(Ne.useProgram(g),_=g,m=!0),r.id!==x&&(x=r.id,m=!0),(m||e!==b)&&(Ne.uniformMatrix4fv(E.projectionMatrix,!1,e.projectionMatrix.elements),e!==b&&(b=e)),r.skinning)if(te&&n.useVertexTexture){if(null!==E.boneTexture){var y=Ge();Ne.uniform1i(E.boneTexture,y),z.setTexture(n.boneTexture,y)}null!==E.boneTextureWidth&&Ne.uniform1i(E.boneTextureWidth,n.boneTextureWidth),null!==E.boneTextureHeight&&Ne.uniform1i(E.boneTextureHeight,n.boneTextureHeight)}else null!==E.boneGlobalMatrices&&Ne.uniformMatrix4fv(E.boneGlobalMatrices,!1,n.boneMatrices);return m&&(i&&r.fog&&(f=i,(u=v).fogColor.value=f.color,f instanceof THREE.Fog?(u.fogNear.value=f.near,u.fogFar.value=f.far):f instanceof THREE.FogExp2&&(u.fogDensity.value=f.density)),(r instanceof THREE.MeshPhongMaterial||r instanceof THREE.MeshLambertMaterial||r.lights)&&(Y&&(!function(e,t){var i,r,n,o,a,s,l,h,c,u=0,f=0,p=0,d=K,m=d.directional.colors,g=d.directional.positions,E=d.point.colors,v=d.point.positions,y=d.point.distances,T=d.spot.colors,_=d.spot.positions,x=d.spot.distances,R=d.spot.directions,b=d.spot.anglesCos,w=d.spot.exponents,H=d.hemi.skyColors,S=d.hemi.groundColors,M=d.hemi.positions,C=0,A=0,P=0,D=0,L=0,F=0,O=0,k=0,V=0,I=0,N=0,U=0;for(i=0,r=t.length;i<r;i++)if(!(n=t[i]).onlyShadow)if(o=n.color,l=n.intensity,c=n.distance,n instanceof THREE.AmbientLight){if(!n.visible)continue;z.gammaInput?(u+=o.r*o.r,f+=o.g*o.g,p+=o.b*o.b):(u+=o.r,f+=o.g,p+=o.b)}else if(n instanceof THREE.DirectionalLight){if(L+=1,!n.visible)continue;if(q.getPositionFromMatrix(n.matrixWorld),X.getPositionFromMatrix(n.target.matrixWorld),q.sub(X),q.normalize(),0===q.x&&0===q.y&&0===q.z)continue;g[V=3*C]=q.x,g[V+1]=q.y,g[V+2]=q.z,z.gammaInput?qe(m,V,o,l*l):Ye(m,V,o,l),C+=1}else if(n instanceof THREE.PointLight){if(F+=1,!n.visible)continue;I=3*A,z.gammaInput?qe(E,I,o,l*l):Ye(E,I,o,l),X.getPositionFromMatrix(n.matrixWorld),v[I]=X.x,v[I+1]=X.y,v[I+2]=X.z,y[A]=c,A+=1}else if(n instanceof THREE.SpotLight){if(O+=1,!n.visible)continue;N=3*P,z.gammaInput?qe(T,N,o,l*l):Ye(T,N,o,l),X.getPositionFromMatrix(n.matrixWorld),_[N]=X.x,_[N+1]=X.y,_[N+2]=X.z,x[P]=c,q.copy(X),X.getPositionFromMatrix(n.target.matrixWorld),q.sub(X),q.normalize(),R[N]=q.x,R[N+1]=q.y,R[N+2]=q.z,b[P]=Math.cos(n.angle),w[P]=n.exponent,P+=1}else if(n instanceof THREE.HemisphereLight){if(k+=1,!n.visible)continue;if(q.getPositionFromMatrix(n.matrixWorld),q.normalize(),0===q.x&&0===q.y&&0===q.z)continue;M[U=3*D]=q.x,M[U+1]=q.y,M[U+2]=q.z,a=n.color,s=n.groundColor,z.gammaInput?(qe(H,U,a,h=l*l),qe(S,U,s,h)):(Ye(H,U,a,l),Ye(S,U,s,l)),D+=1}for(i=3*C,r=Math.max(m.length,3*L);i<r;i++)m[i]=0;for(i=3*A,r=Math.max(E.length,3*F);i<r;i++)E[i]=0;for(i=3*P,r=Math.max(T.length,3*O);i<r;i++)T[i]=0;for(i=3*D,r=Math.max(H.length,3*k);i<r;i++)H[i]=0;for(i=3*D,r=Math.max(S.length,3*k);i<r;i++)S[i]=0;d.directional.length=C,d.point.length=A,d.spot.length=P,d.hemi.length=D,d.ambient[0]=u,d.ambient[1]=f,d.ambient[2]=p}(0,t),Y=!1),c=K,(h=v).ambientLightColor.value=c.ambient,h.directionalLightColor.value=c.directional.colors,h.directionalLightDirection.value=c.directional.positions,h.pointLightColor.value=c.point.colors,h.pointLightPosition.value=c.point.positions,h.pointLightDistance.value=c.point.distances,h.spotLightColor.value=c.spot.colors,h.spotLightPosition.value=c.spot.positions,h.spotLightDistance.value=c.spot.distances,h.spotLightDirection.value=c.spot.directions,h.spotLightAngleCos.value=c.spot.anglesCos,h.spotLightExponent.value=c.spot.exponents,h.hemisphereLightSkyColor.value=c.hemi.skyColors,h.hemisphereLightGroundColor.value=c.hemi.groundColors,h.hemisphereLightDirection.value=c.hemi.positions),(r instanceof THREE.MeshBasicMaterial||r instanceof THREE.MeshLambertMaterial||r instanceof THREE.MeshPhongMaterial)&&function(e,t){e.opacity.value=t.opacity,z.gammaInput?e.diffuse.value.copyGammaToLinear(t.color):e.diffuse.value=t.color;e.map.value=t.map,e.lightMap.value=t.lightMap,e.specularMap.value=t.specularMap,t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale);t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale));var i;t.map?i=t.map:t.specularMap?i=t.specularMap:t.normalMap?i=t.normalMap:t.bumpMap&&(i=t.bumpMap);if(void 0!==i){var r=i.offset,n=i.repeat;e.offsetRepeat.value.set(r.x,r.y,n.x,n.y)}e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap instanceof THREE.WebGLRenderTargetCube?1:-1,z.gammaInput,e.reflectivity.value=t.reflectivity;e.refractionRatio.value=t.refractionRatio,e.combine.value=t.combine,e.useRefract.value=t.envMap&&t.envMap.mapping instanceof THREE.CubeRefractionMapping}(v,r),r instanceof THREE.LineBasicMaterial?We(v,r):r instanceof THREE.LineDashedMaterial?(We(v,r),l=r,(s=v).dashSize.value=l.dashSize,s.totalSize.value=l.dashSize+l.gapSize,s.scale.value=l.scale):r instanceof THREE.ParticleBasicMaterial?(a=r,(o=v).psColor.value=a.color,o.opacity.value=a.opacity,o.size.value=a.size,o.scale.value=T.height/2,o.map.value=a.map):r instanceof THREE.MeshPhongMaterial?function(e,t){e.shininess.value=t.shininess,z.gammaInput?(e.ambient.value.copyGammaToLinear(t.ambient),e.emissive.value.copyGammaToLinear(t.emissive),e.specular.value.copyGammaToLinear(t.specular)):(e.ambient.value=t.ambient,e.emissive.value=t.emissive,e.specular.value=t.specular);t.wrapAround&&e.wrapRGB.value.copy(t.wrapRGB)}(v,r):r instanceof THREE.MeshLambertMaterial?function(e,t){z.gammaInput?(e.ambient.value.copyGammaToLinear(t.ambient),e.emissive.value.copyGammaToLinear(t.emissive)):(e.ambient.value=t.ambient,e.emissive.value=t.emissive);t.wrapAround&&e.wrapRGB.value.copy(t.wrapRGB)}(v,r):r instanceof THREE.MeshDepthMaterial?(v.mNear.value=e.near,v.mFar.value=e.far,v.opacity.value=r.opacity):r instanceof THREE.MeshNormalMaterial&&(v.opacity.value=r.opacity),n.receiveShadow&&!r._shadowPass&&function(e,t){if(e.shadowMatrix)for(var i=0,r=0,n=t.length;r<n;r++){var o=t[r];o.castShadow&&((o instanceof THREE.SpotLight||o instanceof THREE.DirectionalLight&&!o.shadowCascade)&&(e.shadowMap.value[i]=o.shadowMap,e.shadowMapSize.value[i]=o.shadowMapSize,e.shadowMatrix.value[i]=o.shadowMatrix,e.shadowDarkness.value[i]=o.shadowDarkness,e.shadowBias.value[i]=o.shadowBias,i++))}}(v,t),function(e,t){var i,r,n,o,a,s,l,h,c,u,f;for(c=0,u=t.length;c<u;c++)if(o=e.uniforms[t[c][1]])if(i=t[c][0],n=i.type,r=i.value,"i"===n)Ne.uniform1i(o,r);else if("f"===n)Ne.uniform1f(o,r);else if("v2"===n)Ne.uniform2f(o,r.x,r.y);else if("v3"===n)Ne.uniform3f(o,r.x,r.y,r.z);else if("v4"===n)Ne.uniform4f(o,r.x,r.y,r.z,r.w);else if("c"===n)Ne.uniform3f(o,r.r,r.g,r.b);else if("iv1"===n)Ne.uniform1iv(o,r);else if("iv"===n)Ne.uniform3iv(o,r);else if("fv1"===n)Ne.uniform1fv(o,r);else if("fv"===n)Ne.uniform3fv(o,r);else if("v2v"===n){for(void 0===i._array&&(i._array=new Float32Array(2*r.length)),l=0,h=r.length;l<h;l++)f=2*l,i._array[f]=r[l].x,i._array[f+1]=r[l].y;Ne.uniform2fv(o,i._array)}else if("v3v"===n){for(void 0===i._array&&(i._array=new Float32Array(3*r.length)),l=0,h=r.length;l<h;l++)f=3*l,i._array[f]=r[l].x,i._array[f+1]=r[l].y,i._array[f+2]=r[l].z;Ne.uniform3fv(o,i._array)}else if("v4v"===n){for(void 0===i._array&&(i._array=new Float32Array(4*r.length)),l=0,h=r.length;l<h;l++)f=4*l,i._array[f]=r[l].x,i._array[f+1]=r[l].y,i._array[f+2]=r[l].z,i._array[f+3]=r[l].w;Ne.uniform4fv(o,i._array)}else if("m4"===n)void 0===i._array&&(i._array=new Float32Array(16)),r.flattenToArray(i._array),Ne.uniformMatrix4fv(o,!1,i._array);else if("m4v"===n){for(void 0===i._array&&(i._array=new Float32Array(16*r.length)),l=0,h=r.length;l<h;l++)r[l].flattenToArrayOffset(i._array,16*l);Ne.uniformMatrix4fv(o,!1,i._array)}else if("t"===n){if(a=r,s=Ge(),Ne.uniform1i(o,s),!a)continue;a.image instanceof Array&&6===a.image.length?tt(a,s):a instanceof THREE.WebGLRenderTargetCube?it(a,s):z.setTexture(a,s)}else if("tv"===n){for(void 0===i._array&&(i._array=[]),l=0,h=i.value.length;l<h;l++)i._array[l]=Ge();for(Ne.uniform1iv(o,i._array),l=0,h=i.value.length;l<h;l++)a=i.value[l],s=i._array[l],a&&z.setTexture(a,s)}else console.warn("THREE.WebGLRenderer: Unknown uniform type: "+n)}(g,r.uniformsList),(r instanceof THREE.ShaderMaterial||r instanceof THREE.MeshPhongMaterial||r.envMap)&&null!==E.cameraPosition&&(X.getPositionFromMatrix(e.matrixWorld),Ne.uniform3f(E.cameraPosition,X.x,X.y,X.z)),(r instanceof THREE.MeshPhongMaterial||r instanceof THREE.MeshLambertMaterial||r instanceof THREE.ShaderMaterial||r.skinning)&&null!==E.viewMatrix&&Ne.uniformMatrix4fv(E.viewMatrix,!1,e.matrixWorldInverse.elements)),p=E,d=n,Ne.uniformMatrix4fv(p.modelViewMatrix,!1,d._modelViewMatrix.elements),p.normalMatrix&&Ne.uniformMatrix3fv(p.normalMatrix,!1,d._normalMatrix.elements),null!==E.modelMatrix&&Ne.uniformMatrix4fv(E.modelMatrix,!1,n.matrixWorld.elements),g}function We(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}function Ge(){var e=M;return Q<=e&&console.warn("WebGLRenderer: trying to use "+e+" texture units while this GPU supports only "+Q),M+=1,e}function Xe(e,t){e._modelViewMatrix.multiplyMatrices(t.matrixWorldInverse,e.matrixWorld),e._normalMatrix.getNormalMatrix(e._modelViewMatrix)}function qe(e,t,i,r){e[t]=i.r*i.r*r,e[t+1]=i.g*i.g*r,e[t+2]=i.b*i.b*r}function Ye(e,t,i,r){e[t]=i.r*r,e[t+1]=i.g*r,e[t+2]=i.b*r}function Ke(e){e!==F&&(Ne.lineWidth(e),F=e)}function Qe(e,t,i){P!==e&&(e?Ne.enable(Ne.POLYGON_OFFSET_FILL):Ne.disable(Ne.POLYGON_OFFSET_FILL),P=e),!e||D===t&&L===i||(Ne.polygonOffset(t,i),D=t,L=i)}function Ze(e,t){var i;return"fragment"===e?i=Ne.createShader(Ne.FRAGMENT_SHADER):"vertex"===e&&(i=Ne.createShader(Ne.VERTEX_SHADER)),Ne.shaderSource(i,t),Ne.compileShader(i),Ne.getShaderParameter(i,Ne.COMPILE_STATUS)?i:(console.error(Ne.getShaderInfoLog(i)),console.error(function(e){for(var t=e.split("\n"),i=0,r=t.length;i<r;i++)t[i]=i+1+": "+t[i];return t.join("\n")}(t)),null)}function $e(e){return 0==(e&e-1)}function Je(e,t,i){i?(Ne.texParameteri(e,Ne.TEXTURE_WRAP_S,at(t.wrapS)),Ne.texParameteri(e,Ne.TEXTURE_WRAP_T,at(t.wrapT)),Ne.texParameteri(e,Ne.TEXTURE_MAG_FILTER,at(t.magFilter)),Ne.texParameteri(e,Ne.TEXTURE_MIN_FILTER,at(t.minFilter))):(Ne.texParameteri(e,Ne.TEXTURE_WRAP_S,Ne.CLAMP_TO_EDGE),Ne.texParameteri(e,Ne.TEXTURE_WRAP_T,Ne.CLAMP_TO_EDGE),Ne.texParameteri(e,Ne.TEXTURE_MAG_FILTER,ot(t.magFilter)),Ne.texParameteri(e,Ne.TEXTURE_MIN_FILTER,ot(t.minFilter))),c&&t.type!==THREE.FloatType&&(1<t.anisotropy||t.__oldAnisotropy)&&(Ne.texParameterf(e,c.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(t.anisotropy,J)),t.__oldAnisotropy=t.anisotropy)}function et(e,t){if(e.width<=t&&e.height<=t)return e;var i=Math.max(e.width,e.height),r=Math.floor(e.width*t/i),n=Math.floor(e.height*t/i),o=document.createElement("canvas");return o.width=r,o.height=n,o.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,r,n),o}function tt(e,t){if(6===e.image.length)if(e.needsUpdate){e.image.__webglTextureCube||(e.addEventListener("dispose",ce),e.image.__webglTextureCube=Ne.createTexture(),z.info.memory.textures++),Ne.activeTexture(Ne.TEXTURE0+t),Ne.bindTexture(Ne.TEXTURE_CUBE_MAP,e.image.__webglTextureCube),Ne.pixelStorei(Ne.UNPACK_FLIP_Y_WEBGL,e.flipY);for(var i=e instanceof THREE.CompressedTexture,r=[],n=0;n<6;n++)z.autoScaleCubemaps&&!i?r[n]=et(e.image[n],$):r[n]=e.image[n];var o=r[0],a=$e(o.width)&&$e(o.height),s=at(e.format),l=at(e.type);Je(Ne.TEXTURE_CUBE_MAP,e,a);for(n=0;n<6;n++)if(i)for(var h,c=r[n].mipmaps,u=0,f=c.length;u<f;u++)h=c[u],e.format!==THREE.RGBAFormat?Ne.compressedTexImage2D(Ne.TEXTURE_CUBE_MAP_POSITIVE_X+n,u,s,h.width,h.height,0,h.data):Ne.texImage2D(Ne.TEXTURE_CUBE_MAP_POSITIVE_X+n,u,s,h.width,h.height,0,s,l,h.data);else Ne.texImage2D(Ne.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,s,s,l,r[n]);e.generateMipmaps&&a&&Ne.generateMipmap(Ne.TEXTURE_CUBE_MAP),e.needsUpdate=!1,e.onUpdate&&e.onUpdate()}else Ne.activeTexture(Ne.TEXTURE0+t),Ne.bindTexture(Ne.TEXTURE_CUBE_MAP,e.image.__webglTextureCube)}function it(e,t){Ne.activeTexture(Ne.TEXTURE0+t),Ne.bindTexture(Ne.TEXTURE_CUBE_MAP,e.__webglTexture)}function rt(e,t,i){Ne.bindFramebuffer(Ne.FRAMEBUFFER,e),Ne.framebufferTexture2D(Ne.FRAMEBUFFER,Ne.COLOR_ATTACHMENT0,i,t.__webglTexture,0)}function nt(e,t){Ne.bindRenderbuffer(Ne.RENDERBUFFER,e),t.depthBuffer&&!t.stencilBuffer?(Ne.renderbufferStorage(Ne.RENDERBUFFER,Ne.DEPTH_COMPONENT16,t.width,t.height),Ne.framebufferRenderbuffer(Ne.FRAMEBUFFER,Ne.DEPTH_ATTACHMENT,Ne.RENDERBUFFER,e)):t.depthBuffer&&t.stencilBuffer?(Ne.renderbufferStorage(Ne.RENDERBUFFER,Ne.DEPTH_STENCIL,t.width,t.height),Ne.framebufferRenderbuffer(Ne.FRAMEBUFFER,Ne.DEPTH_STENCIL_ATTACHMENT,Ne.RENDERBUFFER,e)):Ne.renderbufferStorage(Ne.RENDERBUFFER,Ne.RGBA4,t.width,t.height)}function ot(e){return e===THREE.NearestFilter||e===THREE.NearestMipMapNearestFilter||e===THREE.NearestMipMapLinearFilter?Ne.NEAREST:Ne.LINEAR}function at(e){if(e===THREE.RepeatWrapping)return Ne.REPEAT;if(e===THREE.ClampToEdgeWrapping)return Ne.CLAMP_TO_EDGE;if(e===THREE.MirroredRepeatWrapping)return Ne.MIRRORED_REPEAT;if(e===THREE.NearestFilter)return Ne.NEAREST;if(e===THREE.NearestMipMapNearestFilter)return Ne.NEAREST_MIPMAP_NEAREST;if(e===THREE.NearestMipMapLinearFilter)return Ne.NEAREST_MIPMAP_LINEAR;if(e===THREE.LinearFilter)return Ne.LINEAR;if(e===THREE.LinearMipMapNearestFilter)return Ne.LINEAR_MIPMAP_NEAREST;if(e===THREE.LinearMipMapLinearFilter)return Ne.LINEAR_MIPMAP_LINEAR;if(e===THREE.UnsignedByteType)return Ne.UNSIGNED_BYTE;if(e===THREE.UnsignedShort4444Type)return Ne.UNSIGNED_SHORT_4_4_4_4;if(e===THREE.UnsignedShort5551Type)return Ne.UNSIGNED_SHORT_5_5_5_1;if(e===THREE.UnsignedShort565Type)return Ne.UNSIGNED_SHORT_5_6_5;if(e===THREE.ByteType)return Ne.BYTE;if(e===THREE.ShortType)return Ne.SHORT;if(e===THREE.UnsignedShortType)return Ne.UNSIGNED_SHORT;if(e===THREE.IntType)return Ne.INT;if(e===THREE.UnsignedIntType)return Ne.UNSIGNED_INT;if(e===THREE.FloatType)return Ne.FLOAT;if(e===THREE.AlphaFormat)return Ne.ALPHA;if(e===THREE.RGBFormat)return Ne.RGB;if(e===THREE.RGBAFormat)return Ne.RGBA;if(e===THREE.LuminanceFormat)return Ne.LUMINANCE;if(e===THREE.LuminanceAlphaFormat)return Ne.LUMINANCE_ALPHA;if(e===THREE.AddEquation)return Ne.FUNC_ADD;if(e===THREE.SubtractEquation)return Ne.FUNC_SUBTRACT;if(e===THREE.ReverseSubtractEquation)return Ne.FUNC_REVERSE_SUBTRACT;if(e===THREE.ZeroFactor)return Ne.ZERO;if(e===THREE.OneFactor)return Ne.ONE;if(e===THREE.SrcColorFactor)return Ne.SRC_COLOR;if(e===THREE.OneMinusSrcColorFactor)return Ne.ONE_MINUS_SRC_COLOR;if(e===THREE.SrcAlphaFactor)return Ne.SRC_ALPHA;if(e===THREE.OneMinusSrcAlphaFactor)return Ne.ONE_MINUS_SRC_ALPHA;if(e===THREE.DstAlphaFactor)return Ne.DST_ALPHA;if(e===THREE.OneMinusDstAlphaFactor)return Ne.ONE_MINUS_DST_ALPHA;if(e===THREE.DstColorFactor)return Ne.DST_COLOR;if(e===THREE.OneMinusDstColorFactor)return Ne.ONE_MINUS_DST_COLOR;if(e===THREE.SrcAlphaSaturateFactor)return Ne.SRC_ALPHA_SATURATE;if(void 0!==u){if(e===THREE.RGB_S3TC_DXT1_Format)return u.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===THREE.RGBA_S3TC_DXT1_Format)return u.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===THREE.RGBA_S3TC_DXT3_Format)return u.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===THREE.RGBA_S3TC_DXT5_Format)return u.COMPRESSED_RGBA_S3TC_DXT5_EXT}return 0}this.renderBufferImmediate=function(e,t,i){if(e.hasPositions&&!e.__webglVertexBuffer&&(e.__webglVertexBuffer=Ne.createBuffer()),e.hasNormals&&!e.__webglNormalBuffer&&(e.__webglNormalBuffer=Ne.createBuffer()),e.hasUvs&&!e.__webglUvBuffer&&(e.__webglUvBuffer=Ne.createBuffer()),e.hasColors&&!e.__webglColorBuffer&&(e.__webglColorBuffer=Ne.createBuffer()),e.hasPositions&&(Ne.bindBuffer(Ne.ARRAY_BUFFER,e.__webglVertexBuffer),Ne.bufferData(Ne.ARRAY_BUFFER,e.positionArray,Ne.DYNAMIC_DRAW),Ne.enableVertexAttribArray(t.attributes.position),Ne.vertexAttribPointer(t.attributes.position,3,Ne.FLOAT,!1,0,0)),e.hasNormals){if(Ne.bindBuffer(Ne.ARRAY_BUFFER,e.__webglNormalBuffer),i.shading===THREE.FlatShading){var r,n,o,a,s,l,h,c,u,f,p,d=3*e.count;for(p=0;p<d;p+=9)a=(f=e.normalArray)[p],l=f[p+1],c=f[p+2],s=f[p+3],h=f[p+4],u=f[p+5],r=(a+s+f[p+6])/3,n=(l+h+f[p+7])/3,o=(c+u+f[p+8])/3,f[p]=r,f[p+1]=n,f[p+2]=o,f[p+3]=r,f[p+4]=n,f[p+5]=o,f[p+6]=r,f[p+7]=n,f[p+8]=o}Ne.bufferData(Ne.ARRAY_BUFFER,e.normalArray,Ne.DYNAMIC_DRAW),Ne.enableVertexAttribArray(t.attributes.normal),Ne.vertexAttribPointer(t.attributes.normal,3,Ne.FLOAT,!1,0,0)}e.hasUvs&&i.map&&(Ne.bindBuffer(Ne.ARRAY_BUFFER,e.__webglUvBuffer),Ne.bufferData(Ne.ARRAY_BUFFER,e.uvArray,Ne.DYNAMIC_DRAW),Ne.enableVertexAttribArray(t.attributes.uv),Ne.vertexAttribPointer(t.attributes.uv,2,Ne.FLOAT,!1,0,0)),e.hasColors&&i.vertexColors!==THREE.NoColors&&(Ne.bindBuffer(Ne.ARRAY_BUFFER,e.__webglColorBuffer),Ne.bufferData(Ne.ARRAY_BUFFER,e.colorArray,Ne.DYNAMIC_DRAW),Ne.enableVertexAttribArray(t.attributes.color),Ne.vertexAttribPointer(t.attributes.color,3,Ne.FLOAT,!1,0,0)),Ne.drawArrays(Ne.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,i,r,n,o){if(!1!==r.visible){var a,s,l,h,c=je(e,t,i,r,o),u=c.attributes,f=n.attributes,p=!1,d=r.wireframe?1:0,m=16777215*n.id+2*c.id+d;if(m!==R&&(R=m,p=!0),p&&Re(),o instanceof THREE.Mesh){var g=f.index;if(g){var E=n.offsets;1<E.length&&(p=!0);for(var v=0,y=E.length;v<y;v++){var T=E[v].index;if(p){for(s in u)l=u[s],a=f[s],0<=l&&(a?(h=a.itemSize,Ne.bindBuffer(Ne.ARRAY_BUFFER,a.buffer),xe(l),Ne.vertexAttribPointer(l,h,Ne.FLOAT,!1,0,T*h*4)):r.defaultAttributeValues&&(2===r.defaultAttributeValues[s].length?Ne.vertexAttrib2fv(l,r.defaultAttributeValues[s]):3===r.defaultAttributeValues[s].length&&Ne.vertexAttrib3fv(l,r.defaultAttributeValues[s])));Ne.bindBuffer(Ne.ELEMENT_ARRAY_BUFFER,g.buffer)}Ne.drawElements(Ne.TRIANGLES,E[v].count,Ne.UNSIGNED_SHORT,2*E[v].start),z.info.render.calls++,z.info.render.vertices+=E[v].count,z.info.render.faces+=E[v].count/3}}else{if(p)for(s in u)"index"!==s&&(l=u[s],a=f[s],0<=l&&(a?(h=a.itemSize,Ne.bindBuffer(Ne.ARRAY_BUFFER,a.buffer),xe(l),Ne.vertexAttribPointer(l,h,Ne.FLOAT,!1,0,0)):r.defaultAttributeValues&&r.defaultAttributeValues[s]&&(2===r.defaultAttributeValues[s].length?Ne.vertexAttrib2fv(l,r.defaultAttributeValues[s]):3===r.defaultAttributeValues[s].length&&Ne.vertexAttrib3fv(l,r.defaultAttributeValues[s]))));var _=n.attributes.position;Ne.drawArrays(Ne.TRIANGLES,0,_.numItems/3),z.info.render.calls++,z.info.render.vertices+=_.numItems/3,z.info.render.faces+=_.numItems/3/3}}else if(o instanceof THREE.ParticleSystem){if(p){for(s in u)l=u[s],a=f[s],0<=l&&(a?(h=a.itemSize,Ne.bindBuffer(Ne.ARRAY_BUFFER,a.buffer),xe(l),Ne.vertexAttribPointer(l,h,Ne.FLOAT,!1,0,0)):r.defaultAttributeValues&&r.defaultAttributeValues[s]&&(2===r.defaultAttributeValues[s].length?Ne.vertexAttrib2fv(l,r.defaultAttributeValues[s]):3===r.defaultAttributeValues[s].length&&Ne.vertexAttrib3fv(l,r.defaultAttributeValues[s])));_=f.position;Ne.drawArrays(Ne.POINTS,0,_.numItems/3),z.info.render.calls++,z.info.render.points+=_.numItems/3}}else if(o instanceof THREE.Line&&p){for(s in u)l=u[s],a=f[s],0<=l&&(a?(h=a.itemSize,Ne.bindBuffer(Ne.ARRAY_BUFFER,a.buffer),xe(l),Ne.vertexAttribPointer(l,h,Ne.FLOAT,!1,0,0)):r.defaultAttributeValues&&r.defaultAttributeValues[s]&&(2===r.defaultAttributeValues[s].length?Ne.vertexAttrib2fv(l,r.defaultAttributeValues[s]):3===r.defaultAttributeValues[s].length&&Ne.vertexAttrib3fv(l,r.defaultAttributeValues[s])));var x=o.type===THREE.LineStrip?Ne.LINE_STRIP:Ne.LINES;Ke(r.linewidth);_=f.position;Ne.drawArrays(x,0,_.numItems/3),z.info.render.calls++,z.info.render.points+=_.numItems}}},this.renderBuffer=function(e,t,i,r,n,o){if(!1!==r.visible){var a,s,l,h=je(e,t,i,r,o),c=h.attributes,u=!1,f=r.wireframe?1:0,p=16777215*n.id+2*h.id+f;if(p!==R&&(R=p,u=!0),u&&Re(),!r.morphTargets&&0<=c.position?u&&(Ne.bindBuffer(Ne.ARRAY_BUFFER,n.__webglVertexBuffer),xe(c.position),Ne.vertexAttribPointer(c.position,3,Ne.FLOAT,!1,0,0)):o.morphTargetBase&&function(e,t,i){var r=e.program.attributes;-1!==i.morphTargetBase&&0<=r.position?(Ne.bindBuffer(Ne.ARRAY_BUFFER,t.__webglMorphTargetsBuffers[i.morphTargetBase]),xe(r.position),Ne.vertexAttribPointer(r.position,3,Ne.FLOAT,!1,0,0)):0<=r.position&&(Ne.bindBuffer(Ne.ARRAY_BUFFER,t.__webglVertexBuffer),xe(r.position),Ne.vertexAttribPointer(r.position,3,Ne.FLOAT,!1,0,0));if(i.morphTargetForcedOrder.length)for(var n=0,o=i.morphTargetForcedOrder,a=i.morphTargetInfluences;n<e.numSupportedMorphTargets&&n<o.length;)0<=r["morphTarget"+n]&&(Ne.bindBuffer(Ne.ARRAY_BUFFER,t.__webglMorphTargetsBuffers[o[n]]),xe(r["morphTarget"+n]),Ne.vertexAttribPointer(r["morphTarget"+n],3,Ne.FLOAT,!1,0,0)),0<=r["morphNormal"+n]&&e.morphNormals&&(Ne.bindBuffer(Ne.ARRAY_BUFFER,t.__webglMorphNormalsBuffers[o[n]]),xe(r["morphNormal"+n]),Ne.vertexAttribPointer(r["morphNormal"+n],3,Ne.FLOAT,!1,0,0)),i.__webglMorphTargetInfluences[n]=a[o[n]],n++;else{var s,l,h=[],a=i.morphTargetInfluences,c=a.length;for(l=0;l<c;l++)0<(s=a[l])&&h.push([s,l]);h.length>e.numSupportedMorphTargets?(h.sort(we),h.length=e.numSupportedMorphTargets):h.length>e.numSupportedMorphNormals?h.sort(we):0===h.length&&h.push([0,0]);for(var u,n=0;n<e.numSupportedMorphTargets;)h[n]?(u=h[n][1],0<=r["morphTarget"+n]&&(Ne.bindBuffer(Ne.ARRAY_BUFFER,t.__webglMorphTargetsBuffers[u]),xe(r["morphTarget"+n]),Ne.vertexAttribPointer(r["morphTarget"+n],3,Ne.FLOAT,!1,0,0)),0<=r["morphNormal"+n]&&e.morphNormals&&(Ne.bindBuffer(Ne.ARRAY_BUFFER,t.__webglMorphNormalsBuffers[u]),xe(r["morphNormal"+n]),Ne.vertexAttribPointer(r["morphNormal"+n],3,Ne.FLOAT,!1,0,0)),i.__webglMorphTargetInfluences[n]=a[u]):i.__webglMorphTargetInfluences[n]=0,n++}null!==e.program.uniforms.morphTargetInfluences&&Ne.uniform1fv(e.program.uniforms.morphTargetInfluences,i.__webglMorphTargetInfluences)}(r,n,o),u){if(n.__webglCustomAttributesList)for(s=0,l=n.__webglCustomAttributesList.length;s<l;s++)0<=c[(a=n.__webglCustomAttributesList[s]).buffer.belongsToAttribute]&&(Ne.bindBuffer(Ne.ARRAY_BUFFER,a.buffer),xe(c[a.buffer.belongsToAttribute]),Ne.vertexAttribPointer(c[a.buffer.belongsToAttribute],a.size,Ne.FLOAT,!1,0,0));0<=c.color&&(0<o.geometry.colors.length||0<o.geometry.faces.length?(Ne.bindBuffer(Ne.ARRAY_BUFFER,n.__webglColorBuffer),xe(c.color),Ne.vertexAttribPointer(c.color,3,Ne.FLOAT,!1,0,0)):r.defaultAttributeValues&&Ne.vertexAttrib3fv(c.color,r.defaultAttributeValues.color)),0<=c.normal&&(Ne.bindBuffer(Ne.ARRAY_BUFFER,n.__webglNormalBuffer),xe(c.normal),Ne.vertexAttribPointer(c.normal,3,Ne.FLOAT,!1,0,0)),0<=c.tangent&&(Ne.bindBuffer(Ne.ARRAY_BUFFER,n.__webglTangentBuffer),xe(c.tangent),Ne.vertexAttribPointer(c.tangent,4,Ne.FLOAT,!1,0,0)),0<=c.uv&&(o.geometry.faceVertexUvs[0]?(Ne.bindBuffer(Ne.ARRAY_BUFFER,n.__webglUVBuffer),xe(c.uv),Ne.vertexAttribPointer(c.uv,2,Ne.FLOAT,!1,0,0)):r.defaultAttributeValues&&Ne.vertexAttrib2fv(c.uv,r.defaultAttributeValues.uv)),0<=c.uv2&&(o.geometry.faceVertexUvs[1]?(Ne.bindBuffer(Ne.ARRAY_BUFFER,n.__webglUV2Buffer),xe(c.uv2),Ne.vertexAttribPointer(c.uv2,2,Ne.FLOAT,!1,0,0)):r.defaultAttributeValues&&Ne.vertexAttrib2fv(c.uv2,r.defaultAttributeValues.uv2)),r.skinning&&0<=c.skinIndex&&0<=c.skinWeight&&(Ne.bindBuffer(Ne.ARRAY_BUFFER,n.__webglSkinIndicesBuffer),xe(c.skinIndex),Ne.vertexAttribPointer(c.skinIndex,4,Ne.FLOAT,!1,0,0),Ne.bindBuffer(Ne.ARRAY_BUFFER,n.__webglSkinWeightsBuffer),xe(c.skinWeight),Ne.vertexAttribPointer(c.skinWeight,4,Ne.FLOAT,!1,0,0)),0<=c.lineDistance&&(Ne.bindBuffer(Ne.ARRAY_BUFFER,n.__webglLineDistanceBuffer),xe(c.lineDistance),Ne.vertexAttribPointer(c.lineDistance,1,Ne.FLOAT,!1,0,0))}if(o instanceof THREE.Mesh)r.wireframe?(Ke(r.wireframeLinewidth),u&&Ne.bindBuffer(Ne.ELEMENT_ARRAY_BUFFER,n.__webglLineBuffer),Ne.drawElements(Ne.LINES,n.__webglLineCount,Ne.UNSIGNED_SHORT,0)):(u&&Ne.bindBuffer(Ne.ELEMENT_ARRAY_BUFFER,n.__webglFaceBuffer),Ne.drawElements(Ne.TRIANGLES,n.__webglFaceCount,Ne.UNSIGNED_SHORT,0)),z.info.render.calls++,z.info.render.vertices+=n.__webglFaceCount,z.info.render.faces+=n.__webglFaceCount/3;else if(o instanceof THREE.Line){var d=o.type===THREE.LineStrip?Ne.LINE_STRIP:Ne.LINES;Ke(r.linewidth),Ne.drawArrays(d,0,n.__webglLineCount),z.info.render.calls++}else o instanceof THREE.ParticleSystem&&(Ne.drawArrays(Ne.POINTS,0,n.__webglParticleCount),z.info.render.calls++,z.info.render.points+=n.__webglParticleCount)}},this.render=function(e,t,i,r){if(t instanceof THREE.Camera!=!1){var n,o,a,s,l,h,c=e.__lights,u=e.fog;for(x=-1,(Y=!0)===e.autoUpdate&&e.updateMatrixWorld(),void 0===t.parent&&t.updateMatrixWorld(),t.matrixWorldInverse.getInverse(t.matrixWorld),W.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),j.setFromMatrix(W),this.autoUpdateObjects&&this.initWebGLObjects(e),He(this.renderPluginsPre,e,t),z.info.render.calls=0,z.info.render.vertices=0,z.info.render.faces=0,z.info.render.points=0,this.setRenderTarget(i),(this.autoClear||r)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),n=0,o=(l=e.__webglObjects).length;n<o;n++)s=(a=l[n]).object,a.id=n,a.render=!1,s.visible&&((s instanceof THREE.Mesh||s instanceof THREE.ParticleSystem)&&s.frustumCulled&&!j.intersectsObject(s)||(Xe(s,t),Ae(a),(a.render=!0)===this.sortObjects&&(null!==s.renderDepth?a.z=s.renderDepth:(X.getPositionFromMatrix(s.matrixWorld),X.applyProjection(W),a.z=X.z))));for(this.sortObjects&&l.sort(be),n=0,o=(l=e.__webglObjectsImmediate).length;n<o;n++)(s=(a=l[n]).object).visible&&(Xe(s,t),Ce(a));if(e.overrideMaterial){var f=e.overrideMaterial;this.setBlending(f.blending,f.blendEquation,f.blendSrc,f.blendDst),this.setDepthTest(f.depthTest),this.setDepthWrite(f.depthWrite),Qe(f.polygonOffset,f.polygonOffsetFactor,f.polygonOffsetUnits),Se(e.__webglObjects,!1,"",t,c,u,!0,f),Me(e.__webglObjectsImmediate,"",t,c,u,!1,f)}else{f=null;this.setBlending(THREE.NoBlending),Se(e.__webglObjects,!0,"opaque",t,c,u,!1,f),Me(e.__webglObjectsImmediate,"opaque",t,c,u,!1,f),Se(e.__webglObjects,!1,"transparent",t,c,u,!0,f),Me(e.__webglObjectsImmediate,"transparent",t,c,u,!0,f)}He(this.renderPluginsPost,e,t),i&&i.generateMipmaps&&i.minFilter!==THREE.NearestFilter&&i.minFilter!==THREE.LinearFilter&&((h=i)instanceof THREE.WebGLRenderTargetCube?(Ne.bindTexture(Ne.TEXTURE_CUBE_MAP,h.__webglTexture),Ne.generateMipmap(Ne.TEXTURE_CUBE_MAP),Ne.bindTexture(Ne.TEXTURE_CUBE_MAP,null)):(Ne.bindTexture(Ne.TEXTURE_2D,h.__webglTexture),Ne.generateMipmap(Ne.TEXTURE_2D),Ne.bindTexture(Ne.TEXTURE_2D,null))),this.setDepthTest(!0),this.setDepthWrite(!0)}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.renderImmediateObject=function(e,t,i,r,n){var o=je(e,t,i,r,n);R=-1,z.setMaterialFaces(r),n.immediateRenderCallback?n.immediateRenderCallback(o,Ne,j):n.render(function(e){z.renderBufferImmediate(e,o,r)})},this.initWebGLObjects=function(e){for(e.__webglObjects||(e.__webglObjects=[],e.__webglObjectsImmediate=[],e.__webglSprites=[],e.__webglFlares=[]);e.__objectsAdded.length;)Pe(e.__objectsAdded[0],e),e.__objectsAdded.splice(0,1);for(;e.__objectsRemoved.length;)ke(e.__objectsRemoved[0],e),e.__objectsRemoved.splice(0,1);for(var t=0,i=e.__webglObjects.length;t<i;t++){var r=e.__webglObjects[t].object;void 0===r.__webglInit&&(void 0!==r.__webglActive&&ke(r,e),Pe(r,e)),Le(r)}},this.initMaterial=function(e,t,i,r){var n,o,a,s,l,h,c,u,f;e.addEventListener("dispose",fe),e instanceof THREE.MeshDepthMaterial?c="depth":e instanceof THREE.MeshNormalMaterial?c="normal":e instanceof THREE.MeshBasicMaterial?c="basic":e instanceof THREE.MeshLambertMaterial?c="lambert":e instanceof THREE.MeshPhongMaterial?c="phong":e instanceof THREE.LineBasicMaterial?c="basic":e instanceof THREE.LineDashedMaterial?c="dashed":e instanceof THREE.ParticleBasicMaterial&&(c="particle_basic"),c&&(u=e,f=THREE.ShaderLib[c],u.uniforms=THREE.UniformsUtils.clone(f.uniforms),u.vertexShader=f.vertexShader,u.fragmentShader=f.fragmentShader),s=function(e){for(var t=0,i=0,r=0,n=0,o=0,a=e.length;o<a;o++){var s=e[o];s.onlyShadow||(s instanceof THREE.DirectionalLight&&t++,s instanceof THREE.PointLight&&i++,s instanceof THREE.SpotLight&&r++,s instanceof THREE.HemisphereLight&&n++)}return{directional:t,point:i,spot:r,hemi:n}}(t),h=function(e){for(var t=0,i=0,r=e.length;i<r;i++){var n=e[i];n.castShadow&&(n instanceof THREE.SpotLight&&t++,n instanceof THREE.DirectionalLight&&!n.shadowCascade&&t++)}return t}(t),l=function(e){{if(te&&e&&e.useVertexTexture)return 1024;var t=Ne.getParameter(Ne.MAX_VERTEX_UNIFORM_VECTORS),i=Math.floor((t-20)/4),r=i;return void 0!==e&&e instanceof THREE.SkinnedMesh&&(r=Math.min(e.bones.length,r))<e.bones.length&&console.warn("WebGLRenderer: too many bones - "+e.bones.length+", this GPU supports just "+r+" (try OpenGL instead of ANGLE)"),r}}(r),a={map:!!e.map,envMap:!!e.envMap,lightMap:!!e.lightMap,bumpMap:!!e.bumpMap,normalMap:!!e.normalMap,specularMap:!!e.specularMap,vertexColors:e.vertexColors,fog:i,useFog:e.fog,fogExp:i instanceof THREE.FogExp2,sizeAttenuation:e.sizeAttenuation,skinning:e.skinning,maxBones:l,useVertexTexture:te&&r&&r.useVertexTexture,morphTargets:e.morphTargets,morphNormals:e.morphNormals,maxMorphTargets:this.maxMorphTargets,maxMorphNormals:this.maxMorphNormals,maxDirLights:s.directional,maxPointLights:s.point,maxSpotLights:s.spot,maxHemiLights:s.hemi,maxShadows:h,shadowMapEnabled:this.shadowMapEnabled&&r.receiveShadow,shadowMapType:this.shadowMapType,shadowMapDebug:this.shadowMapDebug,shadowMapCascade:this.shadowMapCascade,alphaTest:e.alphaTest,metal:e.metal,perPixel:e.perPixel,wrapAround:e.wrapAround,doubleSided:e.side===THREE.DoubleSide,flipSided:e.side===THREE.BackSide},e.program=function(e,t,i,r,n,o,a,s){var l,h,c,u,f,p=[];e?p.push(e):(p.push(t),p.push(i));for(c in o)p.push(c),p.push(o[c]);for(l in a)p.push(l),p.push(a[l]);for(f=p.join(),l=0,h=H.length;l<h;l++){var d=H[l];if(d.code===f)return d.usedTimes++,d.program}var m="SHADOWMAP_TYPE_BASIC";a.shadowMapType===THREE.PCFShadowMap?m="SHADOWMAP_TYPE_PCF":a.shadowMapType===THREE.PCFSoftShadowMap&&(m="SHADOWMAP_TYPE_PCF_SOFT");var g=function(e){var t,i,r=[];for(var n in e)!1!==(t=e[n])&&(i="#define "+n+" "+t,r.push(i));return r.join("\n")}(o);u=Ne.createProgram();var E,v,y,T,_=["precision "+w+" float;","precision "+w+" int;",g,ee?"#define VERTEX_TEXTURES":"",z.gammaInput?"#define GAMMA_INPUT":"",z.gammaOutput?"#define GAMMA_OUTPUT":"",z.physicallyBasedShading?"#define PHYSICALLY_BASED_SHADING":"","#define MAX_DIR_LIGHTS "+a.maxDirLights,"#define MAX_POINT_LIGHTS "+a.maxPointLights,"#define MAX_SPOT_LIGHTS "+a.maxSpotLights,"#define MAX_HEMI_LIGHTS "+a.maxHemiLights,"#define MAX_SHADOWS "+a.maxShadows,"#define MAX_BONES "+a.maxBones,a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.lightMap?"#define USE_LIGHTMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.vertexColors?"#define USE_COLOR":"",a.skinning?"#define USE_SKINNING":"",a.useVertexTexture?"#define BONE_TEXTURE":"",a.morphTargets?"#define USE_MORPHTARGETS":"",a.morphNormals?"#define USE_MORPHNORMALS":"",a.perPixel?"#define PHONG_PER_PIXEL":"",a.wrapAround?"#define WRAP_AROUND":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+m:"",a.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",a.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",a.sizeAttenuation?"#define USE_SIZEATTENUATION":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","attribute vec2 uv2;","#ifdef USE_COLOR","attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","attribute vec3 morphTarget0;","attribute vec3 morphTarget1;","attribute vec3 morphTarget2;","attribute vec3 morphTarget3;","#ifdef USE_MORPHNORMALS","attribute vec3 morphNormal0;","attribute vec3 morphNormal1;","attribute vec3 morphNormal2;","attribute vec3 morphNormal3;","#else","attribute vec3 morphTarget4;","attribute vec3 morphTarget5;","attribute vec3 morphTarget6;","attribute vec3 morphTarget7;","#endif","#endif","#ifdef USE_SKINNING","attribute vec4 skinIndex;","attribute vec4 skinWeight;","#endif",""].join("\n"),x=["precision "+w+" float;","precision "+w+" int;",a.bumpMap||a.normalMap?"#extension GL_OES_standard_derivatives : enable":"",g,"#define MAX_DIR_LIGHTS "+a.maxDirLights,"#define MAX_POINT_LIGHTS "+a.maxPointLights,"#define MAX_SPOT_LIGHTS "+a.maxSpotLights,"#define MAX_HEMI_LIGHTS "+a.maxHemiLights,"#define MAX_SHADOWS "+a.maxShadows,a.alphaTest?"#define ALPHATEST "+a.alphaTest:"",z.gammaInput?"#define GAMMA_INPUT":"",z.gammaOutput?"#define GAMMA_OUTPUT":"",z.physicallyBasedShading?"#define PHYSICALLY_BASED_SHADING":"",a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.lightMap?"#define USE_LIGHTMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.vertexColors?"#define USE_COLOR":"",a.metal?"#define METAL":"",a.perPixel?"#define PHONG_PER_PIXEL":"",a.wrapAround?"#define WRAP_AROUND":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+m:"",a.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",a.shadowMapCascade?"#define SHADOWMAP_CASCADE":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",""].join("\n"),R=Ze("vertex",_+i),b=Ze("fragment",x+t);Ne.attachShader(u,R),Ne.attachShader(u,b),s&&Ne.bindAttribLocation(u,0,s);Ne.linkProgram(u),Ne.getProgramParameter(u,Ne.LINK_STATUS)||(console.error("Could not initialise shader\nVALIDATE_STATUS: "+Ne.getProgramParameter(u,Ne.VALIDATE_STATUS)+", gl error ["+Ne.getError()+"]"),console.error("Program Info Log: "+Ne.getProgramInfoLog(u)));Ne.deleteShader(b),Ne.deleteShader(R),u.uniforms={},u.attributes={},E=["viewMatrix","modelViewMatrix","projectionMatrix","normalMatrix","modelMatrix","cameraPosition","morphTargetInfluences"],a.useVertexTexture?(E.push("boneTexture"),E.push("boneTextureWidth"),E.push("boneTextureHeight")):E.push("boneGlobalMatrices");for(v in r)E.push(v);for(function(e,t){var i,r,n;for(i=0,r=t.length;i<r;i++)n=t[i],e.uniforms[n]=Ne.getUniformLocation(e,n)}(u,E),E=["position","normal","uv","uv2","tangent","color","skinIndex","skinWeight","lineDistance"],T=0;T<a.maxMorphTargets;T++)E.push("morphTarget"+T);for(T=0;T<a.maxMorphNormals;T++)E.push("morphNormal"+T);for(y in n)E.push(y);return function(e,t){var i,r,n;for(i=0,r=t.length;i<r;i++)n=t[i],e.attributes[n]=Ne.getAttribLocation(e,n)}(u,E),u.id=S++,H.push({program:u,code:f,usedTimes:1}),z.info.memory.programs=H.length,u}(c,e.fragmentShader,e.vertexShader,e.uniforms,e.attributes,e.defines,a,e.index0AttributeName);var p=e.program.attributes;if(e.morphTargets){var d="morphTarget";for(o=e.numSupportedMorphTargets=0;o<this.maxMorphTargets;o++)0<=p[d+o]&&e.numSupportedMorphTargets++}if(e.morphNormals){d="morphNormal";for(o=e.numSupportedMorphNormals=0;o<this.maxMorphNormals;o++)0<=p[d+o]&&e.numSupportedMorphNormals++}for(n in e.uniformsList=[],e.uniforms)e.uniformsList.push([e.uniforms[n],n])},this.setFaceCulling=function(e,t){e===THREE.CullFaceNone?Ne.disable(Ne.CULL_FACE):(t===THREE.FrontFaceDirectionCW?Ne.frontFace(Ne.CW):Ne.frontFace(Ne.CCW),e===THREE.CullFaceBack?Ne.cullFace(Ne.BACK):e===THREE.CullFaceFront?Ne.cullFace(Ne.FRONT):Ne.cullFace(Ne.FRONT_AND_BACK),Ne.enable(Ne.CULL_FACE))},this.setMaterialFaces=function(e){var t=e.side===THREE.DoubleSide,i=e.side===THREE.BackSide;p!==t&&(t?Ne.disable(Ne.CULL_FACE):Ne.enable(Ne.CULL_FACE),p=t),d!==i&&(i?Ne.frontFace(Ne.CW):Ne.frontFace(Ne.CCW),d=i)},this.setDepthTest=function(e){C!==e&&(e?Ne.enable(Ne.DEPTH_TEST):Ne.disable(Ne.DEPTH_TEST),C=e)},this.setDepthWrite=function(e){A!==e&&(Ne.depthMask(e),A=e)},this.setBlending=function(e,t,i,r){e!==m&&(e===THREE.NoBlending?Ne.disable(Ne.BLEND):e===THREE.AdditiveBlending?(Ne.enable(Ne.BLEND),Ne.blendEquation(Ne.FUNC_ADD),Ne.blendFunc(Ne.SRC_ALPHA,Ne.ONE)):e===THREE.SubtractiveBlending?(Ne.enable(Ne.BLEND),Ne.blendEquation(Ne.FUNC_ADD),Ne.blendFunc(Ne.ZERO,Ne.ONE_MINUS_SRC_COLOR)):e===THREE.MultiplyBlending?(Ne.enable(Ne.BLEND),Ne.blendEquation(Ne.FUNC_ADD),Ne.blendFunc(Ne.ZERO,Ne.SRC_COLOR)):e===THREE.CustomBlending?Ne.enable(Ne.BLEND):(Ne.enable(Ne.BLEND),Ne.blendEquationSeparate(Ne.FUNC_ADD,Ne.FUNC_ADD),Ne.blendFuncSeparate(Ne.SRC_ALPHA,Ne.ONE_MINUS_SRC_ALPHA,Ne.ONE,Ne.ONE_MINUS_SRC_ALPHA)),m=e),e===THREE.CustomBlending?(t!==E&&(Ne.blendEquation(at(t)),E=t),i===v&&r===y||(Ne.blendFunc(at(i),at(r)),v=i,y=r)):y=v=E=null},this.setTexture=function(e,t){if(e.needsUpdate){e.__webglInit||(e.__webglInit=!0,e.addEventListener("dispose",ce),e.__webglTexture=Ne.createTexture(),z.info.memory.textures++),Ne.activeTexture(Ne.TEXTURE0+t),Ne.bindTexture(Ne.TEXTURE_2D,e.__webglTexture),Ne.pixelStorei(Ne.UNPACK_FLIP_Y_WEBGL,e.flipY),Ne.pixelStorei(Ne.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),Ne.pixelStorei(Ne.UNPACK_ALIGNMENT,e.unpackAlignment);var i=e.image,r=$e(i.width)&&$e(i.height),n=at(e.format),o=at(e.type);Je(Ne.TEXTURE_2D,e,r);var a,s=e.mipmaps;if(e instanceof THREE.DataTexture)if(0<s.length&&r){for(var l=0,h=s.length;l<h;l++)a=s[l],Ne.texImage2D(Ne.TEXTURE_2D,l,n,a.width,a.height,0,n,o,a.data);e.generateMipmaps=!1}else Ne.texImage2D(Ne.TEXTURE_2D,0,n,i.width,i.height,0,n,o,i.data);else if(e instanceof THREE.CompressedTexture)for(l=0,h=s.length;l<h;l++)a=s[l],e.format!==THREE.RGBAFormat?Ne.compressedTexImage2D(Ne.TEXTURE_2D,l,n,a.width,a.height,0,a.data):Ne.texImage2D(Ne.TEXTURE_2D,l,n,a.width,a.height,0,n,o,a.data);else if(0<s.length&&r){for(l=0,h=s.length;l<h;l++)a=s[l],Ne.texImage2D(Ne.TEXTURE_2D,l,n,n,o,a);e.generateMipmaps=!1}else Ne.texImage2D(Ne.TEXTURE_2D,0,n,n,o,e.image);e.generateMipmaps&&r&&Ne.generateMipmap(Ne.TEXTURE_2D),e.needsUpdate=!1,e.onUpdate&&e.onUpdate()}else Ne.activeTexture(Ne.TEXTURE0+t),Ne.bindTexture(Ne.TEXTURE_2D,e.__webglTexture)},this.setRenderTarget=function(e){var t,i,r,n,o,a=e instanceof THREE.WebGLRenderTargetCube;if(e&&!e.__webglFramebuffer){void 0===e.depthBuffer&&(e.depthBuffer=!0),void 0===e.stencilBuffer&&(e.stencilBuffer=!0),e.addEventListener("dispose",ue),e.__webglTexture=Ne.createTexture(),z.info.memory.textures++;var s=$e(e.width)&&$e(e.height),l=at(e.format),h=at(e.type);if(a){e.__webglFramebuffer=[],e.__webglRenderbuffer=[],Ne.bindTexture(Ne.TEXTURE_CUBE_MAP,e.__webglTexture),Je(Ne.TEXTURE_CUBE_MAP,e,s);for(var c=0;c<6;c++)e.__webglFramebuffer[c]=Ne.createFramebuffer(),e.__webglRenderbuffer[c]=Ne.createRenderbuffer(),Ne.texImage2D(Ne.TEXTURE_CUBE_MAP_POSITIVE_X+c,0,l,e.width,e.height,0,l,h,null),rt(e.__webglFramebuffer[c],e,Ne.TEXTURE_CUBE_MAP_POSITIVE_X+c),nt(e.__webglRenderbuffer[c],e);s&&Ne.generateMipmap(Ne.TEXTURE_CUBE_MAP)}else e.__webglFramebuffer=Ne.createFramebuffer(),e.shareDepthFrom?e.__webglRenderbuffer=e.shareDepthFrom.__webglRenderbuffer:e.__webglRenderbuffer=Ne.createRenderbuffer(),Ne.bindTexture(Ne.TEXTURE_2D,e.__webglTexture),Je(Ne.TEXTURE_2D,e,s),Ne.texImage2D(Ne.TEXTURE_2D,0,l,e.width,e.height,0,l,h,null),rt(e.__webglFramebuffer,e,Ne.TEXTURE_2D),e.shareDepthFrom?e.depthBuffer&&!e.stencilBuffer?Ne.framebufferRenderbuffer(Ne.FRAMEBUFFER,Ne.DEPTH_ATTACHMENT,Ne.RENDERBUFFER,e.__webglRenderbuffer):e.depthBuffer&&e.stencilBuffer&&Ne.framebufferRenderbuffer(Ne.FRAMEBUFFER,Ne.DEPTH_STENCIL_ATTACHMENT,Ne.RENDERBUFFER,e.__webglRenderbuffer):nt(e.__webglRenderbuffer,e),s&&Ne.generateMipmap(Ne.TEXTURE_2D);a?Ne.bindTexture(Ne.TEXTURE_CUBE_MAP,null):Ne.bindTexture(Ne.TEXTURE_2D,null),Ne.bindRenderbuffer(Ne.RENDERBUFFER,null),Ne.bindFramebuffer(Ne.FRAMEBUFFER,null)}o=e?(t=a?e.__webglFramebuffer[e.activeCubeFace]:e.__webglFramebuffer,i=e.width,r=e.height,n=0):(t=null,i=V,r=I,n=O,k),t!==f&&(Ne.bindFramebuffer(Ne.FRAMEBUFFER,t),Ne.viewport(n,o,i,r),f=t),N=i,U=r},this.shadowMapPlugin=new THREE.ShadowMapPlugin,this.addPrePlugin(this.shadowMapPlugin),this.addPostPlugin(new THREE.SpritePlugin),this.addPostPlugin(new THREE.LensFlarePlugin)},THREE.WebGLRenderTarget=function(e,t,i){this.width=e,this.height=t,i=i||{},this.wrapS=void 0!==i.wrapS?i.wrapS:THREE.ClampToEdgeWrapping,this.wrapT=void 0!==i.wrapT?i.wrapT:THREE.ClampToEdgeWrapping,this.magFilter=void 0!==i.magFilter?i.magFilter:THREE.LinearFilter,this.minFilter=void 0!==i.minFilter?i.minFilter:THREE.LinearMipMapLinearFilter,this.anisotropy=void 0!==i.anisotropy?i.anisotropy:1,this.offset=new THREE.Vector2(0,0),this.repeat=new THREE.Vector2(1,1),this.format=void 0!==i.format?i.format:THREE.RGBAFormat,this.type=void 0!==i.type?i.type:THREE.UnsignedByteType,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0===i.stencilBuffer||i.stencilBuffer,this.generateMipmaps=!0,this.shareDepthFrom=null},THREE.WebGLRenderTarget.prototype={constructor:THREE.WebGLRenderTarget,clone:function(){var e=new THREE.WebGLRenderTarget(this.width,this.height);return e.wrapS=this.wrapS,e.wrapT=this.wrapT,e.magFilter=this.magFilter,e.minFilter=this.minFilter,e.anisotropy=this.anisotropy,e.offset.copy(this.offset),e.repeat.copy(this.repeat),e.format=this.format,e.type=this.type,e.depthBuffer=this.depthBuffer,e.stencilBuffer=this.stencilBuffer,e.generateMipmaps=this.generateMipmaps,e.shareDepthFrom=this.shareDepthFrom,e},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.WebGLRenderTarget.prototype),THREE.WebGLRenderTargetCube=function(e,t,i){THREE.WebGLRenderTarget.call(this,e,t,i),this.activeCubeFace=0},THREE.WebGLRenderTargetCube.prototype=Object.create(THREE.WebGLRenderTarget.prototype),THREE.RenderableVertex=function(){this.positionWorld=new THREE.Vector3,this.positionScreen=new THREE.Vector4,this.visible=!0},THREE.RenderableVertex.prototype.copy=function(e){this.positionWorld.copy(e.positionWorld),this.positionScreen.copy(e.positionScreen)},THREE.RenderableFace3=function(){this.id=0,this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.v3=new THREE.RenderableVertex,this.centroidModel=new THREE.Vector3,this.normalModel=new THREE.Vector3,this.normalModelView=new THREE.Vector3,this.vertexNormalsLength=0,this.vertexNormalsModel=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3],this.vertexNormalsModelView=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3],this.color=null,this.material=null,this.uvs=[[]],this.z=0},THREE.RenderableObject=function(){this.id=0,this.object=null,this.z=0},THREE.RenderableParticle=function(){this.id=0,this.object=null,this.x=0,this.y=0,this.z=0,this.rotation=null,this.scale=new THREE.Vector2,this.material=null},THREE.RenderableLine=function(){this.id=0,this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.vertexColors=[new THREE.Color,new THREE.Color],this.material=null,this.z=0},THREE.GeometryUtils={merge:function(e,t,i){var r,n,o=e.vertices.length,a=(e.faceVertexUvs[0].length,t instanceof THREE.Mesh?t.geometry:t),s=e.vertices,l=a.vertices,h=e.faces,c=a.faces,u=e.faceVertexUvs[0],f=a.faceVertexUvs[0];void 0===i&&(i=0),t instanceof THREE.Mesh&&(t.matrixAutoUpdate&&t.updateMatrix(),r=t.matrix,n=(new THREE.Matrix3).getNormalMatrix(r));for(var p=0,d=l.length;p<d;p++){var m=l[p].clone();r&&m.applyMatrix4(r),s.push(m)}for(p=0,d=c.length;p<d;p++){var g,E,v,y=c[p],T=y.vertexNormals,_=y.vertexColors;(g=new THREE.Face3(y.a+o,y.b+o,y.c+o)).normal.copy(y.normal),n&&g.normal.applyMatrix3(n).normalize();for(var x=0,R=T.length;x<R;x++)E=T[x].clone(),n&&E.applyMatrix3(n).normalize(),g.vertexNormals.push(E);g.color.copy(y.color);for(x=0,R=_.length;x<R;x++)v=_[x],g.vertexColors.push(v.clone());g.materialIndex=y.materialIndex+i,g.centroid.copy(y.centroid),r&&g.centroid.applyMatrix4(r),h.push(g)}for(p=0,d=f.length;p<d;p++){var b=f[p],w=[];for(x=0,R=b.length;x<R;x++)w.push(new THREE.Vector2(b[x].x,b[x].y));u.push(w)}},randomPointInTriangle:function(){var s=new THREE.Vector3;return function(e,t,i){var r=new THREE.Vector3,n=THREE.Math.random16(),o=THREE.Math.random16();1<n+o&&(n=1-n,o=1-o);var a=1-n-o;return r.copy(e),r.multiplyScalar(n),s.copy(t),s.multiplyScalar(o),r.add(s),s.copy(i),s.multiplyScalar(a),r.add(s),r}}(),randomPointInFace:function(e,t,i){var r,n,o;return r=t.vertices[e.a],n=t.vertices[e.b],o=t.vertices[e.c],THREE.GeometryUtils.randomPointInTriangle(r,n,o)},randomPointsInGeometry:function(e,t){var i,r,n,o,a,s=e.faces,l=e.vertices,h=s.length,c=0,u=[];for(r=0;r<h;r++)n=l[(i=s[r]).a],o=l[i.b],a=l[i.c],i._area=THREE.GeometryUtils.triangleArea(n,o,a),c+=i._area,u[r]=c;var f,p,d,m=[],g={};for(r=0;r<t;r++)f=THREE.Math.random16()*c,d=f,p=function e(t,i){if(i<t)return t;var r=t+Math.floor((i-t)/2);return u[r]>d?e(t,r-1):u[r]<d?e(r+1,i):r}(0,u.length-1),m[r]=THREE.GeometryUtils.randomPointInFace(s[p],e,!0),g[p]?g[p]+=1:g[p]=1;return m},triangleArea:function(){var r=new THREE.Vector3,n=new THREE.Vector3;return function(e,t,i){return r.subVectors(t,e),n.subVectors(i,e),r.cross(n),.5*r.length()}}(),center:function(e){e.computeBoundingBox();var t=e.boundingBox,i=new THREE.Vector3;return i.addVectors(t.min,t.max),i.multiplyScalar(-.5),e.applyMatrix((new THREE.Matrix4).makeTranslation(i.x,i.y,i.z)),e.computeBoundingBox(),i},triangulateQuads:function(e){var t,i,r,n,o=[],a=[];for(t=0,i=e.faceVertexUvs.length;t<i;t++)a[t]=[];for(t=0,i=e.faces.length;t<i;t++){var s=e.faces[t];for(o.push(s),r=0,n=e.faceVertexUvs.length;r<n;r++)a[r].push(e.faceVertexUvs[r][t])}e.faces=o,e.faceVertexUvs=a,e.computeCentroids(),e.computeFaceNormals(),e.computeVertexNormals(),e.hasTangents&&e.computeTangents()}},THREE.ImageUtils={crossOrigin:"anonymous",loadTexture:function(e,t,i,r){var n=new THREE.ImageLoader;n.crossOrigin=this.crossOrigin;var o=new THREE.Texture(void 0,t),a=n.load(e,function(){o.needsUpdate=!0,i&&i(o)});return o.image=a,o.sourceFile=e,o},loadCompressedTexture:function(e,t,i,r){var n=new THREE.CompressedTexture;n.mapping=t;var o=new XMLHttpRequest;return o.onload=function(){var e=o.response,t=THREE.ImageUtils.parseDDS(e,!0);n.format=t.format,n.mipmaps=t.mipmaps,n.image.width=t.width,n.image.height=t.height,n.generateMipmaps=!1,n.needsUpdate=!0,i&&i(n)},o.onerror=r,o.open("GET",e,!0),o.responseType="arraybuffer",o.send(null),n},loadTextureCube:function(e,t,i,r){var n=[];n.loadCount=0;var o=new THREE.Texture;o.image=n,void 0!==t&&(o.mapping=t),o.flipY=!1;for(var a=0,s=e.length;a<s;++a){var l=new Image;(n[a]=l).onload=function(){n.loadCount+=1,6===n.loadCount&&(o.needsUpdate=!0,i&&i(o))},l.onerror=r,l.crossOrigin=this.crossOrigin,l.src=e[a]}return o},loadCompressedTextureCube:function(e,t,o,i){var a=[];a.loadCount=0;var s=new THREE.CompressedTexture;s.image=a,void 0!==t&&(s.mapping=t),s.flipY=!1,s.generateMipmaps=!1;var r=function(i,r){return function(){var e=i.response,t=THREE.ImageUtils.parseDDS(e,!0);r.format=t.format,r.mipmaps=t.mipmaps,r.width=t.width,r.height=t.height,a.loadCount+=1,6===a.loadCount&&(s.format=t.format,s.needsUpdate=!0,o&&o(s))}};if(e instanceof Array)for(var n=0,l=e.length;n<l;++n){var h={};a[n]=h,(u=new XMLHttpRequest).onload=r(u,h),u.onerror=i;var c=e[n];u.open("GET",c,!0),u.responseType="arraybuffer",u.send(null)}else{var u;c=e;(u=new XMLHttpRequest).onload=function(){var e=u.response,t=THREE.ImageUtils.parseDDS(e,!0);if(t.isCubemap){for(var i=t.mipmaps.length/t.mipmapCount,r=0;r<i;r++){a[r]={mipmaps:[]};for(var n=0;n<t.mipmapCount;n++)a[r].mipmaps.push(t.mipmaps[r*t.mipmapCount+n]),a[r].format=t.format,a[r].width=t.width,a[r].height=t.height}s.format=t.format,s.needsUpdate=!0,o&&o(s)}},u.onerror=i,u.open("GET",c,!0),u.responseType="arraybuffer",u.send(null)}return s},loadDDSTexture:function(e,t,o,i){var a=[];a.loadCount=0;var s=new THREE.CompressedTexture;s.image=a,void 0!==t&&(s.mapping=t),s.flipY=!1,s.generateMipmaps=!1;var l=new XMLHttpRequest;return l.onload=function(){var e=l.response,t=THREE.ImageUtils.parseDDS(e,!0);if(t.isCubemap)for(var i=t.mipmaps.length/t.mipmapCount,r=0;r<i;r++){a[r]={mipmaps:[]};for(var n=0;n<t.mipmapCount;n++)a[r].mipmaps.push(t.mipmaps[r*t.mipmapCount+n]),a[r].format=t.format,a[r].width=t.width,a[r].height=t.height}else s.image.width=t.width,s.image.height=t.height,s.mipmaps=t.mipmaps;s.format=t.format,s.needsUpdate=!0,o&&o(s)},l.onerror=i,l.open("GET",e,!0),l.responseType="arraybuffer",l.send(null),s},parseDDS:function(e,t){var i={mipmaps:[],width:0,height:0,format:null,mipmapCount:1};function r(e){return e.charCodeAt(0)+(e.charCodeAt(1)<<8)+(e.charCodeAt(2)<<16)+(e.charCodeAt(3)<<24)}function n(e,t,i,r){for(var n=i*r*4,o=new Uint8Array(e,t,n),a=new Uint8Array(n),s=0,l=0,h=0;h<r;h++)for(var c=0;c<i;c++){var u=o[l],f=o[++l],p=o[++l],d=o[++l];l++,a[s]=p,a[++s]=f,a[++s]=u,a[++s]=d,s++}return a}var o,a=r("DXT1"),s=r("DXT3"),l=r("DXT5"),h=new Int32Array(e,0,31);if(542327876!==h[0])return console.error("ImageUtils.parseDDS(): Invalid magic number in DDS header"),i;if(4&!h[20])return console.error("ImageUtils.parseDDS(): Unsupported format, must contain a FourCC code"),i;var c,u=h[21],f=!1;switch(u){case a:o=8,i.format=THREE.RGB_S3TC_DXT1_Format;break;case s:o=16,i.format=THREE.RGBA_S3TC_DXT3_Format;break;case l:o=16,i.format=THREE.RGBA_S3TC_DXT5_Format;break;default:if(!(32==h[22]&&16711680&h[23]&&65280&h[24]&&255&h[25]&&4278190080&h[26]))return console.error("ImageUtils.parseDDS(): Unsupported FourCC code: ",(c=u,String.fromCharCode(255&c,c>>8&255,c>>16&255,c>>24&255))),i;f=!0,o=64,i.format=THREE.RGBAFormat}i.mipmapCount=1,131072&h[2]&&!1!==t&&(i.mipmapCount=Math.max(1,h[7])),i.isCubemap=!!(512&h[28]),i.width=h[4],i.height=h[3];for(var p=h[1]+4,d=i.width,m=i.height,g=i.isCubemap?6:1,E=0;E<g;E++){for(var v=0;v<i.mipmapCount;v++){if(f)var y=(T=n(e,p,d,m)).length;else{y=Math.max(4,d)/4*Math.max(4,m)/4*o;var T=new Uint8Array(e,p,y)}var _={data:T,width:d,height:m};i.mipmaps.push(_),p+=y,d=Math.max(.5*d,1),m=Math.max(.5*m,1)}d=i.width,m=i.height}return i},getNormalMap:function(e,t){var i=function(e,t){return[e[0]-t[0],e[1]-t[1],e[2]-t[2]]};t|=1;var r=e.width,n=e.height,o=document.createElement("canvas");o.width=r,o.height=n;var a=o.getContext("2d");a.drawImage(e,0,0);for(var s,l,h,c,u=a.getImageData(0,0,r,n).data,f=a.createImageData(r,n),p=f.data,d=0;d<r;d++)for(var m=0;m<n;m++){var g=m-1<0?0:m-1,E=n-1<m+1?n-1:m+1,v=d-1<0?0:d-1,y=r-1<d+1?r-1:d+1,T=[],_=[0,0,u[4*(m*r+d)]/255*t];T.push([-1,0,u[4*(m*r+v)]/255*t]),T.push([-1,-1,u[4*(g*r+v)]/255*t]),T.push([0,-1,u[4*(g*r+d)]/255*t]),T.push([1,-1,u[4*(g*r+y)]/255*t]),T.push([1,0,u[4*(m*r+y)]/255*t]),T.push([1,1,u[4*(E*r+y)]/255*t]),T.push([0,1,u[4*(E*r+d)]/255*t]),T.push([-1,1,u[4*(E*r+v)]/255*t]);for(var x=[],R=T.length,b=0;b<R;b++){var w=T[b],H=T[(b+1)%R];w=i(w,_),H=i(H,_),x.push((c=H,s=[(h=w)[1]*c[2]-h[2]*c[1],h[2]*c[0]-h[0]*c[2],h[0]*c[1]-h[1]*c[0]],void 0,l=Math.sqrt(s[0]*s[0]+s[1]*s[1]+s[2]*s[2]),[s[0]/l,s[1]/l,s[2]/l]))}var S=[0,0,0];for(b=0;b<x.length;b++)S[0]+=x[b][0],S[1]+=x[b][1],S[2]+=x[b][2];S[0]/=x.length,S[1]/=x.length,S[2]/=x.length;var M=4*(m*r+d);p[M]=(S[0]+1)/2*255|0,p[M+1]=(S[1]+1)/2*255|0,p[M+2]=255*S[2]|0,p[M+3]=255}return a.putImageData(f,0,0),o},generateDataTexture:function(e,t,i){for(var r=e*t,n=new Uint8Array(3*r),o=Math.floor(255*i.r),a=Math.floor(255*i.g),s=Math.floor(255*i.b),l=0;l<r;l++)n[3*l]=o,n[3*l+1]=a,n[3*l+2]=s;var h=new THREE.DataTexture(n,e,t,THREE.RGBFormat);return h.needsUpdate=!0,h}},THREE.SceneUtils={createMultiMaterialObject:function(e,t){for(var i=new THREE.Object3D,r=0,n=t.length;r<n;r++)i.add(new THREE.Mesh(e,t[r]));return i},detach:function(e,t,i){e.applyMatrix(t.matrixWorld),t.remove(e),i.add(e)},attach:function(e,t,i){var r=new THREE.Matrix4;r.getInverse(i.matrixWorld),e.applyMatrix(r),t.remove(e),i.add(e)}},THREE.FontUtils={faces:{},face:"helvetiker",weight:"normal",style:"normal",size:150,divisions:10,getFace:function(){return this.faces[this.face][this.weight][this.style]},loadFace:function(e){var t=e.familyName.toLowerCase();this.faces[t]=this.faces[t]||{},this.faces[t][e.cssFontWeight]=this.faces[t][e.cssFontWeight]||{},this.faces[t][e.cssFontWeight][e.cssFontStyle]=e;this.faces[t][e.cssFontWeight][e.cssFontStyle]=e;return e},drawText:function(e){var t,i=this.getFace(),r=this.size/i.resolution,n=0,o=String(e).split(""),a=o.length,s=[];for(t=0;t<a;t++){var l=new THREE.Path,h=this.extractGlyphPoints(o[t],i,r,n,l);n+=h.offset,s.push(h.path)}return{paths:s,offset:n/2}},extractGlyphPoints:function(e,t,i,r,n){var o,a,s,l,h,c,u,f,p,d,m,g,E,v,y,T,_,x,R=[],b=t.glyphs[e]||t.glyphs["?"];if(b){if(b.o)for(h=(l=b._cachedOutline||(b._cachedOutline=b.o.split(" "))).length,u=c=i,o=0;o<h;)switch(l[o++]){case"m":f=l[o++]*c+r,p=l[o++]*u,n.moveTo(f,p);break;case"l":f=l[o++]*c+r,p=l[o++]*u,n.lineTo(f,p);break;case"q":if(d=l[o++]*c+r,m=l[o++]*u,v=l[o++]*c+r,y=l[o++]*u,n.quadraticCurveTo(v,y,d,m),x=R[R.length-1])for(g=x.x,E=x.y,a=1,s=this.divisions;a<=s;a++){var w=a/s;THREE.Shape.Utils.b2(w,g,v,d),THREE.Shape.Utils.b2(w,E,y,m)}break;case"b":if(d=l[o++]*c+r,m=l[o++]*u,v=l[o++]*c+r,y=l[o++]*-u,T=l[o++]*c+r,_=l[o++]*-u,n.bezierCurveTo(d,m,v,y,T,_),x=R[R.length-1])for(g=x.x,E=x.y,a=1,s=this.divisions;a<=s;a++)w=a/s,THREE.Shape.Utils.b3(w,g,v,T,d),THREE.Shape.Utils.b3(w,E,y,_,m)}return{offset:b.ha*i,path:n}}}},THREE.FontUtils.generateShapes=function(e,t){var i=void 0!==(t=t||{}).size?t.size:100,r=void 0!==t.curveSegments?t.curveSegments:4,n=void 0!==t.font?t.font:"helvetiker",o=void 0!==t.weight?t.weight:"normal",a=void 0!==t.style?t.style:"normal";THREE.FontUtils.size=i,THREE.FontUtils.divisions=r,THREE.FontUtils.face=n,THREE.FontUtils.weight=o,THREE.FontUtils.style=a;for(var s=THREE.FontUtils.drawText(e).paths,l=[],h=0,c=s.length;h<c;h++)Array.prototype.push.apply(l,s[h].toShapes());return l},function(e){var g=function(e){for(var t=e.length,i=0,r=t-1,n=0;n<t;r=n++)i+=e[r].x*e[n].y-e[n].x*e[r].y;return.5*i},E=function(e,t,i,r,n,o){var a,s,l,h,c,u,f,p,d,m,g,E,v,y,T;if(s=e[o[t]].x,l=e[o[t]].y,h=e[o[i]].x,c=e[o[i]].y,u=e[o[r]].x,(h-s)*((f=e[o[r]].y)-l)-(c-l)*(u-s)<1e-10)return!1;for(m=u-h,g=f-c,E=s-u,v=l-f,y=h-s,T=c-l,a=0;a<n;a++)if(a!==t&&a!==i&&a!==r&&(p=e[o[a]].x,-1e-10<=m*((d=e[o[a]].y)-c)-g*(p-h)&&-1e-10<=E*(d-f)-v*(p-u)&&-1e-10<=y*(d-l)-T*(p-s)))return!1;return!0};e.Triangulate=function(e,t){var i=e.length;if(i<3)return null;var r,n,o,a=[],s=[],l=[];if(0<g(e))for(n=0;n<i;n++)s[n]=n;else for(n=0;n<i;n++)s[n]=i-1-n;var h=i,c=2*h;for(n=h-1;2<h;){if(c--<=0)return console.log("Warning, unable to triangulate polygon!"),t?l:a;if(h<=(r=n)&&(r=0),h<=(n=r+1)&&(n=0),h<=(o=n+1)&&(o=0),E(e,r,n,o,h,s)){var u,f,p,d,m;for(u=s[r],f=s[n],p=s[o],a.push([e[u],e[f],e[p]]),l.push([s[r],s[n],s[o]]),m=(d=n)+1;m<h;d++,m++)s[d]=s[m];c=2*--h}}return t?l:a},e.Triangulate.area=g}(THREE.FontUtils),self._typeface_js={faces:THREE.FontUtils.faces,loadFace:THREE.FontUtils.loadFace},THREE.typeface_js=self._typeface_js,THREE.Curve=function(){},THREE.Curve.prototype.getPoint=function(e){return console.log("Warning, getPoint() not implemented!"),null},THREE.Curve.prototype.getPointAt=function(e){var t=this.getUtoTmapping(e);return this.getPoint(t)},THREE.Curve.prototype.getPoints=function(e){e||(e=5);var t,i=[];for(t=0;t<=e;t++)i.push(this.getPoint(t/e));return i},THREE.Curve.prototype.getSpacedPoints=function(e){e||(e=5);var t,i=[];for(t=0;t<=e;t++)i.push(this.getPointAt(t/e));return i},THREE.Curve.prototype.getLength=function(){var e=this.getLengths();return e[e.length-1]},THREE.Curve.prototype.getLengths=function(e){if(e||(e=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length==e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,i,r=[],n=this.getPoint(0),o=0;for(r.push(0),i=1;i<=e;i++)o+=(t=this.getPoint(i/e)).distanceTo(n),r.push(o),n=t;return this.cacheArcLengths=r},THREE.Curve.prototype.updateArcLengths=function(){this.needsUpdate=!0,this.getLengths()},THREE.Curve.prototype.getUtoTmapping=function(e,t){var i,r=this.getLengths(),n=0,o=r.length;i=t||e*r[o-1];for(var a,s=0,l=o-1;s<=l;)if((a=r[n=Math.floor(s+(l-s)/2)]-i)<0)s=n+1;else{if(!(0<a)){l=n;break}l=n-1}if(r[n=l]==i)return n/(o-1);var h=r[n];return(n+(i-h)/(r[n+1]-h))/(o-1)},THREE.Curve.prototype.getTangent=function(e){var t=e-1e-4,i=e+1e-4;t<0&&(t=0),1<i&&(i=1);var r=this.getPoint(t);return this.getPoint(i).clone().sub(r).normalize()},THREE.Curve.prototype.getTangentAt=function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},THREE.Curve.Utils={tangentQuadraticBezier:function(e,t,i,r){return 2*(1-e)*(i-t)+2*e*(r-i)},tangentCubicBezier:function(e,t,i,r,n){return-3*t*(1-e)*(1-e)+3*i*(1-e)*(1-e)-6*e*i*(1-e)+6*e*r*(1-e)-3*e*e*r+3*e*e*n},tangentSpline:function(e,t,i,r,n){return 6*e*e-6*e+(3*e*e-4*e+1)+(-6*e*e+6*e)+(3*e*e-2*e)},interpolate:function(e,t,i,r,n){var o=.5*(i-e),a=.5*(r-t),s=n*n;return(2*t-2*i+o+a)*(n*s)+(-3*t+3*i-2*o-a)*s+o*n+t}},THREE.Curve.create=function(e,t){return e.prototype=Object.create(THREE.Curve.prototype),e.prototype.getPoint=t,e},THREE.CurvePath=function(){this.curves=[],this.bends=[],this.autoClose=!1},THREE.CurvePath.prototype=Object.create(THREE.Curve.prototype),THREE.CurvePath.prototype.add=function(e){this.curves.push(e)},THREE.CurvePath.prototype.checkConnection=function(){},THREE.CurvePath.prototype.closePath=function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new THREE.LineCurve(t,e))},THREE.CurvePath.prototype.getPoint=function(e){for(var t,i=e*this.getLength(),r=this.getCurveLengths(),n=0;n<r.length;){if(r[n]>=i){var o=1-(r[n]-i)/(t=this.curves[n]).getLength();return t.getPointAt(o)}n++}return null},THREE.CurvePath.prototype.getLength=function(){var e=this.getCurveLengths();return e[e.length-1]},THREE.CurvePath.prototype.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length==this.curves.length)return this.cacheLengths;var e,t=[],i=0,r=this.curves.length;for(e=0;e<r;e++)i+=this.curves[e].getLength(),t.push(i);return this.cacheLengths=t},THREE.CurvePath.prototype.getBoundingBox=function(){var e,t,i,r,n,o,a,s,l,h,c=this.getPoints();e=t=Number.NEGATIVE_INFINITY,r=n=Number.POSITIVE_INFINITY;var u=c[0]instanceof THREE.Vector3;for(h=u?new THREE.Vector3:new THREE.Vector2,s=0,l=c.length;s<l;s++)(a=c[s]).x>e?e=a.x:a.x<r&&(r=a.x),a.y>t?t=a.y:a.y<n&&(n=a.y),u&&(a.z>i?i=a.z:a.z<o&&(o=a.z)),h.add(a);var f={minX:r,minY:n,maxX:e,maxY:t,centroid:h.divideScalar(l)};return u&&(f.maxZ=i,f.minZ=o),f},THREE.CurvePath.prototype.createPointsGeometry=function(e){var t=this.getPoints(e,!0);return this.createGeometry(t)},THREE.CurvePath.prototype.createSpacedPointsGeometry=function(e){var t=this.getSpacedPoints(e,!0);return this.createGeometry(t)},THREE.CurvePath.prototype.createGeometry=function(e){for(var t=new THREE.Geometry,i=0;i<e.length;i++)t.vertices.push(new THREE.Vector3(e[i].x,e[i].y,e[i].z||0));return t},THREE.CurvePath.prototype.addWrapPath=function(e){this.bends.push(e)},THREE.CurvePath.prototype.getTransformedPoints=function(e,t){var i,r,n=this.getPoints(e);for(t||(t=this.bends),i=0,r=t.length;i<r;i++)n=this.getWrapPoints(n,t[i]);return n},THREE.CurvePath.prototype.getTransformedSpacedPoints=function(e,t){var i,r,n=this.getSpacedPoints(e);for(t||(t=this.bends),i=0,r=t.length;i<r;i++)n=this.getWrapPoints(n,t[i]);return n},THREE.CurvePath.prototype.getWrapPoints=function(e,t){var i,r,n,o,a,s,l=this.getBoundingBox();for(i=0,r=e.length;i<r;i++){o=(n=e[i]).x,a=n.y,s=o/l.maxX,s=t.getUtoTmapping(s,o);var h=t.getPoint(s),c=t.getNormalVector(s).multiplyScalar(a);n.x=h.x+c.x,n.y=h.y+c.y}return e},THREE.Gyroscope=function(){THREE.Object3D.call(this)},THREE.Gyroscope.prototype=Object.create(THREE.Object3D.prototype),THREE.Gyroscope.prototype.updateMatrixWorld=function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent?(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorld.decompose(this.translationWorld,this.quaternionWorld,this.scaleWorld),this.matrix.decompose(this.translationObject,this.quaternionObject,this.scaleObject),this.matrixWorld.compose(this.translationWorld,this.quaternionObject,this.scaleWorld)):this.matrixWorld.copy(this.matrix),e=!(this.matrixWorldNeedsUpdate=!1));for(var t=0,i=this.children.length;t<i;t++)this.children[t].updateMatrixWorld(e)},THREE.Gyroscope.prototype.translationWorld=new THREE.Vector3,THREE.Gyroscope.prototype.translationObject=new THREE.Vector3,THREE.Gyroscope.prototype.quaternionWorld=new THREE.Quaternion,THREE.Gyroscope.prototype.quaternionObject=new THREE.Quaternion,THREE.Gyroscope.prototype.scaleWorld=new THREE.Vector3,THREE.Gyroscope.prototype.scaleObject=new THREE.Vector3,THREE.Path=function(e){THREE.CurvePath.call(this),this.actions=[],e&&this.fromPoints(e)},THREE.Path.prototype=Object.create(THREE.CurvePath.prototype),THREE.PathActions={MOVE_TO:"moveTo",LINE_TO:"lineTo",QUADRATIC_CURVE_TO:"quadraticCurveTo",BEZIER_CURVE_TO:"bezierCurveTo",CSPLINE_THRU:"splineThru",ARC:"arc",ELLIPSE:"ellipse"},THREE.Path.prototype.fromPoints=function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y)},THREE.Path.prototype.moveTo=function(e,t){var i=Array.prototype.slice.call(arguments);this.actions.push({action:THREE.PathActions.MOVE_TO,args:i})},THREE.Path.prototype.lineTo=function(e,t){var i=Array.prototype.slice.call(arguments),r=this.actions[this.actions.length-1].args,n=r[r.length-2],o=r[r.length-1],a=new THREE.LineCurve(new THREE.Vector2(n,o),new THREE.Vector2(e,t));this.curves.push(a),this.actions.push({action:THREE.PathActions.LINE_TO,args:i})},THREE.Path.prototype.quadraticCurveTo=function(e,t,i,r){var n=Array.prototype.slice.call(arguments),o=this.actions[this.actions.length-1].args,a=o[o.length-2],s=o[o.length-1],l=new THREE.QuadraticBezierCurve(new THREE.Vector2(a,s),new THREE.Vector2(e,t),new THREE.Vector2(i,r));this.curves.push(l),this.actions.push({action:THREE.PathActions.QUADRATIC_CURVE_TO,args:n})},THREE.Path.prototype.bezierCurveTo=function(e,t,i,r,n,o){var a=Array.prototype.slice.call(arguments),s=this.actions[this.actions.length-1].args,l=s[s.length-2],h=s[s.length-1],c=new THREE.CubicBezierCurve(new THREE.Vector2(l,h),new THREE.Vector2(e,t),new THREE.Vector2(i,r),new THREE.Vector2(n,o));this.curves.push(c),this.actions.push({action:THREE.PathActions.BEZIER_CURVE_TO,args:a})},THREE.Path.prototype.splineThru=function(e){var t=Array.prototype.slice.call(arguments),i=this.actions[this.actions.length-1].args,r=i[i.length-2],n=i[i.length-1],o=[new THREE.Vector2(r,n)];Array.prototype.push.apply(o,e);var a=new THREE.SplineCurve(o);this.curves.push(a),this.actions.push({action:THREE.PathActions.CSPLINE_THRU,args:t})},THREE.Path.prototype.arc=function(e,t,i,r,n,o){var a=this.actions[this.actions.length-1].args,s=a[a.length-2],l=a[a.length-1];this.absarc(e+s,t+l,i,r,n,o)},THREE.Path.prototype.absarc=function(e,t,i,r,n,o){this.absellipse(e,t,i,i,r,n,o)},THREE.Path.prototype.ellipse=function(e,t,i,r,n,o,a){var s=this.actions[this.actions.length-1].args,l=s[s.length-2],h=s[s.length-1];this.absellipse(e+l,t+h,i,r,n,o,a)},THREE.Path.prototype.absellipse=function(e,t,i,r,n,o,a){var s=Array.prototype.slice.call(arguments),l=new THREE.EllipseCurve(e,t,i,r,n,o,a);this.curves.push(l);var h=l.getPoint(1);s.push(h.x),s.push(h.y),this.actions.push({action:THREE.PathActions.ELLIPSE,args:s})},THREE.Path.prototype.getSpacedPoints=function(e,t){e||(e=40);for(var i=[],r=0;r<e;r++)i.push(this.getPoint(r/e));return i},THREE.Path.prototype.getPoints=function(e,t){if(this.useSpacedPoints)return console.log("tata"),this.getSpacedPoints(e,t);e=e||12;var i,r,n,o,a,s,l,h,c,u,f,p,d,m,g,E,v,y,T=[];for(i=0,r=this.actions.length;i<r;i++)switch(o=(n=this.actions[i]).action,a=n.args,o){case THREE.PathActions.MOVE_TO:case THREE.PathActions.LINE_TO:T.push(new THREE.Vector2(a[0],a[1]));break;case THREE.PathActions.QUADRATIC_CURVE_TO:for(s=a[2],l=a[3],u=a[0],f=a[1],d=0<T.length?(p=(m=T[T.length-1]).x,m.y):(p=(m=this.actions[i-1].args)[m.length-2],m[m.length-1]),g=1;g<=e;g++)E=g/e,v=THREE.Shape.Utils.b2(E,p,u,s),y=THREE.Shape.Utils.b2(E,d,f,l),T.push(new THREE.Vector2(v,y));break;case THREE.PathActions.BEZIER_CURVE_TO:for(s=a[4],l=a[5],u=a[0],f=a[1],h=a[2],c=a[3],d=0<T.length?(p=(m=T[T.length-1]).x,m.y):(p=(m=this.actions[i-1].args)[m.length-2],m[m.length-1]),g=1;g<=e;g++)E=g/e,v=THREE.Shape.Utils.b3(E,p,u,h,s),y=THREE.Shape.Utils.b3(E,d,f,c,l),T.push(new THREE.Vector2(v,y));break;case THREE.PathActions.CSPLINE_THRU:m=this.actions[i-1].args;var _=[new THREE.Vector2(m[m.length-2],m[m.length-1])],x=e*a[0].length;_=_.concat(a[0]);var R=new THREE.SplineCurve(_);for(g=1;g<=x;g++)T.push(R.getPointAt(g/x));break;case THREE.PathActions.ARC:var b=a[0],w=a[1],H=a[2],S=a[3],M=a[4],C=!!a[5],A=M-S,P=2*e;for(g=1;g<=P;g++)E=g/P,C||(E=1-E),D=S+E*A,v=b+H*Math.cos(D),y=w+H*Math.sin(D),T.push(new THREE.Vector2(v,y));break;case THREE.PathActions.ELLIPSE:b=a[0],w=a[1];var D,L=a[2],F=a[3];S=a[4],M=a[5],C=!!a[6],A=M-S,P=2*e;for(g=1;g<=P;g++)E=g/P,C||(E=1-E),D=S+E*A,v=b+L*Math.cos(D),y=w+F*Math.sin(D),T.push(new THREE.Vector2(v,y))}var O=T[T.length-1];return Math.abs(O.x-T[0].x)<1e-10&&Math.abs(O.y-T[0].y)<1e-10&&T.splice(T.length-1,1),t&&T.push(T[0]),T},THREE.Path.prototype.toShapes=function(e){var t,i,r,n,o,a=[],s=new THREE.Path;for(t=0,i=this.actions.length;t<i;t++)o=(r=this.actions[t]).args,(n=r.action)==THREE.PathActions.MOVE_TO&&0!=s.actions.length&&(a.push(s),s=new THREE.Path),s[n].apply(s,o);if(0!=s.actions.length&&a.push(s),0==a.length)return[];var l,h,c,u=[];if(1==a.length)return h=a[0],(c=new THREE.Shape).actions=h.actions,c.curves=h.curves,u.push(c),u;var f=!THREE.Shape.Utils.isClockWise(a[0].getPoints());if(f=e?!f:f)for(c=new THREE.Shape,t=0,i=a.length;t<i;t++)h=a[t],l=THREE.Shape.Utils.isClockWise(h.getPoints()),(l=e?!l:l)?(c.actions=h.actions,c.curves=h.curves,u.push(c),c=new THREE.Shape):c.holes.push(h);else{for(c=void 0,t=0,i=a.length;t<i;t++)h=a[t],l=THREE.Shape.Utils.isClockWise(h.getPoints()),(l=e?!l:l)?(c&&u.push(c),(c=new THREE.Shape).actions=h.actions,c.curves=h.curves):c.holes.push(h);u.push(c)}return u},THREE.Shape=function(){THREE.Path.apply(this,arguments),this.holes=[]},THREE.Shape.prototype=Object.create(THREE.Path.prototype),THREE.Shape.prototype.extrude=function(e){return new THREE.ExtrudeGeometry(this,e)},THREE.Shape.prototype.makeGeometry=function(e){return new THREE.ShapeGeometry(this,e)},THREE.Shape.prototype.getPointsHoles=function(e){var t,i=this.holes.length,r=[];for(t=0;t<i;t++)r[t]=this.holes[t].getTransformedPoints(e,this.bends);return r},THREE.Shape.prototype.getSpacedPointsHoles=function(e){var t,i=this.holes.length,r=[];for(t=0;t<i;t++)r[t]=this.holes[t].getTransformedSpacedPoints(e,this.bends);return r},THREE.Shape.prototype.extractAllPoints=function(e){return{shape:this.getTransformedPoints(e),holes:this.getPointsHoles(e)}},THREE.Shape.prototype.extractPoints=function(e){return this.useSpacedPoints?this.extractAllSpacedPoints(e):this.extractAllPoints(e)},THREE.Shape.prototype.extractAllSpacedPoints=function(e){return{shape:this.getTransformedSpacedPoints(e),holes:this.getSpacedPointsHoles(e)}},THREE.Shape.Utils={removeHoles:function(e,t){var i,r,n,o,a,s,l,h,c,u,f,p,d,m,g,E,v=e.concat(),y=v.concat(),T=[];for(a=0;a<t.length;a++){for(l=t[a],Array.prototype.push.apply(y,l),h=Number.POSITIVE_INFINITY,s=0;s<l.length;s++){f=l[s];var _=[];for(u=0;u<v.length;u++)p=v[u],c=f.distanceToSquared(p),_.push(c),c<h&&(h=c,n=s,o=u)}i=0<=o-1?o-1:v.length-1,r=0<=n-1?n-1:l.length-1;var x=[l[n],v[o],v[i]],R=THREE.FontUtils.Triangulate.area(x),b=[l[n],l[r],v[o]],w=THREE.FontUtils.Triangulate.area(b),H=o,S=n;n+=-1,(o+=1)<0&&(o+=v.length),o%=v.length,n<0&&(n+=l.length),n%=l.length,i=0<=o-1?o-1:v.length-1,r=0<=n-1?n-1:l.length-1,x=[l[n],v[o],v[i]];var M=THREE.FontUtils.Triangulate.area(x);b=[l[n],l[r],v[o]],M+THREE.FontUtils.Triangulate.area(b)<R+w&&(n=S,(o=H)<0&&(o+=v.length),o%=v.length,n<0&&(n+=l.length),n%=l.length,i=0<=o-1?o-1:v.length-1,r=0<=n-1?n-1:l.length-1),d=v.slice(0,o),m=v.slice(o),g=l.slice(n),E=l.slice(0,n);var C=[l[n],v[o],v[i]],A=[l[n],l[r],v[o]];T.push(C),T.push(A),v=d.concat(g).concat(E).concat(m)}return{shape:v,isolatedPts:T,allpoints:y}},triangulateShape:function(e,t){var i,r,n,o,a,s,l=THREE.Shape.Utils.removeHoles(e,t),h=l.shape,c=l.allpoints,u=l.isolatedPts,f=THREE.FontUtils.Triangulate(h,!1),p={};for(i=0,r=c.length;i<r;i++)void 0!==p[a=c[i].x+":"+c[i].y]&&console.log("Duplicate point",a),p[a]=i;for(i=0,r=f.length;i<r;i++)for(o=f[i],n=0;n<3;n++)void 0!==(s=p[a=o[n].x+":"+o[n].y])&&(o[n]=s);for(i=0,r=u.length;i<r;i++)for(o=u[i],n=0;n<3;n++)void 0!==(s=p[a=o[n].x+":"+o[n].y])&&(o[n]=s);return f.concat(u)},isClockWise:function(e){return THREE.FontUtils.Triangulate.area(e)<0},b2p0:function(e,t){var i=1-e;return i*i*t},b2p1:function(e,t){return 2*(1-e)*e*t},b2p2:function(e,t){return e*e*t},b2:function(e,t,i,r){return this.b2p0(e,t)+this.b2p1(e,i)+this.b2p2(e,r)},b3p0:function(e,t){var i=1-e;return i*i*i*t},b3p1:function(e,t){var i=1-e;return 3*i*i*e*t},b3p2:function(e,t){return 3*(1-e)*e*e*t},b3p3:function(e,t){return e*e*e*t},b3:function(e,t,i,r,n){return this.b3p0(e,t)+this.b3p1(e,i)+this.b3p2(e,r)+this.b3p3(e,n)}},THREE.LineCurve=function(e,t){this.v1=e,this.v2=t},THREE.LineCurve.prototype=Object.create(THREE.Curve.prototype),THREE.LineCurve.prototype.getPoint=function(e){var t=this.v2.clone().sub(this.v1);return t.multiplyScalar(e).add(this.v1),t},THREE.LineCurve.prototype.getPointAt=function(e){return this.getPoint(e)},THREE.LineCurve.prototype.getTangent=function(e){return this.v2.clone().sub(this.v1).normalize()},THREE.QuadraticBezierCurve=function(e,t,i){this.v0=e,this.v1=t,this.v2=i},THREE.QuadraticBezierCurve.prototype=Object.create(THREE.Curve.prototype),THREE.QuadraticBezierCurve.prototype.getPoint=function(e){var t,i;return t=THREE.Shape.Utils.b2(e,this.v0.x,this.v1.x,this.v2.x),i=THREE.Shape.Utils.b2(e,this.v0.y,this.v1.y,this.v2.y),new THREE.Vector2(t,i)},THREE.QuadraticBezierCurve.prototype.getTangent=function(e){var t,i;t=THREE.Curve.Utils.tangentQuadraticBezier(e,this.v0.x,this.v1.x,this.v2.x),i=THREE.Curve.Utils.tangentQuadraticBezier(e,this.v0.y,this.v1.y,this.v2.y);var r=new THREE.Vector2(t,i);return r.normalize(),r},THREE.CubicBezierCurve=function(e,t,i,r){this.v0=e,this.v1=t,this.v2=i,this.v3=r},THREE.CubicBezierCurve.prototype=Object.create(THREE.Curve.prototype),THREE.CubicBezierCurve.prototype.getPoint=function(e){var t,i;return t=THREE.Shape.Utils.b3(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),i=THREE.Shape.Utils.b3(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y),new THREE.Vector2(t,i)},THREE.CubicBezierCurve.prototype.getTangent=function(e){var t,i;t=THREE.Curve.Utils.tangentCubicBezier(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),i=THREE.Curve.Utils.tangentCubicBezier(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y);var r=new THREE.Vector2(t,i);return r.normalize(),r},THREE.SplineCurve=function(e){this.points=null==e?[]:e},THREE.SplineCurve.prototype=Object.create(THREE.Curve.prototype),THREE.SplineCurve.prototype.getPoint=function(e){var t,i,r,n=new THREE.Vector2,o=[],a=this.points;return r=(t=(a.length-1)*e)-(i=Math.floor(t)),o[0]=0==i?i:i-1,o[1]=i,o[2]=i>a.length-2?a.length-1:i+1,o[3]=i>a.length-3?a.length-1:i+2,n.x=THREE.Curve.Utils.interpolate(a[o[0]].x,a[o[1]].x,a[o[2]].x,a[o[3]].x,r),n.y=THREE.Curve.Utils.interpolate(a[o[0]].y,a[o[1]].y,a[o[2]].y,a[o[3]].y,r),n},THREE.EllipseCurve=function(e,t,i,r,n,o,a){this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=n,this.aEndAngle=o,this.aClockwise=a},THREE.EllipseCurve.prototype=Object.create(THREE.Curve.prototype),THREE.EllipseCurve.prototype.getPoint=function(e){var t,i=this.aEndAngle-this.aStartAngle;i<0&&(i+=2*Math.PI),i>2*Math.PI&&(i-=2*Math.PI),t=!0===this.aClockwise?this.aEndAngle+(1-e)*(2*Math.PI-i):this.aStartAngle+e*i;var r=this.aX+this.xRadius*Math.cos(t),n=this.aY+this.yRadius*Math.sin(t);return new THREE.Vector2(r,n)},THREE.ArcCurve=function(e,t,i,r,n,o){THREE.EllipseCurve.call(this,e,t,i,i,r,n,o)},THREE.ArcCurve.prototype=Object.create(THREE.EllipseCurve.prototype),THREE.LineCurve3=THREE.Curve.create(function(e,t){this.v1=e,this.v2=t},function(e){var t=new THREE.Vector3;return t.subVectors(this.v2,this.v1),t.multiplyScalar(e),t.add(this.v1),t}),THREE.QuadraticBezierCurve3=THREE.Curve.create(function(e,t,i){this.v0=e,this.v1=t,this.v2=i},function(e){var t,i,r;return t=THREE.Shape.Utils.b2(e,this.v0.x,this.v1.x,this.v2.x),i=THREE.Shape.Utils.b2(e,this.v0.y,this.v1.y,this.v2.y),r=THREE.Shape.Utils.b2(e,this.v0.z,this.v1.z,this.v2.z),new THREE.Vector3(t,i,r)}),THREE.CubicBezierCurve3=THREE.Curve.create(function(e,t,i,r){this.v0=e,this.v1=t,this.v2=i,this.v3=r},function(e){var t,i,r;return t=THREE.Shape.Utils.b3(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),i=THREE.Shape.Utils.b3(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y),r=THREE.Shape.Utils.b3(e,this.v0.z,this.v1.z,this.v2.z,this.v3.z),new THREE.Vector3(t,i,r)}),THREE.SplineCurve3=THREE.Curve.create(function(e){this.points=null==e?[]:e},function(e){var t,i,r,n=new THREE.Vector3,o=[],a=this.points;r=(t=(a.length-1)*e)-(i=Math.floor(t)),o[0]=0==i?i:i-1,o[1]=i,o[2]=i>a.length-2?a.length-1:i+1,o[3]=i>a.length-3?a.length-1:i+2;var s=a[o[0]],l=a[o[1]],h=a[o[2]],c=a[o[3]];return n.x=THREE.Curve.Utils.interpolate(s.x,l.x,h.x,c.x,r),n.y=THREE.Curve.Utils.interpolate(s.y,l.y,h.y,c.y,r),n.z=THREE.Curve.Utils.interpolate(s.z,l.z,h.z,c.z,r),n}),THREE.ClosedSplineCurve3=THREE.Curve.create(function(e){this.points=null==e?[]:e},function(e){var t,i,r,n=new THREE.Vector3,o=[],a=this.points;return r=(t=(a.length-0)*e)-(i=Math.floor(t)),i+=0<i?0:(Math.floor(Math.abs(i)/a.length)+1)*a.length,o[0]=(i-1)%a.length,o[1]=i%a.length,o[2]=(i+1)%a.length,o[3]=(i+2)%a.length,n.x=THREE.Curve.Utils.interpolate(a[o[0]].x,a[o[1]].x,a[o[2]].x,a[o[3]].x,r),n.y=THREE.Curve.Utils.interpolate(a[o[0]].y,a[o[1]].y,a[o[2]].y,a[o[3]].y,r),n.z=THREE.Curve.Utils.interpolate(a[o[0]].z,a[o[1]].z,a[o[2]].z,a[o[3]].z,r),n}),THREE.AnimationHandler=function(){var i=[],t={},e={update:function(e){for(var t=0;t<i.length;t++)i[t].update(e)},addToUpdate:function(e){-1===i.indexOf(e)&&i.push(e)},removeFromUpdate:function(e){var t=i.indexOf(e);-1!==t&&i.splice(t,1)},add:function(e){void 0!==t[e.name]&&console.log("THREE.AnimationHandler.add: Warning! "+e.name+" already exists in library. Overwriting."),t[e.name]=e,n(e)},get:function(e){if("string"==typeof e)return t[e]?t[e]:(console.log("THREE.AnimationHandler.get: Couldn't find animation "+e),null)},parse:function(e){var t=[];if(e instanceof THREE.SkinnedMesh)for(var i=0;i<e.bones.length;i++)t.push(e.bones[i]);else r(e,t);return t}},r=function(e,t){t.push(e);for(var i=0;i<e.children.length;i++)r(e.children[i],t)},n=function(e){if(!0!==e.initialized){for(var t=0;t<e.hierarchy.length;t++){for(var i=0;i<e.hierarchy[t].keys.length;i++)if(e.hierarchy[t].keys[i].time<0&&(e.hierarchy[t].keys[i].time=0),void 0!==e.hierarchy[t].keys[i].rot&&!(e.hierarchy[t].keys[i].rot instanceof THREE.Quaternion)){var r=e.hierarchy[t].keys[i].rot;e.hierarchy[t].keys[i].rot=new THREE.Quaternion(r[0],r[1],r[2],r[3])}if(e.hierarchy[t].keys.length&&void 0!==e.hierarchy[t].keys[0].morphTargets){var n={};for(i=0;i<e.hierarchy[t].keys.length;i++)for(var o=0;o<e.hierarchy[t].keys[i].morphTargets.length;o++){n[s=e.hierarchy[t].keys[i].morphTargets[o]]=-1}e.hierarchy[t].usedMorphTargets=n;for(i=0;i<e.hierarchy[t].keys.length;i++){var a={};for(var s in n){for(o=0;o<e.hierarchy[t].keys[i].morphTargets.length;o++)if(e.hierarchy[t].keys[i].morphTargets[o]===s){a[s]=e.hierarchy[t].keys[i].morphTargetsInfluences[o];break}o===e.hierarchy[t].keys[i].morphTargets.length&&(a[s]=0)}e.hierarchy[t].keys[i].morphTargetsInfluences=a}}for(i=1;i<e.hierarchy[t].keys.length;i++)e.hierarchy[t].keys[i].time===e.hierarchy[t].keys[i-1].time&&(e.hierarchy[t].keys.splice(i,1),i--);for(i=0;i<e.hierarchy[t].keys.length;i++)e.hierarchy[t].keys[i].index=i}var l=parseInt(e.length*e.fps,10);e.JIT={},e.JIT.hierarchy=[];for(t=0;t<e.hierarchy.length;t++)e.JIT.hierarchy.push(new Array(l));e.initialized=!0}};return e.LINEAR=0,e.CATMULLROM=1,e.CATMULLROM_FORWARD=2,e}(),THREE.Animation=function(e,t,i){this.root=e,this.data=THREE.AnimationHandler.get(t),this.hierarchy=THREE.AnimationHandler.parse(e),this.currentTime=0,this.timeScale=1,this.isPlaying=!1,this.isPaused=!0,this.loop=!0,this.interpolationType=void 0!==i?i:THREE.AnimationHandler.LINEAR,this.points=[],this.target=new THREE.Vector3},THREE.Animation.prototype.play=function(e,t){if(!1===this.isPlaying){this.isPlaying=!0,this.loop=void 0===e||e,this.currentTime=void 0!==t?t:0;var i,r,n=this.hierarchy.length;for(i=0;i<n;i++){(r=this.hierarchy[i]).matrixAutoUpdate=!0,void 0===r.animationCache&&(r.animationCache={},r.animationCache.prevKey={pos:0,rot:0,scl:0},r.animationCache.nextKey={pos:0,rot:0,scl:0},r.animationCache.originalMatrix=r instanceof THREE.Bone?r.skinMatrix:r.matrix);var o=r.animationCache.prevKey,a=r.animationCache.nextKey;o.pos=this.data.hierarchy[i].keys[0],o.rot=this.data.hierarchy[i].keys[0],o.scl=this.data.hierarchy[i].keys[0],a.pos=this.getNextKeyWith("pos",i,1),a.rot=this.getNextKeyWith("rot",i,1),a.scl=this.getNextKeyWith("scl",i,1)}this.update(0)}this.isPaused=!1,THREE.AnimationHandler.addToUpdate(this)},THREE.Animation.prototype.pause=function(){!0===this.isPaused?THREE.AnimationHandler.addToUpdate(this):THREE.AnimationHandler.removeFromUpdate(this),this.isPaused=!this.isPaused},THREE.Animation.prototype.stop=function(){this.isPlaying=!1,this.isPaused=!1,THREE.AnimationHandler.removeFromUpdate(this)},THREE.Animation.prototype.update=function(e){if(!1!==this.isPlaying){var t,i,r,n,o,a,s,l,h,c,u,f,p,d,m=["pos","rot","scl"];this.data.JIT.hierarchy;this.currentTime+=e*this.timeScale,u=this.currentTime,c=this.currentTime=this.currentTime%this.data.length,parseInt(Math.min(c*this.data.fps,this.data.length*this.data.fps),10);for(var g=0,E=this.hierarchy.length;g<E;g++){h=(l=this.hierarchy[g]).animationCache;for(var v=0;v<3;v++){if(t=m[v],a=h.prevKey[t],(s=h.nextKey[t]).time<=u){if(c<u){if(!this.loop)return void this.stop();for(a=this.data.hierarchy[g].keys[0],s=this.getNextKeyWith(t,g,1);s.time<c;)a=s,s=this.getNextKeyWith(t,g,s.index+1)}else for(;a=s,(s=this.getNextKeyWith(t,g,s.index+1)).time<c;);h.prevKey[t]=a,h.nextKey[t]=s}l.matrixAutoUpdate=!0,l.matrixWorldNeedsUpdate=!0,i=(c-a.time)/(s.time-a.time),n=a[t],o=s[t],(i<0||1<i)&&(console.log("THREE.Animation.update: Warning! Scale out of bounds:"+i+" on bone "+g),i=i<0?0:1),"pos"===t?(r=l.position,this.interpolationType===THREE.AnimationHandler.LINEAR?(r.x=n[0]+(o[0]-n[0])*i,r.y=n[1]+(o[1]-n[1])*i,r.z=n[2]+(o[2]-n[2])*i):this.interpolationType!==THREE.AnimationHandler.CATMULLROM&&this.interpolationType!==THREE.AnimationHandler.CATMULLROM_FORWARD||(this.points[0]=this.getPrevKeyWith("pos",g,a.index-1).pos,this.points[1]=n,this.points[2]=o,this.points[3]=this.getNextKeyWith("pos",g,s.index+1).pos,i=.33*i+.33,f=this.interpolateCatmullRom(this.points,i),r.x=f[0],r.y=f[1],r.z=f[2],this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD&&(p=this.interpolateCatmullRom(this.points,1.01*i),this.target.set(p[0],p[1],p[2]),this.target.sub(r),this.target.y=0,this.target.normalize(),d=Math.atan2(this.target.x,this.target.z),l.rotation.set(0,d,0)))):"rot"===t?THREE.Quaternion.slerp(n,o,l.quaternion,i):"scl"===t&&((r=l.scale).x=n[0]+(o[0]-n[0])*i,r.y=n[1]+(o[1]-n[1])*i,r.z=n[2]+(o[2]-n[2])*i)}}}},THREE.Animation.prototype.interpolateCatmullRom=function(e,t){var i,r,n,o,a,s,l,h,c,u=[],f=[];return n=(i=(e.length-1)*t)-(r=Math.floor(i)),u[0]=0===r?r:r-1,u[1]=r,u[2]=r>e.length-2?r:r+1,u[3]=r>e.length-3?r:r+2,s=e[u[0]],l=e[u[1]],h=e[u[2]],c=e[u[3]],a=n*(o=n*n),f[0]=this.interpolate(s[0],l[0],h[0],c[0],n,o,a),f[1]=this.interpolate(s[1],l[1],h[1],c[1],n,o,a),f[2]=this.interpolate(s[2],l[2],h[2],c[2],n,o,a),f},THREE.Animation.prototype.interpolate=function(e,t,i,r,n,o,a){var s=.5*(i-e),l=.5*(r-t);return(2*(t-i)+s+l)*a+(-3*(t-i)-2*s-l)*o+s*n+t},THREE.Animation.prototype.getNextKeyWith=function(e,t,i){var r=this.data.hierarchy[t].keys;for(this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD?i=i<r.length-1?i:r.length-1:i%=r.length;i<r.length;i++)if(void 0!==r[i][e])return r[i];return this.data.hierarchy[t].keys[0]},THREE.Animation.prototype.getPrevKeyWith=function(e,t,i){var r=this.data.hierarchy[t].keys;for(i=this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD?0<i?i:0:0<=i?i:i+r.length;0<=i;i--)if(void 0!==r[i][e])return r[i];return this.data.hierarchy[t].keys[r.length-1]},THREE.KeyFrameAnimation=function(e,t,i){this.root=e,this.data=THREE.AnimationHandler.get(t),this.hierarchy=THREE.AnimationHandler.parse(e),this.currentTime=0,this.timeScale=.001,this.isPlaying=!1,this.isPaused=!0,this.loop=!0,this.JITCompile=void 0===i||i;for(var r=0,n=this.hierarchy.length;r<n;r++){var o=this.data.hierarchy[r].keys,a=this.data.hierarchy[r].sids,s=this.hierarchy[r];if(o.length&&a){for(var l=0;l<a.length;l++){var h=a[l],c=this.getNextKeyWith(h,r,0);c&&c.apply(h)}s.matrixAutoUpdate=!1,this.data.hierarchy[r].node.updateMatrix(),s.matrixWorldNeedsUpdate=!0}}},THREE.KeyFrameAnimation.prototype.play=function(e,t){if(!this.isPlaying){this.isPlaying=!0,this.loop=void 0===e||e,this.currentTime=void 0!==t?t:0,this.startTimeMs=t,this.startTime=1e7,this.endTime=-this.startTime;var i,r,n,o=this.hierarchy.length;for(i=0;i<o;i++){r=this.hierarchy[i],void 0===(n=this.data.hierarchy[i]).animationCache&&(n.animationCache={},n.animationCache.prevKey=null,n.animationCache.nextKey=null,n.animationCache.originalMatrix=r instanceof THREE.Bone?r.skinMatrix:r.matrix);var a=this.data.hierarchy[i].keys;a.length&&(n.animationCache.prevKey=a[0],n.animationCache.nextKey=a[1],this.startTime=Math.min(a[0].time,this.startTime),this.endTime=Math.max(a[a.length-1].time,this.endTime))}this.update(0)}this.isPaused=!1,THREE.AnimationHandler.addToUpdate(this)},THREE.KeyFrameAnimation.prototype.pause=function(){this.isPaused?THREE.AnimationHandler.addToUpdate(this):THREE.AnimationHandler.removeFromUpdate(this),this.isPaused=!this.isPaused},THREE.KeyFrameAnimation.prototype.stop=function(){this.isPlaying=!1,this.isPaused=!1,THREE.AnimationHandler.removeFromUpdate(this);for(var e=0;e<this.data.hierarchy.length;e++){var t=this.hierarchy[e],i=this.data.hierarchy[e];if(void 0!==i.animationCache){var r=i.animationCache.originalMatrix;t instanceof THREE.Bone?(r.copy(t.skinMatrix),t.skinMatrix=r):(r.copy(t.matrix),t.matrix=r),delete i.animationCache}}},THREE.KeyFrameAnimation.prototype.update=function(e){if(this.isPlaying){var t,i,r,n,o,a,s,l,h=this.data.JIT.hierarchy;if(this.currentTime+=e*this.timeScale,s=this.currentTime,(a=this.currentTime=this.currentTime%this.data.length)<this.startTimeMs&&(a=this.currentTime=this.startTimeMs+a),o=parseInt(Math.min(a*this.data.fps,this.data.length*this.data.fps),10),!(l=a<s)||this.loop){if(!(a<this.startTime)){for(f=0,p=this.hierarchy.length;f<p;f++){r=this.hierarchy[f];d=(n=this.data.hierarchy[f]).keys;var c=n.animationCache;if(this.JITCompile&&void 0!==h[f][o])r instanceof THREE.Bone?(r.skinMatrix=h[f][o],r.matrixWorldNeedsUpdate=!1):(r.matrix=h[f][o],r.matrixWorldNeedsUpdate=!0);else if(d.length){if(this.JITCompile&&c&&(r instanceof THREE.Bone?r.skinMatrix=c.originalMatrix:r.matrix=c.originalMatrix),t=c.prevKey,i=c.nextKey,t&&i){if(i.time<=s){if(l&&this.loop)for(t=d[0],i=d[1];i.time<a;)i=d[(t=i).index+1];else if(!l)for(var u=d.length-1;i.time<a&&i.index!==u;)i=d[(t=i).index+1];c.prevKey=t,c.nextKey=i}i.time>=a?t.interpolate(i,a):t.interpolate(i,i.time)}this.data.hierarchy[f].node.updateMatrix(),r.matrixWorldNeedsUpdate=!0}}if(this.JITCompile&&void 0===h[0][o]){this.hierarchy[0].updateMatrixWorld(!0);for(f=0;f<this.hierarchy.length;f++)this.hierarchy[f]instanceof THREE.Bone?h[f][o]=this.hierarchy[f].skinMatrix.clone():h[f][o]=this.hierarchy[f].matrix.clone()}}}else{for(var f=0,p=this.hierarchy.length;f<p;f++){var d=this.data.hierarchy[f].keys,m=this.data.hierarchy[f].sids,g=d.length-1,E=this.hierarchy[f];if(d.length){for(var v=0;v<m.length;v++){var y=m[v],T=this.getPrevKeyWith(y,f,g);T&&T.apply(y)}this.data.hierarchy[f].node.updateMatrix(),E.matrixWorldNeedsUpdate=!0}}this.stop()}}},THREE.KeyFrameAnimation.prototype.getNextKeyWith=function(e,t,i){var r=this.data.hierarchy[t].keys;for(i%=r.length;i<r.length;i++)if(r[i].hasTarget(e))return r[i];return r[0]},THREE.KeyFrameAnimation.prototype.getPrevKeyWith=function(e,t,i){var r=this.data.hierarchy[t].keys;for(i=0<=i?i:i+r.length;0<=i;i--)if(r[i].hasTarget(e))return r[i];return r[r.length-1]},THREE.CubeCamera=function(e,t,i){THREE.Object3D.call(this);var n=new THREE.PerspectiveCamera(90,1,e,t);n.up.set(0,-1,0),n.lookAt(new THREE.Vector3(1,0,0)),this.add(n);var o=new THREE.PerspectiveCamera(90,1,e,t);o.up.set(0,-1,0),o.lookAt(new THREE.Vector3(-1,0,0)),this.add(o);var a=new THREE.PerspectiveCamera(90,1,e,t);a.up.set(0,0,1),a.lookAt(new THREE.Vector3(0,1,0)),this.add(a);var s=new THREE.PerspectiveCamera(90,1,e,t);s.up.set(0,0,-1),s.lookAt(new THREE.Vector3(0,-1,0)),this.add(s);var l=new THREE.PerspectiveCamera(90,1,e,t);l.up.set(0,-1,0),l.lookAt(new THREE.Vector3(0,0,1)),this.add(l);var h=new THREE.PerspectiveCamera(90,1,e,t);h.up.set(0,-1,0),h.lookAt(new THREE.Vector3(0,0,-1)),this.add(h),this.renderTarget=new THREE.WebGLRenderTargetCube(i,i,{format:THREE.RGBFormat,magFilter:THREE.LinearFilter,minFilter:THREE.LinearFilter}),this.updateCubeMap=function(e,t){var i=this.renderTarget,r=i.generateMipmaps;i.generateMipmaps=!1,i.activeCubeFace=0,e.render(t,n,i),i.activeCubeFace=1,e.render(t,o,i),i.activeCubeFace=2,e.render(t,a,i),i.activeCubeFace=3,e.render(t,s,i),i.activeCubeFace=4,e.render(t,l,i),i.generateMipmaps=r,i.activeCubeFace=5,e.render(t,h,i)}},THREE.CubeCamera.prototype=Object.create(THREE.Object3D.prototype),THREE.CombinedCamera=function(e,t,i,r,n,o,a){THREE.Camera.call(this),this.fov=i,this.left=-e/2,this.right=e/2,this.top=t/2,this.bottom=-t/2,this.cameraO=new THREE.OrthographicCamera(e/-2,e/2,t/2,t/-2,o,a),this.cameraP=new THREE.PerspectiveCamera(i,e/t,r,n),this.zoom=1,this.toPerspective()},THREE.CombinedCamera.prototype=Object.create(THREE.Camera.prototype),THREE.CombinedCamera.prototype.toPerspective=function(){this.near=this.cameraP.near,this.far=this.cameraP.far,this.cameraP.fov=this.fov/this.zoom,this.cameraP.updateProjectionMatrix(),this.projectionMatrix=this.cameraP.projectionMatrix,this.inPerspectiveMode=!0,this.inOrthographicMode=!1},THREE.CombinedCamera.prototype.toOrthographic=function(){var e=this.fov,t=this.cameraP.aspect,i=(this.cameraP.near+this.cameraP.far)/2,r=Math.tan(e/2)*i,n=2*r*t/2;r/=this.zoom,n/=this.zoom,this.cameraO.left=-n,this.cameraO.right=n,this.cameraO.top=r,this.cameraO.bottom=-r,this.cameraO.updateProjectionMatrix(),this.near=this.cameraO.near,this.far=this.cameraO.far,this.projectionMatrix=this.cameraO.projectionMatrix,this.inPerspectiveMode=!1,this.inOrthographicMode=!0},THREE.CombinedCamera.prototype.setSize=function(e,t){this.cameraP.aspect=e/t,this.left=-e/2,this.right=e/2,this.top=t/2,this.bottom=-t/2},THREE.CombinedCamera.prototype.setFov=function(e){this.fov=e,this.inPerspectiveMode?this.toPerspective():this.toOrthographic()},THREE.CombinedCamera.prototype.updateProjectionMatrix=function(){this.inPerspectiveMode?this.toPerspective():(this.toPerspective(),this.toOrthographic())},THREE.CombinedCamera.prototype.setLens=function(e,t){void 0===t&&(t=24);var i=2*THREE.Math.radToDeg(Math.atan(t/(2*e)));return this.setFov(i),i},THREE.CombinedCamera.prototype.setZoom=function(e){this.zoom=e,this.inPerspectiveMode?this.toPerspective():this.toOrthographic()},THREE.CombinedCamera.prototype.toFrontView=function(){this.rotation.x=0,this.rotation.y=0,this.rotation.z=0,this.rotationAutoUpdate=!1},THREE.CombinedCamera.prototype.toBackView=function(){this.rotation.x=0,this.rotation.y=Math.PI,this.rotation.z=0,this.rotationAutoUpdate=!1},THREE.CombinedCamera.prototype.toLeftView=function(){this.rotation.x=0,this.rotation.y=-Math.PI/2,this.rotation.z=0,this.rotationAutoUpdate=!1},THREE.CombinedCamera.prototype.toRightView=function(){this.rotation.x=0,this.rotation.y=Math.PI/2,this.rotation.z=0,this.rotationAutoUpdate=!1},THREE.CombinedCamera.prototype.toTopView=function(){this.rotation.x=-Math.PI/2,this.rotation.y=0,this.rotation.z=0,this.rotationAutoUpdate=!1},THREE.CombinedCamera.prototype.toBottomView=function(){this.rotation.x=Math.PI/2,this.rotation.y=0,this.rotation.z=0,this.rotationAutoUpdate=!1},THREE.CircleGeometry=function(e,t,i,r){THREE.Geometry.call(this),this.radius=e=e||50,this.segments=t=void 0!==t?Math.max(3,t):8,this.thetaStart=i=void 0!==i?i:0,this.thetaLength=r=void 0!==r?r:2*Math.PI;var n,o=[],a=new THREE.Vector3,s=new THREE.Vector2(.5,.5);for(this.vertices.push(a),o.push(s),n=0;n<=t;n++){var l=new THREE.Vector3,h=i+n/t*r;l.x=e*Math.cos(h),l.y=e*Math.sin(h),this.vertices.push(l),o.push(new THREE.Vector2((l.x/e+1)/2,(l.y/e+1)/2))}var c=new THREE.Vector3(0,0,1);for(n=1;n<=t;n++){var u=n,f=n+1;this.faces.push(new THREE.Face3(u,f,0,[c,c,c])),this.faceVertexUvs[0].push([o[n],o[n+1],s])}this.computeCentroids(),this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,e)},THREE.CircleGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.CubeGeometry=function(e,t,i,r,n,o){THREE.Geometry.call(this);var P=this;this.width=e,this.height=t,this.depth=i,this.widthSegments=r||1,this.heightSegments=n||1,this.depthSegments=o||1;var a=this.width/2,s=this.height/2,l=this.depth/2;function h(e,t,i,r,n,o,a,s){var l,h,c,u=P.widthSegments,f=P.heightSegments,p=n/2,d=o/2,m=P.vertices.length;"x"===e&&"y"===t||"y"===e&&"x"===t?l="z":"x"===e&&"z"===t||"z"===e&&"x"===t?(l="y",f=P.depthSegments):("z"===e&&"y"===t||"y"===e&&"z"===t)&&(l="x",u=P.depthSegments);var g=u+1,E=f+1,v=n/u,y=o/f,T=new THREE.Vector3;for(T[l]=0<a?1:-1,c=0;c<E;c++)for(h=0;h<g;h++){var _=new THREE.Vector3;_[e]=(h*v-p)*i,_[t]=(c*y-d)*r,_[l]=a,P.vertices.push(_)}for(c=0;c<f;c++)for(h=0;h<u;h++){var x=h+g*c,R=h+g*(c+1),b=h+1+g*(c+1),w=h+1+g*c,H=new THREE.Vector2(h/u,1-c/f),S=new THREE.Vector2(h/u,1-(c+1)/f),M=new THREE.Vector2((h+1)/u,1-(c+1)/f),C=new THREE.Vector2((h+1)/u,1-c/f),A=new THREE.Face3(x+m,R+m,w+m);A.normal.copy(T),A.vertexNormals.push(T.clone(),T.clone(),T.clone()),A.materialIndex=s,P.faces.push(A),P.faceVertexUvs[0].push([H,S,C]),(A=new THREE.Face3(R+m,b+m,w+m)).normal.copy(T),A.vertexNormals.push(T.clone(),T.clone(),T.clone()),A.materialIndex=s,P.faces.push(A),P.faceVertexUvs[0].push([S.clone(),M,C.clone()])}}h("z","y",-1,-1,this.depth,this.height,a,0),h("z","y",1,-1,this.depth,this.height,-a,1),h("x","z",1,1,this.width,this.depth,s,2),h("x","z",1,-1,this.width,this.depth,-s,3),h("x","y",1,-1,this.width,this.height,l,4),h("x","y",-1,-1,this.width,this.height,-l,5),this.computeCentroids(),this.mergeVertices()},THREE.CubeGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.CylinderGeometry=function(e,t,i,r,n,o){THREE.Geometry.call(this),this.radiusTop=e=void 0!==e?e:20,this.radiusBottom=t=void 0!==t?t:20,this.height=i=void 0!==i?i:100,this.radialSegments=r=r||8,this.heightSegments=n=n||1,this.openEnded=o=void 0!==o&&o;var a,s,l=i/2,h=[],c=[];for(s=0;s<=n;s++){var u=[],f=[],p=s/n,d=p*(t-e)+e;for(a=0;a<=r;a++){var m=a/r,g=new THREE.Vector3;g.x=d*Math.sin(m*Math.PI*2),g.y=-p*i+l,g.z=d*Math.cos(m*Math.PI*2),this.vertices.push(g),u.push(this.vertices.length-1),f.push(new THREE.Vector2(m,1-p))}h.push(u),c.push(f)}var E,v,y=(t-e)/i;for(a=0;a<r;a++)for(v=0!==e?(E=this.vertices[h[0][a]].clone(),this.vertices[h[0][a+1]].clone()):(E=this.vertices[h[1][a]].clone(),this.vertices[h[1][a+1]].clone()),E.setY(Math.sqrt(E.x*E.x+E.z*E.z)*y).normalize(),v.setY(Math.sqrt(v.x*v.x+v.z*v.z)*y).normalize(),s=0;s<n;s++){var T=h[s][a],_=h[s+1][a],x=h[s+1][a+1],R=h[s][a+1],b=E.clone(),w=E.clone(),H=v.clone(),S=v.clone(),M=c[s][a].clone(),C=c[s+1][a].clone(),A=c[s+1][a+1].clone(),P=c[s][a+1].clone();this.faces.push(new THREE.Face3(T,_,R,[b,w,S])),this.faceVertexUvs[0].push([M,C,P]),this.faces.push(new THREE.Face3(_,x,R,[w,H,S])),this.faceVertexUvs[0].push([C,A,P])}if(!1===o&&0<e)for(this.vertices.push(new THREE.Vector3(0,l,0)),a=0;a<r;a++){T=h[0][a],_=h[0][a+1],x=this.vertices.length-1,b=new THREE.Vector3(0,1,0),w=new THREE.Vector3(0,1,0),H=new THREE.Vector3(0,1,0),M=c[0][a].clone(),C=c[0][a+1].clone(),A=new THREE.Vector2(C.u,0);this.faces.push(new THREE.Face3(T,_,x,[b,w,H])),this.faceVertexUvs[0].push([M,C,A])}if(!1===o&&0<t)for(this.vertices.push(new THREE.Vector3(0,-l,0)),a=0;a<r;a++){T=h[s][a+1],_=h[s][a],x=this.vertices.length-1,b=new THREE.Vector3(0,-1,0),w=new THREE.Vector3(0,-1,0),H=new THREE.Vector3(0,-1,0),M=c[s][a+1].clone(),C=c[s][a].clone(),A=new THREE.Vector2(C.u,1);this.faces.push(new THREE.Face3(T,_,x,[b,w,H])),this.faceVertexUvs[0].push([M,C,A])}this.computeCentroids(),this.computeFaceNormals()},THREE.CylinderGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ExtrudeGeometry=function(e,t){void 0!==e?(THREE.Geometry.call(this),e=e instanceof Array?e:[e],this.shapebb=e[e.length-1].getBoundingBox(),this.addShapeList(e,t),this.computeCentroids(),this.computeFaceNormals()):e=[]},THREE.ExtrudeGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ExtrudeGeometry.prototype.addShapeList=function(e,t){for(var i=e.length,r=0;r<i;r++){var n=e[r];this.addShape(n,t)}},THREE.ExtrudeGeometry.prototype.addShape=function(c,u){var e,t,i,r,n,o,a,s,l=void 0!==u.amount?u.amount:100,h=void 0!==u.bevelThickness?u.bevelThickness:6,f=void 0!==u.bevelSize?u.bevelSize:h-2,p=void 0!==u.bevelSegments?u.bevelSegments:3,d=void 0===u.bevelEnabled||u.bevelEnabled,m=void 0!==u.curveSegments?u.curveSegments:12,g=void 0!==u.steps?u.steps:1,E=u.extrudePath,v=!1,y=u.material,T=u.extrudeMaterial,_=void 0!==u.UVGenerator?u.UVGenerator:THREE.ExtrudeGeometry.WorldUVGenerator;this.shapebb;E&&(e=E.getSpacedPoints(g),d=!(v=!0),t=void 0!==u.frames?u.frames:new THREE.TubeGeometry.FrenetFrames(E,g,!1),i=new THREE.Vector3,r=new THREE.Vector3,n=new THREE.Vector3),d||(f=h=p=0);var x=this,R=this.vertices.length,b=c.extractPoints(m),w=b.shape,H=b.holes,S=!THREE.Shape.Utils.isClockWise(w);if(S){for(w=w.reverse(),a=0,s=H.length;a<s;a++)o=H[a],THREE.Shape.Utils.isClockWise(o)&&(H[a]=o.reverse());S=!1}var M=THREE.Shape.Utils.triangulateShape(w,H),C=w;for(a=0,s=H.length;a<s;a++)o=H[a],w=w.concat(o);function A(e,t,i){return t||console.log("die"),t.clone().multiplyScalar(i).add(e)}var P,D,L,F,O,k,V=w.length,I=M.length;C.length,Math.PI;function N(e,t,i){return function(e,t,i){var r,n,o,a,s,l=THREE.ExtrudeGeometry.__v1,h=THREE.ExtrudeGeometry.__v2,c=THREE.ExtrudeGeometry.__v3,u=THREE.ExtrudeGeometry.__v4,f=THREE.ExtrudeGeometry.__v5,p=THREE.ExtrudeGeometry.__v6;if(l.set(e.x-t.x,e.y-t.y),h.set(e.x-i.x,e.y-i.y),r=l.normalize(),n=h.normalize(),c.set(-r.y,r.x),u.set(n.y,-n.x),f.copy(e).add(c),p.copy(e).add(u),f.equals(p))return u.clone();f.copy(t).add(c),p.copy(i).add(u),o=r.dot(u),a=p.sub(f).dot(u),0===o&&(console.log("Either infinite or no solutions!"),0===a?console.log("Its finite solutions."):console.log("Too bad, no solutions."));if((s=a/o)<0)return function(e,t,i){var r=Math.atan2(t.y-e.y,t.x-e.x),n=Math.atan2(i.y-e.y,i.x-e.x);n<r&&(n+=2*Math.PI);var o=(r+n)/2,a=-Math.cos(o),s=-Math.sin(o);return new THREE.Vector2(a,s)}(e,t,i);return r.multiplyScalar(s).add(f).sub(e).clone()}(e,t,i)}for(var U=[],z=0,B=C.length,j=B-1,W=z+1;z<B;z++,j++,W++){j===B&&(j=0),W===B&&(W=0);C[z],C[j],C[W];U[z]=N(C[z],C[j],C[W])}var G,X,q=[],Y=U.concat();for(a=0,s=H.length;a<s;a++){for(o=H[a],G=[],z=0,j=(B=o.length)-1,W=z+1;z<B;z++,j++,W++)j===B&&(j=0),W===B&&(W=0),G[z]=N(o[z],o[j],o[W]);q.push(G),Y=Y.concat(G)}for(P=0;P<p;P++){for(F=h*(1-(L=P/p)),D=f*Math.sin(L*Math.PI/2),z=0,B=C.length;z<B;z++)Q((O=A(C[z],U[z],D)).x,O.y,-F);for(a=0,s=H.length;a<s;a++)for(o=H[a],G=q[a],z=0,B=o.length;z<B;z++)Q((O=A(o[z],G[z],D)).x,O.y,-F)}for(D=f,z=0;z<V;z++)O=d?A(w[z],Y[z],D):w[z],v?(r.copy(t.normals[0]).multiplyScalar(O.x),i.copy(t.binormals[0]).multiplyScalar(O.y),n.copy(e[0]).add(r).add(i),Q(n.x,n.y,n.z)):Q(O.x,O.y,0);for(X=1;X<=g;X++)for(z=0;z<V;z++)O=d?A(w[z],Y[z],D):w[z],v?(r.copy(t.normals[X]).multiplyScalar(O.x),i.copy(t.binormals[X]).multiplyScalar(O.y),n.copy(e[X]).add(r).add(i),Q(n.x,n.y,n.z)):Q(O.x,O.y,l/g*X);for(P=p-1;0<=P;P--){for(F=h*(1-(L=P/p)),D=f*Math.sin(L*Math.PI/2),z=0,B=C.length;z<B;z++)Q((O=A(C[z],U[z],D)).x,O.y,l+F);for(a=0,s=H.length;a<s;a++)for(o=H[a],G=q[a],z=0,B=o.length;z<B;z++)O=A(o[z],G[z],D),v?Q(O.x,O.y+e[g-1].y,e[g-1].x+F):Q(O.x,O.y,l+F)}function K(e,t){var i,r;for(z=e.length;0<=--z;){(r=(i=z)-1)<0&&(r=e.length-1);var n=0,o=g+2*p;for(n=0;n<o;n++){var a=V*n,s=V*(n+1);$(t+i+a,t+r+a,t+r+s,t+i+s,e,n,o,i,r)}}}function Q(e,t,i){x.vertices.push(new THREE.Vector3(e,t,i))}function Z(e,t,i,r){e+=R,t+=R,i+=R,x.faces.push(new THREE.Face3(e,t,i,null,null,y));var n=r?_.generateBottomUV(x,c,u,e,t,i):_.generateTopUV(x,c,u,e,t,i);x.faceVertexUvs[0].push(n)}function $(e,t,i,r,n,o,a,s,l){e+=R,t+=R,i+=R,r+=R,x.faces.push(new THREE.Face3(e,t,r,null,null,T)),x.faces.push(new THREE.Face3(t,i,r,null,null,T));var h=_.generateSideWallUV(x,c,n,u,e,t,i,r,o,a,s,l);x.faceVertexUvs[0].push([h[0],h[1],h[3]]),x.faceVertexUvs[0].push([h[1],h[2],h[3]])}!function(){if(d){var e=0,t=V*e;for(z=0;z<I;z++)Z((k=M[z])[2]+t,k[1]+t,k[0]+t,!0);for(t=V*(e=g+2*p),z=0;z<I;z++)Z((k=M[z])[0]+t,k[1]+t,k[2]+t,!1)}else{for(z=0;z<I;z++)Z((k=M[z])[2],k[1],k[0],!0);for(z=0;z<I;z++)Z((k=M[z])[0]+V*g,k[1]+V*g,k[2]+V*g,!1)}}(),function(){var e=0;for(K(C,e),e+=C.length,a=0,s=H.length;a<s;a++)K(o=H[a],e),e+=o.length}()},THREE.ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(e,t,i,r,n,o){var a=e.vertices[r].x,s=e.vertices[r].y,l=e.vertices[n].x,h=e.vertices[n].y,c=e.vertices[o].x,u=e.vertices[o].y;return[new THREE.Vector2(a,s),new THREE.Vector2(l,h),new THREE.Vector2(c,u)]},generateBottomUV:function(e,t,i,r,n,o){return this.generateTopUV(e,t,i,r,n,o)},generateSideWallUV:function(e,t,i,r,n,o,a,s,l,h,c,u){var f=e.vertices[n].x,p=e.vertices[n].y,d=e.vertices[n].z,m=e.vertices[o].x,g=e.vertices[o].y,E=e.vertices[o].z,v=e.vertices[a].x,y=e.vertices[a].y,T=e.vertices[a].z,_=e.vertices[s].x,x=e.vertices[s].y,R=e.vertices[s].z;return Math.abs(p-g)<.01?[new THREE.Vector2(f,1-d),new THREE.Vector2(m,1-E),new THREE.Vector2(v,1-T),new THREE.Vector2(_,1-R)]:[new THREE.Vector2(p,1-d),new THREE.Vector2(g,1-E),new THREE.Vector2(y,1-T),new THREE.Vector2(x,1-R)]}},THREE.ExtrudeGeometry.__v1=new THREE.Vector2,THREE.ExtrudeGeometry.__v2=new THREE.Vector2,THREE.ExtrudeGeometry.__v3=new THREE.Vector2,THREE.ExtrudeGeometry.__v4=new THREE.Vector2,THREE.ExtrudeGeometry.__v5=new THREE.Vector2,THREE.ExtrudeGeometry.__v6=new THREE.Vector2,THREE.ShapeGeometry=function(e,t){THREE.Geometry.call(this),e instanceof Array==!1&&(e=[e]),this.shapebb=e[e.length-1].getBoundingBox(),this.addShapeList(e,t),this.computeCentroids(),this.computeFaceNormals()},THREE.ShapeGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ShapeGeometry.prototype.addShapeList=function(e,t){for(var i=0,r=e.length;i<r;i++)this.addShape(e[i],t);return this},THREE.ShapeGeometry.prototype.addShape=function(e,t){void 0===t&&(t={});var i,r,n,o=void 0!==t.curveSegments?t.curveSegments:12,a=t.material,s=void 0===t.UVGenerator?THREE.ExtrudeGeometry.WorldUVGenerator:t.UVGenerator,l=(this.shapebb,this.vertices.length),h=e.extractPoints(o),c=h.shape,u=h.holes,f=!THREE.Shape.Utils.isClockWise(c);if(f){for(c=c.reverse(),i=0,r=u.length;i<r;i++)n=u[i],THREE.Shape.Utils.isClockWise(n)&&(u[i]=n.reverse());f=!1}var p=THREE.Shape.Utils.triangulateShape(c,u),d=c;for(i=0,r=u.length;i<r;i++)n=u[i],c=c.concat(n);var m,g,E=c.length,v=p.length;d.length;for(i=0;i<E;i++)m=c[i],this.vertices.push(new THREE.Vector3(m.x,m.y,0));for(i=0;i<v;i++){var y=(g=p[i])[0]+l,T=g[1]+l,_=g[2]+l;this.faces.push(new THREE.Face3(y,T,_,null,null,a)),this.faceVertexUvs[0].push(s.generateBottomUV(this,e,t,y,T,_))}},THREE.LatheGeometry=function(e,t,i,r){THREE.Geometry.call(this),t=t||12,i=i||0,r=r||2*Math.PI;for(var n=1/(e.length-1),o=1/t,a=0,s=t;a<=s;a++)for(var l=i+a*o*r,h=Math.cos(l),c=Math.sin(l),u=0,f=e.length;u<f;u++){var p=e[u],d=new THREE.Vector3;d.x=h*p.x-c*p.y,d.y=c*p.x+h*p.y,d.z=p.z,this.vertices.push(d)}var m=e.length;for(a=0,s=t;a<s;a++)for(u=0,f=e.length-1;u<f;u++){var g=u+m*a,E=g,v=g+m,y=(h=g+1+m,g+1),T=a*o,_=u*n,x=T+o,R=_+n;this.faces.push(new THREE.Face3(E,v,y)),this.faceVertexUvs[0].push([new THREE.Vector2(T,_),new THREE.Vector2(x,_),new THREE.Vector2(T,R)]),this.faces.push(new THREE.Face3(v,h,y)),this.faceVertexUvs[0].push([new THREE.Vector2(x,_),new THREE.Vector2(x,R),new THREE.Vector2(T,R)])}this.mergeVertices(),this.computeCentroids(),this.computeFaceNormals(),this.computeVertexNormals()},THREE.LatheGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.PlaneGeometry=function(e,t,i,r){var n,o;THREE.Geometry.call(this),this.width=e,this.height=t,this.widthSegments=i||1,this.heightSegments=r||1;var a=e/2,s=t/2,l=this.widthSegments,h=this.heightSegments,c=l+1,u=h+1,f=this.width/l,p=this.height/h,d=new THREE.Vector3(0,0,1);for(o=0;o<u;o++)for(n=0;n<c;n++){var m=n*f-a,g=o*p-s;this.vertices.push(new THREE.Vector3(m,-g,0))}for(o=0;o<h;o++)for(n=0;n<l;n++){var E=n+c*o,v=n+c*(o+1),y=n+1+c*(o+1),T=n+1+c*o,_=new THREE.Vector2(n/l,1-o/h),x=new THREE.Vector2(n/l,1-(o+1)/h),R=new THREE.Vector2((n+1)/l,1-(o+1)/h),b=new THREE.Vector2((n+1)/l,1-o/h),w=new THREE.Face3(E,v,T);w.normal.copy(d),w.vertexNormals.push(d.clone(),d.clone(),d.clone()),this.faces.push(w),this.faceVertexUvs[0].push([_,x,b]),(w=new THREE.Face3(v,y,T)).normal.copy(d),w.vertexNormals.push(d.clone(),d.clone(),d.clone()),this.faces.push(w),this.faceVertexUvs[0].push([x.clone(),R,b.clone()])}this.computeCentroids()},THREE.PlaneGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.RingGeometry=function(e,t,i,r,n,o){THREE.Geometry.call(this),e=e||0,t=t||50,n=void 0!==n?n:0,o=void 0!==o?o:2*Math.PI,i=void 0!==i?Math.max(3,i):8;var a,s,l=[],h=e,c=(t-e)/(r=void 0!==r?Math.max(3,r):8);for(a=0;a<=r;a++){for(s=0;s<=i;s++){var u=new THREE.Vector3,f=n+s/i*o;u.x=h*Math.cos(f),u.y=h*Math.sin(f),this.vertices.push(u),l.push(new THREE.Vector2((u.x/h+1)/2,-(u.y/h+1)/2+1))}h+=c}var p=new THREE.Vector3(0,0,1);for(a=0;a<r;a++){var d=a*i;for(s=0;s<=i;s++){var m=(f=s+d)+a,g=f+i+a,E=f+i+1+a;this.faces.push(new THREE.Face3(m,g,E,[p,p,p])),this.faceVertexUvs[0].push([l[m],l[g],l[E]]),m=f+a,g=f+i+1+a,E=f+1+a,this.faces.push(new THREE.Face3(m,g,E,[p,p,p])),this.faceVertexUvs[0].push([l[m],l[g],l[E]])}}this.computeCentroids(),this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,h)},THREE.RingGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.SphereGeometry=function(e,t,i,r,n,o,a){THREE.Geometry.call(this),this.radius=e=e||50,this.widthSegments=t=Math.max(3,Math.floor(t)||8),this.heightSegments=i=Math.max(2,Math.floor(i)||6),this.phiStart=r=void 0!==r?r:0,this.phiLength=n=void 0!==n?n:2*Math.PI,this.thetaStart=o=void 0!==o?o:0,this.thetaLength=a=void 0!==a?a:Math.PI;var s,l,h=[],c=[];for(l=0;l<=i;l++){var u=[],f=[];for(s=0;s<=t;s++){var p=s/t,d=l/i,m=new THREE.Vector3;m.x=-e*Math.cos(r+p*n)*Math.sin(o+d*a),m.y=e*Math.cos(o+d*a),m.z=e*Math.sin(r+p*n)*Math.sin(o+d*a),this.vertices.push(m),u.push(this.vertices.length-1),f.push(new THREE.Vector2(p,1-d))}h.push(u),c.push(f)}for(l=0;l<this.heightSegments;l++)for(s=0;s<this.widthSegments;s++){var g=h[l][s+1],E=h[l][s],v=h[l+1][s],y=h[l+1][s+1],T=this.vertices[g].clone().normalize(),_=this.vertices[E].clone().normalize(),x=this.vertices[v].clone().normalize(),R=this.vertices[y].clone().normalize(),b=c[l][s+1].clone(),w=c[l][s].clone(),H=c[l+1][s].clone(),S=c[l+1][s+1].clone();Math.abs(this.vertices[g].y)===this.radius?(this.faces.push(new THREE.Face3(g,v,y,[T,x,R])),this.faceVertexUvs[0].push([b,H,S])):Math.abs(this.vertices[v].y)===this.radius?(this.faces.push(new THREE.Face3(g,E,v,[T,_,x])),this.faceVertexUvs[0].push([b,w,H])):(this.faces.push(new THREE.Face3(g,E,y,[T,_,R])),this.faceVertexUvs[0].push([b,w,S]),this.faces.push(new THREE.Face3(E,v,y,[_,x,R])),this.faceVertexUvs[0].push([w.clone(),H,S.clone()]))}this.computeCentroids(),this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,e)},THREE.SphereGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TextGeometry=function(e,t){t=t||{};var i=THREE.FontUtils.generateShapes(e,t);t.amount=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),THREE.ExtrudeGeometry.call(this,i,t)},THREE.TextGeometry.prototype=Object.create(THREE.ExtrudeGeometry.prototype),THREE.TorusGeometry=function(e,t,i,r,n){THREE.Geometry.call(this);this.radius=e||100,this.tube=t||40,this.radialSegments=i||8,this.tubularSegments=r||6,this.arc=n||2*Math.PI;for(var o=new THREE.Vector3,a=[],s=[],l=0;l<=this.radialSegments;l++)for(var h=0;h<=this.tubularSegments;h++){var c=h/this.tubularSegments*this.arc,u=l/this.radialSegments*Math.PI*2;o.x=this.radius*Math.cos(c),o.y=this.radius*Math.sin(c);var f=new THREE.Vector3;f.x=(this.radius+this.tube*Math.cos(u))*Math.cos(c),f.y=(this.radius+this.tube*Math.cos(u))*Math.sin(c),f.z=this.tube*Math.sin(u),this.vertices.push(f),a.push(new THREE.Vector2(h/this.tubularSegments,l/this.radialSegments)),s.push(f.clone().sub(o).normalize())}for(l=1;l<=this.radialSegments;l++)for(h=1;h<=this.tubularSegments;h++){var p=(this.tubularSegments+1)*l+h-1,d=(this.tubularSegments+1)*(l-1)+h-1,m=(this.tubularSegments+1)*(l-1)+h,g=(this.tubularSegments+1)*l+h,E=new THREE.Face3(p,d,g,[s[p],s[d],s[g]]);E.normal.add(s[p]),E.normal.add(s[d]),E.normal.add(s[g]),E.normal.normalize(),this.faces.push(E),this.faceVertexUvs[0].push([a[p].clone(),a[d].clone(),a[g].clone()]),(E=new THREE.Face3(d,m,g,[s[d],s[m],s[g]])).normal.add(s[d]),E.normal.add(s[m]),E.normal.add(s[g]),E.normal.normalize(),this.faces.push(E),this.faceVertexUvs[0].push([a[d].clone(),a[m].clone(),a[g].clone()])}this.computeCentroids()},THREE.TorusGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TorusKnotGeometry=function(e,t,i,r,n,o,a){THREE.Geometry.call(this);this.radius=e||100,this.tube=t||40,this.radialSegments=i||64,this.tubularSegments=r||8,this.p=n||2,this.q=o||3,this.heightScale=a||1,this.grid=new Array(this.radialSegments);for(var s=new THREE.Vector3,l=new THREE.Vector3,h=new THREE.Vector3,c=0;c<this.radialSegments;++c){this.grid[c]=new Array(this.tubularSegments);var u=c/this.radialSegments*2*this.p*Math.PI,f=C(u,this.q,this.p,this.radius,this.heightScale),p=C(u+.01,this.q,this.p,this.radius,this.heightScale);s.subVectors(p,f),l.addVectors(p,f),h.crossVectors(s,l),l.crossVectors(h,s),h.normalize(),l.normalize();for(var d=0;d<this.tubularSegments;++d){var m=d/this.tubularSegments*2*Math.PI,g=-this.tube*Math.cos(m),E=this.tube*Math.sin(m),v=new THREE.Vector3;v.x=f.x+g*l.x+E*h.x,v.y=f.y+g*l.y+E*h.y,v.z=f.z+g*l.z+E*h.z,this.grid[c][d]=this.vertices.push(v)-1}}for(c=0;c<this.radialSegments;++c)for(d=0;d<this.tubularSegments;++d){var y=(c+1)%this.radialSegments,T=(d+1)%this.tubularSegments,_=this.grid[c][d],x=this.grid[y][d],R=this.grid[y][T],b=this.grid[c][T],w=new THREE.Vector2(c/this.radialSegments,d/this.tubularSegments),H=new THREE.Vector2((c+1)/this.radialSegments,d/this.tubularSegments),S=new THREE.Vector2((c+1)/this.radialSegments,(d+1)/this.tubularSegments),M=new THREE.Vector2(c/this.radialSegments,(d+1)/this.tubularSegments);this.faces.push(new THREE.Face3(_,x,b)),this.faceVertexUvs[0].push([w,H,M]),this.faces.push(new THREE.Face3(x,R,b)),this.faceVertexUvs[0].push([H.clone(),S,M.clone()])}function C(e,t,i,r,n){var o=Math.cos(e),a=Math.sin(e),s=t/i*e,l=Math.cos(s),h=r*(2+l)*.5*o,c=r*(2+l)*a*.5,u=n*r*Math.sin(s)*.5;return new THREE.Vector3(h,c,u)}this.computeCentroids(),this.computeFaceNormals(),this.computeVertexNormals()},THREE.TorusKnotGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TubeGeometry=function(e,t,i,r,n){THREE.Geometry.call(this),this.path=e,this.segments=t||64,this.radius=i||1,this.radialSegments=r||8,this.closed=n||!1,this.grid=[];var o,a,s,l,h,c,u,f,p,d,m,g,E,v,y,T,_,x,R,b,w,H,S=this,M=this.segments+1,C=new THREE.Vector3,A=new THREE.TubeGeometry.FrenetFrames(this.path,this.segments,this.closed),P=A.tangents,D=A.normals,L=A.binormals;for(this.tangents=P,this.normals=D,this.binormals=L,f=0;f<M;f++)for(this.grid[f]=[],s=f/(M-1),u=e.getPointAt(s),P[f],o=D[f],a=L[f],p=0;p<this.radialSegments;p++)l=p/this.radialSegments*2*Math.PI,h=-this.radius*Math.cos(l),c=this.radius*Math.sin(l),C.copy(u),C.x+=h*o.x+c*a.x,C.y+=h*o.y+c*a.y,C.z+=h*o.z+c*a.z,this.grid[f][p]=(b=C.x,w=C.y,H=C.z,S.vertices.push(new THREE.Vector3(b,w,H))-1);for(f=0;f<this.segments;f++)for(p=0;p<this.radialSegments;p++)d=this.closed?(f+1)%this.segments:f+1,m=(p+1)%this.radialSegments,g=this.grid[f][p],E=this.grid[d][p],v=this.grid[d][m],y=this.grid[f][m],T=new THREE.Vector2(f/this.segments,p/this.radialSegments),_=new THREE.Vector2((f+1)/this.segments,p/this.radialSegments),x=new THREE.Vector2((f+1)/this.segments,(p+1)/this.radialSegments),R=new THREE.Vector2(f/this.segments,(p+1)/this.radialSegments),this.faces.push(new THREE.Face3(g,E,y)),this.faceVertexUvs[0].push([T,_,R]),this.faces.push(new THREE.Face3(E,v,y)),this.faceVertexUvs[0].push([_.clone(),x,R.clone()]);this.computeCentroids(),this.computeFaceNormals(),this.computeVertexNormals()},THREE.TubeGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TubeGeometry.FrenetFrames=function(e,t,i){new THREE.Vector3;var r,n,o,a,s,l,h,c=new THREE.Vector3,u=(new THREE.Vector3,[]),f=[],p=[],d=new THREE.Vector3,m=new THREE.Matrix4,g=t+1,E=1e-4;for(this.tangents=u,this.normals=f,this.binormals=p,l=0;l<g;l++)h=l/(g-1),u[l]=e.getTangentAt(h),u[l].normalize();for(function(){f[0]=new THREE.Vector3,p[0]=new THREE.Vector3,n=Number.MAX_VALUE,o=Math.abs(u[0].x),a=Math.abs(u[0].y),s=Math.abs(u[0].z),o<=n&&(n=o,c.set(1,0,0));a<=n&&(n=a,c.set(0,1,0));s<=n&&c.set(0,0,1);d.crossVectors(u[0],c).normalize(),f[0].crossVectors(u[0],d),p[0].crossVectors(u[0],f[0])}(),l=1;l<g;l++)f[l]=f[l-1].clone(),p[l]=p[l-1].clone(),d.crossVectors(u[l-1],u[l]),d.length()>E&&(d.normalize(),r=Math.acos(THREE.Math.clamp(u[l-1].dot(u[l]),-1,1)),f[l].applyMatrix4(m.makeRotationAxis(d,r))),p[l].crossVectors(u[l],f[l]);if(i)for(r=Math.acos(THREE.Math.clamp(f[0].dot(f[g-1]),-1,1)),r/=g-1,0<u[0].dot(d.crossVectors(f[0],f[g-1]))&&(r=-r),l=1;l<g;l++)f[l].applyMatrix4(m.makeRotationAxis(u[l],r*l)),p[l].crossVectors(u[l],f[l])},THREE.PolyhedronGeometry=function(e,t,i,r){THREE.Geometry.call(this),i=i||1,r=r||0;for(var p=this,n=0,o=e.length;n<o;n++)v(new THREE.Vector3(e[n][0],e[n][1],e[n][2]));var a=this.vertices,s=[];for(n=0,o=t.length;n<o;n++){var l=a[t[n][0]],h=a[t[n][1]],c=a[t[n][2]];s[n]=new THREE.Face3(l.index,h.index,c.index,[l.clone(),h.clone(),c.clone()])}for(n=0,o=s.length;n<o;n++)T(s[n],r);for(n=0,o=this.faceVertexUvs[0].length;n<o;n++){var u=this.faceVertexUvs[0][n],f=u[0].x,d=u[1].x,m=u[2].x,g=Math.max(f,Math.max(d,m)),E=Math.min(f,Math.min(d,m));.9<g&&E<.1&&(f<.2&&(u[0].x+=1),d<.2&&(u[1].x+=1),m<.2&&(u[2].x+=1))}for(n=0,o=this.vertices.length;n<o;n++)this.vertices[n].multiplyScalar(i);function v(e){var t=e.normalize().clone();t.index=p.vertices.push(t)-1;var i,r=_(e)/2/Math.PI+.5,n=(i=e,Math.atan2(-i.y,Math.sqrt(i.x*i.x+i.z*i.z))/Math.PI+.5);return t.uv=new THREE.Vector2(r,1-n),t}function y(e,t,i){var r=new THREE.Face3(e.index,t.index,i.index,[e.clone(),t.clone(),i.clone()]);r.centroid.add(e).add(t).add(i).divideScalar(3),p.faces.push(r);var n=_(r.centroid);p.faceVertexUvs[0].push([x(e.uv,e,n),x(t.uv,t,n),x(i.uv,i,n)])}function T(e,t){for(var i=Math.pow(2,t),r=(Math.pow(4,t),v(p.vertices[e.a])),n=v(p.vertices[e.b]),o=v(p.vertices[e.c]),a=[],s=0;s<=i;s++){a[s]=[];for(var l=v(r.clone().lerp(o,s/i)),h=v(n.clone().lerp(o,s/i)),c=i-s,u=0;u<=c;u++)a[s][u]=0==u&&s==i?l:v(l.clone().lerp(h,u/c))}for(s=0;s<i;s++)for(u=0;u<2*(i-s)-1;u++){var f=Math.floor(u/2);u%2==0?y(a[s][f+1],a[s+1][f],a[s][f]):y(a[s][f+1],a[s+1][f+1],a[s+1][f])}}function _(e){return Math.atan2(e.z,-e.x)}function x(e,t,i){return i<0&&1===e.x&&(e=new THREE.Vector2(e.x-1,e.y)),0===t.x&&0===t.z&&(e=new THREE.Vector2(i/2/Math.PI+.5,e.y)),e.clone()}this.mergeVertices(),this.computeCentroids(),this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,i)},THREE.PolyhedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.IcosahedronGeometry=function(e,t){this.radius=e,this.detail=t;var i=(1+Math.sqrt(5))/2,r=[[-1,i,0],[1,i,0],[-1,-i,0],[1,-i,0],[0,-1,i],[0,1,i],[0,-1,-i],[0,1,-i],[i,0,-1],[i,0,1],[-i,0,-1],[-i,0,1]];THREE.PolyhedronGeometry.call(this,r,[[0,11,5],[0,5,1],[0,1,7],[0,7,10],[0,10,11],[1,5,9],[5,11,4],[11,10,2],[10,7,6],[7,1,8],[3,9,4],[3,4,2],[3,2,6],[3,6,8],[3,8,9],[4,9,5],[2,4,11],[6,2,10],[8,6,7],[9,8,1]],e,t)},THREE.IcosahedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.OctahedronGeometry=function(e,t){THREE.PolyhedronGeometry.call(this,[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],[[0,2,4],[0,4,3],[0,3,5],[0,5,2],[1,2,5],[1,5,3],[1,3,4],[1,4,2]],e,t)},THREE.OctahedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TetrahedronGeometry=function(e,t){THREE.PolyhedronGeometry.call(this,[[1,1,1],[-1,-1,1],[-1,1,-1],[1,-1,-1]],[[2,1,0],[0,3,2],[1,3,0],[2,3,1]],e,t)},THREE.TetrahedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ParametricGeometry=function(e,t,i){THREE.Geometry.call(this);var r,n,o,a,s,l,h,c,u,f,p,d,m=this.vertices,g=this.faces,E=this.faceVertexUvs[0],v=t+1;for(r=0;r<=i;r++)for(a=r/i,n=0;n<=t;n++)o=e(n/t,a),m.push(o);for(r=0;r<i;r++)for(n=0;n<t;n++)l=(s=r*v+n)+1,h=(r+1)*v+n+1,c=(r+1)*v+n,u=new THREE.Vector2(n/t,r/i),f=new THREE.Vector2((n+1)/t,r/i),p=new THREE.Vector2((n+1)/t,(r+1)/i),d=new THREE.Vector2(n/t,(r+1)/i),g.push(new THREE.Face3(s,l,c)),E.push([u,f,d]),g.push(new THREE.Face3(l,h,c)),E.push([f.clone(),p,d.clone()]);this.computeCentroids(),this.computeFaceNormals(),this.computeVertexNormals()},THREE.ParametricGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.AxisHelper=function(e){e=e||1;var t=new THREE.Geometry;t.vertices.push(new THREE.Vector3,new THREE.Vector3(e,0,0),new THREE.Vector3,new THREE.Vector3(0,e,0),new THREE.Vector3,new THREE.Vector3(0,0,e)),t.colors.push(new THREE.Color(16711680),new THREE.Color(16755200),new THREE.Color(65280),new THREE.Color(11206400),new THREE.Color(255),new THREE.Color(43775));var i=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});THREE.Line.call(this,t,i,THREE.LinePieces)},THREE.AxisHelper.prototype=Object.create(THREE.Line.prototype),THREE.ArrowHelper=function(e,t,i,r){THREE.Object3D.call(this),void 0===r&&(r=16776960),void 0===i&&(i=1),this.position=t;var n=new THREE.Geometry;n.vertices.push(new THREE.Vector3(0,0,0)),n.vertices.push(new THREE.Vector3(0,1,0)),this.line=new THREE.Line(n,new THREE.LineBasicMaterial({color:r})),this.line.matrixAutoUpdate=!1,this.add(this.line);var o=new THREE.CylinderGeometry(0,.05,.25,5,1);o.applyMatrix((new THREE.Matrix4).makeTranslation(0,.875,0)),this.cone=new THREE.Mesh(o,new THREE.MeshBasicMaterial({color:r})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i)},THREE.ArrowHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.ArrowHelper.prototype.setDirection=function(){var t,i=new THREE.Vector3;return function(e){.99999<e.y?this.quaternion.set(0,0,0,1):e.y<-.99999?this.quaternion.set(1,0,0,0):(i.set(e.z,0,-e.x).normalize(),t=Math.acos(e.y),this.quaternion.setFromAxisAngle(i,t))}}(),THREE.ArrowHelper.prototype.setLength=function(e){this.scale.set(e,e,e)},THREE.ArrowHelper.prototype.setColor=function(e){this.line.material.color.setHex(e),this.cone.material.color.setHex(e)},THREE.BoxHelper=function(e){var t=[new THREE.Vector3(1,1,1),new THREE.Vector3(-1,1,1),new THREE.Vector3(-1,-1,1),new THREE.Vector3(1,-1,1),new THREE.Vector3(1,1,-1),new THREE.Vector3(-1,1,-1),new THREE.Vector3(-1,-1,-1),new THREE.Vector3(1,-1,-1)];this.vertices=t;var i=new THREE.Geometry;i.vertices.push(t[0],t[1],t[1],t[2],t[2],t[3],t[3],t[0],t[4],t[5],t[5],t[6],t[6],t[7],t[7],t[4],t[0],t[4],t[1],t[5],t[2],t[6],t[3],t[7]),THREE.Line.call(this,i,new THREE.LineBasicMaterial({color:16776960}),THREE.LinePieces),void 0!==e&&this.update(e)},THREE.BoxHelper.prototype=Object.create(THREE.Line.prototype),THREE.BoxHelper.prototype.update=function(e){var t=e.geometry;null===t.boundingBox&&t.computeBoundingBox();var i=t.boundingBox.min,r=t.boundingBox.max,n=this.vertices;n[0].set(r.x,r.y,r.z),n[1].set(i.x,r.y,r.z),n[2].set(i.x,i.y,r.z),n[3].set(r.x,i.y,r.z),n[4].set(r.x,r.y,i.z),n[5].set(i.x,r.y,i.z),n[6].set(i.x,i.y,i.z),n[7].set(r.x,i.y,i.z),this.geometry.computeBoundingSphere(),this.geometry.verticesNeedUpdate=!0,this.matrixAutoUpdate=!1,this.matrixWorld=e.matrixWorld},THREE.BoundingBoxHelper=function(e,t){var i=t||8947848;this.object=e,this.box=new THREE.Box3,THREE.Mesh.call(this,new THREE.CubeGeometry(1,1,1),new THREE.MeshBasicMaterial({color:i,wireframe:!0}))},THREE.BoundingBoxHelper.prototype=Object.create(THREE.Mesh.prototype),THREE.BoundingBoxHelper.prototype.update=function(){this.box.setFromObject(this.object),this.box.size(this.scale),this.box.center(this.position)},THREE.CameraHelper=function(e){var i=new THREE.Geometry,t=new THREE.LineBasicMaterial({color:16777215,vertexColors:THREE.FaceColors}),r={},n=16755200,o=16711680,a=3355443;function s(e,t,i){l(e,i),l(t,i)}function l(e,t){i.vertices.push(new THREE.Vector3),i.colors.push(new THREE.Color(t)),void 0===r[e]&&(r[e]=[]),r[e].push(i.vertices.length-1)}s("n1","n2",n),s("n2","n4",n),s("n4","n3",n),s("n3","n1",n),s("f1","f2",n),s("f2","f4",n),s("f4","f3",n),s("f3","f1",n),s("n1","f1",n),s("n2","f2",n),s("n3","f3",n),s("n4","f4",n),s("p","n1",o),s("p","n2",o),s("p","n3",o),s("p","n4",o),s("u1","u2",43775),s("u2","u3",43775),s("u3","u1",43775),s("c","t",16777215),s("p","c",a),s("cn1","cn2",a),s("cn3","cn4",a),s("cf1","cf2",a),s("cf3","cf4",a),THREE.Line.call(this,i,t,THREE.LinePieces),this.camera=e,this.matrixWorld=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=r,this.update()},THREE.CameraHelper.prototype=Object.create(THREE.Line.prototype),THREE.CameraHelper.prototype.update=function(){var l=new THREE.Vector3,h=new THREE.Camera,c=new THREE.Projector;return function(){var s=this;function e(e,t,i,r){l.set(t,i,r),c.unprojectVector(l,h);var n=s.pointMap[e];if(void 0!==n)for(var o=0,a=n.length;o<a;o++)s.geometry.vertices[n[o]].copy(l)}h.projectionMatrix.copy(this.camera.projectionMatrix),e("c",0,0,-1),e("t",0,0,1),e("n1",-1,-1,-1),e("n2",1,-1,-1),e("n3",-1,1,-1),e("n4",1,1,-1),e("f1",-1,-1,1),e("f2",1,-1,1),e("f3",-1,1,1),e("f4",1,1,1),e("u1",.7,1.1,-1),e("u2",-.7,1.1,-1),e("u3",0,2,-1),e("cf1",-1,0,1),e("cf2",1,0,1),e("cf3",0,-1,1),e("cf4",0,1,1),e("cn1",-1,0,-1),e("cn2",1,0,-1),e("cn3",0,-1,-1),e("cn4",0,1,-1),this.geometry.verticesNeedUpdate=!0}}(),THREE.DirectionalLightHelper=function(e,t){THREE.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrixWorld=e.matrixWorld,this.matrixAutoUpdate=!1;var i=new THREE.PlaneGeometry(t,t),r=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});r.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.lightPlane=new THREE.Mesh(i,r),this.add(this.lightPlane),(i=new THREE.Geometry).vertices.push(new THREE.Vector3),i.vertices.push(new THREE.Vector3),i.computeLineDistances(),(r=new THREE.LineBasicMaterial({fog:!1})).color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine=new THREE.Line(i,r),this.add(this.targetLine),this.update()},THREE.DirectionalLightHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},THREE.DirectionalLightHelper.prototype.update=function(){var e=new THREE.Vector3;return function(){e.getPositionFromMatrix(this.light.matrixWorld).negate(),this.lightPlane.lookAt(e),this.lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine.geometry.vertices[1].copy(e),this.targetLine.geometry.verticesNeedUpdate=!0,this.targetLine.material.color.copy(this.lightPlane.material.color)}}(),THREE.FaceNormalsHelper=function(e,t,i,r){this.object=e,this.size=t||1;for(var n=i||16776960,o=r||1,a=new THREE.Geometry,s=0,l=this.object.geometry.faces.length;s<l;s++)a.vertices.push(new THREE.Vector3),a.vertices.push(new THREE.Vector3);THREE.Line.call(this,a,new THREE.LineBasicMaterial({color:n,linewidth:o}),THREE.LinePieces),this.matrixAutoUpdate=!1,this.normalMatrix=new THREE.Matrix3,this.update()},THREE.FaceNormalsHelper.prototype=Object.create(THREE.Line.prototype),THREE.FaceNormalsHelper.prototype.update=function(e){var l=new THREE.Vector3;return function(e){this.object.updateMatrixWorld(!0),this.normalMatrix.getNormalMatrix(this.object.matrixWorld);for(var t=this.geometry.vertices,i=this.object.geometry.faces,r=this.object.matrixWorld,n=0,o=i.length;n<o;n++){var a=i[n];l.copy(a.normal).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size);var s=2*n;t[s].copy(a.centroid).applyMatrix4(r),t[s+1].addVectors(t[s],l)}return this.geometry.verticesNeedUpdate=!0,this}}(),THREE.GridHelper=function(e,t){var i=new THREE.Geometry,r=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});this.color1=new THREE.Color(4473924),this.color2=new THREE.Color(8947848);for(var n=-e;n<=e;n+=t){i.vertices.push(new THREE.Vector3(-e,0,n),new THREE.Vector3(e,0,n),new THREE.Vector3(n,0,-e),new THREE.Vector3(n,0,e));var o=0===n?this.color1:this.color2;i.colors.push(o,o,o,o)}THREE.Line.call(this,i,r,THREE.LinePieces)},THREE.GridHelper.prototype=Object.create(THREE.Line.prototype),THREE.GridHelper.prototype.setColors=function(e,t){this.color1.set(e),this.color2.set(t),this.geometry.colorsNeedUpdate=!0},THREE.HemisphereLightHelper=function(e,t,i,r){THREE.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrixWorld=e.matrixWorld,this.matrixAutoUpdate=!1,this.colors=[new THREE.Color,new THREE.Color];var n=new THREE.SphereGeometry(t,4,2);n.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI/2));for(var o=0;o<8;o++)n.faces[o].color=this.colors[o<4?0:1];var a=new THREE.MeshBasicMaterial({vertexColors:THREE.FaceColors,wireframe:!0});this.lightSphere=new THREE.Mesh(n,a),this.add(this.lightSphere),this.update()},THREE.HemisphereLightHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.HemisphereLightHelper.prototype.dispose=function(){this.lightSphere.geometry.dispose(),this.lightSphere.material.dispose()},THREE.HemisphereLightHelper.prototype.update=function(){var e=new THREE.Vector3;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity),this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity),this.lightSphere.lookAt(e.getPositionFromMatrix(this.light.matrixWorld).negate()),this.lightSphere.geometry.colorsNeedUpdate=!0}}(),THREE.PointLightHelper=function(e,t){this.light=e,this.light.updateMatrixWorld();var i=new THREE.SphereGeometry(t,4,2),r=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});r.color.copy(this.light.color).multiplyScalar(this.light.intensity),THREE.Mesh.call(this,i,r),this.matrixWorld=this.light.matrixWorld,this.matrixAutoUpdate=!1},THREE.PointLightHelper.prototype=Object.create(THREE.Mesh.prototype),THREE.PointLightHelper.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},THREE.PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},THREE.SpotLightHelper=function(e){THREE.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrixWorld=e.matrixWorld,this.matrixAutoUpdate=!1;var t=new THREE.CylinderGeometry(0,1,1,8,1,!0);t.applyMatrix((new THREE.Matrix4).makeTranslation(0,-.5,0)),t.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI/2));var i=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});this.cone=new THREE.Mesh(t,i),this.add(this.cone),this.update()},THREE.SpotLightHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},THREE.SpotLightHelper.prototype.update=function(){var i=new THREE.Vector3,r=new THREE.Vector3;return function(){var e=this.light.distance?this.light.distance:1e4,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),i.getPositionFromMatrix(this.light.matrixWorld),r.getPositionFromMatrix(this.light.target.matrixWorld),this.cone.lookAt(r.sub(i)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}(),THREE.VertexNormalsHelper=function(e,t,i,r){this.object=e,this.size=t||1;for(var n=i||16711680,o=r||1,a=new THREE.Geometry,s=(e.geometry.vertices,e.geometry.faces),l=0,h=s.length;l<h;l++)for(var c=0,u=s[l].vertexNormals.length;c<u;c++)a.vertices.push(new THREE.Vector3),a.vertices.push(new THREE.Vector3);THREE.Line.call(this,a,new THREE.LineBasicMaterial({color:n,linewidth:o}),THREE.LinePieces),this.matrixAutoUpdate=!1,this.normalMatrix=new THREE.Matrix3,this.update()},THREE.VertexNormalsHelper.prototype=Object.create(THREE.Line.prototype),THREE.VertexNormalsHelper.prototype.update=function(e){var d=new THREE.Vector3;return function(e){var t=["a","b","c","d"];this.object.updateMatrixWorld(!0),this.normalMatrix.getNormalMatrix(this.object.matrixWorld);for(var i=this.geometry.vertices,r=this.object.geometry.vertices,n=this.object.geometry.faces,o=this.object.matrixWorld,a=0,s=0,l=n.length;s<l;s++)for(var h=n[s],c=0,u=h.vertexNormals.length;c<u;c++){var f=r[h[t[c]]],p=h.vertexNormals[c];i[a].copy(f).applyMatrix4(o),d.copy(p).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size),d.add(i[a]),i[a+=1].copy(d),a+=1}return this.geometry.verticesNeedUpdate=!0,this}}(),THREE.VertexTangentsHelper=function(e,t,i,r){this.object=e,this.size=t||1;for(var n=i||255,o=r||1,a=new THREE.Geometry,s=(e.geometry.vertices,e.geometry.faces),l=0,h=s.length;l<h;l++)for(var c=0,u=s[l].vertexTangents.length;c<u;c++)a.vertices.push(new THREE.Vector3),a.vertices.push(new THREE.Vector3);THREE.Line.call(this,a,new THREE.LineBasicMaterial({color:n,linewidth:o}),THREE.LinePieces),this.matrixAutoUpdate=!1,this.update()},THREE.VertexTangentsHelper.prototype=Object.create(THREE.Line.prototype),THREE.VertexTangentsHelper.prototype.update=function(e){var d=new THREE.Vector3;return function(e){var t=["a","b","c","d"];this.object.updateMatrixWorld(!0);for(var i=this.geometry.vertices,r=this.object.geometry.vertices,n=this.object.geometry.faces,o=this.object.matrixWorld,a=0,s=0,l=n.length;s<l;s++)for(var h=n[s],c=0,u=h.vertexTangents.length;c<u;c++){var f=r[h[t[c]]],p=h.vertexTangents[c];i[a].copy(f).applyMatrix4(o),d.copy(p).transformDirection(o).multiplyScalar(this.size),d.add(i[a]),i[a+=1].copy(d),a+=1}return this.geometry.verticesNeedUpdate=!0,this}}(),THREE.WireframeHelper=function(e){for(var t=[0,0],i={},r=function(e,t){return e-t},n=["a","b","c","d"],o=new THREE.Geometry,a=e.geometry.vertices,s=e.geometry.faces,l=0,h=s.length;l<h;l++)for(var c=s[l],u=0;u<3;u++){t[0]=c[n[u]],t[1]=c[n[(u+1)%3]],t.sort(r);var f=t.toString();void 0===i[f]&&(o.vertices.push(a[t[0]]),o.vertices.push(a[t[1]]),i[f]=!0)}THREE.Line.call(this,o,new THREE.LineBasicMaterial({color:16777215}),THREE.LinePieces),this.matrixAutoUpdate=!1,this.matrixWorld=e.matrixWorld},THREE.WireframeHelper.prototype=Object.create(THREE.Line.prototype),THREE.ImmediateRenderObject=function(){THREE.Object3D.call(this),this.render=function(e){}},THREE.ImmediateRenderObject.prototype=Object.create(THREE.Object3D.prototype),THREE.LensFlare=function(e,t,i,r,n){THREE.Object3D.call(this),this.lensFlares=[],this.positionScreen=new THREE.Vector3,(this.customUpdateCallback=void 0)!==e&&this.add(e,t,i,r,n)},THREE.LensFlare.prototype=Object.create(THREE.Object3D.prototype),THREE.LensFlare.prototype.add=function(e,t,i,r,n,o){void 0===t&&(t=-1),void 0===i&&(i=0),void 0===o&&(o=1),void 0===n&&(n=new THREE.Color(16777215)),void 0===r&&(r=THREE.NormalBlending),i=Math.min(i,Math.max(0,i)),this.lensFlares.push({texture:e,size:t,distance:i,x:0,y:0,z:0,scale:1,rotation:1,opacity:o,color:n,blending:r})},THREE.LensFlare.prototype.updateLensFlares=function(){var e,t,i=this.lensFlares.length,r=2*-this.positionScreen.x,n=2*-this.positionScreen.y;for(e=0;e<i;e++)(t=this.lensFlares[e]).x=this.positionScreen.x+r*t.distance,t.y=this.positionScreen.y+n*t.distance,t.wantedRotation=t.x*Math.PI*.25,t.rotation+=.25*(t.wantedRotation-t.rotation)},THREE.MorphBlendMesh=function(e,t){THREE.Mesh.call(this,e,t),this.animationsMap={},this.animationsList=[];var i=this.geometry.morphTargets.length,r=i-1,n=i/1;this.createAnimation("__default",0,r,n),this.setAnimationWeight("__default",1)},THREE.MorphBlendMesh.prototype=Object.create(THREE.Mesh.prototype),THREE.MorphBlendMesh.prototype.createAnimation=function(e,t,i,r){var n={startFrame:t,endFrame:i,length:i-t+1,fps:r,duration:(i-t)/r,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[e]=n,this.animationsList.push(n)},THREE.MorphBlendMesh.prototype.autoCreateAnimations=function(e){for(var t,i=/([a-z]+)(\d+)/,r={},n=this.geometry,o=0,a=n.morphTargets.length;o<a;o++){var s=n.morphTargets[o].name.match(i);if(s&&1<s.length){var l=s[1];s[2];r[l]||(r[l]={start:1/0,end:-1/0}),o<(h=r[l]).start&&(h.start=o),o>h.end&&(h.end=o),t||(t=l)}}for(var l in r){var h=r[l];this.createAnimation(l,h.start,h.end,e)}this.firstAnimation=t},THREE.MorphBlendMesh.prototype.setAnimationDirectionForward=function(e){var t=this.animationsMap[e];t&&(t.direction=1,t.directionBackwards=!1)},THREE.MorphBlendMesh.prototype.setAnimationDirectionBackward=function(e){var t=this.animationsMap[e];t&&(t.direction=-1,t.directionBackwards=!0)},THREE.MorphBlendMesh.prototype.setAnimationFPS=function(e,t){var i=this.animationsMap[e];i&&(i.fps=t,i.duration=(i.end-i.start)/i.fps)},THREE.MorphBlendMesh.prototype.setAnimationDuration=function(e,t){var i=this.animationsMap[e];i&&(i.duration=t,i.fps=(i.end-i.start)/i.duration)},THREE.MorphBlendMesh.prototype.setAnimationWeight=function(e,t){var i=this.animationsMap[e];i&&(i.weight=t)},THREE.MorphBlendMesh.prototype.setAnimationTime=function(e,t){var i=this.animationsMap[e];i&&(i.time=t)},THREE.MorphBlendMesh.prototype.getAnimationTime=function(e){var t=0,i=this.animationsMap[e];return i&&(t=i.time),t},THREE.MorphBlendMesh.prototype.getAnimationDuration=function(e){var t=-1,i=this.animationsMap[e];return i&&(t=i.duration),t},THREE.MorphBlendMesh.prototype.playAnimation=function(e){var t=this.animationsMap[e];t?(t.time=0,t.active=!0):console.warn("animation["+e+"] undefined")},THREE.MorphBlendMesh.prototype.stopAnimation=function(e){var t=this.animationsMap[e];t&&(t.active=!1)},THREE.MorphBlendMesh.prototype.update=function(e){for(var t=0,i=this.animationsList.length;t<i;t++){var r=this.animationsList[t];if(r.active){var n=r.duration/r.length;r.time+=r.direction*e,r.mirroredLoop?(r.time>r.duration||r.time<0)&&(r.direction*=-1,r.time>r.duration&&(r.time=r.duration,r.directionBackwards=!0),r.time<0&&(r.time=0,r.directionBackwards=!1)):(r.time=r.time%r.duration,r.time<0&&(r.time+=r.duration));var o=r.startFrame+THREE.Math.clamp(Math.floor(r.time/n),0,r.length-1),a=r.weight;o!==r.currentFrame&&(this.morphTargetInfluences[r.lastFrame]=0,this.morphTargetInfluences[r.currentFrame]=1*a,this.morphTargetInfluences[o]=0,r.lastFrame=r.currentFrame,r.currentFrame=o);var s=r.time%n/n;r.directionBackwards&&(s=1-s),this.morphTargetInfluences[r.currentFrame]=s*a,this.morphTargetInfluences[r.lastFrame]=(1-s)*a}}},THREE.LensFlarePlugin=function(){var _,x,i,R={};function r(e,t){var i=_.createProgram(),r=_.createShader(_.FRAGMENT_SHADER),n=_.createShader(_.VERTEX_SHADER),o="precision "+t+" float;\n";return _.shaderSource(r,o+e.fragmentShader),_.shaderSource(n,o+e.vertexShader),_.compileShader(r),_.compileShader(n),_.attachShader(i,r),_.attachShader(i,n),_.linkProgram(i),i}this.init=function(e){_=e.context,i=(x=e).getPrecision(),R.vertices=new Float32Array(16),R.faces=new Uint16Array(6);var t=0;R.vertices[t++]=-1,R.vertices[t++]=-1,R.vertices[t++]=0,R.vertices[t++]=0,R.vertices[t++]=1,R.vertices[t++]=-1,R.vertices[t++]=1,R.vertices[t++]=0,R.vertices[t++]=1,R.vertices[t++]=1,R.vertices[t++]=1,R.vertices[t++]=1,R.vertices[t++]=-1,R.vertices[t++]=1,R.vertices[t++]=0,R.vertices[t++]=1,t=0,R.faces[t++]=0,R.faces[t++]=1,R.faces[t++]=2,R.faces[t++]=0,R.faces[t++]=2,R.faces[t++]=3,R.vertexBuffer=_.createBuffer(),R.elementBuffer=_.createBuffer(),_.bindBuffer(_.ARRAY_BUFFER,R.vertexBuffer),_.bufferData(_.ARRAY_BUFFER,R.vertices,_.STATIC_DRAW),_.bindBuffer(_.ELEMENT_ARRAY_BUFFER,R.elementBuffer),_.bufferData(_.ELEMENT_ARRAY_BUFFER,R.faces,_.STATIC_DRAW),R.tempTexture=_.createTexture(),R.occlusionTexture=_.createTexture(),_.bindTexture(_.TEXTURE_2D,R.tempTexture),_.texImage2D(_.TEXTURE_2D,0,_.RGB,16,16,0,_.RGB,_.UNSIGNED_BYTE,null),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.NEAREST),_.bindTexture(_.TEXTURE_2D,R.occlusionTexture),_.texImage2D(_.TEXTURE_2D,0,_.RGBA,16,16,0,_.RGBA,_.UNSIGNED_BYTE,null),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.NEAREST),_.getParameter(_.MAX_VERTEX_TEXTURE_IMAGE_UNITS)<=0?(R.hasVertexTexture=!1,R.program=r(THREE.ShaderFlares.lensFlare,i)):(R.hasVertexTexture=!0,R.program=r(THREE.ShaderFlares.lensFlareVertexTexture,i)),R.attributes={},R.uniforms={},R.attributes.vertex=_.getAttribLocation(R.program,"position"),R.attributes.uv=_.getAttribLocation(R.program,"uv"),R.uniforms.renderType=_.getUniformLocation(R.program,"renderType"),R.uniforms.map=_.getUniformLocation(R.program,"map"),R.uniforms.occlusionMap=_.getUniformLocation(R.program,"occlusionMap"),R.uniforms.opacity=_.getUniformLocation(R.program,"opacity"),R.uniforms.color=_.getUniformLocation(R.program,"color"),R.uniforms.scale=_.getUniformLocation(R.program,"scale"),R.uniforms.rotation=_.getUniformLocation(R.program,"rotation"),R.uniforms.screenPosition=_.getUniformLocation(R.program,"screenPosition")},this.render=function(e,t,i,r){var n=e.__webglFlares,o=n.length;if(o){var a,s,l,h,c,u=new THREE.Vector3,f=r/i,p=.5*i,d=.5*r,m=16/r,g=new THREE.Vector2(m*f,m),E=new THREE.Vector3(1,1,0),v=new THREE.Vector2(1,1),y=R.uniforms,T=R.attributes;for(_.useProgram(R.program),_.enableVertexAttribArray(R.attributes.vertex),_.enableVertexAttribArray(R.attributes.uv),_.uniform1i(y.occlusionMap,0),_.uniform1i(y.map,1),_.bindBuffer(_.ARRAY_BUFFER,R.vertexBuffer),_.vertexAttribPointer(T.vertex,2,_.FLOAT,!1,16,0),_.vertexAttribPointer(T.uv,2,_.FLOAT,!1,16,8),_.bindBuffer(_.ELEMENT_ARRAY_BUFFER,R.elementBuffer),_.disable(_.CULL_FACE),_.depthMask(!1),a=0;a<o;a++)if(m=16/r,g.set(m*f,m),h=n[a],u.set(h.matrixWorld.elements[12],h.matrixWorld.elements[13],h.matrixWorld.elements[14]),u.applyMatrix4(t.matrixWorldInverse),u.applyProjection(t.projectionMatrix),E.copy(u),v.x=E.x*p+p,v.y=E.y*d+d,R.hasVertexTexture||0<v.x&&v.x<i&&0<v.y&&v.y<r)for(_.activeTexture(_.TEXTURE1),_.bindTexture(_.TEXTURE_2D,R.tempTexture),_.copyTexImage2D(_.TEXTURE_2D,0,_.RGB,v.x-8,v.y-8,16,16,0),_.uniform1i(y.renderType,0),_.uniform2f(y.scale,g.x,g.y),_.uniform3f(y.screenPosition,E.x,E.y,E.z),_.disable(_.BLEND),_.enable(_.DEPTH_TEST),_.drawElements(_.TRIANGLES,6,_.UNSIGNED_SHORT,0),_.activeTexture(_.TEXTURE0),_.bindTexture(_.TEXTURE_2D,R.occlusionTexture),_.copyTexImage2D(_.TEXTURE_2D,0,_.RGBA,v.x-8,v.y-8,16,16,0),_.uniform1i(y.renderType,1),_.disable(_.DEPTH_TEST),_.activeTexture(_.TEXTURE1),_.bindTexture(_.TEXTURE_2D,R.tempTexture),_.drawElements(_.TRIANGLES,6,_.UNSIGNED_SHORT,0),h.positionScreen.copy(E),h.customUpdateCallback?h.customUpdateCallback(h):h.updateLensFlares(),_.uniform1i(y.renderType,2),_.enable(_.BLEND),s=0,l=h.lensFlares.length;s<l;s++).001<(c=h.lensFlares[s]).opacity&&.001<c.scale&&(E.x=c.x,E.y=c.y,E.z=c.z,m=c.size*c.scale/r,g.x=m*f,g.y=m,_.uniform3f(y.screenPosition,E.x,E.y,E.z),_.uniform2f(y.scale,g.x,g.y),_.uniform1f(y.rotation,c.rotation),_.uniform1f(y.opacity,c.opacity),_.uniform3f(y.color,c.color.r,c.color.g,c.color.b),x.setBlending(c.blending,c.blendEquation,c.blendSrc,c.blendDst),x.setTexture(c.texture,1),_.drawElements(_.TRIANGLES,6,_.UNSIGNED_SHORT,0));_.enable(_.CULL_FACE),_.enable(_.DEPTH_TEST),_.depthMask(!0)}}},THREE.ShadowMapPlugin=function(){var M,C,A,P,D,L,F=new THREE.Frustum,O=new THREE.Matrix4,s=new THREE.Vector3,l=new THREE.Vector3,k=new THREE.Vector3;function V(e,t){var i=new THREE.DirectionalLight;i.isVirtual=!0,i.onlyShadow=!0,i.castShadow=!0,i.shadowCameraNear=e.shadowCameraNear,i.shadowCameraFar=e.shadowCameraFar,i.shadowCameraLeft=e.shadowCameraLeft,i.shadowCameraRight=e.shadowCameraRight,i.shadowCameraBottom=e.shadowCameraBottom,i.shadowCameraTop=e.shadowCameraTop,i.shadowCameraVisible=e.shadowCameraVisible,i.shadowDarkness=e.shadowDarkness,i.shadowBias=e.shadowCascadeBias[t],i.shadowMapWidth=e.shadowCascadeWidth[t],i.shadowMapHeight=e.shadowCascadeHeight[t],i.pointsWorld=[],i.pointsFrustum=[];for(var r=i.pointsWorld,n=i.pointsFrustum,o=0;o<8;o++)r[o]=new THREE.Vector3,n[o]=new THREE.Vector3;var a=e.shadowCascadeNearZ[t],s=e.shadowCascadeFarZ[t];return n[0].set(-1,-1,a),n[1].set(1,-1,a),n[2].set(-1,1,a),n[3].set(1,1,a),n[4].set(-1,-1,s),n[5].set(1,-1,s),n[6].set(-1,1,s),n[7].set(1,1,s),i}function I(e,t){var i=e.shadowCascadeArray[t];i.position.copy(e.position),i.target.position.copy(e.target.position),i.lookAt(i.target),i.shadowCameraVisible=e.shadowCameraVisible,i.shadowDarkness=e.shadowDarkness,i.shadowBias=e.shadowCascadeBias[t];var r=e.shadowCascadeNearZ[t],n=e.shadowCascadeFarZ[t],o=i.pointsFrustum;o[0].z=r,o[1].z=r,o[2].z=r,o[3].z=r,o[4].z=n,o[5].z=n,o[6].z=n,o[7].z=n}function N(e,t){var i=t.shadowCamera,r=t.pointsFrustum,n=t.pointsWorld;s.set(1/0,1/0,1/0),l.set(-1/0,-1/0,-1/0);for(var o=0;o<8;o++){var a=n[o];a.copy(r[o]),THREE.ShadowMapPlugin.__projector.unprojectVector(a,e),a.applyMatrix4(i.matrixWorldInverse),a.x<s.x&&(s.x=a.x),a.x>l.x&&(l.x=a.x),a.y<s.y&&(s.y=a.y),a.y>l.y&&(l.y=a.y),a.z<s.z&&(s.z=a.z),a.z>l.z&&(l.z=a.z)}i.left=s.x,i.right=l.x,i.top=l.y,i.bottom=s.y,i.updateProjectionMatrix()}this.init=function(e){M=e.context,C=e;var t=THREE.ShaderLib.depthRGBA,i=THREE.UniformsUtils.clone(t.uniforms);A=new THREE.ShaderMaterial({fragmentShader:t.fragmentShader,vertexShader:t.vertexShader,uniforms:i}),P=new THREE.ShaderMaterial({fragmentShader:t.fragmentShader,vertexShader:t.vertexShader,uniforms:i,morphTargets:!0}),D=new THREE.ShaderMaterial({fragmentShader:t.fragmentShader,vertexShader:t.vertexShader,uniforms:i,skinning:!0}),L=new THREE.ShaderMaterial({fragmentShader:t.fragmentShader,vertexShader:t.vertexShader,uniforms:i,morphTargets:!0,skinning:!0}),A._shadowPass=!0,P._shadowPass=!0,D._shadowPass=!0,L._shadowPass=!0},this.render=function(e,t){C.shadowMapEnabled&&C.shadowMapAutoUpdate&&this.update(e,t)},this.update=function(e,t){var i,r,n,o,a,s,l,h,c,u,f,p,d,m,g,E=[],v=0;for(M.clearColor(1,1,1,1),M.disable(M.BLEND),M.enable(M.CULL_FACE),M.frontFace(M.CCW),C.shadowMapCullFace===THREE.CullFaceFront?M.cullFace(M.FRONT):M.cullFace(M.BACK),C.setDepthTest(!0),i=0,r=e.__lights.length;i<r;i++)if((d=e.__lights[i]).castShadow)if(d instanceof THREE.DirectionalLight&&d.shadowCascade)for(a=0;a<d.shadowCascadeCount;a++){var y;if(d.shadowCascadeArray[a])y=d.shadowCascadeArray[a];else{(y=V(d,a)).originalCamera=t;var T=new THREE.Gyroscope;T.position=d.shadowCascadeOffset,T.add(y),T.add(y.target),t.add(T),d.shadowCascadeArray[a]=y,console.log("Created virtualLight",y)}I(d,a),E[v]=y,v++}else E[v]=d,v++;for(i=0,r=E.length;i<r;i++){if(!(d=E[i]).shadowMap){var _=THREE.LinearFilter;C.shadowMapType===THREE.PCFSoftShadowMap&&(_=THREE.NearestFilter);var x={minFilter:_,magFilter:_,format:THREE.RGBAFormat};d.shadowMap=new THREE.WebGLRenderTarget(d.shadowMapWidth,d.shadowMapHeight,x),d.shadowMapSize=new THREE.Vector2(d.shadowMapWidth,d.shadowMapHeight),d.shadowMatrix=new THREE.Matrix4}if(!d.shadowCamera){if(d instanceof THREE.SpotLight)d.shadowCamera=new THREE.PerspectiveCamera(d.shadowCameraFov,d.shadowMapWidth/d.shadowMapHeight,d.shadowCameraNear,d.shadowCameraFar);else{if(!(d instanceof THREE.DirectionalLight)){console.error("Unsupported light type for shadow");continue}d.shadowCamera=new THREE.OrthographicCamera(d.shadowCameraLeft,d.shadowCameraRight,d.shadowCameraTop,d.shadowCameraBottom,d.shadowCameraNear,d.shadowCameraFar)}e.add(d.shadowCamera),!0===e.autoUpdate&&e.updateMatrixWorld()}for(d.shadowCameraVisible&&!d.cameraHelper&&(d.cameraHelper=new THREE.CameraHelper(d.shadowCamera),d.shadowCamera.add(d.cameraHelper)),d.isVirtual&&y.originalCamera==t&&N(t,d),s=d.shadowMap,l=d.shadowMatrix,(h=d.shadowCamera).position.getPositionFromMatrix(d.matrixWorld),k.getPositionFromMatrix(d.target.matrixWorld),h.lookAt(k),h.updateMatrixWorld(),h.matrixWorldInverse.getInverse(h.matrixWorld),d.cameraHelper&&(d.cameraHelper.visible=d.shadowCameraVisible),d.shadowCameraVisible&&d.cameraHelper.update(),l.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),l.multiply(h.projectionMatrix),l.multiply(h.matrixWorldInverse),O.multiplyMatrices(h.projectionMatrix,h.matrixWorldInverse),F.setFromMatrix(O),C.setRenderTarget(s),C.clear(),n=0,o=(m=e.__webglObjects).length;n<o;n++)p=(f=m[n]).object,f.render=!1,p.visible&&p.castShadow&&((p instanceof THREE.Mesh||p instanceof THREE.ParticleSystem)&&p.frustumCulled&&!F.intersectsObject(p)||(p._modelViewMatrix.multiplyMatrices(h.matrixWorldInverse,p.matrixWorld),f.render=!0));var R,b,w;for(n=0,o=m.length;n<o;n++)(f=m[n]).render&&(p=f.object,c=f.buffer,R=(g=p).material instanceof THREE.MeshFaceMaterial?g.material.materials[0]:g.material,b=0<p.geometry.morphTargets.length&&R.morphTargets,w=p instanceof THREE.SkinnedMesh&&R.skinning,u=p.customDepthMaterial?p.customDepthMaterial:w?b?L:D:b?P:A,c instanceof THREE.BufferGeometry?C.renderBufferDirect(h,e.__lights,null,u,c,p):C.renderBuffer(h,e.__lights,null,u,c,p));for(n=0,o=(m=e.__webglObjectsImmediate).length;n<o;n++)(p=(f=m[n]).object).visible&&p.castShadow&&(p._modelViewMatrix.multiplyMatrices(h.matrixWorldInverse,p.matrixWorld),C.renderImmediateObject(h,e.__lights,null,A,p))}var H=C.getClearColor(),S=C.getClearAlpha();M.clearColor(H.r,H.g,H.b,S),M.enable(M.BLEND),C.shadowMapCullFace===THREE.CullFaceFront&&M.cullFace(M.BACK)}},THREE.ShadowMapPlugin.__projector=new THREE.Projector,THREE.SpritePlugin=function(){var T,_,l,x={};function R(e,t){return e.z!==t.z?t.z-e.z:t.id-e.id}this.init=function(e){T=e.context,l=(_=e).getPrecision(),x.vertices=new Float32Array(16),x.faces=new Uint16Array(6);var t,i,r,n,o,a,s=0;x.vertices[s++]=-1,x.vertices[s++]=-1,x.vertices[s++]=0,x.vertices[s++]=0,x.vertices[s++]=1,x.vertices[s++]=-1,x.vertices[s++]=1,x.vertices[s++]=0,x.vertices[s++]=1,x.vertices[s++]=1,x.vertices[s++]=1,x.vertices[s++]=1,x.vertices[s++]=-1,x.vertices[s++]=1,x.vertices[s++]=0,x.vertices[s++]=1,s=0,x.faces[s++]=0,x.faces[s++]=1,x.faces[s++]=2,x.faces[s++]=0,x.faces[s++]=2,x.faces[s++]=3,x.vertexBuffer=T.createBuffer(),x.elementBuffer=T.createBuffer(),T.bindBuffer(T.ARRAY_BUFFER,x.vertexBuffer),T.bufferData(T.ARRAY_BUFFER,x.vertices,T.STATIC_DRAW),T.bindBuffer(T.ELEMENT_ARRAY_BUFFER,x.elementBuffer),T.bufferData(T.ELEMENT_ARRAY_BUFFER,x.faces,T.STATIC_DRAW),x.program=(t=THREE.ShaderSprite.sprite,i=l,r=T.createProgram(),n=T.createShader(T.FRAGMENT_SHADER),o=T.createShader(T.VERTEX_SHADER),a="precision "+i+" float;\n",T.shaderSource(n,a+t.fragmentShader),T.shaderSource(o,a+t.vertexShader),T.compileShader(n),T.compileShader(o),T.attachShader(r,n),T.attachShader(r,o),T.linkProgram(r),r),x.attributes={},x.uniforms={},x.attributes.position=T.getAttribLocation(x.program,"position"),x.attributes.uv=T.getAttribLocation(x.program,"uv"),x.uniforms.uvOffset=T.getUniformLocation(x.program,"uvOffset"),x.uniforms.uvScale=T.getUniformLocation(x.program,"uvScale"),x.uniforms.rotation=T.getUniformLocation(x.program,"rotation"),x.uniforms.scale=T.getUniformLocation(x.program,"scale"),x.uniforms.alignment=T.getUniformLocation(x.program,"alignment"),x.uniforms.color=T.getUniformLocation(x.program,"color"),x.uniforms.map=T.getUniformLocation(x.program,"map"),x.uniforms.opacity=T.getUniformLocation(x.program,"opacity"),x.uniforms.useScreenCoordinates=T.getUniformLocation(x.program,"useScreenCoordinates"),x.uniforms.sizeAttenuation=T.getUniformLocation(x.program,"sizeAttenuation"),x.uniforms.screenPosition=T.getUniformLocation(x.program,"screenPosition"),x.uniforms.modelViewMatrix=T.getUniformLocation(x.program,"modelViewMatrix"),x.uniforms.projectionMatrix=T.getUniformLocation(x.program,"projectionMatrix"),x.uniforms.fogType=T.getUniformLocation(x.program,"fogType"),x.uniforms.fogDensity=T.getUniformLocation(x.program,"fogDensity"),x.uniforms.fogNear=T.getUniformLocation(x.program,"fogNear"),x.uniforms.fogFar=T.getUniformLocation(x.program,"fogFar"),x.uniforms.fogColor=T.getUniformLocation(x.program,"fogColor"),x.uniforms.alphaTest=T.getUniformLocation(x.program,"alphaTest")},this.render=function(e,t,i,r){var n=e.__webglSprites,o=n.length;if(o){var a=x.attributes,s=x.uniforms,l=r/i,h=.5*i,c=.5*r;T.useProgram(x.program),T.enableVertexAttribArray(a.position),T.enableVertexAttribArray(a.uv),T.disable(T.CULL_FACE),T.enable(T.BLEND),T.bindBuffer(T.ARRAY_BUFFER,x.vertexBuffer),T.vertexAttribPointer(a.position,2,T.FLOAT,!1,16,0),T.vertexAttribPointer(a.uv,2,T.FLOAT,!1,16,8),T.bindBuffer(T.ELEMENT_ARRAY_BUFFER,x.elementBuffer),T.uniformMatrix4fv(s.projectionMatrix,!1,t.projectionMatrix.elements),T.activeTexture(T.TEXTURE0),T.uniform1i(s.map,0);var u=0,f=0,p=e.fog;p?(T.uniform3f(s.fogColor,p.color.r,p.color.g,p.color.b),p instanceof THREE.Fog?(T.uniform1f(s.fogNear,p.near),T.uniform1f(s.fogFar,p.far),T.uniform1i(s.fogType,1),f=u=1):p instanceof THREE.FogExp2&&(T.uniform1f(s.fogDensity,p.density),T.uniform1i(s.fogType,2),f=u=2)):(T.uniform1i(s.fogType,0),f=u=0);var d,m,g,E,v,y=[];for(d=0;d<o;d++)g=(m=n[d]).material,m.visible&&0!==g.opacity&&(g.useScreenCoordinates?m.z=-m.position.z:(m._modelViewMatrix.multiplyMatrices(t.matrixWorldInverse,m.matrixWorld),m.z=-m._modelViewMatrix.elements[14]));for(n.sort(R),d=0;d<o;d++)g=(m=n[d]).material,m.visible&&0!==g.opacity&&g.map&&g.map.image&&g.map.image.width&&(T.uniform1f(s.alphaTest,g.alphaTest),!0===g.useScreenCoordinates?(T.uniform1i(s.useScreenCoordinates,1),T.uniform3f(s.screenPosition,(m.position.x*_.devicePixelRatio-h)/h,(c-m.position.y*_.devicePixelRatio)/c,Math.max(0,Math.min(1,m.position.z))),y[0]=_.devicePixelRatio,y[1]=_.devicePixelRatio):(T.uniform1i(s.useScreenCoordinates,0),T.uniform1i(s.sizeAttenuation,g.sizeAttenuation?1:0),T.uniformMatrix4fv(s.modelViewMatrix,!1,m._modelViewMatrix.elements),y[0]=1,y[1]=1),u!==(v=e.fog&&g.fog?f:0)&&(T.uniform1i(s.fogType,v),u=v),E=1/(g.scaleByViewport?r:1),y[0]*=E*l*m.scale.x,y[1]*=E*m.scale.y,T.uniform2f(s.uvScale,g.uvScale.x,g.uvScale.y),T.uniform2f(s.uvOffset,g.uvOffset.x,g.uvOffset.y),T.uniform2f(s.alignment,g.alignment.x,g.alignment.y),T.uniform1f(s.opacity,g.opacity),T.uniform3f(s.color,g.color.r,g.color.g,g.color.b),T.uniform1f(s.rotation,m.rotation),T.uniform2fv(s.scale,y),_.setBlending(g.blending,g.blendEquation,g.blendSrc,g.blendDst),_.setDepthTest(g.depthTest),_.setDepthWrite(g.depthWrite),_.setTexture(g.map,0),T.drawElements(T.TRIANGLES,6,T.UNSIGNED_SHORT,0));T.enable(T.CULL_FACE)}}},THREE.DepthPassPlugin=function(){this.enabled=!1,this.renderTarget=null;var m,g,E,v,y,T,_=new THREE.Frustum,x=new THREE.Matrix4;this.init=function(e){m=e.context,g=e;var t=THREE.ShaderLib.depthRGBA,i=THREE.UniformsUtils.clone(t.uniforms);E=new THREE.ShaderMaterial({fragmentShader:t.fragmentShader,vertexShader:t.vertexShader,uniforms:i}),v=new THREE.ShaderMaterial({fragmentShader:t.fragmentShader,vertexShader:t.vertexShader,uniforms:i,morphTargets:!0}),y=new THREE.ShaderMaterial({fragmentShader:t.fragmentShader,vertexShader:t.vertexShader,uniforms:i,skinning:!0}),T=new THREE.ShaderMaterial({fragmentShader:t.fragmentShader,vertexShader:t.vertexShader,uniforms:i,morphTargets:!0,skinning:!0}),E._shadowPass=!0,v._shadowPass=!0,y._shadowPass=!0,T._shadowPass=!0},this.render=function(e,t){this.enabled&&this.update(e,t)},this.update=function(e,t){var i,r,n,o,a,s,l,h,c,u,f;for(m.clearColor(1,1,1,1),m.disable(m.BLEND),g.setDepthTest(!0),!0===e.autoUpdate&&e.updateMatrixWorld(),t.matrixWorldInverse.getInverse(t.matrixWorld),x.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),_.setFromMatrix(x),g.setRenderTarget(this.renderTarget),g.clear(),i=0,r=(l=e.__webglObjects).length;i<r;i++)s=(a=l[i]).object,a.render=!1,s.visible&&((s instanceof THREE.Mesh||s instanceof THREE.ParticleSystem)&&s.frustumCulled&&!_.intersectsObject(s)||(s._modelViewMatrix.multiplyMatrices(t.matrixWorldInverse,s.matrixWorld),a.render=!0));for(i=0,r=l.length;i<r;i++)if((a=l[i]).render){if(s=a.object,n=a.buffer,s instanceof THREE.ParticleSystem&&!s.customDepthMaterial)continue;(h=(f=s).material instanceof THREE.MeshFaceMaterial?f.material.materials[0]:f.material)&&g.setMaterialFaces(s.material),c=0<s.geometry.morphTargets.length&&h.morphTargets,u=s instanceof THREE.SkinnedMesh&&h.skinning,o=s.customDepthMaterial?s.customDepthMaterial:u?c?T:y:c?v:E,n instanceof THREE.BufferGeometry?g.renderBufferDirect(t,e.__lights,null,o,n,s):g.renderBuffer(t,e.__lights,null,o,n,s)}for(i=0,r=(l=e.__webglObjectsImmediate).length;i<r;i++)(s=(a=l[i]).object).visible&&(s._modelViewMatrix.multiplyMatrices(t.matrixWorldInverse,s.matrixWorld),g.renderImmediateObject(t,e.__lights,null,E,s));var p=g.getClearColor(),d=g.getClearAlpha();m.clearColor(p.r,p.g,p.b,d),m.enable(m.BLEND)}},THREE.ShaderFlares={lensFlareVertexTexture:{vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")},lensFlare:{vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uv;","vec2 pos = position;","if( renderType == 2 ) {","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["precision mediump float;","uniform lowp int renderType;","uniform sampler2D map;","uniform sampler2D occlusionMap;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","void main() {","if( renderType == 0 ) {","gl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );","} else if( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","float visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;","visibility = ( 1.0 - visibility / 4.0 );","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * visibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")}},THREE.ShaderSprite={sprite:{vertexShader:["uniform int useScreenCoordinates;","uniform int sizeAttenuation;","uniform vec3 screenPosition;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 alignment;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position + alignment;","vec2 rotatedPosition;","rotatedPosition.x = ( cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y ) * scale.x;","rotatedPosition.y = ( sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y ) * scale.y;","vec4 finalPosition;","if( useScreenCoordinates != 0 ) {","finalPosition = vec4( screenPosition.xy + rotatedPosition, screenPosition.z, 1.0 );","} else {","finalPosition = projectionMatrix * modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition * ( sizeAttenuation == 1 ? 1.0 : finalPosition.z );","}","gl_Position = finalPosition;","}"].join("\n"),fragmentShader:["uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")}};var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";var e,l,h,t,R,_,x,b,E,i,v,w,y,T,p,d,g,r;_gsScope._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(r,c,v){var g=function(e){var t,i=[],r=e.length;for(t=0;t!==r;i.push(e[t++]));return i},E=function(e,t,i){var r,n,o=e.cycle;for(r in o)n=o[r],e[r]="function"==typeof n?n(i,t[i]):n[i%n.length];delete e.cycle},y=function(e,t,i){v.call(this,e,t,i),this._cycle=0,this._yoyo=!0===this.vars.yoyo||!!this.vars.yoyoEase,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._repeat&&this._uncache(!0),this.render=y.prototype.render},T=1e-10,_=v._internals,x=_.isSelector,R=_.isArray,e=y.prototype=v.to({},.1,{}),b=[];y.version="2.0.2",e.constructor=y,e.kill()._gc=!1,y.killTweensOf=y.killDelayedCallsTo=v.killTweensOf,y.getTweensOf=v.getTweensOf,y.lagSmoothing=v.lagSmoothing,y.ticker=v.ticker,y.render=v.render,e.invalidate=function(){return this._yoyo=!0===this.vars.yoyo||!!this.vars.yoyoEase,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._yoyoEase=null,this._uncache(!0),v.prototype.invalidate.call(this)},e.updateTo=function(e,t){var i,r=this.ratio,n=this.vars.immediateRender||e.immediateRender;for(i in t&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay)),e)this.vars[i]=e[i];if(this._initted||n)if(t)this._initted=!1,n&&this.render(0,!0,!0);else if(this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&v._onPluginEvent("_onDisable",this),.998<this._time/this._duration){var o=this._totalTime;this.render(0,!0,!1),this._initted=!1,this.render(o,!0,!1)}else if(this._initted=!1,this._init(),0<this._time||n)for(var a,s=1/(1-r),l=this._firstPT;l;)a=l.s+l.c,l.c*=s,l.s=a-l.c,l=l._next;return this},e.render=function(e,t,i){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var r,n,o,a,s,l,h,c,u,f=this._dirty?this.totalDuration():this._totalDuration,p=this._time,d=this._totalTime,m=this._cycle,g=this._duration,E=this._rawPrevTime;if(f-1e-7<=e&&0<=e?(this._totalTime=f,this._cycle=this._repeat,this._yoyo&&0!=(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=g,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(r=!0,n="onComplete",i=i||this._timeline.autoRemoveChildren),0===g&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(e=0),(E<0||e<=0&&-1e-7<=e||E===T&&"isPause"!==this.data)&&E!==e&&(i=!0,T<E&&(n="onReverseComplete")),this._rawPrevTime=c=!t||e||E===e?e:T)):e<1e-7?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==d||0===g&&0<E)&&(n="onReverseComplete",r=this._reversed),e<0&&(this._active=!1,0===g&&(this._initted||!this.vars.lazy||i)&&(0<=E&&(i=!0),this._rawPrevTime=c=!t||e||E===e?e:T)),this._initted||(i=!0)):(this._totalTime=this._time=e,0!==this._repeat&&(a=g+this._repeatDelay,this._cycle=this._totalTime/a>>0,0!==this._cycle&&this._cycle===this._totalTime/a&&d<=e&&this._cycle--,this._time=this._totalTime-this._cycle*a,this._yoyo&&0!=(1&this._cycle)&&(this._time=g-this._time,(u=this._yoyoEase||this.vars.yoyoEase)&&(this._yoyoEase||(!0!==u||this._initted?this._yoyoEase=u=!0===u?this._ease:u instanceof Ease?u:Ease.map[u]:(u=this.vars.ease,this._yoyoEase=u=u?u instanceof Ease?u:"function"==typeof u?new Ease(u,this.vars.easeParams):Ease.map[u]||v.defaultEase:v.defaultEase)),this.ratio=u?1-u.getRatio((g-this._time)/g):0)),this._time>g?this._time=g:this._time<0&&(this._time=0)),this._easeType&&!u?(s=this._time/g,(1===(l=this._easeType)||3===l&&.5<=s)&&(s=1-s),3===l&&(s*=2),1===(h=this._easePower)?s*=s:2===h?s*=s*s:3===h?s*=s*s*s:4===h&&(s*=s*s*s*s),1===l?this.ratio=1-s:2===l?this.ratio=s:this._time/g<.5?this.ratio=s/2:this.ratio=1-s/2):u||(this.ratio=this._ease.getRatio(this._time/g))),p!==this._time||i||m!==this._cycle){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration))return this._time=p,this._totalTime=d,this._rawPrevTime=E,this._cycle=m,_.lazyTweens.push(this),void(this._lazy=[e,t]);!this._time||r||u?r&&this._ease._calcEnd&&!u&&(this.ratio=this._ease.getRatio(0===this._time?0:1)):this.ratio=this._ease.getRatio(this._time/g)}for(!1!==this._lazy&&(this._lazy=!1),this._active||!this._paused&&this._time!==p&&0<=e&&(this._active=!0),0===d&&(2===this._initted&&0<e&&this._init(),this._startAt&&(0<=e?this._startAt.render(e,!0,i):n||(n="_dummyGS")),this.vars.onStart&&(0!==this._totalTime||0===g)&&(t||this._callback("onStart"))),o=this._firstPT;o;)o.f?o.t[o.p](o.c*this.ratio+o.s):o.t[o.p]=o.c*this.ratio+o.s,o=o._next;this._onUpdate&&(e<0&&this._startAt&&this._startTime&&this._startAt.render(e,!0,i),t||(this._totalTime!==d||n)&&this._callback("onUpdate")),this._cycle!==m&&(t||this._gc||this.vars.onRepeat&&this._callback("onRepeat")),n&&(!this._gc||i)&&(e<0&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(e,!0,i),r&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[n]&&this._callback(n),0===g&&this._rawPrevTime===T&&c!==T&&(this._rawPrevTime=0))}else d!==this._totalTime&&this._onUpdate&&(t||this._callback("onUpdate"))},y.to=function(e,t,i){return new y(e,t,i)},y.from=function(e,t,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new y(e,t,i)},y.fromTo=function(e,t,i,r){return r.startAt=i,r.immediateRender=0!=r.immediateRender&&0!=i.immediateRender,new y(e,t,r)},y.staggerTo=y.allTo=function(e,t,i,r,n,o,a){r=r||0;var s,l,h,c,u=0,f=[],p=function(){i.onComplete&&i.onComplete.apply(i.onCompleteScope||this,arguments),n.apply(a||i.callbackScope||this,o||b)},d=i.cycle,m=i.startAt&&i.startAt.cycle;for(R(e)||("string"==typeof e&&(e=v.selector(e)||e),x(e)&&(e=g(e))),e=e||[],r<0&&((e=g(e)).reverse(),r*=-1),s=e.length-1,h=0;h<=s;h++){for(c in l={},i)l[c]=i[c];if(d&&(E(l,e,h),null!=l.duration&&(t=l.duration,delete l.duration)),m){for(c in m=l.startAt={},i.startAt)m[c]=i.startAt[c];E(l.startAt,e,h)}l.delay=u+(l.delay||0),h===s&&n&&(l.onComplete=p),f[h]=new y(e[h],t,l),u+=r}return f},y.staggerFrom=y.allFrom=function(e,t,i,r,n,o,a){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,y.staggerTo(e,t,i,r,n,o,a)},y.staggerFromTo=y.allFromTo=function(e,t,i,r,n,o,a,s){return r.startAt=i,r.immediateRender=0!=r.immediateRender&&0!=i.immediateRender,y.staggerTo(e,t,r,n,o,a,s)},y.delayedCall=function(e,t,i,r,n){return new y(t,0,{delay:e,onComplete:t,onCompleteParams:i,callbackScope:r,onReverseComplete:t,onReverseCompleteParams:i,immediateRender:!1,useFrames:n,overwrite:0})},y.set=function(e,t){return new y(e,0,t)},y.isTweening=function(e){return 0<v.getTweensOf(e,!0).length};var o=function(e,t){for(var i=[],r=0,n=e._first;n;)n instanceof v?i[r++]=n:(t&&(i[r++]=n),r=(i=i.concat(o(n,t))).length),n=n._next;return i},u=y.getAllTweens=function(e){return o(r._rootTimeline,e).concat(o(r._rootFramesTimeline,e))};y.killAll=function(e,t,i,r){null==t&&(t=!0),null==i&&(i=!0);var n,o,a,s=u(0!=r),l=s.length,h=t&&i&&r;for(a=0;a<l;a++)o=s[a],(h||o instanceof c||(n=o.target===o.vars.onComplete)&&i||t&&!n)&&(e?o.totalTime(o._reversed?0:o.totalDuration()):o._enabled(!1,!1))},y.killChildTweensOf=function(e,t){if(null!=e){var i,r,n,o,a,s=_.tweenLookup;if("string"==typeof e&&(e=v.selector(e)||e),x(e)&&(e=g(e)),R(e))for(o=e.length;-1<--o;)y.killChildTweensOf(e[o],t);else{for(n in i=[],s)for(r=s[n].target.parentNode;r;)r===e&&(i=i.concat(s[n].tweens)),r=r.parentNode;for(a=i.length,o=0;o<a;o++)t&&i[o].totalTime(i[o].totalDuration()),i[o]._enabled(!1,!1)}}};var n=function(e,t,i,r){t=!1!==t,i=!1!==i;for(var n,o,a=u(r=!1!==r),s=t&&i&&r,l=a.length;-1<--l;)o=a[l],(s||o instanceof c||(n=o.target===o.vars.onComplete)&&i||t&&!n)&&o.paused(e)};return y.pauseAll=function(e,t,i){n(!0,e,t,i)},y.resumeAll=function(e,t,i){n(!1,e,t,i)},y.globalTimeScale=function(e){var t=r._rootTimeline,i=v.ticker.time;return arguments.length?(e=e||T,t._startTime=i-(i-t._startTime)*t._timeScale/e,t=r._rootFramesTimeline,i=v.ticker.frame,t._startTime=i-(i-t._startTime)*t._timeScale/e,t._timeScale=r._rootTimeline._timeScale=e,e):t._timeScale},e.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-e:e)+this._cycle*(this._duration+this._repeatDelay),t):this._time/this.duration()},e.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this._totalTime/this.totalDuration()},e.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),e>this._duration&&(e=this._duration),this._yoyo&&0!=(1&this._cycle)?e=this._duration-e+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(e+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(e,t)):this._time},e.duration=function(e){return arguments.length?r.prototype.duration.call(this,e):this._duration},e.totalDuration=function(e){return arguments.length?-1===this._repeat?this:this.duration((e-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},e.repeat=function(e){return arguments.length?(this._repeat=e,this._uncache(!0)):this._repeat},e.repeatDelay=function(e){return arguments.length?(this._repeatDelay=e,this._uncache(!0)):this._repeatDelay},e.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},y},!0),_gsScope._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(c,u,f){var p=function(e){u.call(this,e),this._labels={},this.autoRemoveChildren=!0===this.vars.autoRemoveChildren,this.smoothChildTiming=!0===this.vars.smoothChildTiming,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var t,i,r=this.vars;for(i in r)t=r[i],m(t)&&-1!==t.join("").indexOf("{self}")&&(r[i]=this._swapSelfInParams(t));m(r.tweens)&&this.add(r.tweens,0,r.align,r.stagger)},e=f._internals,t=p._internals={},d=e.isSelector,m=e.isArray,g=e.lazyTweens,E=e.lazyRender,a=_gsScope._gsDefine.globals,v=function(e){var t,i={};for(t in e)i[t]=e[t];return i},y=function(e,t,i){var r,n,o=e.cycle;for(r in o)n=o[r],e[r]="function"==typeof n?n(i,t[i]):n[i%n.length];delete e.cycle},o=t.pauseCallback=function(){},T=function(e){var t,i=[],r=e.length;for(t=0;t!==r;i.push(e[t++]));return i},i=p.prototype=new u;return p.version="2.0.2",i.constructor=p,i.kill()._gc=i._forcingPlayhead=i._hasPause=!1,i.to=function(e,t,i,r){var n=i.repeat&&a.TweenMax||f;return t?this.add(new n(e,t,i),r):this.set(e,i,r)},i.from=function(e,t,i,r){return this.add((i.repeat&&a.TweenMax||f).from(e,t,i),r)},i.fromTo=function(e,t,i,r,n){var o=r.repeat&&a.TweenMax||f;return t?this.add(o.fromTo(e,t,i,r),n):this.set(e,r,n)},i.staggerTo=function(e,t,i,r,n,o,a,s){var l,h,c=new p({onComplete:o,onCompleteParams:a,callbackScope:s,smoothChildTiming:this.smoothChildTiming}),u=i.cycle;for("string"==typeof e&&(e=f.selector(e)||e),d(e=e||[])&&(e=T(e)),(r=r||0)<0&&((e=T(e)).reverse(),r*=-1),h=0;h<e.length;h++)(l=v(i)).startAt&&(l.startAt=v(l.startAt),l.startAt.cycle&&y(l.startAt,e,h)),u&&(y(l,e,h),null!=l.duration&&(t=l.duration,delete l.duration)),c.to(e[h],t,l,h*r);return this.add(c,n)},i.staggerFrom=function(e,t,i,r,n,o,a,s){return i.immediateRender=0!=i.immediateRender,i.runBackwards=!0,this.staggerTo(e,t,i,r,n,o,a,s)},i.staggerFromTo=function(e,t,i,r,n,o,a,s,l){return r.startAt=i,r.immediateRender=0!=r.immediateRender&&0!=i.immediateRender,this.staggerTo(e,t,r,n,o,a,s,l)},i.call=function(e,t,i,r){return this.add(f.delayedCall(0,e,t,i),r)},i.set=function(e,t,i){return i=this._parseTimeOrLabel(i,0,!0),null==t.immediateRender&&(t.immediateRender=i===this._time&&!this._paused),this.add(new f(e,0,t),i)},p.exportRoot=function(e,t){null==(e=e||{}).smoothChildTiming&&(e.smoothChildTiming=!0);var i,r,n,o,a=new p(e),s=a._timeline;for(null==t&&(t=!0),s._remove(a,!0),a._startTime=0,a._rawPrevTime=a._time=a._totalTime=s._time,n=s._first;n;)o=n._next,t&&n instanceof f&&n.target===n.vars.onComplete||((r=n._startTime-n._delay)<0&&(i=1),a.add(n,r)),n=o;return s.add(a,0),i&&a.totalDuration(),a},i.add=function(e,t,i,r){var n,o,a,s,l,h;if("number"!=typeof t&&(t=this._parseTimeOrLabel(t,0,!0,e)),!(e instanceof c)){if(e instanceof Array||e&&e.push&&m(e)){for(i=i||"normal",r=r||0,n=t,o=e.length,a=0;a<o;a++)m(s=e[a])&&(s=new p({tweens:s})),this.add(s,n),"string"!=typeof s&&"function"!=typeof s&&("sequence"===i?n=s._startTime+s.totalDuration()/s._timeScale:"start"===i&&(s._startTime-=s.delay())),n+=r;return this._uncache(!0)}if("string"==typeof e)return this.addLabel(e,t);if("function"!=typeof e)throw"Cannot add "+e+" into the timeline; it is not a tween, timeline, function, or string.";e=f.delayedCall(0,e)}if(u.prototype.add.call(this,e,t),e._time&&(n=Math.max(0,Math.min(e.totalDuration(),(this.rawTime()-e._startTime)*e._timeScale)),1e-5<Math.abs(n-e._totalTime)&&e.render(n,!1,!1)),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(h=(l=this).rawTime()>e._startTime;l._timeline;)h&&l._timeline.smoothChildTiming?l.totalTime(l._totalTime,!0):l._gc&&l._enabled(!0,!1),l=l._timeline;return this},i.remove=function(e){if(e instanceof c){this._remove(e,!1);var t=e._timeline=e.vars.useFrames?c._rootFramesTimeline:c._rootTimeline;return e._startTime=(e._paused?e._pauseTime:t._time)-(e._reversed?e.totalDuration()-e._totalTime:e._totalTime)/e._timeScale,this}if(e instanceof Array||e&&e.push&&m(e)){for(var i=e.length;-1<--i;)this.remove(e[i]);return this}return"string"==typeof e?this.removeLabel(e):this.kill(null,e)},i._remove=function(e,t){return u.prototype._remove.call(this,e,t),this._last?this._time>this.duration()&&(this._time=this._duration,this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},i.append=function(e,t){return this.add(e,this._parseTimeOrLabel(null,t,!0,e))},i.insert=i.insertMultiple=function(e,t,i,r){return this.add(e,t||0,i,r)},i.appendMultiple=function(e,t,i,r){return this.add(e,this._parseTimeOrLabel(null,t,!0,e),i,r)},i.addLabel=function(e,t){return this._labels[e]=this._parseTimeOrLabel(t),this},i.addPause=function(e,t,i,r){var n=f.delayedCall(0,o,i,r||this);return n.vars.onComplete=n.vars.onReverseComplete=t,n.data="isPause",this._hasPause=!0,this.add(n,e)},i.removeLabel=function(e){return delete this._labels[e],this},i.getLabelTime=function(e){return null!=this._labels[e]?this._labels[e]:-1},i._parseTimeOrLabel=function(e,t,i,r){var n,o;if(r instanceof c&&r.timeline===this)this.remove(r);else if(r&&(r instanceof Array||r.push&&m(r)))for(o=r.length;-1<--o;)r[o]instanceof c&&r[o].timeline===this&&this.remove(r[o]);if(n="number"!=typeof e||t?99999999999<this.duration()?this.recent().endTime(!1):this._duration:0,"string"==typeof t)return this._parseTimeOrLabel(t,i&&"number"==typeof e&&null==this._labels[t]?e-n:0,i);if(t=t||0,"string"!=typeof e||!isNaN(e)&&null==this._labels[e])null==e&&(e=n);else{if(-1===(o=e.indexOf("=")))return null==this._labels[e]?i?this._labels[e]=n+t:t:this._labels[e]+t;t=parseInt(e.charAt(o-1)+"1",10)*Number(e.substr(o+1)),e=1<o?this._parseTimeOrLabel(e.substr(0,o-1),0,i):n}return Number(e)+t},i.seek=function(e,t){return this.totalTime("number"==typeof e?e:this._parseTimeOrLabel(e),!1!==t)},i.stop=function(){return this.paused(!0)},i.gotoAndPlay=function(e,t){return this.play(e,t)},i.gotoAndStop=function(e,t){return this.pause(e,t)},i.render=function(e,t,i){this._gc&&this._enabled(!0,!1);var r,n,o,a,s,l,h,c=this._time,u=this._dirty?this.totalDuration():this._totalDuration,f=this._startTime,p=this._timeScale,d=this._paused;if(c!==this._time&&(e+=this._time-c),u-1e-7<=e&&0<=e)this._totalTime=this._time=u,this._reversed||this._hasPausedChild()||(n=!0,a="onComplete",s=!!this._timeline.autoRemoveChildren,0===this._duration&&(e<=0&&-1e-7<=e||this._rawPrevTime<0||1e-10===this._rawPrevTime)&&this._rawPrevTime!==e&&this._first&&(s=!0,1e-10<this._rawPrevTime&&(a="onReverseComplete"))),this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:1e-10,e=u+1e-4;else if(e<1e-7)if(this._totalTime=this._time=0,(0!==c||0===this._duration&&1e-10!==this._rawPrevTime&&(0<this._rawPrevTime||e<0&&0<=this._rawPrevTime))&&(a="onReverseComplete",n=this._reversed),e<0)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(s=n=!0,a="onReverseComplete"):0<=this._rawPrevTime&&this._first&&(s=!0),this._rawPrevTime=e;else{if(this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:1e-10,0===e&&n)for(r=this._first;r&&0===r._startTime;)r._duration||(n=!1),r=r._next;e=0,this._initted||(s=!0)}else{if(this._hasPause&&!this._forcingPlayhead&&!t){if(c<=e)for(r=this._first;r&&r._startTime<=e&&!l;)r._duration||"isPause"!==r.data||r.ratio||0===r._startTime&&0===this._rawPrevTime||(l=r),r=r._next;else for(r=this._last;r&&r._startTime>=e&&!l;)r._duration||"isPause"===r.data&&0<r._rawPrevTime&&(l=r),r=r._prev;l&&(this._time=e=l._startTime,this._totalTime=e+this._cycle*(this._totalDuration+this._repeatDelay))}this._totalTime=this._time=this._rawPrevTime=e}if(this._time!==c&&this._first||i||s||l){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==c&&0<e&&(this._active=!0),0===c&&this.vars.onStart&&(0===this._time&&this._duration||t||this._callback("onStart")),c<=(h=this._time))for(r=this._first;r&&(o=r._next,h===this._time&&(!this._paused||d));)(r._active||r._startTime<=h&&!r._paused&&!r._gc)&&(l===r&&this.pause(),r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(e-r._startTime)*r._timeScale,t,i):r.render((e-r._startTime)*r._timeScale,t,i)),r=o;else for(r=this._last;r&&(o=r._prev,h===this._time&&(!this._paused||d));){if(r._active||r._startTime<=c&&!r._paused&&!r._gc){if(l===r){for(l=r._prev;l&&l.endTime()>this._time;)l.render(l._reversed?l.totalDuration()-(e-l._startTime)*l._timeScale:(e-l._startTime)*l._timeScale,t,i),l=l._prev;l=null,this.pause()}r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(e-r._startTime)*r._timeScale,t,i):r.render((e-r._startTime)*r._timeScale,t,i)}r=o}this._onUpdate&&(t||(g.length&&E(),this._callback("onUpdate"))),a&&(this._gc||(f===this._startTime||p!==this._timeScale)&&(0===this._time||u>=this.totalDuration())&&(n&&(g.length&&E(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[a]&&this._callback(a)))}},i._hasPausedChild=function(){for(var e=this._first;e;){if(e._paused||e instanceof p&&e._hasPausedChild())return!0;e=e._next}return!1},i.getChildren=function(e,t,i,r){r=r||-9999999999;for(var n=[],o=this._first,a=0;o;)o._startTime<r||(o instanceof f?!1!==t&&(n[a++]=o):(!1!==i&&(n[a++]=o),!1!==e&&(a=(n=n.concat(o.getChildren(!0,t,i))).length))),o=o._next;return n},i.getTweensOf=function(e,t){var i,r,n=this._gc,o=[],a=0;for(n&&this._enabled(!0,!0),r=(i=f.getTweensOf(e)).length;-1<--r;)(i[r].timeline===this||t&&this._contains(i[r]))&&(o[a++]=i[r]);return n&&this._enabled(!1,!0),o},i.recent=function(){return this._recent},i._contains=function(e){for(var t=e.timeline;t;){if(t===this)return!0;t=t.timeline}return!1},i.shiftChildren=function(e,t,i){i=i||0;for(var r,n=this._first,o=this._labels;n;)n._startTime>=i&&(n._startTime+=e),n=n._next;if(t)for(r in o)o[r]>=i&&(o[r]+=e);return this._uncache(!0)},i._kill=function(e,t){if(!e&&!t)return this._enabled(!1,!1);for(var i=t?this.getTweensOf(t):this.getChildren(!0,!0,!1),r=i.length,n=!1;-1<--r;)i[r]._kill(e,t)&&(n=!0);return n},i.clear=function(e){var t=this.getChildren(!1,!0,!0),i=t.length;for(this._time=this._totalTime=0;-1<--i;)t[i]._enabled(!1,!1);return!1!==e&&(this._labels={}),this._uncache(!0)},i.invalidate=function(){for(var e=this._first;e;)e.invalidate(),e=e._next;return c.prototype.invalidate.call(this)},i._enabled=function(e,t){if(e===this._gc)for(var i=this._first;i;)i._enabled(e,!0),i=i._next;return u.prototype._enabled.call(this,e,t)},i.totalTime=function(e,t,i){this._forcingPlayhead=!0;var r=c.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,r},i.duration=function(e){return arguments.length?(0!==this.duration()&&0!==e&&this.timeScale(this._duration/e),this):(this._dirty&&this.totalDuration(),this._duration)},i.totalDuration=function(e){if(arguments.length)return e&&this.totalDuration()?this.timeScale(this._totalDuration/e):this;if(this._dirty){for(var t,i,r=0,n=this._last,o=999999999999;n;)t=n._prev,n._dirty&&n.totalDuration(),n._startTime>o&&this._sortChildren&&!n._paused&&!this._calculatingDuration?(this._calculatingDuration=1,this.add(n,n._startTime-n._delay),this._calculatingDuration=0):o=n._startTime,n._startTime<0&&!n._paused&&(r-=n._startTime,this._timeline.smoothChildTiming&&(this._startTime+=n._startTime/this._timeScale,this._time-=n._startTime,this._totalTime-=n._startTime,this._rawPrevTime-=n._startTime),this.shiftChildren(-n._startTime,!1,-9999999999),o=0),r<(i=n._startTime+n._totalDuration/n._timeScale)&&(r=i),n=t;this._duration=this._totalDuration=r,this._dirty=!1}return this._totalDuration},i.paused=function(e){if(!e)for(var t=this._first,i=this._time;t;)t._startTime===i&&"isPause"===t.data&&(t._rawPrevTime=0),t=t._next;return c.prototype.paused.apply(this,arguments)},i.usesFrames=function(){for(var e=this._timeline;e._timeline;)e=e._timeline;return e===c._rootFramesTimeline},i.rawTime=function(e){return e&&(this._paused||this._repeat&&0<this.time()&&this.totalProgress()<1)?this._totalTime%(this._duration+this._repeatDelay):this._paused?this._totalTime:(this._timeline.rawTime(e)-this._startTime)*this._timeScale},p},!0),_gsScope._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(t,s,e){var i=function(e){t.call(this,e),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=!0===this.vars.yoyo,this._dirty=!0},r=s._internals,H=r.lazyTweens,S=r.lazyRender,l=_gsScope._gsDefine.globals,h=new e(null,null,1,0),n=i.prototype=new t;return n.constructor=i,n.kill()._gc=!1,i.version="2.0.2",n.invalidate=function(){return this._yoyo=!0===this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),t.prototype.invalidate.call(this)},n.addCallback=function(e,t,i,r){return this.add(s.delayedCall(0,e,i,r),t)},n.removeCallback=function(e,t){if(e)if(null==t)this._kill(null,e);else for(var i=this.getTweensOf(e,!1),r=i.length,n=this._parseTimeOrLabel(t);-1<--r;)i[r]._startTime===n&&i[r]._enabled(!1,!1);return this},n.removePause=function(e){return this.removeCallback(t._internals.pauseCallback,e)},n.tweenTo=function(e,t){t=t||{};var i,r,n,o={ease:h,useFrames:this.usesFrames(),immediateRender:!1,lazy:!1},a=t.repeat&&l.TweenMax||s;for(r in t)o[r]=t[r];return o.time=this._parseTimeOrLabel(e),i=Math.abs(Number(o.time)-this._time)/this._timeScale||.001,n=new a(this,i,o),o.onStart=function(){n.target.paused(!0),n.vars.time===n.target.time()||i!==n.duration()||n.isFromTo||n.duration(Math.abs(n.vars.time-n.target.time())/n.target._timeScale).render(n.time(),!0,!0),t.onStart&&t.onStart.apply(t.onStartScope||t.callbackScope||n,t.onStartParams||[])},n},n.tweenFromTo=function(e,t,i){i=i||{},e=this._parseTimeOrLabel(e),i.startAt={onComplete:this.seek,onCompleteParams:[e],callbackScope:this},i.immediateRender=!1!==i.immediateRender;var r=this.tweenTo(t,i);return r.isFromTo=1,r.duration(Math.abs(r.vars.time-e)/this._timeScale||.001)},n.render=function(e,t,i){this._gc&&this._enabled(!0,!1);var r,n,o,a,s,l,h,c,u=this._time,f=this._dirty?this.totalDuration():this._totalDuration,p=this._duration,d=this._totalTime,m=this._startTime,g=this._timeScale,E=this._rawPrevTime,v=this._paused,y=this._cycle;if(u!==this._time&&(e+=this._time-u),f-1e-7<=e&&0<=e)this._locked||(this._totalTime=f,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(n=!0,a="onComplete",s=!!this._timeline.autoRemoveChildren,0===this._duration&&(e<=0&&-1e-7<=e||E<0||1e-10===E)&&E!==e&&this._first&&(s=!0,1e-10<E&&(a="onReverseComplete"))),this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:1e-10,this._yoyo&&0!=(1&this._cycle)?this._time=e=0:e=(this._time=p)+1e-4;else if(e<1e-7)if(this._locked||(this._totalTime=this._cycle=0),((this._time=0)!==u||0===p&&1e-10!==E&&(0<E||e<0&&0<=E)&&!this._locked)&&(a="onReverseComplete",n=this._reversed),e<0)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(s=n=!0,a="onReverseComplete"):0<=E&&this._first&&(s=!0),this._rawPrevTime=e;else{if(this._rawPrevTime=p||!t||e||this._rawPrevTime===e?e:1e-10,0===e&&n)for(r=this._first;r&&0===r._startTime;)r._duration||(n=!1),r=r._next;e=0,this._initted||(s=!0)}else if(0===p&&E<0&&(s=!0),this._time=this._rawPrevTime=e,this._locked||(this._totalTime=e,0!==this._repeat&&(l=p+this._repeatDelay,this._cycle=this._totalTime/l>>0,0!==this._cycle&&this._cycle===this._totalTime/l&&d<=e&&this._cycle--,this._time=this._totalTime-this._cycle*l,this._yoyo&&0!=(1&this._cycle)&&(this._time=p-this._time),this._time>p?e=(this._time=p)+1e-4:this._time<0?this._time=e=0:e=this._time)),this._hasPause&&!this._forcingPlayhead&&!t){if(u<=(e=this._time)||this._repeat&&y!==this._cycle)for(r=this._first;r&&r._startTime<=e&&!h;)r._duration||"isPause"!==r.data||r.ratio||0===r._startTime&&0===this._rawPrevTime||(h=r),r=r._next;else for(r=this._last;r&&r._startTime>=e&&!h;)r._duration||"isPause"===r.data&&0<r._rawPrevTime&&(h=r),r=r._prev;h&&h._startTime<p&&(this._time=e=h._startTime,this._totalTime=e+this._cycle*(this._totalDuration+this._repeatDelay))}if(this._cycle!==y&&!this._locked){var T=this._yoyo&&0!=(1&y),_=T===(this._yoyo&&0!=(1&this._cycle)),x=this._totalTime,R=this._cycle,b=this._rawPrevTime,w=this._time;if(this._totalTime=y*p,this._cycle<y?T=!T:this._totalTime+=p,this._time=u,this._rawPrevTime=0===p?E-1e-4:E,this._cycle=y,this._locked=!0,u=T?0:p,this.render(u,t,0===p),t||this._gc||this.vars.onRepeat&&(this._cycle=R,this._locked=!1,this._callback("onRepeat")),u!==this._time)return;if(_&&(this._cycle=y,this._locked=!0,u=T?p+1e-4:-1e-4,this.render(u,!0,!1)),this._locked=!1,this._paused&&!v)return;this._time=w,this._totalTime=x,this._cycle=R,this._rawPrevTime=b}if(this._time!==u&&this._first||i||s||h){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==d&&0<e&&(this._active=!0),0===d&&this.vars.onStart&&(0===this._totalTime&&this._totalDuration||t||this._callback("onStart")),u<=(c=this._time))for(r=this._first;r&&(o=r._next,c===this._time&&(!this._paused||v));)(r._active||r._startTime<=this._time&&!r._paused&&!r._gc)&&(h===r&&this.pause(),r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(e-r._startTime)*r._timeScale,t,i):r.render((e-r._startTime)*r._timeScale,t,i)),r=o;else for(r=this._last;r&&(o=r._prev,c===this._time&&(!this._paused||v));){if(r._active||r._startTime<=u&&!r._paused&&!r._gc){if(h===r){for(h=r._prev;h&&h.endTime()>this._time;)h.render(h._reversed?h.totalDuration()-(e-h._startTime)*h._timeScale:(e-h._startTime)*h._timeScale,t,i),h=h._prev;h=null,this.pause()}r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(e-r._startTime)*r._timeScale,t,i):r.render((e-r._startTime)*r._timeScale,t,i)}r=o}this._onUpdate&&(t||(H.length&&S(),this._callback("onUpdate"))),a&&(this._locked||this._gc||(m===this._startTime||g!==this._timeScale)&&(0===this._time||f>=this.totalDuration())&&(n&&(H.length&&S(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[a]&&this._callback(a)))}else d!==this._totalTime&&this._onUpdate&&(t||this._callback("onUpdate"))},n.getActive=function(e,t,i){null==e&&(e=!0),null==t&&(t=!0),null==i&&(i=!1);var r,n,o=[],a=this.getChildren(e,t,i),s=0,l=a.length;for(r=0;r<l;r++)(n=a[r]).isActive()&&(o[s++]=n);return o},n.getLabelAfter=function(e){e||0!==e&&(e=this._time);var t,i=this.getLabelsArray(),r=i.length;for(t=0;t<r;t++)if(i[t].time>e)return i[t].name;return null},n.getLabelBefore=function(e){null==e&&(e=this._time);for(var t=this.getLabelsArray(),i=t.length;-1<--i;)if(t[i].time<e)return t[i].name;return null},n.getLabelsArray=function(){var e,t=[],i=0;for(e in this._labels)t[i++]={time:this._labels[e],name:e};return t.sort(function(e,t){return e.time-t.time}),t},n.invalidate=function(){return this._locked=!1,t.prototype.invalidate.call(this)},n.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-e:e)+this._cycle*(this._duration+this._repeatDelay),t):this._time/this.duration()||0},n.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this._totalTime/this.totalDuration()||0},n.totalDuration=function(e){return arguments.length?-1!==this._repeat&&e?this.timeScale(this.totalDuration()/e):this:(this._dirty&&(t.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},n.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),e>this._duration&&(e=this._duration),this._yoyo&&0!=(1&this._cycle)?e=this._duration-e+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(e+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(e,t)):this._time},n.repeat=function(e){return arguments.length?(this._repeat=e,this._uncache(!0)):this._repeat},n.repeatDelay=function(e){return arguments.length?(this._repeatDelay=e,this._uncache(!0)):this._repeatDelay},n.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},n.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.getLabelBefore(this._time+1e-8)},i},!0),R=180/Math.PI,_=[],x=[],b=[],E={},i=_gsScope._gsDefine.globals,v=function(e,t,i,r){i===r&&(i=r-(r-t)/1e6),e===t&&(t=e+(i-e)/1e6),this.a=e,this.b=t,this.c=i,this.d=r,this.da=r-e,this.ca=i-e,this.ba=t-e},w=function(e,t,i,r){var n={a:e},o={},a={},s={c:r},l=(e+t)/2,h=(t+i)/2,c=(i+r)/2,u=(l+h)/2,f=(h+c)/2,p=(f-u)/8;return n.b=l+(e-l)/4,o.b=u+p,n.c=o.a=(n.b+o.b)/2,o.c=a.a=(u+f)/2,a.b=f-p,s.b=c+(r-c)/4,a.c=s.a=(a.b+s.b)/2,[n,o,a,s]},y=function(e,t,i,r,n){var o,a,s,l,h,c,u,f,p,d,m,g,E,v=e.length-1,y=0,T=e[0].a;for(o=0;o<v;o++)a=(h=e[y]).a,s=h.d,l=e[y+1].d,f=n?(m=_[o],E=((g=x[o])+m)*t*.25/(r?.5:b[o]||.5),s-((c=s-(s-a)*(r?.5*t:0!==m?E/m:0))+(((u=s+(l-s)*(r?.5*t:0!==g?E/g:0))-c)*(3*m/(m+g)+.5)/4||0))):s-((c=s-(s-a)*t*.5)+(u=s+(l-s)*t*.5))/2,c+=f,u+=f,h.c=p=c,h.b=0!==o?T:T=h.a+.6*(h.c-h.a),h.da=s-a,h.ca=p-a,h.ba=T-a,i?(d=w(a,T,p,s),e.splice(y,1,d[0],d[1],d[2],d[3]),y+=4):y++,T=u;(h=e[y]).b=T,h.c=T+.4*(h.d-T),h.da=h.d-h.a,h.ca=h.c-h.a,h.ba=T-h.a,i&&(d=w(h.a,T,h.c,h.d),e.splice(y,1,d[0],d[1],d[2],d[3]))},T=function(e,t,i,r){var n,o,a,s,l,h,c=[];if(r)for(o=(e=[r].concat(e)).length;-1<--o;)"string"==typeof(h=e[o][t])&&"="===h.charAt(1)&&(e[o][t]=r[t]+Number(h.charAt(0)+h.substr(2)));if((n=e.length-2)<0)return c[0]=new v(e[0][t],0,0,e[0][t]),c;for(o=0;o<n;o++)a=e[o][t],s=e[o+1][t],c[o]=new v(a,0,0,s),i&&(l=e[o+2][t],_[o]=(_[o]||0)+(s-a)*(s-a),x[o]=(x[o]||0)+(l-s)*(l-s));return c[o]=new v(e[o][t],0,0,e[o+1][t]),c},p=function(e,t,i,r,n,o){var a,s,l,h,c,u,f,p,d={},m=[],g=o||e[0];for(s in n="string"==typeof n?","+n+",":",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",null==t&&(t=1),e[0])m.push(s);if(1<e.length){for(p=e[e.length-1],f=!0,a=m.length;-1<--a;)if(s=m[a],.05<Math.abs(g[s]-p[s])){f=!1;break}f&&(e=e.concat(),o&&e.unshift(o),e.push(e[1]),o=e[e.length-3])}for(_.length=x.length=b.length=0,a=m.length;-1<--a;)s=m[a],E[s]=-1!==n.indexOf(","+s+","),d[s]=T(e,s,E[s],o);for(a=_.length;-1<--a;)_[a]=Math.sqrt(_[a]),x[a]=Math.sqrt(x[a]);if(!r){for(a=m.length;-1<--a;)if(E[s])for(u=(l=d[m[a]]).length-1,h=0;h<u;h++)c=l[h+1].da/x[h]+l[h].da/_[h]||0,b[h]=(b[h]||0)+c*c;for(a=b.length;-1<--a;)b[a]=Math.sqrt(b[a])}for(a=m.length,h=i?4:1;-1<--a;)l=d[s=m[a]],y(l,t,i,r,E[s]),f&&(l.splice(0,h),l.splice(l.length-h,h));return d},d=function(e,t,i){for(var r,n,o,a,s,l,h,c,u,f,p,d=1/i,m=e.length;-1<--m;)for(o=(f=e[m]).a,a=f.d-o,s=f.c-o,l=f.b-o,r=n=0,c=1;c<=i;c++)r=n-(n=((h=d*c)*h*a+3*(u=1-h)*(h*s+u*l))*h),t[p=m*i+c-1]=(t[p]||0)+r*r},g=_gsScope._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.8",API:2,global:!0,init:function(e,t,i){this._target=e,t instanceof Array&&(t={values:t}),this._func={},this._mod={},this._props=[],this._timeRes=null==t.timeResolution?6:parseInt(t.timeResolution,10);var r,n,o,a,s,l=t.values||[],h={},c=l[0],u=t.autoRotate||i.vars.orientToBezier;for(r in this._autoRotate=u?u instanceof Array?u:[["x","y","rotation",!0===u?0:Number(u)||0]]:null,c)this._props.push(r);for(o=this._props.length;-1<--o;)r=this._props[o],this._overwriteProps.push(r),n=this._func[r]="function"==typeof e[r],h[r]=n?e[r.indexOf("set")||"function"!=typeof e["get"+r.substr(3)]?r:"get"+r.substr(3)]():parseFloat(e[r]),s||h[r]!==l[0][r]&&(s=h);if(this._beziers="cubic"!==t.type&&"quadratic"!==t.type&&"soft"!==t.type?p(l,isNaN(t.curviness)?1:t.curviness,!1,"thruBasic"===t.type,t.correlate,s):function(e,t,i){var r,n,o,a,s,l,h,c,u,f,p,d={},m="cubic"===(t=t||"soft")?3:2,g="soft"===t,E=[];if(g&&i&&(e=[i].concat(e)),null==e||e.length<m+1)throw"invalid Bezier data";for(u in e[0])E.push(u);for(l=E.length;-1<--l;){for(d[u=E[l]]=s=[],f=0,c=e.length,h=0;h<c;h++)r=null==i?e[h][u]:"string"==typeof(p=e[h][u])&&"="===p.charAt(1)?i[u]+Number(p.charAt(0)+p.substr(2)):Number(p),g&&1<h&&h<c-1&&(s[f++]=(r+s[f-2])/2),s[f++]=r;for(c=f-m+1,h=f=0;h<c;h+=m)r=s[h],n=s[h+1],o=s[h+2],a=2===m?0:s[h+3],s[f++]=p=3===m?new v(r,n,o,a):new v(r,(2*n+r)/3,(2*n+o)/3,o);s.length=f}return d}(l,t.type,h),this._segCount=this._beziers[r].length,this._timeRes){var f=function(e,t){var i,r,n,o,a=[],s=[],l=0,h=0,c=(t=t>>0||6)-1,u=[],f=[];for(i in e)d(e[i],a,t);for(n=a.length,r=0;r<n;r++)l+=Math.sqrt(a[r]),f[o=r%t]=l,o===c&&(h+=l,u[o=r/t>>0]=f,s[o]=h,l=0,f=[]);return{length:h,lengths:s,segments:u}}(this._beziers,this._timeRes);this._length=f.length,this._lengths=f.lengths,this._segments=f.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(u=this._autoRotate)for(this._initialRotations=[],u[0]instanceof Array||(this._autoRotate=u=[u]),o=u.length;-1<--o;){for(a=0;a<3;a++)r=u[o][a],this._func[r]="function"==typeof e[r]&&e[r.indexOf("set")||"function"!=typeof e["get"+r.substr(3)]?r:"get"+r.substr(3)];r=u[o][2],this._initialRotations[o]=(this._func[r]?this._func[r].call(this._target):this._target[r])||0,this._overwriteProps.push(r)}return this._startRatio=i.vars.runBackwards?1:0,!0},set:function(e){var t,i,r,n,o,a,s,l,h,c,u=this._segCount,f=this._func,p=this._target,d=e!==this._startRatio;if(this._timeRes){if(h=this._lengths,c=this._curSeg,e*=this._length,r=this._li,e>this._l2&&r<u-1){for(l=u-1;r<l&&(this._l2=h[++r])<=e;);this._l1=h[r-1],this._li=r,this._curSeg=c=this._segments[r],this._s2=c[this._s1=this._si=0]}else if(e<this._l1&&0<r){for(;0<r&&(this._l1=h[--r])>=e;);0===r&&e<this._l1?this._l1=0:r++,this._l2=h[r],this._li=r,this._curSeg=c=this._segments[r],this._s1=c[(this._si=c.length-1)-1]||0,this._s2=c[this._si]}if(t=r,e-=this._l1,r=this._si,e>this._s2&&r<c.length-1){for(l=c.length-1;r<l&&(this._s2=c[++r])<=e;);this._s1=c[r-1],this._si=r}else if(e<this._s1&&0<r){for(;0<r&&(this._s1=c[--r])>=e;);0===r&&e<this._s1?this._s1=0:r++,this._s2=c[r],this._si=r}a=(r+(e-this._s1)/(this._s2-this._s1))*this._prec||0}else a=(e-(t=e<0?0:1<=e?u-1:u*e>>0)*(1/u))*u;for(i=1-a,r=this._props.length;-1<--r;)n=this._props[r],s=(a*a*(o=this._beziers[n][t]).da+3*i*(a*o.ca+i*o.ba))*a+o.a,this._mod[n]&&(s=this._mod[n](s,p)),f[n]?p[n](s):p[n]=s;if(this._autoRotate){var m,g,E,v,y,T,_,x=this._autoRotate;for(r=x.length;-1<--r;)n=x[r][2],T=x[r][3]||0,_=!0===x[r][4]?1:R,o=this._beziers[x[r][0]],m=this._beziers[x[r][1]],o&&m&&(o=o[t],m=m[t],g=o.a+(o.b-o.a)*a,g+=((v=o.b+(o.c-o.b)*a)-g)*a,v+=(o.c+(o.d-o.c)*a-v)*a,E=m.a+(m.b-m.a)*a,E+=((y=m.b+(m.c-m.b)*a)-E)*a,y+=(m.c+(m.d-m.c)*a-y)*a,s=d?Math.atan2(y-E,v-g)*_+T:this._initialRotations[r],this._mod[n]&&(s=this._mod[n](s,p)),f[n]?p[n](s):p[n]=s)}}}),r=g.prototype,g.bezierThrough=p,g.cubicToQuadratic=w,g._autoCSS=!0,g.quadraticToCubic=function(e,t,i){return new v(e,(2*t+e)/3,(2*t+i)/3,i)},g._cssRegister=function(){var e=i.CSSPlugin;if(e){var t=e._internals,p=t._parseToProxy,d=t._setPluginRatio,m=t.CSSPropTween;t._registerComplexSpecialProp("bezier",{parser:function(e,t,i,r,n,o){t instanceof Array&&(t={values:t}),o=new g;var a,s,l,h=t.values,c=h.length-1,u=[],f={};if(c<0)return n;for(a=0;a<=c;a++)l=p(e,h[a],r,n,o,c!==a),u[a]=l.end;for(s in t)f[s]=t[s];return f.values=u,(n=new m(e,"bezier",0,0,l.pt,2)).data=l,n.plugin=o,n.setRatio=d,0===f.autoRotate&&(f.autoRotate=!0),!f.autoRotate||f.autoRotate instanceof Array||(a=!0===f.autoRotate?0:Number(f.autoRotate),f.autoRotate=null!=l.end.left?[["left","top","rotation",a,!1]]:null!=l.end.x&&[["x","y","rotation",a,!1]]),f.autoRotate&&(r._transform||r._enableTransforms(!1),l.autoRotate=r._target._gsTransform,l.proxy.rotation=l.autoRotate.rotation||0,r._overwriteProps.push("rotation")),o._onInitTween(l.proxy,f,r._tween),n}})}},r._mod=function(e){for(var t,i=this._overwriteProps,r=i.length;-1<--r;)(t=e[i[r]])&&"function"==typeof t&&(this._mod[i[r]]=t)},r._kill=function(e){var t,i,r=this._props;for(t in this._beziers)if(t in e)for(delete this._beziers[t],delete this._func[t],i=r.length;-1<--i;)r[i]===t&&r.splice(i,1);if(r=this._autoRotate)for(i=r.length;-1<--i;)e[r[i][2]]&&r.splice(i,1);return this._super._kill.call(this,e)},_gsScope._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(o,U){var d,b,H,m,z=function(){o.call(this,"css"),this._overwriteProps.length=0,this.setRatio=z.prototype.setRatio},h=_gsScope._gsDefine.globals,g={},e=z.prototype=new o("css");(e.constructor=z).version="2.0.2",z.API=2,z.defaultTransformPerspective=0,z.defaultSkewType="compensated",z.defaultSmoothOrigin=!0,e="px",z.suffixMap={top:e,right:e,bottom:e,left:e,width:e,height:e,fontSize:e,padding:e,margin:e,perspective:e,lineHeight:""};var S,E,v,V,y,w,M,C,t,i,A=/(?:\-|\.|\b)(\d|\.|e\-)+/g,P=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,T=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,c=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,D=/(?:\d|\-|\+|=|#|\.)*/g,L=/opacity *= *([^)]*)/i,_=/opacity:([^;]*)/i,a=/alpha\(opacity *=.+?\)/i,x=/^(rgb|hsl)/,s=/([A-Z])/g,l=/-([a-z])/gi,R=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,u=function(e,t){return t.toUpperCase()},p=/(?:Left|Right|Width)/i,f=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,F=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,O=/,(?=[^\)]*(?:\(|$))/gi,k=/[\s,\(]/i,I=Math.PI/180,B=180/Math.PI,N={},r={style:{}},j=_gsScope.document||{createElement:function(){return r}},W=function(e,t){return j.createElementNS?j.createElementNS(t||"http://www.w3.org/1999/xhtml",e):j.createElement(e)},G=W("div"),X=W("img"),n=z._internals={_specialProps:g},q=(_gsScope.navigator||{}).userAgent||"",Y=(t=q.indexOf("Android"),i=W("a"),v=-1!==q.indexOf("Safari")&&-1===q.indexOf("Chrome")&&(-1===t||3<parseFloat(q.substr(t+8,2))),y=v&&parseFloat(q.substr(q.indexOf("Version/")+8,2))<6,V=-1!==q.indexOf("Firefox"),(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(q)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(q))&&(w=parseFloat(RegExp.$1)),!!i&&(i.style.cssText="top:1px;opacity:.55;",/^0.55/.test(i.style.opacity))),K=function(e){return L.test("string"==typeof e?e:(e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100:1},Q=function(e){_gsScope.console&&console.log(e)},Z="",$="",J=function(e,t){var i,r,n=(t=t||G).style;if(void 0!==n[e])return e;for(e=e.charAt(0).toUpperCase()+e.substr(1),i=["O","Moz","ms","Ms","Webkit"],r=5;-1<--r&&void 0===n[i[r]+e];);return 0<=r?(Z="-"+($=3===r?"ms":i[r]).toLowerCase()+"-",$+e):null},ee=("undefined"!=typeof window?window:j.defaultView||{getComputedStyle:function(){}}).getComputedStyle,te=z.getStyle=function(e,t,i,r,n){var o;return Y||"opacity"!==t?(!r&&e.style[t]?o=e.style[t]:(i=i||ee(e))?o=i[t]||i.getPropertyValue(t)||i.getPropertyValue(t.replace(s,"-$1").toLowerCase()):e.currentStyle&&(o=e.currentStyle[t]),null==n||o&&"none"!==o&&"auto"!==o&&"auto auto"!==o?o:n):K(e)},ie=n.convertToPixels=function(e,t,i,r,n){if("px"===r||!r&&"lineHeight"!==t)return i;if("auto"===r||!i)return 0;var o,a,s,l=p.test(t),h=e,c=G.style,u=i<0,f=1===i;if(u&&(i=-i),f&&(i*=100),"lineHeight"!==t||r)if("%"===r&&-1!==t.indexOf("border"))o=i/100*(l?e.clientWidth:e.clientHeight);else{if(c.cssText="border:0 solid red;position:"+te(e,"position")+";line-height:0;","%"!==r&&h.appendChild&&"v"!==r.charAt(0)&&"rem"!==r)c[l?"borderLeftWidth":"borderTopWidth"]=i+r;else{if(h=e.parentNode||j.body,-1!==te(h,"display").indexOf("flex")&&(c.position="absolute"),a=h._gsCache,s=U.ticker.frame,a&&l&&a.time===s)return a.width*i/100;c[l?"width":"height"]=i+r}h.appendChild(G),o=parseFloat(G[l?"offsetWidth":"offsetHeight"]),h.removeChild(G),l&&"%"===r&&!1!==z.cacheWidths&&((a=h._gsCache=h._gsCache||{}).time=s,a.width=o/i*100),0!==o||n||(o=ie(e,t,i,r,!0))}else a=ee(e).lineHeight,e.style.lineHeight=i,o=parseFloat(ee(e).lineHeight),e.style.lineHeight=a;return f&&(o/=100),u?-o:o},re=n.calculateOffset=function(e,t,i){if("absolute"!==te(e,"position",i))return 0;var r="left"===t?"Left":"Top",n=te(e,"margin"+r,i);return e["offset"+r]-(ie(e,t,parseFloat(n),n.replace(D,""))||0)},ne=function(e,t){var i,r,n,o={};if(t=t||ee(e,null))if(i=t.length)for(;-1<--i;)(-1===(n=t[i]).indexOf("-transform")||Oe===n)&&(o[n.replace(l,u)]=t.getPropertyValue(n));else for(i in t)(-1===i.indexOf("Transform")||Fe===i)&&(o[i]=t[i]);else if(t=e.currentStyle||e.style)for(i in t)"string"==typeof i&&void 0===o[i]&&(o[i.replace(l,u)]=t[i]);return Y||(o.opacity=K(e)),r=Ye(e,t,!1),o.rotation=r.rotation,o.skewX=r.skewX,o.scaleX=r.scaleX,o.scaleY=r.scaleY,o.x=r.x,o.y=r.y,Ve&&(o.z=r.z,o.rotationX=r.rotationX,o.rotationY=r.rotationY,o.scaleZ=r.scaleZ),o.filters&&delete o.filters,o},oe=function(e,t,i,r,n){var o,a,s,l={},h=e.style;for(a in i)"cssText"!==a&&"length"!==a&&isNaN(a)&&(t[a]!==(o=i[a])||n&&n[a])&&-1===a.indexOf("Origin")&&("number"==typeof o||"string"==typeof o)&&(l[a]="auto"!==o||"left"!==a&&"top"!==a?""!==o&&"auto"!==o&&"none"!==o||"string"!=typeof t[a]||""===t[a].replace(c,"")?o:0:re(e,a),void 0!==h[a]&&(s=new Te(h,a,h[a],s)));if(r)for(a in r)"className"!==a&&(l[a]=r[a]);return{difs:l,firstMPT:s}},ae={width:["Left","Right"],height:["Top","Bottom"]},se=["marginLeft","marginRight","marginTop","marginBottom"],le=function(e,t,i){if("svg"===(e.nodeName+"").toLowerCase())return(i||ee(e))[t]||0;if(e.getCTM&&Ge(e))return e.getBBox()[t]||0;var r=parseFloat("width"===t?e.offsetWidth:e.offsetHeight),n=ae[t],o=n.length;for(i=i||ee(e,null);-1<--o;)r-=parseFloat(te(e,"padding"+n[o],i,!0))||0,r-=parseFloat(te(e,"border"+n[o]+"Width",i,!0))||0;return r},he=function(e,t){if("contain"===e||"auto"===e||"auto auto"===e)return e+" ";(null==e||""===e)&&(e="0 0");var i,r=e.split(" "),n=-1!==e.indexOf("left")?"0%":-1!==e.indexOf("right")?"100%":r[0],o=-1!==e.indexOf("top")?"0%":-1!==e.indexOf("bottom")?"100%":r[1];if(3<r.length&&!t){for(r=e.split(", ").join(",").split(","),e=[],i=0;i<r.length;i++)e.push(he(r[i]));return e.join(",")}return null==o?o="center"===n?"50%":"0":"center"===o&&(o="50%"),("center"===n||isNaN(parseFloat(n))&&-1===(n+"").indexOf("="))&&(n="50%"),e=n+" "+o+(2<r.length?" "+r[2]:""),t&&(t.oxp=-1!==n.indexOf("%"),t.oyp=-1!==o.indexOf("%"),t.oxr="="===n.charAt(1),t.oyr="="===o.charAt(1),t.ox=parseFloat(n.replace(c,"")),t.oy=parseFloat(o.replace(c,"")),t.v=e),t||e},ce=function(e,t){return"function"==typeof e&&(e=e(C,M)),"string"==typeof e&&"="===e.charAt(1)?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2)):parseFloat(e)-parseFloat(t)||0},ue=function(e,t){"function"==typeof e&&(e=e(C,M));var i="string"==typeof e&&"="===e.charAt(1);return"string"==typeof e&&"v"===e.charAt(e.length-2)&&(e=(i?e.substr(0,2):0)+window["inner"+("vh"===e.substr(-2)?"Height":"Width")]*(parseFloat(i?e.substr(2):e)/100)),null==e?t:i?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2))+t:parseFloat(e)||0},fe=function(e,t,i,r){var n,o,a,s;return"function"==typeof e&&(e=e(C,M)),(a=null==e?t:"number"==typeof e?e:(360,n=e.split("_"),o=((s="="===e.charAt(1))?parseInt(e.charAt(0)+"1",10)*parseFloat(n[0].substr(2)):parseFloat(n[0]))*(-1===e.indexOf("rad")?1:B)-(s?0:t),n.length&&(r&&(r[i]=t+o),-1!==e.indexOf("short")&&((o%=360)!==o%180&&(o=o<0?o+360:o-360)),-1!==e.indexOf("_cw")&&o<0?o=(o+3599999999640)%360-360*(o/360|0):-1!==e.indexOf("ccw")&&0<o&&(o=(o-3599999999640)%360-360*(o/360|0))),t+o))<1e-6&&-1e-6<a&&(a=0),a},pe={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},de=function(e,t,i){return 255*(6*(e=e<0?e+1:1<e?e-1:e)<1?t+(i-t)*e*6:e<.5?i:3*e<2?t+(i-t)*(2/3-e)*6:t)+.5|0},me=z.parseColor=function(e,t){var i,r,n,o,a,s,l,h,c,u,f;if(e)if("number"==typeof e)i=[e>>16,e>>8&255,255&e];else{if(","===e.charAt(e.length-1)&&(e=e.substr(0,e.length-1)),pe[e])i=pe[e];else if("#"===e.charAt(0))4===e.length&&(e="#"+(r=e.charAt(1))+r+(n=e.charAt(2))+n+(o=e.charAt(3))+o),i=[(e=parseInt(e.substr(1),16))>>16,e>>8&255,255&e];else if("hsl"===e.substr(0,3))if(i=f=e.match(A),t){if(-1!==e.indexOf("="))return e.match(P)}else a=Number(i[0])%360/360,s=Number(i[1])/100,r=2*(l=Number(i[2])/100)-(n=l<=.5?l*(s+1):l+s-l*s),3<i.length&&(i[3]=Number(i[3])),i[0]=de(a+1/3,r,n),i[1]=de(a,r,n),i[2]=de(a-1/3,r,n);else i=e.match(A)||pe.transparent;i[0]=Number(i[0]),i[1]=Number(i[1]),i[2]=Number(i[2]),3<i.length&&(i[3]=Number(i[3]))}else i=pe.black;return t&&!f&&(r=i[0]/255,n=i[1]/255,o=i[2]/255,l=((h=Math.max(r,n,o))+(c=Math.min(r,n,o)))/2,h===c?a=s=0:(u=h-c,s=.5<l?u/(2-h-c):u/(h+c),a=h===r?(n-o)/u+(n<o?6:0):h===n?(o-r)/u+2:(r-n)/u+4,a*=60),i[0]=a+.5|0,i[1]=100*s+.5|0,i[2]=100*l+.5|0),i},ge=function(e,t){var i,r,n,o=e.match(Ee)||[],a=0,s="";if(!o.length)return e;for(i=0;i<o.length;i++)r=o[i],a+=(n=e.substr(a,e.indexOf(r,a)-a)).length+r.length,3===(r=me(r,t)).length&&r.push(1),s+=n+(t?"hsla("+r[0]+","+r[1]+"%,"+r[2]+"%,"+r[3]:"rgba("+r.join(","))+")";return s+e.substr(a)},Ee="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(e in pe)Ee+="|"+e+"\\b";Ee=new RegExp(Ee+")","gi"),z.colorStringFilter=function(e){var t,i=e[0]+" "+e[1];Ee.test(i)&&(t=-1!==i.indexOf("hsl(")||-1!==i.indexOf("hsla("),e[0]=ge(e[0],t),e[1]=ge(e[1],t)),Ee.lastIndex=0},U.defaultStringFilter||(U.defaultStringFilter=z.colorStringFilter);var ve=function(e,t,o,a){if(null==e)return function(e){return e};var s,l=t?(e.match(Ee)||[""])[0]:"",h=e.split(l).join("").match(T)||[],c=e.substr(0,e.indexOf(h[0])),u=")"===e.charAt(e.length-1)?")":"",f=-1!==e.indexOf(" ")?" ":",",p=h.length,d=0<p?h[0].replace(A,""):"";return p?s=t?function(e){var t,i,r,n;if("number"==typeof e)e+=d;else if(a&&O.test(e)){for(n=e.replace(O,"|").split("|"),r=0;r<n.length;r++)n[r]=s(n[r]);return n.join(",")}if(t=(e.match(Ee)||[l])[0],r=(i=e.split(t).join("").match(T)||[]).length,p>r--)for(;++r<p;)i[r]=o?i[(r-1)/2|0]:h[r];return c+i.join(f)+f+t+u+(-1!==e.indexOf("inset")?" inset":"")}:function(e){var t,i,r;if("number"==typeof e)e+=d;else if(a&&O.test(e)){for(i=e.replace(O,"|").split("|"),r=0;r<i.length;r++)i[r]=s(i[r]);return i.join(",")}if(r=(t=e.match(T)||[]).length,p>r--)for(;++r<p;)t[r]=o?t[(r-1)/2|0]:h[r];return c+t.join(f)+u}:function(e){return e}},ye=function(h){return h=h.split(","),function(e,t,i,r,n,o,a){var s,l=(t+"").split(" ");for(a={},s=0;s<4;s++)a[h[s]]=l[s]=l[s]||l[(s-1)/2>>0];return r.parse(e,a,n,o)}},Te=(n._setPluginRatio=function(e){this.plugin.setRatio(e);for(var t,i,r,n,o,a=this.data,s=a.proxy,l=a.firstMPT;l;)t=s[l.v],l.r?t=l.r(t):t<1e-6&&-1e-6<t&&(t=0),l.t[l.p]=t,l=l._next;if(a.autoRotate&&(a.autoRotate.rotation=a.mod?a.mod.call(this._tween,s.rotation,this.t,this._tween):s.rotation),1===e||0===e)for(l=a.firstMPT,o=1===e?"e":"b";l;){if((i=l.t).type){if(1===i.type){for(n=i.xs0+i.s+i.xs1,r=1;r<i.l;r++)n+=i["xn"+r]+i["xs"+(r+1)];i[o]=n}}else i[o]=i.s+i.xs0;l=l._next}},function(e,t,i,r,n){this.t=e,this.p=t,this.v=i,this.r=n,r&&((r._prev=this)._next=r)}),_e=(n._parseToProxy=function(e,t,i,r,n,o){var a,s,l,h,c,u=r,f={},p={},d=i._transform,m=N;for(i._transform=null,N=t,r=c=i.parse(e,t,r,n),N=m,o&&(i._transform=d,u&&(u._prev=null,u._prev&&(u._prev._next=null)));r&&r!==u;){if(r.type<=1&&(p[s=r.p]=r.s+r.c,f[s]=r.s,o||(h=new Te(r,"s",s,h,r.r),r.c=0),1===r.type))for(a=r.l;0<--a;)l="xn"+a,p[s=r.p+"_"+l]=r.data[l],f[s]=r[l],o||(h=new Te(r,l,s,h,r.rxp[l]));r=r._next}return{proxy:f,end:p,firstMPT:h,pt:c}},n.CSSPropTween=function(e,t,i,r,n,o,a,s,l,h,c){this.t=e,this.p=t,this.s=i,this.c=r,this.n=a||t,e instanceof _e||m.push(this.n),this.r=s?"function"==typeof s?s:Math.round:s,this.type=o||0,l&&(this.pr=l,d=!0),this.b=void 0===h?i:h,this.e=void 0===c?i+r:c,n&&((this._next=n)._prev=this)}),xe=function(e,t,i,r,n,o){var a=new _e(e,t,i,r-i,n,-1,o);return a.b=i,a.e=a.xs0=r,a},Re=z.parseComplex=function(e,t,i,r,n,o,a,s,l,h){i=i||o||"","function"==typeof r&&(r=r(C,M)),a=new _e(e,t,0,0,a,h?2:1,null,!1,s,i,r),r+="",n&&Ee.test(r+i)&&(r=[i,r],z.colorStringFilter(r),i=r[0],r=r[1]);var c,u,f,p,d,m,g,E,v,y,T,_,x,R=i.split(", ").join(",").split(" "),b=r.split(", ").join(",").split(" "),w=R.length,H=!1!==S;for((-1!==r.indexOf(",")||-1!==i.indexOf(","))&&(b=-1!==(r+i).indexOf("rgb")||-1!==(r+i).indexOf("hsl")?(R=R.join(" ").replace(O,", ").split(" "),b.join(" ").replace(O,", ").split(" ")):(R=R.join(" ").split(",").join(", ").split(" "),b.join(" ").split(",").join(", ").split(" ")),w=R.length),w!==b.length&&(w=(R=(o||"").split(" ")).length),a.plugin=l,a.setRatio=h,c=Ee.lastIndex=0;c<w;c++)if(p=R[c],d=b[c]+"",(E=parseFloat(p))||0===E)a.appendXtra("",E,ce(d,E),d.replace(P,""),!(!H||-1===d.indexOf("px"))&&Math.round,!0);else if(n&&Ee.test(p))_=")"+((_=d.indexOf(")")+1)?d.substr(_):""),x=-1!==d.indexOf("hsl")&&Y,y=d,p=me(p,x),d=me(d,x),(v=6<p.length+d.length)&&!Y&&0===d[3]?(a["xs"+a.l]+=a.l?" transparent":"transparent",a.e=a.e.split(b[c]).join("transparent")):(Y||(v=!1),x?a.appendXtra(y.substr(0,y.indexOf("hsl"))+(v?"hsla(":"hsl("),p[0],ce(d[0],p[0]),",",!1,!0).appendXtra("",p[1],ce(d[1],p[1]),"%,",!1).appendXtra("",p[2],ce(d[2],p[2]),v?"%,":"%"+_,!1):a.appendXtra(y.substr(0,y.indexOf("rgb"))+(v?"rgba(":"rgb("),p[0],d[0]-p[0],",",Math.round,!0).appendXtra("",p[1],d[1]-p[1],",",Math.round).appendXtra("",p[2],d[2]-p[2],v?",":_,Math.round),v&&(p=p.length<4?1:p[3],a.appendXtra("",p,(d.length<4?1:d[3])-p,_,!1))),Ee.lastIndex=0;else if(m=p.match(A)){if(!(g=d.match(P))||g.length!==m.length)return a;for(u=f=0;u<m.length;u++)T=m[u],y=p.indexOf(T,f),a.appendXtra(p.substr(f,y-f),Number(T),ce(g[u],T),"",!(!H||"px"!==p.substr(y+T.length,2))&&Math.round,0===u),f=y+T.length;a["xs"+a.l]+=p.substr(f)}else a["xs"+a.l]+=a.l||a["xs"+a.l]?" "+d:d;if(-1!==r.indexOf("=")&&a.data){for(_=a.xs0+a.data.s,c=1;c<a.l;c++)_+=a["xs"+c]+a.data["xn"+c];a.e=_+a["xs"+c]}return a.l||(a.type=-1,a.xs0=a.e),a.xfirst||a},be=9;for((e=_e.prototype).l=e.pr=0;0<--be;)e["xn"+be]=0,e["xs"+be]="";e.xs0="",e._next=e._prev=e.xfirst=e.data=e.plugin=e.setRatio=e.rxp=null,e.appendXtra=function(e,t,i,r,n,o){var a=this,s=a.l;return a["xs"+s]+=o&&(s||a["xs"+s])?" "+e:e||"",i||0===s||a.plugin?(a.l++,a.type=a.setRatio?2:1,a["xs"+a.l]=r||"",0<s?(a.data["xn"+s]=t+i,a.rxp["xn"+s]=n,a["xn"+s]=t,a.plugin||(a.xfirst=new _e(a,"xn"+s,t,i,a.xfirst||a,0,a.n,n,a.pr),a.xfirst.xs0=0)):(a.data={s:t+i},a.rxp={},a.s=t,a.c=i,a.r=n)):a["xs"+s]+=t+(r||""),a};var we=function(e,t){t=t||{},this.p=t.prefix&&J(e)||e,g[e]=g[this.p]=this,this.format=t.formatter||ve(t.defaultValue,t.color,t.collapsible,t.multi),t.parser&&(this.parse=t.parser),this.clrs=t.color,this.multi=t.multi,this.keyword=t.keyword,this.dflt=t.defaultValue,this.pr=t.priority||0},He=n._registerComplexSpecialProp=function(e,t,i){"object"!=typeof t&&(t={parser:i});var r,n=e.split(","),o=t.defaultValue;for(i=i||[o],r=0;r<n.length;r++)t.prefix=0===r&&t.prefix,t.defaultValue=i[r]||o,new we(n[r],t)},Se=n._registerPluginProp=function(e){if(!g[e]){var l=e.charAt(0).toUpperCase()+e.substr(1)+"Plugin";He(e,{parser:function(e,t,i,r,n,o,a){var s=h.com.greensock.plugins[l];return s?(s._cssRegister(),g[i].parse(e,t,i,r,n,o,a)):(Q("Error: "+l+" js file not loaded."),n)}})}};(e=we.prototype).parseComplex=function(e,t,i,r,n,o){var a,s,l,h,c,u,f=this.keyword;if(this.multi&&(O.test(i)||O.test(t)?(s=t.replace(O,"|").split("|"),l=i.replace(O,"|").split("|")):f&&(s=[t],l=[i])),l){for(h=l.length>s.length?l.length:s.length,a=0;a<h;a++)t=s[a]=s[a]||this.dflt,i=l[a]=l[a]||this.dflt,f&&((c=t.indexOf(f))!==(u=i.indexOf(f))&&(-1===u?s[a]=s[a].split(f).join(""):-1===c&&(s[a]+=" "+f)));t=s.join(", "),i=l.join(", ")}return Re(e,this.p,t,i,this.clrs,this.dflt,r,this.pr,n,o)},e.parse=function(e,t,i,r,n,o,a){return this.parseComplex(e.style,this.format(te(e,this.p,H,!1,this.dflt)),this.format(t),n,o)},z.registerSpecialProp=function(e,l,h){He(e,{parser:function(e,t,i,r,n,o,a){var s=new _e(e,i,0,0,n,2,i,!1,h);return s.plugin=o,s.setRatio=l(e,t,r._tween,i),s},priority:h})},z.useSVGTransformAttr=!0;var Me,Ce,Ae,Pe,De,Le="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),Fe=J("transform"),Oe=Z+"transform",ke=J("transformOrigin"),Ve=null!==J("perspective"),Ie=n.Transform=function(){this.perspective=parseFloat(z.defaultTransformPerspective)||0,this.force3D=!(!1===z.defaultForce3D||!Ve)&&(z.defaultForce3D||"auto")},Ne=_gsScope.SVGElement,Ue=function(e,t,i){var r,n=j.createElementNS("http://www.w3.org/2000/svg",e),o=/([a-z])([A-Z])/g;for(r in i)n.setAttributeNS(null,r.replace(o,"$1-$2").toLowerCase(),i[r]);return t.appendChild(n),n},ze=j.documentElement||{},Be=(De=w||/Android/i.test(q)&&!_gsScope.chrome,j.createElementNS&&!De&&(Ce=Ue("svg",ze),Pe=(Ae=Ue("rect",Ce,{width:100,height:50,x:100})).getBoundingClientRect().width,Ae.style[ke]="50% 50%",Ae.style[Fe]="scaleX(0.5)",De=Pe===Ae.getBoundingClientRect().width&&!(V&&Ve),ze.removeChild(Ce)),De),je=function(e,t,i,r,n,o){var a,s,l,h,c,u,f,p,d,m,g,E,v,y,T=e._gsTransform,_=qe(e,!0);T&&(v=T.xOrigin,y=T.yOrigin),(!r||(a=r.split(" ")).length<2)&&(0===(f=e.getBBox()).x&&0===f.y&&f.width+f.height===0&&(f={x:parseFloat(e.hasAttribute("x")?e.getAttribute("x"):e.hasAttribute("cx")?e.getAttribute("cx"):0)||0,y:parseFloat(e.hasAttribute("y")?e.getAttribute("y"):e.hasAttribute("cy")?e.getAttribute("cy"):0)||0,width:0,height:0}),a=[(-1!==(t=he(t).split(" "))[0].indexOf("%")?parseFloat(t[0])/100*f.width:parseFloat(t[0]))+f.x,(-1!==t[1].indexOf("%")?parseFloat(t[1])/100*f.height:parseFloat(t[1]))+f.y]),i.xOrigin=h=parseFloat(a[0]),i.yOrigin=c=parseFloat(a[1]),r&&_!==Xe&&(u=_[0],f=_[1],p=_[2],d=_[3],m=_[4],g=_[5],(E=u*d-f*p)&&(s=h*(d/E)+c*(-p/E)+(p*g-d*m)/E,l=h*(-f/E)+c*(u/E)-(u*g-f*m)/E,h=i.xOrigin=a[0]=s,c=i.yOrigin=a[1]=l)),T&&(o&&(i.xOffset=T.xOffset,i.yOffset=T.yOffset,T=i),n||!1!==n&&!1!==z.defaultSmoothOrigin?(s=h-v,l=c-y,T.xOffset+=s*_[0]+l*_[2]-s,T.yOffset+=s*_[1]+l*_[3]-l):T.xOffset=T.yOffset=0),o||e.setAttribute("data-svg-origin",a.join(" "))},We=function(e){var t,i=W("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=this.parentNode,n=this.nextSibling,o=this.style.cssText;if(ze.appendChild(i),i.appendChild(this),this.style.display="block",e)try{t=this.getBBox(),this._originalGetBBox=this.getBBox,this.getBBox=We}catch(e){}else this._originalGetBBox&&(t=this._originalGetBBox());return n?r.insertBefore(this,n):r.appendChild(this),ze.removeChild(i),this.style.cssText=o,t},Ge=function(e){return!(!Ne||!e.getCTM||e.parentNode&&!e.ownerSVGElement||!function(t){try{return t.getBBox()}catch(e){return We.call(t,!0)}}(e))},Xe=[1,0,0,1,0,0],qe=function(e,t){var i,r,n,o,a,s,l=e._gsTransform||new Ie,h=e.style;if(Fe?r=te(e,Oe,null,!0):e.currentStyle&&(r=(r=e.currentStyle.filter.match(f))&&4===r.length?[r[0].substr(4),Number(r[2].substr(4)),Number(r[1].substr(4)),r[3].substr(4),l.x||0,l.y||0].join(","):""),i=!r||"none"===r||"matrix(1, 0, 0, 1, 0, 0)"===r,!Fe||!(s=!ee(e)||"none"===ee(e).display)&&e.parentNode||(s&&(o=h.display,h.display="block"),e.parentNode||(a=1,ze.appendChild(e)),i=!(r=te(e,Oe,null,!0))||"none"===r||"matrix(1, 0, 0, 1, 0, 0)"===r,o?h.display=o:s&&$e(h,"display"),a&&ze.removeChild(e)),(l.svg||e.getCTM&&Ge(e))&&(i&&-1!==(h[Fe]+"").indexOf("matrix")&&(r=h[Fe],i=0),n=e.getAttribute("transform"),i&&n&&(r="matrix("+(n=e.transform.baseVal.consolidate().matrix).a+","+n.b+","+n.c+","+n.d+","+n.e+","+n.f+")",i=0)),i)return Xe;for(n=(r||"").match(A)||[],be=n.length;-1<--be;)o=Number(n[be]),n[be]=(a=o-(o|=0))?(1e5*a+(a<0?-.5:.5)|0)/1e5+o:o;return t&&6<n.length?[n[0],n[1],n[4],n[5],n[12],n[13]]:n},Ye=n.getTransform=function(e,t,i,r){if(e._gsTransform&&i&&!r)return e._gsTransform;var n,o,a,s,l,h,c=i&&e._gsTransform||new Ie,u=c.scaleX<0,f=Ve&&(parseFloat(te(e,ke,t,!1,"0 0 0").split(" ")[2])||c.zOrigin)||0,p=parseFloat(z.defaultTransformPerspective)||0;if(c.svg=!(!e.getCTM||!Ge(e)),c.svg&&(je(e,te(e,ke,t,!1,"50% 50%")+"",c,e.getAttribute("data-svg-origin")),Me=z.useSVGTransformAttr||Be),(n=qe(e))!==Xe){if(16===n.length){var d,m,g,E,v,y=n[0],T=n[1],_=n[2],x=n[3],R=n[4],b=n[5],w=n[6],H=n[7],S=n[8],M=n[9],C=n[10],A=n[12],P=n[13],D=n[14],L=n[11],F=Math.atan2(w,C);c.zOrigin&&(A=S*(D=-c.zOrigin)-n[12],P=M*D-n[13],D=C*D+c.zOrigin-n[14]),c.rotationX=F*B,F&&(d=R*(E=Math.cos(-F))+S*(v=Math.sin(-F)),m=b*E+M*v,g=w*E+C*v,S=R*-v+S*E,M=b*-v+M*E,C=w*-v+C*E,L=H*-v+L*E,R=d,b=m,w=g),F=Math.atan2(-_,C),c.rotationY=F*B,F&&(m=T*(E=Math.cos(-F))-M*(v=Math.sin(-F)),g=_*E-C*v,M=T*v+M*E,C=_*v+C*E,L=x*v+L*E,y=d=y*E-S*v,T=m,_=g),F=Math.atan2(T,y),c.rotation=F*B,F&&(d=y*(E=Math.cos(F))+T*(v=Math.sin(F)),m=R*E+b*v,g=S*E+M*v,T=T*E-y*v,b=b*E-R*v,M=M*E-S*v,y=d,R=m,S=g),c.rotationX&&359.9<Math.abs(c.rotationX)+Math.abs(c.rotation)&&(c.rotationX=c.rotation=0,c.rotationY=180-c.rotationY),F=Math.atan2(R,b),c.scaleX=(1e5*Math.sqrt(y*y+T*T+_*_)+.5|0)/1e5,c.scaleY=(1e5*Math.sqrt(b*b+w*w)+.5|0)/1e5,c.scaleZ=(1e5*Math.sqrt(S*S+M*M+C*C)+.5|0)/1e5,y/=c.scaleX,R/=c.scaleY,T/=c.scaleX,b/=c.scaleY,2e-5<Math.abs(F)?(c.skewX=F*B,R=0,"simple"!==c.skewType&&(c.scaleY*=1/Math.cos(F))):c.skewX=0,c.perspective=L?1/(L<0?-L:L):0,c.x=A,c.y=P,c.z=D,c.svg&&(c.x-=c.xOrigin-(c.xOrigin*y-c.yOrigin*R),c.y-=c.yOrigin-(c.yOrigin*T-c.xOrigin*b))}else if(!Ve||r||!n.length||c.x!==n[4]||c.y!==n[5]||!c.rotationX&&!c.rotationY){var O=6<=n.length,k=O?n[0]:1,V=n[1]||0,I=n[2]||0,N=O?n[3]:1;c.x=n[4]||0,c.y=n[5]||0,a=Math.sqrt(k*k+V*V),s=Math.sqrt(N*N+I*I),l=k||V?Math.atan2(V,k)*B:c.rotation||0,h=I||N?Math.atan2(I,N)*B+l:c.skewX||0,c.scaleX=a,c.scaleY=s,c.rotation=l,c.skewX=h,Ve&&(c.rotationX=c.rotationY=c.z=0,c.perspective=p,c.scaleZ=1),c.svg&&(c.x-=c.xOrigin-(c.xOrigin*k+c.yOrigin*I),c.y-=c.yOrigin-(c.xOrigin*V+c.yOrigin*N))}for(o in 90<Math.abs(c.skewX)&&Math.abs(c.skewX)<270&&(u?(c.scaleX*=-1,c.skewX+=c.rotation<=0?180:-180,c.rotation+=c.rotation<=0?180:-180):(c.scaleY*=-1,c.skewX+=c.skewX<=0?180:-180)),c.zOrigin=f,c)c[o]<2e-5&&-2e-5<c[o]&&(c[o]=0)}return i&&((e._gsTransform=c).svg&&(Me&&e.style[Fe]?U.delayedCall(.001,function(){$e(e.style,Fe)}):!Me&&e.getAttribute("transform")&&U.delayedCall(.001,function(){e.removeAttribute("transform")}))),c},Ke=function(e){var t,i,r=this.data,n=-r.rotation*I,o=n+r.skewX*I,a=(Math.cos(n)*r.scaleX*1e5|0)/1e5,s=(Math.sin(n)*r.scaleX*1e5|0)/1e5,l=(Math.sin(o)*-r.scaleY*1e5|0)/1e5,h=(Math.cos(o)*r.scaleY*1e5|0)/1e5,c=this.t.style,u=this.t.currentStyle;if(u){i=s,s=-l,l=-i,t=u.filter,c.filter="";var f,p,d=this.t.offsetWidth,m=this.t.offsetHeight,g="absolute"!==u.position,E="progid:DXImageTransform.Microsoft.Matrix(M11="+a+", M12="+s+", M21="+l+", M22="+h,v=r.x+d*r.xPercent/100,y=r.y+m*r.yPercent/100;if(null!=r.ox&&(v+=(f=(r.oxp?d*r.ox*.01:r.ox)-d/2)-(f*a+(p=(r.oyp?m*r.oy*.01:r.oy)-m/2)*s),y+=p-(f*l+p*h)),g?E+=", Dx="+((f=d/2)-(f*a+(p=m/2)*s)+v)+", Dy="+(p-(f*l+p*h)+y)+")":E+=", sizingMethod='auto expand')",-1!==t.indexOf("DXImageTransform.Microsoft.Matrix(")?c.filter=t.replace(F,E):c.filter=E+" "+t,(0===e||1===e)&&1===a&&0===s&&0===l&&1===h&&(g&&-1===E.indexOf("Dx=0, Dy=0")||L.test(t)&&100!==parseFloat(RegExp.$1)||-1===t.indexOf(t.indexOf("Alpha"))&&c.removeAttribute("filter")),!g){var T,_,x,R=w<8?1:-1;for(f=r.ieOffsetX||0,p=r.ieOffsetY||0,r.ieOffsetX=Math.round((d-((a<0?-a:a)*d+(s<0?-s:s)*m))/2+v),r.ieOffsetY=Math.round((m-((h<0?-h:h)*m+(l<0?-l:l)*d))/2+y),be=0;be<4;be++)x=(i=-1!==(T=u[_=se[be]]).indexOf("px")?parseFloat(T):ie(this.t,_,parseFloat(T),T.replace(D,""))||0)!==r[_]?be<2?-r.ieOffsetX:-r.ieOffsetY:be<2?f-r.ieOffsetX:p-r.ieOffsetY,c[_]=(r[_]=Math.round(i-x*(0===be||2===be?1:R)))+"px"}}},Qe=n.set3DTransformRatio=n.setTransformRatio=function(e){var t,i,r,n,o,a,s,l,h,c,u,f,p,d,m,g,E,v,y,T,_=this.data,x=this.t.style,R=_.rotation,b=_.rotationX,w=_.rotationY,H=_.scaleX,S=_.scaleY,M=_.scaleZ,C=_.x,A=_.y,P=_.z,D=_.svg,L=_.perspective,F=_.force3D,O=_.skewY,k=_.skewX;if(O&&(k+=O,R+=O),!((1!==e&&0!==e||"auto"!==F||this.tween._totalTime!==this.tween._totalDuration&&this.tween._totalTime)&&F||P||L||w||b||1!==M)||Me&&D||!Ve)R||k||D?(R*=I,T=k*I,1e5,i=Math.cos(R)*H,o=Math.sin(R)*H,r=Math.sin(R-T)*-S,a=Math.cos(R-T)*S,T&&"simple"===_.skewType&&(t=Math.tan(T-O*I),r*=t=Math.sqrt(1+t*t),a*=t,O&&(t=Math.tan(O*I),i*=t=Math.sqrt(1+t*t),o*=t)),D&&(C+=_.xOrigin-(_.xOrigin*i+_.yOrigin*r)+_.xOffset,A+=_.yOrigin-(_.xOrigin*o+_.yOrigin*a)+_.yOffset,Me&&(_.xPercent||_.yPercent)&&(m=this.t.getBBox(),C+=.01*_.xPercent*m.width,A+=.01*_.yPercent*m.height),C<(m=1e-6)&&-m<C&&(C=0),A<m&&-m<A&&(A=0)),y=(1e5*i|0)/1e5+","+(1e5*o|0)/1e5+","+(1e5*r|0)/1e5+","+(1e5*a|0)/1e5+","+C+","+A+")",D&&Me?this.t.setAttribute("transform","matrix("+y):x[Fe]=(_.xPercent||_.yPercent?"translate("+_.xPercent+"%,"+_.yPercent+"%) matrix(":"matrix(")+y):x[Fe]=(_.xPercent||_.yPercent?"translate("+_.xPercent+"%,"+_.yPercent+"%) matrix(":"matrix(")+H+",0,0,"+S+","+C+","+A+")";else{if(V&&(H<(m=1e-4)&&-m<H&&(H=M=2e-5),S<m&&-m<S&&(S=M=2e-5),!L||_.z||_.rotationX||_.rotationY||(L=0)),R||k)R*=I,g=i=Math.cos(R),E=o=Math.sin(R),k&&(R-=k*I,g=Math.cos(R),E=Math.sin(R),"simple"===_.skewType&&(t=Math.tan((k-O)*I),g*=t=Math.sqrt(1+t*t),E*=t,_.skewY&&(t=Math.tan(O*I),i*=t=Math.sqrt(1+t*t),o*=t))),r=-E,a=g;else{if(!(w||b||1!==M||L||D))return void(x[Fe]=(_.xPercent||_.yPercent?"translate("+_.xPercent+"%,"+_.yPercent+"%) translate3d(":"translate3d(")+C+"px,"+A+"px,"+P+"px)"+(1!==H||1!==S?" scale("+H+","+S+")":""));i=a=1,r=o=0}c=1,n=s=l=h=u=f=0,p=L?-1/L:0,d=_.zOrigin,m=1e-6,",","0",(R=w*I)&&(g=Math.cos(R),u=p*(l=-(E=Math.sin(R))),n=i*E,s=o*E,p*=c=g,i*=g,o*=g),(R=b*I)&&(t=r*(g=Math.cos(R))+n*(E=Math.sin(R)),v=a*g+s*E,h=c*E,f=p*E,n=r*-E+n*g,s=a*-E+s*g,c*=g,p*=g,r=t,a=v),1!==M&&(n*=M,s*=M,c*=M,p*=M),1!==S&&(r*=S,a*=S,h*=S,f*=S),1!==H&&(i*=H,o*=H,l*=H,u*=H),(d||D)&&(d&&(C+=n*-d,A+=s*-d,P+=c*-d+d),D&&(C+=_.xOrigin-(_.xOrigin*i+_.yOrigin*r)+_.xOffset,A+=_.yOrigin-(_.xOrigin*o+_.yOrigin*a)+_.yOffset),C<m&&-m<C&&(C="0"),A<m&&-m<A&&(A="0"),P<m&&-m<P&&(P=0)),y=_.xPercent||_.yPercent?"translate("+_.xPercent+"%,"+_.yPercent+"%) matrix3d(":"matrix3d(",y+=(i<m&&-m<i?"0":i)+","+(o<m&&-m<o?"0":o)+","+(l<m&&-m<l?"0":l),y+=","+(u<m&&-m<u?"0":u)+","+(r<m&&-m<r?"0":r)+","+(a<m&&-m<a?"0":a),b||w||1!==M?(y+=","+(h<m&&-m<h?"0":h)+","+(f<m&&-m<f?"0":f)+","+(n<m&&-m<n?"0":n),y+=","+(s<m&&-m<s?"0":s)+","+(c<m&&-m<c?"0":c)+","+(p<m&&-m<p?"0":p)+","):y+=",0,0,0,0,1,0,",y+=C+","+A+","+P+","+(L?1+-P/L:1)+")",x[Fe]=y}};(e=Ie.prototype).x=e.y=e.z=e.skewX=e.skewY=e.rotation=e.rotationX=e.rotationY=e.zOrigin=e.xPercent=e.yPercent=e.xOffset=e.yOffset=0,e.scaleX=e.scaleY=e.scaleZ=1,He("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin",{parser:function(e,t,i,r,n,o,a){if(r._lastParsedTransform===a)return n;var s,l=(r._lastParsedTransform=a).scale&&"function"==typeof a.scale?a.scale:0;"function"==typeof a[i]&&(s=a[i],a[i]=t),l&&(a.scale=l(C,e));var h,c,u,f,p,d,m,g,E,v=e._gsTransform,y=e.style,T=Le.length,_=a,x={},R="transformOrigin",b=Ye(e,H,!0,_.parseTransform),w=_.transform&&("function"==typeof _.transform?_.transform(C,M):_.transform);if(b.skewType=_.skewType||b.skewType||z.defaultSkewType,r._transform=b,"rotationZ"in _&&(_.rotation=_.rotationZ),w&&"string"==typeof w&&Fe)(c=G.style)[Fe]=w,c.display="block",c.position="absolute",-1!==w.indexOf("%")&&(c.width=te(e,"width"),c.height=te(e,"height")),j.body.appendChild(G),h=Ye(G,null,!1),"simple"===b.skewType&&(h.scaleY*=Math.cos(h.skewX*I)),b.svg&&(d=b.xOrigin,m=b.yOrigin,h.x-=b.xOffset,h.y-=b.yOffset,(_.transformOrigin||_.svgOrigin)&&(w={},je(e,he(_.transformOrigin),w,_.svgOrigin,_.smoothOrigin,!0),d=w.xOrigin,m=w.yOrigin,h.x-=w.xOffset-b.xOffset,h.y-=w.yOffset-b.yOffset),(d||m)&&(g=qe(G,!0),h.x-=d-(d*g[0]+m*g[2]),h.y-=m-(d*g[1]+m*g[3]))),j.body.removeChild(G),h.perspective||(h.perspective=b.perspective),null!=_.xPercent&&(h.xPercent=ue(_.xPercent,b.xPercent)),null!=_.yPercent&&(h.yPercent=ue(_.yPercent,b.yPercent));else if("object"==typeof _){if(h={scaleX:ue(null!=_.scaleX?_.scaleX:_.scale,b.scaleX),scaleY:ue(null!=_.scaleY?_.scaleY:_.scale,b.scaleY),scaleZ:ue(_.scaleZ,b.scaleZ),x:ue(_.x,b.x),y:ue(_.y,b.y),z:ue(_.z,b.z),xPercent:ue(_.xPercent,b.xPercent),yPercent:ue(_.yPercent,b.yPercent),perspective:ue(_.transformPerspective,b.perspective)},null!=(p=_.directionalRotation))if("object"==typeof p)for(c in p)_[c]=p[c];else _.rotation=p;"string"==typeof _.x&&-1!==_.x.indexOf("%")&&(h.x=0,h.xPercent=ue(_.x,b.xPercent)),"string"==typeof _.y&&-1!==_.y.indexOf("%")&&(h.y=0,h.yPercent=ue(_.y,b.yPercent)),h.rotation=fe("rotation"in _?_.rotation:"shortRotation"in _?_.shortRotation+"_short":b.rotation,b.rotation,"rotation",x),Ve&&(h.rotationX=fe("rotationX"in _?_.rotationX:"shortRotationX"in _?_.shortRotationX+"_short":b.rotationX||0,b.rotationX,"rotationX",x),h.rotationY=fe("rotationY"in _?_.rotationY:"shortRotationY"in _?_.shortRotationY+"_short":b.rotationY||0,b.rotationY,"rotationY",x)),h.skewX=fe(_.skewX,b.skewX),h.skewY=fe(_.skewY,b.skewY)}for(Ve&&null!=_.force3D&&(b.force3D=_.force3D,f=!0),(u=b.force3D||b.z||b.rotationX||b.rotationY||h.z||h.rotationX||h.rotationY||h.perspective)||null==_.scale||(h.scaleZ=1);-1<--T;)(1e-6<(w=h[E=Le[T]]-b[E])||w<-1e-6||null!=_[E]||null!=N[E])&&(f=!0,n=new _e(b,E,b[E],w,n),E in x&&(n.e=x[E]),n.xs0=0,n.plugin=o,r._overwriteProps.push(n.n));return w=_.transformOrigin,b.svg&&(w||_.svgOrigin)&&(d=b.xOffset,m=b.yOffset,je(e,he(w),h,_.svgOrigin,_.smoothOrigin),n=xe(b,"xOrigin",(v?b:h).xOrigin,h.xOrigin,n,R),n=xe(b,"yOrigin",(v?b:h).yOrigin,h.yOrigin,n,R),(d!==b.xOffset||m!==b.yOffset)&&(n=xe(b,"xOffset",v?d:b.xOffset,b.xOffset,n,R),n=xe(b,"yOffset",v?m:b.yOffset,b.yOffset,n,R)),w="0px 0px"),(w||Ve&&u&&b.zOrigin)&&(Fe?(f=!0,E=ke,w=(w||te(e,E,H,!1,"50% 50%"))+"",(n=new _e(y,E,0,0,n,-1,R)).b=y[E],n.plugin=o,n.xs0=n.e=Ve?(c=b.zOrigin,w=w.split(" "),b.zOrigin=(2<w.length&&(0===c||"0px"!==w[2])?parseFloat(w[2]):c)||0,n.xs0=n.e=w[0]+" "+(w[1]||"50%")+" 0px",(n=new _e(b,"zOrigin",0,0,n,-1,n.n)).b=c,b.zOrigin):w):he(w+"",b)),f&&(r._transformType=b.svg&&Me||!u&&3!==this._transformType?2:3),s&&(a[i]=s),l&&(a.scale=l),n},prefix:!0}),He("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),He("borderRadius",{defaultValue:"0px",parser:function(e,t,i,r,n,o){t=this.format(t);var a,s,l,h,c,u,f,p,d,m,g,E,v,y,T,_,x=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],R=e.style;for(d=parseFloat(e.offsetWidth),m=parseFloat(e.offsetHeight),a=t.split(" "),s=0;s<x.length;s++)this.p.indexOf("border")&&(x[s]=J(x[s])),-1!==(c=h=te(e,x[s],H,!1,"0px")).indexOf(" ")&&(c=(h=c.split(" "))[0],h=h[1]),u=l=a[s],f=parseFloat(c),E=c.substr((f+"").length),""===(g=(v="="===u.charAt(1))?(p=parseInt(u.charAt(0)+"1",10),u=u.substr(2),p*=parseFloat(u),u.substr((p+"").length-(p<0?1:0))||""):(p=parseFloat(u),u.substr((p+"").length)))&&(g=b[i]||E),g!==E&&(y=ie(e,"borderLeft",f,E),T=ie(e,"borderTop",f,E),h="%"===g?(c=y/d*100+"%",T/m*100+"%"):"em"===g?(c=y/(_=ie(e,"borderLeft",1,"em"))+"em",T/_+"em"):(c=y+"px",T+"px"),v&&(u=parseFloat(c)+p+g,l=parseFloat(h)+p+g)),n=Re(R,x[s],c+" "+h,u+" "+l,!1,"0px",n);return n},prefix:!0,formatter:ve("0px 0px 0px 0px",!1,!0)}),He("borderBottomLeftRadius,borderBottomRightRadius,borderTopLeftRadius,borderTopRightRadius",{defaultValue:"0px",parser:function(e,t,i,r,n,o){return Re(e.style,i,this.format(te(e,i,H,!1,"0px 0px")),this.format(t),!1,"0px",n)},prefix:!0,formatter:ve("0px 0px",!1,!0)}),He("backgroundPosition",{defaultValue:"0 0",parser:function(e,t,i,r,n,o){var a,s,l,h,c,u,f="background-position",p=H||ee(e,null),d=this.format((p?w?p.getPropertyValue(f+"-x")+" "+p.getPropertyValue(f+"-y"):p.getPropertyValue(f):e.currentStyle.backgroundPositionX+" "+e.currentStyle.backgroundPositionY)||"0 0"),m=this.format(t);if(-1!==d.indexOf("%")!=(-1!==m.indexOf("%"))&&m.split(",").length<2&&((u=te(e,"backgroundImage").replace(R,""))&&"none"!==u)){for(a=d.split(" "),s=m.split(" "),X.setAttribute("src",u),l=2;-1<--l;)(h=-1!==(d=a[l]).indexOf("%"))!==(-1!==s[l].indexOf("%"))&&(c=0===l?e.offsetWidth-X.width:e.offsetHeight-X.height,a[l]=h?parseFloat(d)/100*c+"px":parseFloat(d)/c*100+"%");d=a.join(" ")}return this.parseComplex(e.style,d,m,n,o)},formatter:he}),He("backgroundSize",{defaultValue:"0 0",formatter:function(e){return"co"===(e+="").substr(0,2)?e:he(-1===e.indexOf(" ")?e+" "+e:e)}}),He("perspective",{defaultValue:"0px",prefix:!0}),He("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),He("transformStyle",{prefix:!0}),He("backfaceVisibility",{prefix:!0}),He("userSelect",{prefix:!0}),He("margin",{parser:ye("marginTop,marginRight,marginBottom,marginLeft")}),He("padding",{parser:ye("paddingTop,paddingRight,paddingBottom,paddingLeft")}),He("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(e,t,i,r,n,o){var a,s,l;return t=w<9?(s=e.currentStyle,l=w<8?" ":",",a="rect("+s.clipTop+l+s.clipRight+l+s.clipBottom+l+s.clipLeft+")",this.format(t).split(",").join(l)):(a=this.format(te(e,this.p,H,!1,this.dflt)),this.format(t)),this.parseComplex(e.style,a,t,n,o)}}),He("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),He("autoRound,strictUnits",{parser:function(e,t,i,r,n){return n}}),He("border",{defaultValue:"0px solid #000",parser:function(e,t,i,r,n,o){var a=te(e,"borderTopWidth",H,!1,"0px"),s=this.format(t).split(" "),l=s[0].replace(D,"");return"px"!==l&&(a=parseFloat(a)/ie(e,"borderTopWidth",1,l)+l),this.parseComplex(e.style,this.format(a+" "+te(e,"borderTopStyle",H,!1,"solid")+" "+te(e,"borderTopColor",H,!1,"#000")),s.join(" "),n,o)},color:!0,formatter:function(e){var t=e.split(" ");return t[0]+" "+(t[1]||"solid")+" "+(e.match(Ee)||["#000"])[0]}}),He("borderWidth",{parser:ye("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),He("float,cssFloat,styleFloat",{parser:function(e,t,i,r,n,o){var a=e.style,s="cssFloat"in a?"cssFloat":"styleFloat";return new _e(a,s,0,0,n,-1,i,!1,0,a[s],t)}});var Ze=function(e){var t,i=this.t,r=i.filter||te(this.data,"filter")||"",n=this.s+this.c*e|0;100===n&&(t=-1===r.indexOf("atrix(")&&-1===r.indexOf("radient(")&&-1===r.indexOf("oader(")?(i.removeAttribute("filter"),!te(this.data,"filter")):(i.filter=r.replace(a,""),!0)),t||(this.xn1&&(i.filter=r=r||"alpha(opacity="+n+")"),-1===r.indexOf("pacity")?0===n&&this.xn1||(i.filter=r+" alpha(opacity="+n+")"):i.filter=r.replace(L,"opacity="+n))};He("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(e,t,i,r,n,o){var a=parseFloat(te(e,"opacity",H,!1,"1")),s=e.style,l="autoAlpha"===i;return"string"==typeof t&&"="===t.charAt(1)&&(t=("-"===t.charAt(0)?-1:1)*parseFloat(t.substr(2))+a),l&&1===a&&"hidden"===te(e,"visibility",H)&&0!==t&&(a=0),Y?n=new _e(s,"opacity",a,t-a,n):((n=new _e(s,"opacity",100*a,100*(t-a),n)).xn1=l?1:0,s.zoom=1,n.type=2,n.b="alpha(opacity="+n.s+")",n.e="alpha(opacity="+(n.s+n.c)+")",n.data=e,n.plugin=o,n.setRatio=Ze),l&&((n=new _e(s,"visibility",0,0,n,-1,null,!1,0,0!==a?"inherit":"hidden",0===t?"hidden":"inherit")).xs0="inherit",r._overwriteProps.push(n.n),r._overwriteProps.push(i)),n}});var $e=function(e,t){t&&(e.removeProperty?(("ms"===t.substr(0,2)||"webkit"===t.substr(0,6))&&(t="-"+t),e.removeProperty(t.replace(s,"-$1").toLowerCase())):e.removeAttribute(t))},Je=function(e){if(this.t._gsClassPT=this,1===e||0===e){this.t.setAttribute("class",0===e?this.b:this.e);for(var t=this.data,i=this.t.style;t;)t.v?i[t.p]=t.v:$e(i,t.p),t=t._next;1===e&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};He("className",{parser:function(e,t,i,r,n,o,a){var s,l,h,c,u,f=e.getAttribute("class")||"",p=e.style.cssText;if((n=r._classNamePT=new _e(e,i,0,0,n,2)).setRatio=Je,n.pr=-11,d=!0,n.b=f,l=ne(e,H),h=e._gsClassPT){for(c={},u=h.data;u;)c[u.p]=1,u=u._next;h.setRatio(1)}return(e._gsClassPT=n).e="="!==t.charAt(1)?t:f.replace(new RegExp("(?:\\s|^)"+t.substr(2)+"(?![\\w-])"),"")+("+"===t.charAt(0)?" "+t.substr(2):""),e.setAttribute("class",n.e),s=oe(e,l,ne(e),a,c),e.setAttribute("class",f),n.data=s.firstMPT,e.style.cssText=p,n.xfirst=r.parse(e,s.difs,n,o)}});var et=function(e){if((1===e||0===e)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var t,i,r,n,o,a=this.t.style,s=g.transform.parse;if("all"===this.e)n=!(a.cssText="");else for(r=(t=this.e.split(" ").join("").split(",")).length;-1<--r;)i=t[r],g[i]&&(g[i].parse===s?n=!0:i="transformOrigin"===i?ke:g[i].p),$e(a,i);n&&($e(a,Fe),(o=this.t._gsTransform)&&(o.svg&&(this.t.removeAttribute("data-svg-origin"),this.t.removeAttribute("transform")),delete this.t._gsTransform))}};for(He("clearProps",{parser:function(e,t,i,r,n){return(n=new _e(e,i,0,0,n,2)).setRatio=et,n.e=t,n.pr=-10,n.data=r._tween,d=!0,n}}),e="bezier,throwProps,physicsProps,physics2D".split(","),be=e.length;be--;)Se(e[be]);(e=z.prototype)._firstPT=e._lastParsedTransform=e._transform=null,e._onInitTween=function(e,t,i,r){if(!e.nodeType)return!1;this._target=M=e,this._tween=i,this._vars=t,C=r,S=t.autoRound,d=!1,b=t.suffixMap||z.suffixMap,H=ee(e,""),m=this._overwriteProps;var n,o,a,s,l,h,c,u,f,p=e.style;if(E&&""===p.zIndex&&(("auto"===(n=te(e,"zIndex",H))||""===n)&&this._addLazySet(p,"zIndex",0)),"string"==typeof t&&(s=p.cssText,n=ne(e,H),p.cssText=s+";"+t,n=oe(e,n,ne(e)).difs,!Y&&_.test(t)&&(n.opacity=parseFloat(RegExp.$1)),t=n,p.cssText=s),t.className?this._firstPT=o=g.className.parse(e,t.className,"className",this,null,null,t):this._firstPT=o=this.parse(e,t,null),this._transformType){for(f=3===this._transformType,Fe?v&&(E=!0,""===p.zIndex&&(("auto"===(c=te(e,"zIndex",H))||""===c)&&this._addLazySet(p,"zIndex",0)),y&&this._addLazySet(p,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(f?"visible":"hidden"))):p.zoom=1,a=o;a&&a._next;)a=a._next;u=new _e(e,"transform",0,0,null,2),this._linkCSSP(u,null,a),u.setRatio=Fe?Qe:Ke,u.data=this._transform||Ye(e,H,!0),u.tween=i,u.pr=-1,m.pop()}if(d){for(;o;){for(h=o._next,a=s;a&&a.pr>o.pr;)a=a._next;(o._prev=a?a._prev:l)?o._prev._next=o:s=o,(o._next=a)?a._prev=o:l=o,o=h}this._firstPT=s}return!0},e.parse=function(e,t,i,r){var n,o,a,s,l,h,c,u,f,p,d=e.style;for(n in t){if("function"==typeof(h=t[n])&&(h=h(C,M)),o=g[n])i=o.parse(e,h,n,this,i,r,t);else{if("--"===n.substr(0,2)){this._tween._propLookup[n]=this._addTween.call(this._tween,e.style,"setProperty",ee(e).getPropertyValue(n)+"",h+"",n,!1,n);continue}l=te(e,n,H)+"",f="string"==typeof h,"color"===n||"fill"===n||"stroke"===n||-1!==n.indexOf("Color")||f&&x.test(h)?(f||(h=(3<(h=me(h)).length?"rgba(":"rgb(")+h.join(",")+")"),i=Re(d,n,l,h,!0,"transparent",i,0,r)):f&&k.test(h)?i=Re(d,n,l,h,!0,null,i,0,r):(c=(a=parseFloat(l))||0===a?l.substr((a+"").length):"",(""===l||"auto"===l)&&(c="width"===n||"height"===n?(a=le(e,n,H),"px"):"left"===n||"top"===n?(a=re(e,n,H),"px"):(a="opacity"!==n?0:1,"")),""===(u=(p=f&&"="===h.charAt(1))?(s=parseInt(h.charAt(0)+"1",10),h=h.substr(2),s*=parseFloat(h),h.replace(D,"")):(s=parseFloat(h),f?h.replace(D,""):""))&&(u=n in b?b[n]:c),h=s||0===s?(p?s+a:s)+u:t[n],c!==u&&(""!==u||"lineHeight"===n)&&(s||0===s)&&a&&(a=ie(e,n,a,c),"%"===u?(a/=ie(e,n,100,"%")/100,!0!==t.strictUnits&&(l=a+"%")):"em"===u||"rem"===u||"vw"===u||"vh"===u?a/=ie(e,n,1,u):"px"!==u&&(s=ie(e,n,s,u),u="px"),p&&(s||0===s)&&(h=s+a+u)),p&&(s+=a),!a&&0!==a||!s&&0!==s?void 0!==d[n]&&(h||h+""!="NaN"&&null!=h)?(i=new _e(d,n,s||a||0,0,i,-1,n,!1,0,l,h)).xs0="none"!==h||"display"!==n&&-1===n.indexOf("Style")?h:l:Q("invalid "+n+" tween value: "+t[n]):(i=new _e(d,n,a,s-a,i,0,n,!1!==S&&("px"===u||"zIndex"===n),0,l,h)).xs0=u)}r&&i&&!i.plugin&&(i.plugin=r)}return i},e.setRatio=function(e){var t,i,r,n=this._firstPT;if(1!==e||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(e||this._tween._time!==this._tween._duration&&0!==this._tween._time||-1e-6===this._tween._rawPrevTime)for(;n;){if(t=n.c*e+n.s,n.r?t=n.r(t):t<1e-6&&-1e-6<t&&(t=0),n.type)if(1===n.type)if(2===(r=n.l))n.t[n.p]=n.xs0+t+n.xs1+n.xn1+n.xs2;else if(3===r)n.t[n.p]=n.xs0+t+n.xs1+n.xn1+n.xs2+n.xn2+n.xs3;else if(4===r)n.t[n.p]=n.xs0+t+n.xs1+n.xn1+n.xs2+n.xn2+n.xs3+n.xn3+n.xs4;else if(5===r)n.t[n.p]=n.xs0+t+n.xs1+n.xn1+n.xs2+n.xn2+n.xs3+n.xn3+n.xs4+n.xn4+n.xs5;else{for(i=n.xs0+t+n.xs1,r=1;r<n.l;r++)i+=n["xn"+r]+n["xs"+(r+1)];n.t[n.p]=i}else-1===n.type?n.t[n.p]=n.xs0:n.setRatio&&n.setRatio(e);else n.t[n.p]=t+n.xs0;n=n._next}else for(;n;)2!==n.type?n.t[n.p]=n.b:n.setRatio(e),n=n._next;else for(;n;){if(2!==n.type)if(n.r&&-1!==n.type)if(t=n.r(n.s+n.c),n.type){if(1===n.type){for(r=n.l,i=n.xs0+t+n.xs1,r=1;r<n.l;r++)i+=n["xn"+r]+n["xs"+(r+1)];n.t[n.p]=i}}else n.t[n.p]=t+n.xs0;else n.t[n.p]=n.e;else n.setRatio(e);n=n._next}},e._enableTransforms=function(e){this._transform=this._transform||Ye(this._target,H,!0),this._transformType=this._transform.svg&&Me||!e&&3!==this._transformType?2:3};var tt=function(e){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};e._addLazySet=function(e,t,i){var r=this._firstPT=new _e(e,t,0,0,this._firstPT,2);r.e=i,r.setRatio=tt,r.data=this},e._linkCSSP=function(e,t,i,r){return e&&(t&&(t._prev=e),e._next&&(e._next._prev=e._prev),e._prev?e._prev._next=e._next:this._firstPT===e&&(this._firstPT=e._next,r=!0),i?i._next=e:r||null!==this._firstPT||(this._firstPT=e),e._next=t,e._prev=i),e},e._mod=function(e){for(var t=this._firstPT;t;)"function"==typeof e[t.p]&&(t.r=e[t.p]),t=t._next},e._kill=function(e){var t,i,r,n=e;if(e.autoAlpha||e.alpha){for(i in n={},e)n[i]=e[i];n.opacity=1,n.autoAlpha&&(n.visibility=1)}for(e.className&&(t=this._classNamePT)&&((r=t.xfirst)&&r._prev?this._linkCSSP(r._prev,t._next,r._prev._prev):r===this._firstPT&&(this._firstPT=t._next),t._next&&this._linkCSSP(t._next,t._next._next,r._prev),this._classNamePT=null),t=this._firstPT;t;)t.plugin&&t.plugin!==i&&t.plugin._kill&&(t.plugin._kill(e),i=t.plugin),t=t._next;return o.prototype._kill.call(this,n)};var it=function(e,t,i){var r,n,o,a;if(e.slice)for(n=e.length;-1<--n;)it(e[n],t,i);else for(n=(r=e.childNodes).length;-1<--n;)a=(o=r[n]).type,o.style&&(t.push(ne(o)),i&&i.push(o)),1!==a&&9!==a&&11!==a||!o.childNodes.length||it(o,t,i)};return z.cascadeTo=function(e,t,i){var r,n,o,a,s=U.to(e,t,i),l=[s],h=[],c=[],u=[],f=U._internals.reservedProps;for(e=s._targets||s.target,it(e,h,u),s.render(t,!0,!0),it(e,c),s.render(0,!0,!0),s._enabled(!0),r=u.length;-1<--r;)if((n=oe(u[r],h[r],c[r])).firstMPT){for(o in n=n.difs,i)f[o]&&(n[o]=i[o]);for(o in a={},n)a[o]=h[r][o];l.push(U.fromTo(u[r],t,a,n))}return l},o.activate([z]),z},!0),e=_gsScope._gsDefine.plugin({propName:"roundProps",version:"1.7.0",priority:-1,API:2,init:function(e,t,i){return this._tween=i,!0}}),l=function(t){var i=t<1?Math.pow(10,(t+"").length-2):1;return function(e){return(Math.round(e/t)*t*i|0)/i}},h=function(e,t){for(;e;)e.f||e.blob||(e.m=t||Math.round),e=e._next},(t=e.prototype)._onInitAllProps=function(){var e,t,i,r,n=this._tween,o=n.vars.roundProps,a={},s=n._propLookup.roundProps;if("object"!=typeof o||o.push)for("string"==typeof o&&(o=o.split(",")),i=o.length;-1<--i;)a[o[i]]=Math.round;else for(r in o)a[r]=l(o[r]);for(r in a)for(e=n._firstPT;e;)t=e._next,e.pg?e.t._mod(a):e.n===r&&(2===e.f&&e.t?h(e.t._firstPT,a[r]):(this._add(e.t,r,e.s,e.c,a[r]),t&&(t._prev=e._prev),e._prev?e._prev._next=t:n._firstPT===e&&(n._firstPT=t),e._next=e._prev=null,n._propLookup[r]=s)),e=t;return!1},t._add=function(e,t,i,r,n){this._addTween(e,t,i,i+r,t,n||Math.round),this._overwriteProps.push(t)},_gsScope._gsDefine.plugin({propName:"attr",API:2,version:"0.6.1",init:function(e,t,i,r){var n,o;if("function"!=typeof e.setAttribute)return!1;for(n in t)"function"==typeof(o=t[n])&&(o=o(r,e)),this._addTween(e,"setAttribute",e.getAttribute(n)+"",o+"",n,!1,n),this._overwriteProps.push(n);return!0}}),_gsScope._gsDefine.plugin({propName:"directionalRotation",version:"0.3.1",API:2,init:function(e,t,i,r){"object"!=typeof t&&(t={rotation:t}),this.finals={};var n,o,a,s,l,h,c=!0===t.useRadians?2*Math.PI:360;for(n in t)"useRadians"!==n&&("function"==typeof(s=t[n])&&(s=s(r,e)),o=(h=(s+"").split("_"))[0],a=parseFloat("function"!=typeof e[n]?e[n]:e[n.indexOf("set")||"function"!=typeof e["get"+n.substr(3)]?n:"get"+n.substr(3)]()),l=(s=this.finals[n]="string"==typeof o&&"="===o.charAt(1)?a+parseInt(o.charAt(0)+"1",10)*Number(o.substr(2)):Number(o)||0)-a,h.length&&(-1!==(o=h.join("_")).indexOf("short")&&((l%=c)!==l%(c/2)&&(l=l<0?l+c:l-c)),-1!==o.indexOf("_cw")&&l<0?l=(l+9999999999*c)%c-(l/c|0)*c:-1!==o.indexOf("ccw")&&0<l&&(l=(l-9999999999*c)%c-(l/c|0)*c)),(1e-6<l||l<-1e-6)&&(this._addTween(e,n,a,a+l,n),this._overwriteProps.push(n)));return!0},set:function(e){var t;if(1!==e)this._super.setRatio.call(this,e);else for(t=this._firstPT;t;)t.f?t.t[t.p](this.finals[t.p]):t.t[t.p]=this.finals[t.p],t=t._next}})._autoCSS=!0,_gsScope._gsDefine("easing.Back",["easing.Ease"],function(g){var i,r,t,e,n=_gsScope.GreenSockGlobals||_gsScope,o=n.com.greensock,a=2*Math.PI,s=Math.PI/2,l=o._class,h=function(e,t){var i=l("easing."+e,function(){},!0),r=i.prototype=new g;return r.constructor=i,r.getRatio=t,i},c=g.register||function(){},u=function(e,t,i,r,n){var o=l("easing."+e,{easeOut:new t,easeIn:new i,easeInOut:new r},!0);return c(o,e),o},E=function(e,t,i){this.t=e,this.v=t,i&&(((this.next=i).prev=this).c=i.v-t,this.gap=i.t-e)},f=function(e,t){var i=l("easing."+e,function(e){this._p1=e||0===e?e:1.70158,this._p2=1.525*this._p1},!0),r=i.prototype=new g;return r.constructor=i,r.getRatio=t,r.config=function(e){return new i(e)},i},p=u("Back",f("BackOut",function(e){return(e-=1)*e*((this._p1+1)*e+this._p1)+1}),f("BackIn",function(e){return e*e*((this._p1+1)*e-this._p1)}),f("BackInOut",function(e){return(e*=2)<1?.5*e*e*((this._p2+1)*e-this._p2):.5*((e-=2)*e*((this._p2+1)*e+this._p2)+2)})),d=l("easing.SlowMo",function(e,t,i){t=t||0===t?t:.7,null==e?e=.7:1<e&&(e=1),this._p=1!==e?t:0,this._p1=(1-e)/2,this._p2=e,this._p3=this._p1+this._p2,this._calcEnd=!0===i},!0),m=d.prototype=new g;return m.constructor=d,m.getRatio=function(e){var t=e+(.5-e)*this._p;return e<this._p1?this._calcEnd?1-(e=1-e/this._p1)*e:t-(e=1-e/this._p1)*e*e*e*t:e>this._p3?this._calcEnd?1===e?0:1-(e=(e-this._p3)/this._p1)*e:t+(e-t)*(e=(e-this._p3)/this._p1)*e*e*e:this._calcEnd?1:t},d.ease=new d(.7,.7),m.config=d.config=function(e,t,i){return new d(e,t,i)},(m=(i=l("easing.SteppedEase",function(e,t){e=e||1,this._p1=1/e,this._p2=e+(t?0:1),this._p3=t?1:0},!0)).prototype=new g).constructor=i,m.getRatio=function(e){return e<0?e=0:1<=e&&(e=.999999999),((this._p2*e|0)+this._p3)*this._p1},m.config=i.config=function(e,t){return new i(e,t)},(m=(r=l("easing.ExpoScaleEase",function(e,t,i){this._p1=Math.log(t/e),this._p2=t-e,this._p3=e,this._ease=i},!0)).prototype=new g).constructor=r,m.getRatio=function(e){return this._ease&&(e=this._ease.getRatio(e)),(this._p3*Math.exp(this._p1*e)-this._p3)/this._p2},m.config=r.config=function(e,t,i){return new r(e,t,i)},(m=(t=l("easing.RoughEase",function(e){for(var t,i,r,n,o,a,s=(e=e||{}).taper||"none",l=[],h=0,c=0|(e.points||20),u=c,f=!1!==e.randomize,p=!0===e.clamp,d=e.template instanceof g?e.template:null,m="number"==typeof e.strength?.4*e.strength:.4;-1<--u;)t=f?Math.random():1/c*u,i=d?d.getRatio(t):t,r="none"===s?m:"out"===s?(n=1-t)*n*m:"in"===s?t*t*m:(n=t<.5?2*t:2*(1-t))*n*.5*m,f?i+=Math.random()*r-.5*r:u%2?i+=.5*r:i-=.5*r,p&&(1<i?i=1:i<0&&(i=0)),l[h++]={x:t,y:i};for(l.sort(function(e,t){return e.x-t.x}),a=new E(1,1,null),u=c;-1<--u;)o=l[u],a=new E(o.x,o.y,a);this._prev=new E(0,0,0!==a.t?a:a.next)},!0)).prototype=new g).constructor=t,m.getRatio=function(e){var t=this._prev;if(e>t.t){for(;t.next&&e>=t.t;)t=t.next;t=t.prev}else for(;t.prev&&e<=t.t;)t=t.prev;return(this._prev=t).v+(e-t.t)/t.gap*t.c},m.config=function(e){return new t(e)},t.ease=new t,u("Bounce",h("BounceOut",function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}),h("BounceIn",function(e){return(e=1-e)<1/2.75?1-7.5625*e*e:e<2/2.75?1-(7.5625*(e-=1.5/2.75)*e+.75):e<2.5/2.75?1-(7.5625*(e-=2.25/2.75)*e+.9375):1-(7.5625*(e-=2.625/2.75)*e+.984375)}),h("BounceInOut",function(e){var t=e<.5;return e=(e=t?1-2*e:2*e-1)<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375,t?.5*(1-e):.5*e+.5})),u("Circ",h("CircOut",function(e){return Math.sqrt(1-(e-=1)*e)}),h("CircIn",function(e){return-(Math.sqrt(1-e*e)-1)}),h("CircInOut",function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)})),u("Elastic",(e=function(e,t,i){var r=l("easing."+e,function(e,t){this._p1=1<=e?e:1,this._p2=(t||i)/(e<1?e:1),this._p3=this._p2/a*(Math.asin(1/this._p1)||0),this._p2=a/this._p2},!0),n=r.prototype=new g;return n.constructor=r,n.getRatio=t,n.config=function(e,t){return new r(e,t)},r})("ElasticOut",function(e){return this._p1*Math.pow(2,-10*e)*Math.sin((e-this._p3)*this._p2)+1},.3),e("ElasticIn",function(e){return-this._p1*Math.pow(2,10*(e-=1))*Math.sin((e-this._p3)*this._p2)},.3),e("ElasticInOut",function(e){return(e*=2)<1?this._p1*Math.pow(2,10*(e-=1))*Math.sin((e-this._p3)*this._p2)*-.5:this._p1*Math.pow(2,-10*(e-=1))*Math.sin((e-this._p3)*this._p2)*.5+1},.45)),u("Expo",h("ExpoOut",function(e){return 1-Math.pow(2,-10*e)}),h("ExpoIn",function(e){return Math.pow(2,10*(e-1))-.001}),h("ExpoInOut",function(e){return(e*=2)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))})),u("Sine",h("SineOut",function(e){return Math.sin(e*s)}),h("SineIn",function(e){return 1-Math.cos(e*s)}),h("SineInOut",function(e){return-.5*(Math.cos(Math.PI*e)-1)})),l("easing.EaseLookup",{find:function(e){return g.map[e]}},!0),c(n.SlowMo,"SlowMo","ease,"),c(t,"RoughEase","ease,"),c(i,"SteppedEase","ease,"),p},!0)}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(f,p){"use strict";var d={},r=f.document,m=f.GreenSockGlobals=f.GreenSockGlobals||f,e=m[p];if(e)return"undefined"!=typeof module&&module.exports&&(module.exports=e);var t,i,n,g,E,o,a,v=function(e){var t,i=e.split("."),r=m;for(t=0;t<i.length;t++)r[i[t]]=r=r[i[t]]||{};return r},u=v("com.greensock"),y=1e-10,l=function(e){var t,i=[],r=e.length;for(t=0;t!==r;i.push(e[t++]));return i},T=function(){},_=(o=Object.prototype.toString,a=o.call([]),function(e){return null!=e&&(e instanceof Array||"object"==typeof e&&!!e.push&&o.call(e)===a)}),x={},R=function(s,l,h,c){this.sc=x[s]?x[s].sc:[],(x[s]=this).gsClass=null,this.func=h;var u=[];this.check=function(e){for(var t,i,r,n,o=l.length,a=o;-1<--o;)(t=x[l[o]]||new R(l[o],[])).gsClass?(u[o]=t.gsClass,a--):e&&t.sc.push(this);if(0===a&&h){if(r=(i=("com.greensock."+s).split(".")).pop(),n=v(i.join("."))[r]=this.gsClass=h.apply(h,u),c)if(m[r]=d[r]=n,"undefined"!=typeof module&&module.exports)if(s===p)for(o in module.exports=d[p]=n,d)n[o]=d[o];else d[p]&&(d[p][r]=n);else"function"==typeof define&&define.amd&&define((f.GreenSockAMDPath?f.GreenSockAMDPath+"/":"")+s.split(".").pop(),[],function(){return n});for(o=0;o<this.sc.length;o++)this.sc[o].check()}},this.check(!0)},s=f._gsDefine=function(e,t,i,r){return new R(e,t,i,r)},b=u._class=function(e,t,i){return t=t||function(){},s(e,[],function(){return t},i),t};s.globals=m;var h=[0,0,1,1],w=b("easing.Ease",function(e,t,i,r){this._func=e,this._type=i||0,this._power=r||0,this._params=t?h.concat(t):h},!0),H=w.map={},c=w.register=function(e,t,i,r){for(var n,o,a,s,l=t.split(","),h=l.length,c=(i||"easeIn,easeOut,easeInOut").split(",");-1<--h;)for(o=l[h],n=r?b("easing."+o,null,!0):u.easing[o]||{},a=c.length;-1<--a;)s=c[a],H[o+"."+s]=H[s+o]=n[s]=e.getRatio?e:e[s]||new e};for((n=w.prototype)._calcEnd=!1,n.getRatio=function(e){if(this._func)return this._params[0]=e,this._func.apply(null,this._params);var t=this._type,i=this._power,r=1===t?1-e:2===t?e:e<.5?2*e:2*(1-e);return 1===i?r*=r:2===i?r*=r*r:3===i?r*=r*r*r:4===i&&(r*=r*r*r*r),1===t?1-r:2===t?r:e<.5?r/2:1-r/2},i=(t=["Linear","Quad","Cubic","Quart","Quint,Strong"]).length;-1<--i;)n=t[i]+",Power"+i,c(new w(null,null,1,i),n,"easeOut",!0),c(new w(null,null,2,i),n,"easeIn"+(0===i?",easeNone":"")),c(new w(null,null,3,i),n,"easeInOut");H.linear=u.easing.Linear.easeIn,H.swing=u.easing.Quad.easeInOut;var S=b("events.EventDispatcher",function(e){this._listeners={},this._eventTarget=e||this});(n=S.prototype).addEventListener=function(e,t,i,r,n){n=n||0;var o,a,s=this._listeners[e],l=0;for(this!==g||E||g.wake(),null==s&&(this._listeners[e]=s=[]),a=s.length;-1<--a;)(o=s[a]).c===t&&o.s===i?s.splice(a,1):0===l&&o.pr<n&&(l=a+1);s.splice(l,0,{c:t,s:i,up:r,pr:n})},n.removeEventListener=function(e,t){var i,r=this._listeners[e];if(r)for(i=r.length;-1<--i;)if(r[i].c===t)return void r.splice(i,1)},n.dispatchEvent=function(e){var t,i,r,n=this._listeners[e];if(n)for(1<(t=n.length)&&(n=n.slice(0)),i=this._eventTarget;-1<--t;)(r=n[t])&&(r.up?r.c.call(r.s||i,{type:e,target:i}):r.c.call(r.s||i))};var M=f.requestAnimationFrame,C=f.cancelAnimationFrame,A=Date.now||function(){return(new Date).getTime()},P=A();for(i=(t=["ms","moz","webkit","o"]).length;-1<--i&&!M;)M=f[t[i]+"RequestAnimationFrame"],C=f[t[i]+"CancelAnimationFrame"]||f[t[i]+"CancelRequestAnimationFrame"];b("Ticker",function(e,t){var n,o,a,s,l,h=this,c=A(),i=!(!1===t||!M)&&"auto",u=500,f=33,p=function(e){var t,i,r=A()-P;u<r&&(c+=r-f),P+=r,h.time=(P-c)/1e3,t=h.time-l,(!n||0<t||!0===e)&&(h.frame++,l+=t+(s<=t?.004:s-t),i=!0),!0!==e&&(a=o(p)),i&&h.dispatchEvent("tick")};S.call(h),h.time=h.frame=0,h.tick=function(){p(!0)},h.lagSmoothing=function(e,t){return arguments.length?(u=e||1e10,void(f=Math.min(t,u,0))):u<1e10},h.sleep=function(){null!=a&&(i&&C?C(a):clearTimeout(a),o=T,a=null,h===g&&(E=!1))},h.wake=function(e){null!==a?h.sleep():e?c+=-P+(P=A()):10<h.frame&&(P=A()-u+5),o=0===n?T:i&&M?M:function(e){return setTimeout(e,1e3*(l-h.time)+1|0)},h===g&&(E=!0),p(2)},h.fps=function(e){return arguments.length?(s=1/((n=e)||60),l=this.time+s,void h.wake()):n},h.useRAF=function(e){return arguments.length?(h.sleep(),i=e,void h.fps(n)):i},h.fps(e),setTimeout(function(){"auto"===i&&h.frame<5&&"hidden"!==(r||{}).visibilityState&&h.useRAF(!1)},1500)}),(n=u.Ticker.prototype=new u.events.EventDispatcher).constructor=u.Ticker;var D=b("core.Animation",function(e,t){if(this.vars=t=t||{},this._duration=this._totalDuration=e||0,this._delay=Number(t.delay)||0,this._timeScale=1,this._active=!0===t.immediateRender,this.data=t.data,this._reversed=!0===t.reversed,Z){E||g.wake();var i=this.vars.useFrames?Q:Z;i.add(this,i._time),this.vars.paused&&this.paused(!0)}});g=D.ticker=new u.Ticker,(n=D.prototype)._dirty=n._gc=n._initted=n._paused=!1,n._totalTime=n._time=0,n._rawPrevTime=-1,n._next=n._last=n._onUpdate=n._timeline=n.timeline=null,n._paused=!1;var L=function(){E&&2e3<A()-P&&("hidden"!==(r||{}).visibilityState||!g.lagSmoothing())&&g.wake();var e=setTimeout(L,2e3);e.unref&&e.unref()};L(),n.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},n.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},n.resume=function(e,t){return null!=e&&this.seek(e,t),this.paused(!1)},n.seek=function(e,t){return this.totalTime(Number(e),!1!==t)},n.restart=function(e,t){return this.reversed(!1).paused(!1).totalTime(e?-this._delay:0,!1!==t,!0)},n.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},n.render=function(e,t,i){},n.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,(this._gc||!this.timeline)&&this._enabled(!0),this},n.isActive=function(){var e,t=this._timeline,i=this._startTime;return!t||!this._gc&&!this._paused&&t.isActive()&&(e=t.rawTime(!0))>=i&&e<i+this.totalDuration()/this._timeScale-1e-7},n._enabled=function(e,t){return E||g.wake(),this._gc=!e,this._active=this.isActive(),!0!==t&&(e&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!e&&this.timeline&&this._timeline._remove(this,!0)),!1},n._kill=function(e,t){return this._enabled(!1,!1)},n.kill=function(e,t){return this._kill(e,t),this},n._uncache=function(e){for(var t=e?this:this.timeline;t;)t._dirty=!0,t=t.timeline;return this},n._swapSelfInParams=function(e){for(var t=e.length,i=e.concat();-1<--t;)"{self}"===e[t]&&(i[t]=this);return i},n._callback=function(e){var t=this.vars,i=t[e],r=t[e+"Params"],n=t[e+"Scope"]||t.callbackScope||this;switch(r?r.length:0){case 0:i.call(n);break;case 1:i.call(n,r[0]);break;case 2:i.call(n,r[0],r[1]);break;default:i.apply(n,r)}},n.eventCallback=function(e,t,i,r){if("on"===(e||"").substr(0,2)){var n=this.vars;if(1===arguments.length)return n[e];null==t?delete n[e]:(n[e]=t,n[e+"Params"]=_(i)&&-1!==i.join("").indexOf("{self}")?this._swapSelfInParams(i):i,n[e+"Scope"]=r),"onUpdate"===e&&(this._onUpdate=t)}return this},n.delay=function(e){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+e-this._delay),this._delay=e,this):this._delay},n.duration=function(e){return arguments.length?(this._duration=this._totalDuration=e,this._uncache(!0),this._timeline.smoothChildTiming&&0<this._time&&this._time<this._duration&&0!==e&&this.totalTime(this._totalTime*(e/this._duration),!0),this):(this._dirty=!1,this._duration)},n.totalDuration=function(e){return this._dirty=!1,arguments.length?this.duration(e):this._totalDuration},n.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(e>this._duration?this._duration:e,t)):this._time},n.totalTime=function(e,t,i){if(E||g.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(e<0&&!i&&(e+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var r=this._totalDuration,n=this._timeline;if(r<e&&!i&&(e=r),this._startTime=(this._paused?this._pauseTime:n._time)-(this._reversed?r-e:e)/this._timeScale,n._dirty||this._uncache(!1),n._timeline)for(;n._timeline;)n._timeline._time!==(n._startTime+n._totalTime)/n._timeScale&&n.totalTime(n._totalTime,!0),n=n._timeline}this._gc&&this._enabled(!0,!1),(this._totalTime!==e||0===this._duration)&&(V.length&&J(),this.render(e,t,!1),V.length&&J())}return this},n.progress=n.totalProgress=function(e,t){var i=this.duration();return arguments.length?this.totalTime(i*e,t):i?this._time/i:this.ratio},n.startTime=function(e){return arguments.length?(e!==this._startTime&&(this._startTime=e,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,e-this._delay)),this):this._startTime},n.endTime=function(e){return this._startTime+(0!=e?this.totalDuration():this.duration())/this._timeScale},n.timeScale=function(e){if(!arguments.length)return this._timeScale;var t,i;for(e=e||y,this._timeline&&this._timeline.smoothChildTiming&&(i=(t=this._pauseTime)||0===t?t:this._timeline.totalTime(),this._startTime=i-(i-this._startTime)*this._timeScale/e),this._timeScale=e,i=this.timeline;i&&i.timeline;)i._dirty=!0,i.totalDuration(),i=i.timeline;return this},n.reversed=function(e){return arguments.length?(e!=this._reversed&&(this._reversed=e,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},n.paused=function(e){if(!arguments.length)return this._paused;var t,i,r=this._timeline;return e!=this._paused&&r&&(E||e||g.wake(),i=(t=r.rawTime())-this._pauseTime,!e&&r.smoothChildTiming&&(this._startTime+=i,this._uncache(!1)),this._pauseTime=e?t:null,this._paused=e,this._active=this.isActive(),!e&&0!==i&&this._initted&&this.duration()&&(t=r.smoothChildTiming?this._totalTime:(t-this._startTime)/this._timeScale,this.render(t,t===this._totalTime,!0))),this._gc&&!e&&this._enabled(!0,!1),this};var F=b("core.SimpleTimeline",function(e){D.call(this,0,e),this.autoRemoveChildren=this.smoothChildTiming=!0});(n=F.prototype=new D).constructor=F,n.kill()._gc=!1,n._first=n._last=n._recent=null,n._sortChildren=!1,n.add=n.insert=function(e,t,i,r){var n,o;if(e._startTime=Number(t||0)+e._delay,e._paused&&this!==e._timeline&&(e._pauseTime=this.rawTime()-(e._timeline.rawTime()-e._pauseTime)),e.timeline&&e.timeline._remove(e,!0),e.timeline=e._timeline=this,e._gc&&e._enabled(!0,!0),n=this._last,this._sortChildren)for(o=e._startTime;n&&n._startTime>o;)n=n._prev;return n?(e._next=n._next,n._next=e):(e._next=this._first,this._first=e),e._next?e._next._prev=e:this._last=e,e._prev=n,this._recent=e,this._timeline&&this._uncache(!0),this},n._remove=function(e,t){return e.timeline===this&&(t||e._enabled(!1,!0),e._prev?e._prev._next=e._next:this._first===e&&(this._first=e._next),e._next?e._next._prev=e._prev:this._last===e&&(this._last=e._prev),e._next=e._prev=e.timeline=null,e===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},n.render=function(e,t,i){var r,n=this._first;for(this._totalTime=this._time=this._rawPrevTime=e;n;)r=n._next,(n._active||e>=n._startTime&&!n._paused&&!n._gc)&&(n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(e-n._startTime)*n._timeScale,t,i):n.render((e-n._startTime)*n._timeScale,t,i)),n=r},n.rawTime=function(){return E||g.wake(),this._totalTime};var O=b("TweenLite",function(e,t,i){if(D.call(this,t,i),this.render=O.prototype.render,null==e)throw"Cannot tween a null target.";this.target=e="string"!=typeof e?e:O.selector(e)||e;var r,n,o,a=e.jquery||e.length&&e!==f&&e[0]&&(e[0]===f||e[0].nodeType&&e[0].style&&!e.nodeType),s=this.vars.overwrite;if(this._overwrite=s=null==s?K[O.defaultOverwrite]:"number"==typeof s?s>>0:K[s],(a||e instanceof Array||e.push&&_(e))&&"number"!=typeof e[0])for(this._targets=o=l(e),this._propLookup=[],this._siblings=[],r=0;r<o.length;r++)(n=o[r])?"string"!=typeof n?n.length&&n!==f&&n[0]&&(n[0]===f||n[0].nodeType&&n[0].style&&!n.nodeType)?(o.splice(r--,1),this._targets=o=o.concat(l(n))):(this._siblings[r]=ee(n,this,!1),1===s&&1<this._siblings[r].length&&ie(n,this,null,1,this._siblings[r])):"string"==typeof(n=o[r--]=O.selector(n))&&o.splice(r+1,1):o.splice(r--,1);else this._propLookup={},this._siblings=ee(e,this,!1),1===s&&1<this._siblings.length&&ie(e,this,null,1,this._siblings);(this.vars.immediateRender||0===t&&0===this._delay&&!1!==this.vars.immediateRender)&&(this._time=-y,this.render(Math.min(0,-this._delay)))},!0),k=function(e){return e&&e.length&&e!==f&&e[0]&&(e[0]===f||e[0].nodeType&&e[0].style&&!e.nodeType)};(n=O.prototype=new D).constructor=O,n.kill()._gc=!1,n.ratio=0,n._firstPT=n._targets=n._overwrittenProps=n._startAt=null,n._notifyPluginsOfEnabled=n._lazy=!1,O.version="2.0.2",O.defaultEase=n._ease=new w(null,null,1,1),O.defaultOverwrite="auto",O.ticker=g,O.autoSleep=120,O.lagSmoothing=function(e,t){g.lagSmoothing(e,t)},O.selector=f.$||f.jQuery||function(e){var t=f.$||f.jQuery;return t?(O.selector=t)(e):(r||(r=f.document),r?r.querySelectorAll?r.querySelectorAll(e):r.getElementById("#"===e.charAt(0)?e.substr(1):e):e)};var V=[],I={},N=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,U=/[\+-]=-?[\.\d]/,z=function(e){for(var t,i=this._firstPT;i;)t=i.blob?1===e&&null!=this.end?this.end:e?this.join(""):this.start:i.c*e+i.s,i.m?t=i.m.call(this._tween,t,this._target||i.t,this._tween):t<1e-6&&-1e-6<t&&!i.blob&&(t=0),i.f?i.fp?i.t[i.p](i.fp,t):i.t[i.p](t):i.t[i.p]=t,i=i._next},B=function(e,t,i,r){var n,o,a,s,l,h,c,u=[],f=0,p="",d=0;for(u.start=e,u.end=t,e=u[0]=e+"",t=u[1]=t+"",i&&(i(u),e=u[0],t=u[1]),u.length=0,n=e.match(N)||[],o=t.match(N)||[],r&&(r._next=null,r.blob=1,u._firstPT=u._applyPT=r),l=o.length,s=0;s<l;s++)c=o[s],p+=(h=t.substr(f,t.indexOf(c,f)-f))||!s?h:",",f+=h.length,d?d=(d+1)%5:"rgba("===h.substr(-5)&&(d=1),c===n[s]||n.length<=s?p+=c:(p&&(u.push(p),p=""),a=parseFloat(n[s]),u.push(a),u._firstPT={_next:u._firstPT,t:u,p:u.length-1,s:a,c:("="===c.charAt(1)?parseInt(c.charAt(0)+"1",10)*parseFloat(c.substr(2)):parseFloat(c)-a)||0,f:0,m:d&&d<4?Math.round:0}),f+=c.length;return(p+=t.substr(f))&&u.push(p),u.setRatio=z,U.test(t)&&(u.end=null),u},j=function(e,t,i,r,n,o,a,s,l){"function"==typeof r&&(r=r(l||0,e));var h=typeof e[t],c="function"!==h?"":t.indexOf("set")||"function"!=typeof e["get"+t.substr(3)]?t:"get"+t.substr(3),u="get"!==i?i:c?a?e[c](a):e[c]():e[t],f="string"==typeof r&&"="===r.charAt(1),p={t:e,p:t,s:u,f:"function"===h,pg:0,n:n||t,m:o?"function"==typeof o?o:Math.round:0,pr:0,c:f?parseInt(r.charAt(0)+"1",10)*parseFloat(r.substr(2)):parseFloat(r)-u||0};return("number"!=typeof u||"number"!=typeof r&&!f)&&(a||isNaN(u)||!f&&isNaN(r)||"boolean"==typeof u||"boolean"==typeof r?(p.fp=a,p={t:B(u,f?parseFloat(p.s)+p.c+(p.s+"").replace(/[0-9\-\.]/g,""):r,s||O.defaultStringFilter,p),p:"setRatio",s:0,c:1,f:2,pg:0,n:n||t,pr:0,m:0}):(p.s=parseFloat(u),f||(p.c=parseFloat(r)-p.s||0))),p.c?((p._next=this._firstPT)&&(p._next._prev=p),this._firstPT=p):void 0},W=O._internals={isArray:_,isSelector:k,lazyTweens:V,blobDif:B},G=O._plugins={},X=W.tweenLookup={},q=0,Y=W.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1,stringFilter:1,id:1,yoyoEase:1},K={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,true:1,false:0},Q=D._rootFramesTimeline=new F,Z=D._rootTimeline=new F,$=30,J=W.lazyRender=function(){var e,t=V.length;for(I={};-1<--t;)(e=V[t])&&!1!==e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0),e._lazy=!1);V.length=0};Z._startTime=g.time,Q._startTime=g.frame,Z._active=Q._active=!0,setTimeout(J,1),D._updateRoot=O.render=function(){var e,t,i;if(V.length&&J(),Z.render((g.time-Z._startTime)*Z._timeScale,!1,!1),Q.render((g.frame-Q._startTime)*Q._timeScale,!1,!1),V.length&&J(),g.frame>=$){for(i in $=g.frame+(parseInt(O.autoSleep,10)||120),X){for(e=(t=X[i].tweens).length;-1<--e;)t[e]._gc&&t.splice(e,1);0===t.length&&delete X[i]}if((!(i=Z._first)||i._paused)&&O.autoSleep&&!Q._first&&1===g._listeners.tick.length){for(;i&&i._paused;)i=i._next;i||g.sleep()}}},g.addEventListener("tick",D._updateRoot);var ee=function(e,t,i){var r,n,o=e._gsTweenID;if(X[o||(e._gsTweenID=o="t"+q++)]||(X[o]={target:e,tweens:[]}),t&&((r=X[o].tweens)[n=r.length]=t,i))for(;-1<--n;)r[n]===t&&r.splice(n,1);return X[o].tweens},te=function(e,t,i,r){var n,o,a=e.vars.onOverwrite;return a&&(n=a(e,t,i,r)),(a=O.onOverwrite)&&(o=a(e,t,i,r)),!1!==n&&!1!==o},ie=function(e,t,i,r,n){var o,a,s,l;if(1===r||4<=r){for(l=n.length,o=0;o<l;o++)if((s=n[o])!==t)s._gc||s._kill(null,e,t)&&(a=!0);else if(5===r)break;return a}var h,c=t._startTime+y,u=[],f=0,p=0===t._duration;for(o=n.length;-1<--o;)(s=n[o])===t||s._gc||s._paused||(s._timeline!==t._timeline?(h=h||re(t,0,p),0===re(s,h,p)&&(u[f++]=s)):s._startTime<=c&&s._startTime+s.totalDuration()/s._timeScale>c&&((p||!s._initted)&&c-s._startTime<=2e-10||(u[f++]=s)));for(o=f;-1<--o;)if(l=(s=u[o])._firstPT,2===r&&s._kill(i,e,t)&&(a=!0),2!==r||!s._firstPT&&s._initted&&l){if(2!==r&&!te(s,t))continue;s._enabled(!1,!1)&&(a=!0)}return a},re=function(e,t,i){for(var r=e._timeline,n=r._timeScale,o=e._startTime;r._timeline;){if(o+=r._startTime,n*=r._timeScale,r._paused)return-100;r=r._timeline}return t<(o/=n)?o-t:i&&o===t||!e._initted&&o-t<2e-10?y:(o+=e.totalDuration()/e._timeScale/n)>t+y?0:o-t-y};n._init=function(){var e,t,i,r,n,o,a=this.vars,s=this._overwrittenProps,l=this._duration,h=!!a.immediateRender,c=a.ease;if(a.startAt){for(r in this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),n={},a.startAt)n[r]=a.startAt[r];if(n.data="isStart",n.overwrite=!1,n.immediateRender=!0,n.lazy=h&&!1!==a.lazy,n.startAt=n.delay=null,n.onUpdate=a.onUpdate,n.onUpdateParams=a.onUpdateParams,n.onUpdateScope=a.onUpdateScope||a.callbackScope||this,this._startAt=O.to(this.target||{},0,n),h)if(0<this._time)this._startAt=null;else if(0!==l)return}else if(a.runBackwards&&0!==l)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{for(r in 0!==this._time&&(h=!1),i={},a)Y[r]&&"autoCSS"!==r||(i[r]=a[r]);if(i.overwrite=0,i.data="isFromStart",i.lazy=h&&!1!==a.lazy,i.immediateRender=h,this._startAt=O.to(this.target,0,i),h){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=c=c?c instanceof w?c:"function"==typeof c?new w(c,a.easeParams):H[c]||O.defaultEase:O.defaultEase,a.easeParams instanceof Array&&c.config&&(this._ease=c.config.apply(c,a.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(o=this._targets.length,e=0;e<o;e++)this._initProps(this._targets[e],this._propLookup[e]={},this._siblings[e],s?s[e]:null,e)&&(t=!0);else t=this._initProps(this.target,this._propLookup,this._siblings,s,0);if(t&&O._onPluginEvent("_onInitAllProps",this),s&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),a.runBackwards)for(i=this._firstPT;i;)i.s+=i.c,i.c=-i.c,i=i._next;this._onUpdate=a.onUpdate,this._initted=!0},n._initProps=function(e,t,i,r,n){var o,a,s,l,h,c;if(null==e)return!1;for(o in I[e._gsTweenID]&&J(),this.vars.css||e.style&&e!==f&&e.nodeType&&G.css&&!1!==this.vars.autoCSS&&function(e,t){var i,r={};for(i in e)Y[i]||i in t&&"transform"!==i&&"x"!==i&&"y"!==i&&"width"!==i&&"height"!==i&&"className"!==i&&"border"!==i||!(!G[i]||G[i]&&G[i]._autoCSS)||(r[i]=e[i],delete e[i]);e.css=r}(this.vars,e),this.vars)if(c=this.vars[o],Y[o])c&&(c instanceof Array||c.push&&_(c))&&-1!==c.join("").indexOf("{self}")&&(this.vars[o]=c=this._swapSelfInParams(c,this));else if(G[o]&&(l=new G[o])._onInitTween(e,this.vars[o],this,n)){for(this._firstPT=h={_next:this._firstPT,t:l,p:"setRatio",s:0,c:1,f:1,n:o,pg:1,pr:l._priority,m:0},a=l._overwriteProps.length;-1<--a;)t[l._overwriteProps[a]]=this._firstPT;(l._priority||l._onInitAllProps)&&(s=!0),(l._onDisable||l._onEnable)&&(this._notifyPluginsOfEnabled=!0),h._next&&(h._next._prev=h)}else t[o]=j.call(this,e,o,"get",c,o,0,null,this.vars.stringFilter,n);return r&&this._kill(r,e)?this._initProps(e,t,i,r,n):1<this._overwrite&&this._firstPT&&1<i.length&&ie(e,this,t,this._overwrite,i)?(this._kill(t,e),this._initProps(e,t,i,r,n)):(this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration)&&(I[e._gsTweenID]=!0),s)},n.render=function(e,t,i){var r,n,o,a,s=this._time,l=this._duration,h=this._rawPrevTime;if(l-1e-7<=e&&0<=e)this._totalTime=this._time=l,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(r=!0,n="onComplete",i=i||this._timeline.autoRemoveChildren),0===l&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(e=0),(h<0||e<=0&&-1e-7<=e||h===y&&"isPause"!==this.data)&&h!==e&&(i=!0,y<h&&(n="onReverseComplete")),this._rawPrevTime=a=!t||e||h===e?e:y);else if(e<1e-7)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==s||0===l&&0<h)&&(n="onReverseComplete",r=this._reversed),e<0&&(this._active=!1,0===l&&(this._initted||!this.vars.lazy||i)&&(0<=h&&(h!==y||"isPause"!==this.data)&&(i=!0),this._rawPrevTime=a=!t||e||h===e?e:y)),(!this._initted||this._startAt&&this._startAt.progress())&&(i=!0);else if(this._totalTime=this._time=e,this._easeType){var c=e/l,u=this._easeType,f=this._easePower;(1===u||3===u&&.5<=c)&&(c=1-c),3===u&&(c*=2),1===f?c*=c:2===f?c*=c*c:3===f?c*=c*c*c:4===f&&(c*=c*c*c*c),this.ratio=1===u?1-c:2===u?c:e/l<.5?c/2:1-c/2}else this.ratio=this._ease.getRatio(e/l);if(this._time!==s||i){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=s,this._rawPrevTime=h,V.push(this),void(this._lazy=[e,t]);this._time&&!r?this.ratio=this._ease.getRatio(this._time/l):r&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(!1!==this._lazy&&(this._lazy=!1),this._active||!this._paused&&this._time!==s&&0<=e&&(this._active=!0),0===s&&(this._startAt&&(0<=e?this._startAt.render(e,!0,i):n||(n="_dummyGS")),this.vars.onStart&&(0!==this._time||0===l)&&(t||this._callback("onStart"))),o=this._firstPT;o;)o.f?o.t[o.p](o.c*this.ratio+o.s):o.t[o.p]=o.c*this.ratio+o.s,o=o._next;this._onUpdate&&(e<0&&this._startAt&&-1e-4!==e&&this._startAt.render(e,!0,i),t||(this._time!==s||r||i)&&this._callback("onUpdate")),n&&(!this._gc||i)&&(e<0&&this._startAt&&!this._onUpdate&&-1e-4!==e&&this._startAt.render(e,!0,i),r&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[n]&&this._callback(n),0===l&&this._rawPrevTime===y&&a!==y&&(this._rawPrevTime=0))}},n._kill=function(e,t,i){if("all"===e&&(e=null),null==e&&(null==t||t===this.target))return this._lazy=!1,this._enabled(!1,!1);t="string"!=typeof t?t||this._targets||this.target:O.selector(t)||t;var r,n,o,a,s,l,h,c,u,f=i&&this._time&&i._startTime===this._startTime&&this._timeline===i._timeline,p=this._firstPT;if((_(t)||k(t))&&"number"!=typeof t[0])for(r=t.length;-1<--r;)this._kill(e,t[r],i)&&(l=!0);else{if(this._targets){for(r=this._targets.length;-1<--r;)if(t===this._targets[r]){s=this._propLookup[r]||{},this._overwrittenProps=this._overwrittenProps||[],n=this._overwrittenProps[r]=e?this._overwrittenProps[r]||{}:"all";break}}else{if(t!==this.target)return!1;s=this._propLookup,n=this._overwrittenProps=e?this._overwrittenProps||{}:"all"}if(s){if(h=e||s,c=e!==n&&"all"!==n&&e!==s&&("object"!=typeof e||!e._tempKill),i&&(O.onOverwrite||this.vars.onOverwrite)){for(o in h)s[o]&&(u||(u=[]),u.push(o));if((u||!e)&&!te(this,i,t,u))return!1}for(o in h)(a=s[o])&&(f&&(a.f?a.t[a.p](a.s):a.t[a.p]=a.s,l=!0),a.pg&&a.t._kill(h)&&(l=!0),a.pg&&0!==a.t._overwriteProps.length||(a._prev?a._prev._next=a._next:a===this._firstPT&&(this._firstPT=a._next),a._next&&(a._next._prev=a._prev),a._next=a._prev=null),delete s[o]),c&&(n[o]=1);!this._firstPT&&this._initted&&p&&this._enabled(!1,!1)}}return l},n.invalidate=function(){return this._notifyPluginsOfEnabled&&O._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],D.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-y,this.render(Math.min(0,-this._delay))),this},n._enabled=function(e,t){if(E||g.wake(),e&&this._gc){var i,r=this._targets;if(r)for(i=r.length;-1<--i;)this._siblings[i]=ee(r[i],this,!0);else this._siblings=ee(this.target,this,!0)}return D.prototype._enabled.call(this,e,t),!(!this._notifyPluginsOfEnabled||!this._firstPT)&&O._onPluginEvent(e?"_onEnable":"_onDisable",this)},O.to=function(e,t,i){return new O(e,t,i)},O.from=function(e,t,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new O(e,t,i)},O.fromTo=function(e,t,i,r){return r.startAt=i,r.immediateRender=0!=r.immediateRender&&0!=i.immediateRender,new O(e,t,r)},O.delayedCall=function(e,t,i,r,n){return new O(t,0,{delay:e,onComplete:t,onCompleteParams:i,callbackScope:r,onReverseComplete:t,onReverseCompleteParams:i,immediateRender:!1,lazy:!1,useFrames:n,overwrite:0})},O.set=function(e,t){return new O(e,0,t)},O.getTweensOf=function(e,t){if(null==e)return[];var i,r,n,o;if(e="string"!=typeof e?e:O.selector(e)||e,(_(e)||k(e))&&"number"!=typeof e[0]){for(i=e.length,r=[];-1<--i;)r=r.concat(O.getTweensOf(e[i],t));for(i=r.length;-1<--i;)for(o=r[i],n=i;-1<--n;)o===r[n]&&r.splice(i,1)}else if(e._gsTweenID)for(i=(r=ee(e).concat()).length;-1<--i;)(r[i]._gc||t&&!r[i].isActive())&&r.splice(i,1);return r||[]},O.killTweensOf=O.killDelayedCallsTo=function(e,t,i){"object"==typeof t&&(i=t,t=!1);for(var r=O.getTweensOf(e,t),n=r.length;-1<--n;)r[n]._kill(i,e)};var ne=b("plugins.TweenPlugin",function(e,t){this._overwriteProps=(e||"").split(","),this._propName=this._overwriteProps[0],this._priority=t||0,this._super=ne.prototype},!0);if(n=ne.prototype,ne.version="1.19.0",ne.API=2,n._firstPT=null,n._addTween=j,n.setRatio=z,n._kill=function(e){var t,i=this._overwriteProps,r=this._firstPT;if(null!=e[this._propName])this._overwriteProps=[];else for(t=i.length;-1<--t;)null!=e[i[t]]&&i.splice(t,1);for(;r;)null!=e[r.n]&&(r._next&&(r._next._prev=r._prev),r._prev?(r._prev._next=r._next,r._prev=null):this._firstPT===r&&(this._firstPT=r._next)),r=r._next;return!1},n._mod=n._roundProps=function(e){for(var t,i=this._firstPT;i;)(t=e[this._propName]||null!=i.n&&e[i.n.split(this._propName+"_").join("")])&&"function"==typeof t&&(2===i.f?i.t._applyPT.m=t:i.m=t),i=i._next},O._onPluginEvent=function(e,t){var i,r,n,o,a,s=t._firstPT;if("_onInitAllProps"===e){for(;s;){for(a=s._next,r=n;r&&r.pr>s.pr;)r=r._next;(s._prev=r?r._prev:o)?s._prev._next=s:n=s,(s._next=r)?r._prev=s:o=s,s=a}s=t._firstPT=n}for(;s;)s.pg&&"function"==typeof s.t[e]&&s.t[e]()&&(i=!0),s=s._next;return i},ne.activate=function(e){for(var t=e.length;-1<--t;)e[t].API===ne.API&&(G[(new e[t])._propName]=e[t]);return!0},s.plugin=function(e){if(!(e&&e.propName&&e.init&&e.API))throw"illegal plugin definition.";var t,i=e.propName,r=e.priority||0,n=e.overwriteProps,o={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_mod",mod:"_mod",initAll:"_onInitAllProps"},a=b("plugins."+i.charAt(0).toUpperCase()+i.substr(1)+"Plugin",function(){ne.call(this,i,r),this._overwriteProps=n||[]},!0===e.global),s=a.prototype=new ne(i);for(t in(s.constructor=a).API=e.API,o)"function"==typeof e[t]&&(s[o[t]]=e[t]);return a.version=e.version,ne.activate([a]),a},t=f._gsQueue){for(i=0;i<t.length;i++)t[i]();for(n in x)x[n].func||f.console.log("GSAP encountered missing dependency: "+n)}E=!1}("undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window,"TweenMax"),THREE.OBJLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.OBJLoader.prototype={constructor:THREE.OBJLoader,load:function(e,t,i,r){var n=this,o=new THREE.XHRLoader(n.manager);o.setCrossOrigin(this.crossOrigin),o.load(e,function(e){t(n.parse(e))})},parse:function(e){function t(e,t,i){return new THREE.Vector3(e,t,i)}function i(e,t,i,r){return new THREE.Face3(e,t,i,r)}var r,n,o=new THREE.Object3D;!1===/^o /gm.test(e)&&(b=new THREE.Geometry,r=new THREE.MeshLambertMaterial,n=new THREE.Mesh(b,r),o.add(n));for(var a,s,l=[],h=0,c=[],u=[],f=/v( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,p=/vn( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,d=/vt( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,m=/f( +\d+)( +\d+)( +\d+)( +\d+)?/,g=/f( +(\d+)\/(\d+))( +(\d+)\/(\d+))( +(\d+)\/(\d+))( +(\d+)\/(\d+))?/,E=/f( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))?/,v=/f( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))?/,y=e.split("\n"),T=0;T<y.length;T++){var _,x=y[T];0!==(x=x.trim()).length&&"#"!==x.charAt(0)&&(null!==(_=f.exec(x))?l.push(t(parseFloat(_[1]),parseFloat(_[2]),parseFloat(_[3]))):null!==(_=p.exec(x))?c.push(t(parseFloat(_[1]),parseFloat(_[2]),parseFloat(_[3]))):null!==(_=d.exec(x))?u.push((a=parseFloat(_[1]),s=parseFloat(_[2]),new THREE.Vector2(a,s))):null!==(_=m.exec(x))?void 0===_[4]?(b.vertices.push(l[parseInt(_[1])-1],l[parseInt(_[2])-1],l[parseInt(_[3])-1]),b.faces.push(i(h++,h++,h++))):(b.vertices.push(l[parseInt(_[1])-1],l[parseInt(_[2])-1],l[parseInt(_[3])-1],l[parseInt(_[4])-1]),b.faces.push(i(h,h+1,h+3)),b.faces.push(i(h+1,h+2,h+3)),h+=4):null!==(_=g.exec(x))?void 0===_[10]?(b.vertices.push(l[parseInt(_[2])-1],l[parseInt(_[5])-1],l[parseInt(_[8])-1]),b.faces.push(i(h++,h++,h++)),b.faceVertexUvs[0].push([u[parseInt(_[3])-1],u[parseInt(_[6])-1],u[parseInt(_[9])-1]])):(b.vertices.push(l[parseInt(_[2])-1],l[parseInt(_[5])-1],l[parseInt(_[8])-1],l[parseInt(_[11])-1]),b.faces.push(i(h,h+1,h+3)),b.faceVertexUvs[0].push([u[parseInt(_[3])-1],u[parseInt(_[6])-1],u[parseInt(_[12])-1]]),b.faces.push(i(h+1,h+2,h+3)),b.faceVertexUvs[0].push([u[parseInt(_[6])-1],u[parseInt(_[9])-1],u[parseInt(_[12])-1]]),h+=4):null!==(_=E.exec(x))?void 0===_[13]?(b.vertices.push(l[parseInt(_[2])-1],l[parseInt(_[6])-1],l[parseInt(_[10])-1]),b.faces.push(i(h++,h++,h++,[c[parseInt(_[4])-1],c[parseInt(_[8])-1],c[parseInt(_[12])-1]])),b.faceVertexUvs[0].push([u[parseInt(_[3])-1],u[parseInt(_[7])-1],u[parseInt(_[11])-1]])):(b.vertices.push(l[parseInt(_[2])-1],l[parseInt(_[6])-1],l[parseInt(_[10])-1],l[parseInt(_[14])-1]),b.faces.push(i(h,h+1,h+3,[c[parseInt(_[4])-1],c[parseInt(_[8])-1],c[parseInt(_[16])-1]])),b.faceVertexUvs[0].push([u[parseInt(_[3])-1],u[parseInt(_[7])-1],u[parseInt(_[15])-1]]),b.faces.push(i(h+1,h+2,h+3,[c[parseInt(_[8])-1],c[parseInt(_[12])-1],c[parseInt(_[16])-1]])),b.faceVertexUvs[0].push([u[parseInt(_[7])-1],u[parseInt(_[11])-1],u[parseInt(_[15])-1]]),h+=4):null!==(_=v.exec(x))?void 0===_[10]?(b.vertices.push(l[parseInt(_[2])-1],l[parseInt(_[5])-1],l[parseInt(_[8])-1]),b.faces.push(i(h++,h++,h++,[c[parseInt(_[3])-1],c[parseInt(_[6])-1],c[parseInt(_[9])-1]]))):(b.vertices.push(l[parseInt(_[2])-1],l[parseInt(_[5])-1],l[parseInt(_[8])-1],l[parseInt(_[11])-1]),b.faces.push(i(h,h+1,h+3,[c[parseInt(_[3])-1],c[parseInt(_[6])-1],c[parseInt(_[12])-1]])),b.faces.push(i(h+1,h+2,h+3,[c[parseInt(_[6])-1],c[parseInt(_[9])-1],c[parseInt(_[12])-1]])),h+=4):/^o /.test(x)?(b=new THREE.Geometry,r=new THREE.MeshLambertMaterial,(n=new THREE.Mesh(b,r)).name=x.substring(2).trim(),o.add(n),h=0):/^g /.test(x)||(/^usemtl /.test(x)?r.name=x.substring(7).trim():/^mtllib /.test(x)||/^s /.test(x)))}T=0;for(var R=o.children.length;T<R;T++){var b;(b=o.children[T].geometry).computeCentroids(),b.computeFaceNormals(),b.computeBoundingSphere()}return o}},window.Modernizr=function(r,u,a){var e,n,o,s={},f=u.documentElement,p="modernizr",t=u.createElement(p),l=t.style,h=u.createElement("input"),c=":)",i={}.toString,d=" -webkit- -moz- -o- -ms- ".split(" "),m="Webkit Moz O ms",g=m.split(" "),E=m.toLowerCase().split(" "),v="http://www.w3.org/2000/svg",y={},T={},_={},x=[],R=x.slice,b=function(e,t,i,r){var n,o,a,s,l=u.createElement("div"),h=u.body,c=h||u.createElement("body");if(parseInt(i,10))for(;i--;)(a=u.createElement("div")).id=r?r[i]:p+(i+1),l.appendChild(a);return n=["&#173;",'<style id="s',p,'">',e,"</style>"].join(""),l.id=p,(h?l:c).innerHTML+=n,c.appendChild(l),h||(c.style.background="",c.style.overflow="hidden",s=f.style.overflow,f.style.overflow="hidden",f.appendChild(c)),o=t(l,e),h?l.parentNode.removeChild(l):(c.parentNode.removeChild(c),f.style.overflow=s),!!o},w=(o={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"},function(e,t){t=t||u.createElement(o[e]||"div");var i=(e="on"+e)in t;return i||(t.setAttribute||(t=u.createElement("div")),t.setAttribute&&t.removeAttribute&&(t.setAttribute(e,""),i=M(t[e],"function"),M(t[e],"undefined")||(t[e]=a),t.removeAttribute(e))),t=null,i}),H={}.hasOwnProperty;function S(e){l.cssText=e}function M(e,t){return typeof e===t}function C(e,t){return!!~(""+e).indexOf(t)}function A(e,t){for(var i in e){var r=e[i];if(!C(r,"-")&&l[r]!==a)return"pfx"!=t||r}return!1}function P(e,t,i){var r=e.charAt(0).toUpperCase()+e.slice(1),n=(e+" "+g.join(r+" ")+r).split(" ");return M(t,"string")||M(t,"undefined")?A(n,t):function(e,t,i){for(var r in e){var n=t[e[r]];if(n!==a)return!1===i?e[r]:M(n,"function")?n.bind(i||t):n}return!1}(n=(e+" "+E.join(r+" ")+r).split(" "),t,i)}for(var D in n=M(H,"undefined")||M(H.call,"undefined")?function(e,t){return t in e&&M(e.constructor.prototype[t],"undefined")}:function(e,t){return H.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(r){var n=this;if("function"!=typeof n)throw new TypeError;var o=R.call(arguments,1),a=function(){if(this instanceof a){var e=function(){};e.prototype=n.prototype;var t=new e,i=n.apply(t,o.concat(R.call(arguments)));return Object(i)===i?i:t}return n.apply(r,o.concat(R.call(arguments)))};return a}),y.flexbox=function(){return P("flexWrap")},y.flexboxlegacy=function(){return P("boxDirection")},y.canvas=function(){var e=u.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},y.canvastext=function(){return!(!s.canvas||!M(u.createElement("canvas").getContext("2d").fillText,"function"))},y.webgl=function(){return!!r.WebGLRenderingContext},y.touch=function(){var t;return"ontouchstart"in r||r.DocumentTouch&&u instanceof DocumentTouch?t=!0:b(["@media (",d.join("touch-enabled),("),p,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){t=9===e.offsetTop}),t},y.geolocation=function(){return"geolocation"in navigator},y.postmessage=function(){return!!r.postMessage},y.websqldatabase=function(){return!!r.openDatabase},y.indexedDB=function(){return!!P("indexedDB",r)},y.hashchange=function(){return w("hashchange",r)&&(u.documentMode===a||7<u.documentMode)},y.history=function(){return!(!r.history||!history.pushState)},y.draganddrop=function(){var e=u.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e},y.websockets=function(){return"WebSocket"in r||"MozWebSocket"in r},y.rgba=function(){return S("background-color:rgba(150,255,150,.5)"),C(l.backgroundColor,"rgba")},y.hsla=function(){return S("background-color:hsla(120,40%,100%,.5)"),C(l.backgroundColor,"rgba")||C(l.backgroundColor,"hsla")},y.multiplebgs=function(){return S("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(l.background)},y.backgroundsize=function(){return P("backgroundSize")},y.borderimage=function(){return P("borderImage")},y.borderradius=function(){return P("borderRadius")},y.boxshadow=function(){return P("boxShadow")},y.textshadow=function(){return""===u.createElement("div").style.textShadow},y.opacity=function(){var e,t;return e="opacity:.55",S(d.join(e+";")+(t||"")),/^0.55$/.test(l.opacity)},y.cssanimations=function(){return P("animationName")},y.csscolumns=function(){return P("columnCount")},y.cssgradients=function(){var e="background-image:";return S((e+"-webkit- ".split(" ").join("gradient(linear,left top,right bottom,from(#9f9),to(white));"+e)+d.join("linear-gradient(left top,#9f9, white);"+e)).slice(0,-e.length)),C(l.backgroundImage,"gradient")},y.cssreflections=function(){return P("boxReflect")},y.csstransforms=function(){return!!P("transform")},y.csstransforms3d=function(){var i=!!P("perspective");return i&&"webkitPerspective"in f.style&&b("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(e,t){i=9===e.offsetLeft&&3===e.offsetHeight}),i},y.csstransitions=function(){return P("transition")},y.fontface=function(){var o;return b('@font-face {font-family:"font";src:url("https://")}',function(e,t){var i=u.getElementById("smodernizr"),r=i.sheet||i.styleSheet,n=r?r.cssRules&&r.cssRules[0]?r.cssRules[0].cssText:r.cssText||"":"";o=/src/i.test(n)&&0===n.indexOf(t.split(" ")[0])}),o},y.generatedcontent=function(){var t;return b(["#",p,"{font:0/0 a}#",p,':after{content:"',c,'";visibility:hidden;font:3px/1 a}'].join(""),function(e){t=3<=e.offsetHeight}),t},y.video=function(){var e=u.createElement("video"),t=!1;try{(t=!!e.canPlayType)&&((t=new Boolean(t)).ogg=e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),t.h264=e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),t.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(e){}return t},y.audio=function(){var e=u.createElement("audio"),t=!1;try{(t=!!e.canPlayType)&&((t=new Boolean(t)).ogg=e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),t.mp3=e.canPlayType("audio/mpeg;").replace(/^no$/,""),t.wav=e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),t.m4a=(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(e){}return t},y.localstorage=function(){try{return localStorage.setItem(p,p),localStorage.removeItem(p),!0}catch(e){return!1}},y.sessionstorage=function(){try{return sessionStorage.setItem(p,p),sessionStorage.removeItem(p),!0}catch(e){return!1}},y.webworkers=function(){return!!r.Worker},y.applicationcache=function(){return!!r.applicationCache},y.svg=function(){return!!u.createElementNS&&!!u.createElementNS(v,"svg").createSVGRect},y.inlinesvg=function(){var e=u.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==v},y.smil=function(){return!!u.createElementNS&&/SVGAnimate/.test(i.call(u.createElementNS(v,"animate")))},y.svgclippaths=function(){return!!u.createElementNS&&/SVGClipPath/.test(i.call(u.createElementNS(v,"clipPath")))},y)n(y,D)&&(e=D.toLowerCase(),s[e]=y[D](),x.push((s[e]?"":"no-")+e));return s.input||(s.input=function(e){for(var t=0,i=e.length;t<i;t++)_[e[t]]=!!(e[t]in h);return _.list&&(_.list=!(!u.createElement("datalist")||!r.HTMLDataListElement)),_}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),s.inputtypes=function(e){for(var t,i,r,n=0,o=e.length;n<o;n++)h.setAttribute("type",i=e[n]),(t="text"!==h.type)&&(h.value=c,h.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(i)&&h.style.WebkitAppearance!==a?(f.appendChild(h),t=(r=u.defaultView).getComputedStyle&&"textfield"!==r.getComputedStyle(h,null).WebkitAppearance&&0!==h.offsetHeight,f.removeChild(h)):/^(search|tel)$/.test(i)||(t=/^(url|email)$/.test(i)?h.checkValidity&&!1===h.checkValidity():h.value!=c)),T[e[n]]=!!t;return T}("search tel url email datetime date month week time datetime-local number range color".split(" "))),s.addTest=function(e,t){if("object"==typeof e)for(var i in e)n(e,i)&&s.addTest(i,e[i]);else{if(e=e.toLowerCase(),s[e]!==a)return s;t="function"==typeof t?t():t,f.className+=" "+(t?"":"no-")+e,s[e]=t}return s},S(""),t=h=null,function(e,l){var h,c,t=e.html5||{},n=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,o=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,i="_html5shiv",r=0,a={};function u(){var e=d.elements;return"string"==typeof e?e.split(" "):e}function f(e){var t=a[e[i]];return t||(t={},r++,e[i]=r,a[r]=t),t}function p(e,t,i){return t||(t=l),c?t.createElement(e):(i||(i=f(t)),!(r=i.cache[e]?i.cache[e].cloneNode():o.test(e)?(i.cache[e]=i.createElem(e)).cloneNode():i.createElem(e)).canHaveChildren||n.test(e)||r.tagUrn?r:i.frag.appendChild(r));var r}function s(e){e||(e=l);var t,i,r,n,o,a,s=f(e);return!d.shivCSS||h||s.hasCSS||(s.hasCSS=(i="article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}",r=(t=e).createElement("p"),n=t.getElementsByTagName("head")[0]||t.documentElement,r.innerHTML="x<style>"+i+"</style>",!!n.insertBefore(r.lastChild,n.firstChild))),c||(o=e,(a=s).cache||(a.cache={},a.createElem=o.createElement,a.createFrag=o.createDocumentFragment,a.frag=a.createFrag()),o.createElement=function(e){return d.shivMethods?p(e,o,a):a.createElem(e)},o.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+u().join().replace(/[\w\-]+/g,function(e){return a.createElem(e),a.frag.createElement(e),'c("'+e+'")'})+");return n}")(d,a.frag)),e}!function(){try{var e=l.createElement("a");e.innerHTML="<xyz></xyz>",h="hidden"in e,c=1==e.childNodes.length||function(){l.createElement("a");var e=l.createDocumentFragment();return void 0===e.cloneNode||void 0===e.createDocumentFragment||void 0===e.createElement}()}catch(e){c=h=!0}}();var d={elements:t.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:"3.7.0",shivCSS:!1!==t.shivCSS,supportsUnknownElements:c,shivMethods:!1!==t.shivMethods,type:"default",shivDocument:s,createElement:p,createDocumentFragment:function(e,t){if(e||(e=l),c)return e.createDocumentFragment();for(var i=(t=t||f(e)).frag.cloneNode(),r=0,n=u(),o=n.length;r<o;r++)i.createElement(n[r]);return i}};e.html5=d,s(l)}(this,u),s._version="2.8.3",s._prefixes=d,s._domPrefixes=E,s._cssomPrefixes=g,s.mq=function(e){var t,i=r.matchMedia||r.msMatchMedia;return i?i(e)&&i(e).matches||!1:(b("@media "+e+" { #"+p+" { position: absolute; } }",function(e){t="absolute"==(r.getComputedStyle?getComputedStyle(e,null):e.currentStyle).position}),t)},s.hasEvent=w,s.testProp=function(e){return A([e])},s.testAllProps=P,s.testStyles=b,s.prefixed=function(e,t,i){return t?P(e,t,i):P(e,"pfx")},f.className=f.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+" js "+x.join(" "),s}(this,this.document),function(t,i){"function"==typeof define&&define.amd?define(["jquery"],function(e){return i(e,t,t.document,t.Math)}):"undefined"!=typeof exports?module.exports=i(require("jquery"),t,t.document,t.Math):i(jQuery,t,t.document,t.Math)}("undefined"!=typeof window?window:this,function(ye,Te,_e,xe,Re){var be=ye(Te),we=ye(_e);ye.fn.fullpage=function(d){function i(){ye(".fp-section").each(function(){var e=ye(this).find(".fp-slide");e.length?e.each(function(){b(ye(this))}):b(ye(this))}),r()}function r(){var e=ye(".fp-section.active"),t=e.find("SLIDES_WRAPPER"),i=e.find(".fp-scrollable");t.length&&(i=t.find(".fp-slide.active")),i.mouseover(),m(e),ye.isFunction(d.afterLoad)&&d.afterLoad.call(e,e.data("anchor"),e.index(".fp-section")+1),ye.isFunction(d.afterRender)&&d.afterRender.call(this)}function t(){var e;if(!d.autoScrolling||d.scrollBar){for(var t=be.scrollTop(),i=0,r=xe.abs(t-_e.querySelectorAll(".fp-section")[0].offsetTop),n=_e.querySelectorAll(".fp-section"),o=0;o<n.length;++o){var a=xe.abs(t-n[o].offsetTop);a<r&&(i=o,r=a)}e=ye(n).eq(i)}if(!d.autoScrolling||d.scrollBar){if(!e.hasClass("active")){if(he=!0,i=(t=ye(".fp-section.active")).index(".fp-section")+1,r=R(e),n=e.data("anchor"),o=e.index(".fp-section")+1,(a=e.find(".fp-slide.active")).length)var s=a.data("anchor"),l=a.index();re&&(e.addClass("active").siblings().removeClass("active"),ye.isFunction(d.onLeave)&&d.onLeave.call(t,i,o,r),ye.isFunction(d.afterLoad)&&d.afterLoad.call(e,n,o),x(n,o-1),d.anchors.length&&D(l,s,q=n,o)),clearTimeout(se),se=setTimeout(function(){he=!1},100)}d.fitToSection&&(clearTimeout(le),le=setTimeout(function(){re&&(ye(".fp-section.active").is(e)&&(ie=!0),f(e),ie=!1)},1e3))}}function n(e){return e.find(".fp-slides").length?e.find(".fp-slide.active").find(".fp-scrollable"):e.find(".fp-scrollable")}function o(e,t){var i,r;if(oe.m[e])if(r="down"==e?(i="bottom",X.moveSectionDown):(i="top",X.moveSectionUp),0<t.length){if(!(i="top"===i?!t.scrollTop():"bottom"===i?t.scrollTop()+1+t.innerHeight()>=t[0].scrollHeight:void 0))return!0;r()}else r()}function a(e){var t=e.originalEvent;if(!function e(t,i){i=i||0;var r=ye(t).parent();return!!(i<d.normalScrollElementTouchThreshold&&r.is(d.normalScrollElements))||i!=d.normalScrollElementTouchThreshold&&e(r,++i)}(e.target)&&s(t)){d.autoScrolling&&e.preventDefault();var i=n(e=ye(".fp-section.active"));re&&!Z&&(t=V(t),pe=t.y,de=t.x,e.find(".fp-slides").length&&xe.abs(fe-de)>xe.abs(ue-pe)?xe.abs(fe-de)>be.width()/100*d.touchSensitivity&&(de<fe?oe.m.right&&X.moveSlideRight():oe.m.left&&X.moveSlideLeft()):d.autoScrolling&&xe.abs(ue-pe)>be.height()/100*d.touchSensitivity&&(pe<ue?o("down",i):ue<pe&&o("up",i)))}}function s(e){return void 0===e.pointerType||"mouse"!=e.pointerType}function l(e){e=e.originalEvent,d.fitToSection&&W.stop(),s(e)&&(e=V(e),ue=e.y,fe=e.x)}function h(e,t){for(var i=0,r=e.slice(xe.max(e.length-t,1)),n=0;n<r.length;n++)i+=r[n];return xe.ceil(i/t)}function c(e){var t=(new Date).getTime();if(d.autoScrolling&&!Q){var i=(e=Te.event||e).wheelDelta||-e.deltaY||-e.detail,r=xe.max(-1,xe.min(1,i));return 149<ne.length&&ne.shift(),ne.push(xe.abs(i)),d.scrollBar&&(e.preventDefault?e.preventDefault():e.returnValue=!1),e=n(e=ye(".fp-section.active")),i=t-me,me=t,200<i&&(ne=[]),re&&(t=h(ne,10),(i=h(ne,70))<=t&&o(r<0?"down":"up",e)),!1}d.fitToSection&&W.stop()}function e(e){var t=ye(".fp-section.active").find(".fp-slides"),i=t.find(".fp-slide").length;if(!(!t.length||Z||i<2)){i=t.find(".fp-slide.active");var r=null;if(!(r="prev"===e?i.prev(".fp-slide"):i.next(".fp-slide")).length){if(!d.loopHorizontal)return;r="prev"===e?i.siblings(":last"):i.siblings(":first")}Z=!0,v(t,r)}}function u(){ye(".fp-slide.active").each(function(){I(ye(this),"internal")})}function f(e,t,i){var r=e.position();if(void 0!==r&&!((t={element:e,callback:t,isMovementUp:i,dest:r,dtop:r.top,yMovement:R(e),anchorLink:e.data("anchor"),sectionIndex:e.index(".fp-section"),activeSlide:e.find(".fp-slide.active"),activeSection:ye(".fp-section.active"),leavingSection:ye(".fp-section.active").index(".fp-section")+1,localIsResizing:ie}).activeSection.is(e)&&!ie||d.scrollBar&&be.scrollTop()===t.dtop)){if(t.activeSlide.length)var n=t.activeSlide.data("anchor"),o=t.activeSlide.index();if(d.autoScrolling&&d.continuousVertical&&void 0!==t.isMovementUp&&(!t.isMovementUp&&"up"==t.yMovement||t.isMovementUp&&"down"==t.yMovement)&&(t.isMovementUp?ye(".fp-section.active").before(t.activeSection.nextAll(".fp-section")):ye(".fp-section.active").after(t.activeSection.prevAll(".fp-section").get().reverse()),N(ye(".fp-section.active").position().top),u(),t.wrapAroundElements=t.activeSection,t.dest=t.element.position(),t.dtop=t.dest.top,t.yMovement=R(t.element)),ye.isFunction(d.onLeave)&&!t.localIsResizing){if(!1===d.onLeave.call(t.activeSection,t.leavingSection,t.sectionIndex+1,t.yMovement))return;t.activeSection.find("video, audio").each(function(){var e=ye(this).get(0);e.hasAttribute("data-ignore")||"function"!=typeof e.pause||e.pause()})}e.addClass("active").siblings().removeClass("active"),re=!1,D(o,n,t.anchorLink,t.sectionIndex),function(e){if(d.css3&&d.autoScrolling&&!d.scrollBar)M("translate3d(0px, -"+e.dtop+"px, 0px)",!0),d.scrollingSpeed?setTimeout(function(){p(e)},d.scrollingSpeed):p(e);else{var t=(i=e,r={},d.autoScrolling&&!d.scrollBar?(r.options={top:-i.dtop},r.element=".fullpage-wrapper"):(r.options={scrollTop:i.dtop},r.element="html, body"),r);ye(t.element).animate(t.options,d.scrollingSpeed,d.easing).promise().done(function(){p(e)})}var i,r}(t),q=t.anchorLink,x(t.anchorLink,t.sectionIndex)}}function p(e){e.wrapAroundElements&&e.wrapAroundElements.length&&(e.isMovementUp?ye(".fp-section:first").before(e.wrapAroundElements):ye(".fp-section:last").after(e.wrapAroundElements),N(ye(".fp-section.active").position().top),u()),e.element.find(".fp-scrollable").mouseover(),ye.isFunction(d.afterLoad)&&!e.localIsResizing&&d.afterLoad.call(e.element,e.anchorLink,e.sectionIndex+1),m(e.element),e.element.find("video, audio").each(function(){var e=ye(this).get(0);e.hasAttribute("autoplay")&&"function"==typeof e.play&&e.play()}),re=!0,ye.isFunction(e.callback)&&e.callback.call(this)}function m(e){e.find("img[data-src], video[data-src], audio[data-src]").each(function(){ye(this).attr("src",ye(this).data("src")),ye(this).removeAttr("data-src")})}function g(){if(!he&&!d.lockAnchors){var e=(t=Te.location.hash.replace("#","").split("/"))[0],t=t[1];if(e.length)(e&&e!==q&&!(void 0===q)||void 0===q&&void 0===t&&!Z||!Z&&Y!=t)&&A(e,t)}}function E(e){re&&(e.pageY<ge?X.moveSectionUp():e.pageY>ge&&X.moveSectionDown()),ge=e.pageY}function v(e,t){var i=t.position(),r=t.index(),n=e.closest(".fp-section"),o=n.index(".fp-section"),a=n.data("anchor"),s=n.find(".fp-slidesNav"),l=F(t),h=ie;if(d.onSlideLeave){var c,u=n.find(".fp-slide.active"),f=u.index();if(c=f==r?"none":r<f?"left":"right",!h&&"none"!==c&&ye.isFunction(d.onSlideLeave)&&!1===d.onSlideLeave.call(u,a,o+1,f,c,r))return void(Z=!1)}t.addClass("active").siblings().removeClass("active"),!d.loopHorizontal&&d.controlArrows&&(n.find(".fp-controlArrow.fp-prev").toggle(0!==r),n.find(".fp-controlArrow.fp-next").toggle(!t.is(":last-child"))),n.hasClass("active")&&D(r,l,a,o);var p=function(){h||ye.isFunction(d.afterSlideLoad)&&d.afterSlideLoad.call(t,a,o+1,l,r),Z=!1};d.css3?(i="translate3d(-"+xe.round(i.left)+"px, 0px, 0px)",_(e.find(".fp-slidesContainer"),d.scrollingSpeed).css(U(i)),setTimeout(function(){p()},d.scrollingSpeed,d.easing)):e.animate({scrollLeft:xe.round(i.left)},d.scrollingSpeed,d.easing,function(){p()}),s.find(".active").removeClass("active"),s.find("li").eq(r).find("a").addClass("active")}function y(){if(T(),$){var e=ye(_e.activeElement);e.is("textarea")||e.is("input")||e.is("select")||(e=be.height(),xe.abs(e-ve)>20*xe.max(ve,e)/100&&(X.reBuild(!0),ve=e))}else clearTimeout(Ee),Ee=setTimeout(function(){X.reBuild(!0)},350)}function T(){var e=d.responsive||d.responsiveWidth,t=d.responsiveHeight;e&&X.setResponsive(be.width()<e),t&&(ee.hasClass("fp-responsive")||X.setResponsive(be.height()<t))}function _(e){var t="all "+d.scrollingSpeed+"ms "+d.easingcss3;return e.removeClass("fp-notransition"),e.css({"-webkit-transition":t,transition:t})}function x(e,t){d.menu&&(ye(d.menu).find(".active").removeClass("active"),ye(d.menu).find('[data-menuanchor="'+e+'"]').addClass("active")),d.navigation&&(ye("#fp-nav").find(".active").removeClass("active"),e?ye("#fp-nav").find('a[href="#'+e+'"]').addClass("active"):ye("#fp-nav").find("li").eq(t).find("a").addClass("active"))}function R(e){var t=ye(".fp-section.active").index(".fp-section");return t==(e=e.index(".fp-section"))?"none":e<t?"up":"down"}function b(e){e.css("overflow","hidden");var t,i=e.closest(".fp-section"),r=e.find(".fp-scrollable");r.length?t=r.get(0).scrollHeight:(t=e.get(0).scrollHeight,d.verticalCentered&&(t=e.find(".fp-tableCell").get(0).scrollHeight)),(i=te-parseInt(i.css("padding-bottom"))-parseInt(i.css("padding-top")))<t?r.length?r.css("height",i+"px").parent().css("height",i+"px"):(d.verticalCentered?e.find(".fp-tableCell").wrapInner('<div class="fp-scrollable" />'):e.wrapInner('<div class="fp-scrollable" />'),e.find(".fp-scrollable").slimScroll({allowPageScroll:!0,height:i+"px",size:"10px",alwaysVisible:!0})):w(e),e.css("overflow","")}function w(e){e.find(".fp-scrollable").children().first().unwrap().unwrap(),e.find(".slimScrollBar").remove(),e.find(".slimScrollRail").remove()}function H(e){e.addClass("fp-table").wrapInner('<div class="fp-tableCell" style="height:'+S(e)+'px;" />')}function S(e){var t=te;return(d.paddingTop||d.paddingBottom)&&((t=e).hasClass("fp-section")||(t=e.closest(".fp-section")),e=parseInt(t.css("padding-top"))+parseInt(t.css("padding-bottom")),t=te-e),t}function M(e,t){t?_(ee):ee.addClass("fp-notransition"),ee.css(U(e)),setTimeout(function(){ee.removeClass("fp-notransition")},10)}function C(e){var t=ye('.fp-section[data-anchor="'+e+'"]');return t.length||(t=ye(".fp-section").eq(e-1)),t}function A(e,t){var i=C(e);void 0===t&&(t=0),e===q||i.hasClass("active")?P(i,t):f(i,function(){P(i,t)})}function P(e,t){if(void 0!==t){var i,r=e.find(".fp-slides"),n=(i=e.find(".fp-slides")).find('.fp-slide[data-anchor="'+t+'"]');n.length||(n=i.find(".fp-slide").eq(t)),(i=n).length&&v(r,i)}}function D(e,t,i,r){r="",d.anchors.length&&!d.lockAnchors&&(e?(void 0!==i&&(r=i),void 0===t&&(t=e),L(r+"/"+(Y=t))):(void 0!==e&&(Y=t),L(i))),O()}function L(e){if(d.recordHistory)location.hash=e;else if($||J)history.replaceState(Re,Re,"#"+e);else{var t=Te.location.href.split("#")[0];Te.location.replace(t+"#"+e)}}function F(e){var t=e.data("anchor");return e=e.index(),void 0===t&&(t=e),t}function O(){var e=(r=ye(".fp-section.active")).find(".fp-slide.active"),t=r.data("anchor"),i=F(e),r=r.index(".fp-section");r=String(r);d.anchors.length&&(r=t),e.length&&(r=r+"-"+i),r=r.replace("/","-").replace("#",""),G[0].className=G[0].className.replace(RegExp("\\b\\s?fp-viewing-[^\\s]+\\b","g"),""),G.addClass("fp-viewing-"+r)}function k(){return Te.PointerEvent?{down:"pointerdown",move:"pointermove"}:{down:"MSPointerDown",move:"MSPointerMove"}}function V(e){var t=[];return t.y=void 0!==e.pageY&&(e.pageY||e.pageX)?e.pageY:e.touches[0].pageY,t.x=void 0!==e.pageX&&(e.pageY||e.pageX)?e.pageX:e.touches[0].pageX,J&&s(e)&&(t.y=e.touches[0].pageY,t.x=e.touches[0].pageX),t}function I(e,t){X.setScrollingSpeed(0,"internal"),void 0!==t&&(ie=!0),v(e.closest(".fp-slides"),e),void 0!==t&&(ie=!1),X.setScrollingSpeed(ae.scrollingSpeed,"internal")}function N(e){d.scrollBar?ee.scrollTop(e):d.css3?M("translate3d(0px, -"+e+"px, 0px)",!1):ee.css("top",-e)}function U(e){return{"-webkit-transform":e,"-moz-transform":e,"-ms-transform":e,transform:e}}function z(e,t,i){switch(t){case"up":oe[i].up=e;break;case"down":oe[i].down=e;break;case"left":oe[i].left=e;break;case"right":oe[i].right=e;break;case"all":"m"==i?X.setAllowScrolling(e):X.setKeyboardScrolling(e)}}function B(e,t,i){d[e]=t,"internal"!==i&&(ae[e]=t)}function j(e,t){console&&console[e]&&console[e]("fullPage: "+t)}var W=ye("html, body"),G=ye("body"),X=ye.fn.fullpage;(d=ye.extend({menu:!1,anchors:[],lockAnchors:!1,navigation:!1,navigationPosition:"right",navigationTooltips:[],showActiveTooltip:!1,slidesNavigation:!1,slidesNavPosition:"bottom",scrollBar:!1,css3:!0,scrollingSpeed:700,autoScrolling:!0,fitToSection:!0,easing:"easeInOutCubic",easingcss3:"ease",loopBottom:!1,loopTop:!1,loopHorizontal:!0,continuousVertical:!1,normalScrollElements:null,scrollOverflow:!1,touchSensitivity:5,normalScrollElementTouchThreshold:5,keyboardScrolling:!0,animateAnchor:!0,recordHistory:!0,controlArrows:!0,controlArrowColor:"#fff",verticalCentered:!0,resize:!1,sectionsColor:[],paddingTop:0,paddingBottom:0,fixedElements:null,responsive:0,responsiveWidth:0,responsiveHeight:0,sectionSelector:".section",slideSelector:".slide",afterLoad:null,onLeave:null,afterRender:null,afterResize:null,afterReBuild:null,afterSlideLoad:null,onSlideLeave:null},d)).continuousVertical&&(d.loopTop||d.loopBottom)&&(d.continuousVertical=!1,j("warn","Option `loopTop/loopBottom` is mutually exclusive with `continuousVertical`; `continuousVertical` disabled")),d.continuousVertical&&d.scrollBar&&(d.continuousVertical=!1,j("warn","Option `scrollBar` is mutually exclusive with `continuousVertical`; `continuousVertical` disabled")),ye.each(d.anchors,function(e,t){(ye("#"+t).length||ye('[name="'+t+'"]').length)&&j("error","data-anchor tags can not have the same value as any `id` element on the site (or `name` element for IE).")}),ye.extend(ye.easing,{easeInOutCubic:function(e,t,i,r,n){return(t/=n/2)<1?r/2*t*t*t+i:r/2*((t-=2)*t*t+2)+i}}),ye.extend(ye.easing,{easeInQuart:function(e,t,i,r,n){return r*(t/=n)*t*t*t+i}}),X.setAutoScrolling=function(e,t){B("autoScrolling",e,t);var i=ye(".fp-section.active");d.autoScrolling&&!d.scrollBar?(W.css({overflow:"hidden",height:"100%"}),X.setRecordHistory(d.recordHistory,"internal"),ee.css({"-ms-touch-action":"none","touch-action":"none"}),i.length&&N(i.position().top)):(W.css({overflow:"visible",height:"initial"}),X.setRecordHistory(!1,"internal"),ee.css({"-ms-touch-action":"","touch-action":""}),N(0),i.length&&W.scrollTop(i.position().top))},X.setRecordHistory=function(e,t){B("recordHistory",e,t)},X.setScrollingSpeed=function(e,t){B("scrollingSpeed",e,t)},X.setFitToSection=function(e,t){B("fitToSection",e,t)},X.setLockAnchors=function(e){d.lockAnchors=e},X.setMouseWheelScrolling=function(e){e?_e.addEventListener?(_e.addEventListener("mousewheel",c,!1),_e.addEventListener("wheel",c,!1),_e.addEventListener("DOMMouseScroll",c,!1)):_e.attachEvent("onmousewheel",c):_e.addEventListener?(_e.removeEventListener("mousewheel",c,!1),_e.removeEventListener("wheel",c,!1),_e.removeEventListener("DOMMouseScroll",c,!1)):_e.detachEvent("onmousewheel",c)},X.setAllowScrolling=function(i,e){void 0!==e?(e=e.replace(/ /g,"").split(","),ye.each(e,function(e,t){z(i,t,"m")})):i?(X.setMouseWheelScrolling(!0),function(){if($||J){var e=k();ye(".fullpage-wrapper").off("touchstart "+e.down).on("touchstart "+e.down,l),ye(".fullpage-wrapper").off("touchmove "+e.move).on("touchmove "+e.move,a)}}()):(X.setMouseWheelScrolling(!1),function(){if($||J){var e=k();ye(".fullpage-wrapper").off("touchstart "+e.down),ye(".fullpage-wrapper").off("touchmove "+e.move)}}())},X.setKeyboardScrolling=function(i,e){void 0!==e?(e=e.replace(/ /g,"").split(","),ye.each(e,function(e,t){z(i,t,"k")})):d.keyboardScrolling=i},X.moveSectionUp=function(){var e=ye(".fp-section.active").prev(".fp-section");e.length||!d.loopTop&&!d.continuousVertical||(e=ye(".fp-section").last()),e.length&&f(e,null,!0)},X.moveSectionDown=function(){var e=ye(".fp-section.active").next(".fp-section");e.length||!d.loopBottom&&!d.continuousVertical||(e=ye(".fp-section").first()),!e.length||d.onBeforeMoveSection&&ye.isFunction(d.onBeforeMoveSection)&&!1===d.onBeforeMoveSection.call(this,direction,currentSlide,destiny,slides,activeSection)||f(e,null,!1)},X.silentMoveTo=function(e,t){X.setScrollingSpeed(0,"internal"),X.moveTo(e,t),X.setScrollingSpeed(ae.scrollingSpeed,"internal")},X.moveTo=function(e,t){var i=C(e);void 0!==t?A(e,t):0<i.length&&f(i)},X.moveSlideRight=function(){e("next")},X.moveSlideLeft=function(){e("prev")},X.reBuild=function(e){if(!ee.hasClass("fp-destroyed")){ie=!0;var t=be.width();te=be.height(),d.resize&&function(e,t){if(e<825||t<900){var i=xe.min(100*e/825,100*t/900).toFixed(2);G.css("font-size",i+"%")}else G.css("font-size","100%")}(te,t),ye(".fp-section").each(function(){var e=ye(this).find(".fp-slides"),t=ye(this).find(".fp-slide");d.verticalCentered&&ye(this).find(".fp-tableCell").css("height",S(ye(this))+"px"),ye(this).css("height",te+"px"),d.scrollOverflow&&(t.length?t.each(function(){b(ye(this))}):b(ye(this))),1<t.length&&v(e,e.find(".fp-slide.active"))}),(t=ye(".fp-section.active").index(".fp-section"))&&X.silentMoveTo(t+1),ie=!1,ye.isFunction(d.afterResize)&&e&&d.afterResize.call(ee),ye.isFunction(d.afterReBuild)&&!e&&d.afterReBuild.call(ee)}};var q,Y,K,Q,Z=!(X.setResponsive=function(e){var t=ee.hasClass("fp-responsive");e?t||(X.setAutoScrolling(!1,"internal"),X.setFitToSection(!1,"internal"),ye("#fp-nav").hide(),ee.addClass("fp-responsive")):t&&(X.setAutoScrolling(ae.autoScrolling,"internal"),X.setFitToSection(ae.autoScrolling,"internal"),ye("#fp-nav").show(),ee.removeClass("fp-responsive"))}),$=navigator.userAgent.match(/(iPhone|iPod|iPad|Android|playbook|silk|BlackBerry|BB10|Windows Phone|Tizen|Bada|webOS|IEMobile|Opera Mini)/),J="ontouchstart"in Te||0<navigator.msMaxTouchPoints||navigator.maxTouchPoints,ee=ye(this),te=be.height(),ie=!1,re=!0,ne=[],oe={m:{up:!0,down:!0,left:!0,right:!0}};oe.k=ye.extend(!0,{},oe.m);var ae=ye.extend(!0,{},d);ye(this).length?(ee.css({height:"100%",position:"relative"}),ee.addClass("fullpage-wrapper"),ye("html").addClass("fp-enabled")):j("error","Error! Fullpage.js needs to be initialized with a selector. For example: $('#myContainer').fullpage();"),d.css3&&(d.css3=function(){var e,t=_e.createElement("p"),i={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};for(var r in _e.body.insertBefore(t,null),i)t.style[r]!==Re&&(t.style[r]="translate3d(1px,1px,1px)",e=Te.getComputedStyle(t).getPropertyValue(i[r]));return _e.body.removeChild(t),e!==Re&&0<e.length&&"none"!==e}()),X.setAllowScrolling(!0),ee.removeClass("fp-destroyed"),ye(d.sectionSelector).each(function(){ye(this).addClass("fp-section")}),ye(d.slideSelector).each(function(){ye(this).addClass("fp-slide")}),d.navigation&&function(){G.append('<div id="fp-nav"><ul></ul></div>'),(K=ye("#fp-nav")).addClass(function(){return d.showActiveTooltip?"fp-show-active "+d.navigationPosition:d.navigationPosition});for(var e=0;e<ye(".fp-section").length;e++){var t="";d.anchors.length&&(t=d.anchors[e]),t='<li><a href="#'+t+'"><span></span></a>';var i=d.navigationTooltips[e];void 0!==i&&""!==i&&(t+='<div class="fp-tooltip '+d.navigationPosition+'">'+i+"</div>"),t+="</li>",K.find("ul").append(t)}}(),ye(".fp-section").each(function(e){var t,i=ye(this),r=ye(this).find(".fp-slide"),n=r.length;if(e||0!==ye(".fp-section.active").length||ye(this).addClass("active"),ye(this).css("height",te+"px"),d.paddingTop&&ye(this).css("padding-top",d.paddingTop),d.paddingBottom&&ye(this).css("padding-bottom",d.paddingBottom),void 0!==d.sectionsColor[e]&&ye(this).css("background-color",d.sectionsColor[e]),void 0!==d.anchors[e]&&(ye(this).attr("data-anchor",d.anchors[e]),ye(this).hasClass("active")&&x(d.anchors[e],e)),0<n){e=100*n;var o=100/n;r.wrapAll('<div class="fp-slidesContainer" />'),r.parent().wrap('<div class="fp-slides" />'),ye(this).find(".fp-slidesContainer").css("width",e+"%"),1<n&&(d.controlArrows&&((t=ye(this)).find(".fp-slides").after('<div class="fp-controlArrow fp-prev"></div><div class="fp-controlArrow fp-next"></div>'),"#fff"!=d.controlArrowColor&&(t.find(".fp-controlArrow.fp-next").css("border-color","transparent transparent transparent "+d.controlArrowColor),t.find(".fp-controlArrow.fp-prev").css("border-color","transparent "+d.controlArrowColor+" transparent transparent")),d.loopHorizontal||t.find(".fp-controlArrow.fp-prev").hide()),d.slidesNavigation&&function(e,t){e.append('<div class="fp-slidesNav"><ul></ul></div>');var i=e.find(".fp-slidesNav");i.addClass(d.slidesNavPosition);for(var r=0;r<t;r++)i.find("ul").append('<li><a href="#"><span></span></a></li>');i.css("margin-left","-"+i.width()/2+"px"),i.find("li").first().find("a").addClass("active")}(ye(this),n)),r.each(function(e){ye(this).css("width",o+"%"),d.verticalCentered&&H(ye(this))}),(i=i.find(".fp-slide.active")).length?I(i):r.eq(0).addClass("active")}else d.verticalCentered&&H(ye(this))}).promise().done(function(){X.setAutoScrolling(d.autoScrolling,"internal");var e=ye(".fp-section.active").find(".fp-slide.active");if(e.length&&(0!==ye(".fp-section.active").index(".fp-section")||0===ye(".fp-section.active").index(".fp-section")&&0!==e.index())&&I(e),d.fixedElements&&d.css3&&ye(d.fixedElements).appendTo(G),d.navigation&&(K.css("margin-top","-"+K.height()/2+"px"),K.find("li").eq(ye(".fp-section.active").index(".fp-section")).find("a").addClass("active")),d.menu&&d.css3&&ye(d.menu).closest(".fullpage-wrapper").length&&ye(d.menu).appendTo(G),d.scrollOverflow?("complete"===_e.readyState&&i(),be.on("load",i)):r(),T(),!d.animateAnchor&&(e=Te.location.hash.replace("#","").split("/")[0]).length){var t=ye('[data-anchor="'+e+'"]');t.length&&(d.autoScrolling?N(t.position().top):(N(0),W.scrollTop(t.position().top)),x(e,null),ye.isFunction(d.afterLoad)&&d.afterLoad.call(t,e,t.index(".fp-section")+1),t.addClass("active").siblings().removeClass("active"))}O(),be.on("load",function(){var e=(t=Te.location.hash.replace("#","").split("/"))[0],t=t[1];e&&A(e,t)})});var se,le,he=!1;be.on("scroll",t);var ce,ue=0,fe=0,pe=0,de=0,me=(new Date).getTime();be.on("hashchange",g),we.keydown(function(t){clearTimeout(ce);var e=ye(":focus");e.is("textarea")||e.is("input")||e.is("select")||!d.keyboardScrolling||!d.autoScrolling||(-1<ye.inArray(t.which,[40,38,32,33,34])&&t.preventDefault(),ce=setTimeout(function(){var e=t.shiftKey;switch(Q=t.ctrlKey,t.which){case 38:case 33:oe.k.up&&X.moveSectionUp();break;case 32:if(e&&oe.k.up){X.moveSectionUp();break}case 40:case 34:oe.k.down&&X.moveSectionDown();break;case 36:oe.k.up&&X.moveTo(1);break;case 35:oe.k.down&&X.moveTo(ye(".fp-section").length);break;case 37:oe.k.left&&X.moveSlideLeft();break;case 39:oe.k.right&&X.moveSlideRight()}},150))}),we.keyup(function(e){Q=e.ctrlKey}),ye(Te).blur(function(){Q=!1}),ee.mousedown(function(e){2==e.which&&(ge=e.pageY,ee.on("mousemove",E))}),ee.mouseup(function(e){2==e.which&&ee.off("mousemove")});var ge=0;we.on("click touchstart","#fp-nav a",function(e){e.preventDefault(),e=ye(this).parent().index(),f(ye(".fp-section").eq(e))}),we.on("click touchstart",".fp-slidesNav a",function(e){e.preventDefault(),v(e=ye(this).closest(".fp-section").find(".fp-slides"),e.find(".fp-slide").eq(ye(this).closest("li").index()))}),d.normalScrollElements&&(we.on("mouseenter",d.normalScrollElements,function(){X.setMouseWheelScrolling(!1)}),we.on("mouseleave",d.normalScrollElements,function(){X.setMouseWheelScrolling(!0)})),ye(".fp-section").on("click touchstart",".fp-controlArrow",function(){ye(this).hasClass("fp-prev")?oe.m.left&&X.moveSlideLeft():oe.m.right&&X.moveSlideRight()}),be.resize(y);var Ee,ve=te;X.destroy=function(e){X.setAutoScrolling(!1,"internal"),X.setAllowScrolling(!1),X.setKeyboardScrolling(!1),ee.addClass("fp-destroyed"),be.off("scroll",t).off("hashchange",g).off("resize",y),we.off("click","#fp-nav a").off("mouseenter","#fp-nav li").off("mouseleave","#fp-nav li").off("click",".fp-slidesNav a").off("mouseover",d.normalScrollElements).off("mouseout",d.normalScrollElements),ye(".fp-section").off("click",".fp-controlArrow"),e&&(N(0),ye("#fp-nav, .fp-slidesNav, .fp-controlArrow").remove(),ye(".fp-section").css({height:"","background-color":"",padding:""}),ye(".fp-slide").css({width:""}),ee.css({height:"",position:"","-ms-touch-action":"","touch-action":""}),ye(".fp-section, .fp-slide").each(function(){w(ye(this)),ye(this).removeClass("fp-table active")}),ee.addClass("fp-notransition"),ee.find(".fp-tableCell, .fp-slidesContainer, .fp-slides").each(function(){ye(this).replaceWith(this.childNodes)}),W.scrollTop(0))}}}),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Typed=t():e.Typed=t()}(this,function(){return function(i){var r={};function n(e){if(r[e])return r[e].exports;var t=r[e]={exports:{},id:e,loaded:!1};return i[e].call(t.exports,t,t.exports,n),t.loaded=!0,t.exports}return n.m=i,n.c=r,n.p="",n(0)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function r(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}}();var n=i(1),l=i(3),o=function(){function i(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n.initializer.load(this,t,e),this.begin()}return r(i,[{key:"toggle",value:function(){this.pause.status?this.start():this.stop()}},{key:"stop",value:function(){this.typingComplete||this.pause.status||(this.toggleBlinking(!0),this.pause.status=!0,this.options.onStop(this.arrayPos,this))}},{key:"start",value:function(){this.typingComplete||this.pause.status&&(this.pause.status=!1,this.pause.typewrite?this.typewrite(this.pause.curString,this.pause.curStrPos):this.backspace(this.pause.curString,this.pause.curStrPos),this.options.onStart(this.arrayPos,this))}},{key:"destroy",value:function(){this.reset(!1),this.options.onDestroy(this)}},{key:"reset",value:function(){var e=arguments.length<=0||void 0===arguments[0]||arguments[0];clearInterval(this.timeout),this.replaceText(""),this.cursor&&this.cursor.parentNode&&(this.cursor.parentNode.removeChild(this.cursor),this.cursor=null),this.strPos=0,this.arrayPos=0,this.curLoop=0,e&&(this.insertCursor(),this.options.onReset(this),this.begin())}},{key:"begin",value:function(){var e=this;this.typingComplete=!1,this.shuffleStringsIfNeeded(this),this.insertCursor(),this.bindInputFocusEvents&&this.bindFocusEvents(),this.timeout=setTimeout(function(){e.currentElContent&&0!==e.currentElContent.length?e.backspace(e.currentElContent,e.currentElContent.length):e.typewrite(e.strings[e.sequence[e.arrayPos]],e.strPos)},this.startDelay)}},{key:"typewrite",value:function(n,o){var a=this;this.fadeOut&&this.el.classList.contains(this.fadeOutClass)&&(this.el.classList.remove(this.fadeOutClass),this.cursor&&this.cursor.classList.remove(this.fadeOutClass));var e=this.humanizer(this.typeSpeed),s=1;!0!==this.pause.status?this.timeout=setTimeout(function(){o=l.htmlParser.typeHtmlChars(n,o,a);var e=0,t=n.substr(o);if("^"===t.charAt(0)&&/^\^\d+/.test(t)){var i=1;i+=(t=/\d+/.exec(t)[0]).length,e=parseInt(t),a.temporaryPause=!0,a.options.onTypingPaused(a.arrayPos,a),n=n.substring(0,o)+n.substring(o+i),a.toggleBlinking(!0)}if("`"===t.charAt(0)){for(;"`"!==n.substr(o+s).charAt(0)&&!(o+ ++s>n.length););var r=n.substring(0,o);n=r+n.substring(r.length+1,o+s)+n.substring(o+s+1),s--}a.timeout=setTimeout(function(){a.toggleBlinking(!1),o===n.length?a.doneTyping(n,o):a.keepTyping(n,o,s),a.temporaryPause&&(a.temporaryPause=!1,a.options.onTypingResumed(a.arrayPos,a))},e)},e):this.setPauseStatus(n,o,!0)}},{key:"keepTyping",value:function(e,t,i){0===t&&(this.toggleBlinking(!1),this.options.preStringTyped(this.arrayPos,this)),t+=i;var r=e.substr(0,t);this.replaceText(r),this.typewrite(e,t)}},{key:"doneTyping",value:function(e,t){var i=this;this.options.onStringTyped(this.arrayPos,this),this.toggleBlinking(!0),this.arrayPos===this.strings.length-1&&(this.complete(),!1===this.loop||this.curLoop===this.loopCount)||(this.timeout=setTimeout(function(){i.backspace(e,t)},this.backDelay))}},{key:"backspace",value:function(i,r){var n=this;if(!0!==this.pause.status){if(this.fadeOut)return this.initFadeOut();this.toggleBlinking(!1);var e=this.humanizer(this.backSpeed);this.timeout=setTimeout(function(){r=l.htmlParser.backSpaceHtmlChars(i,r,n);var e=i.substr(0,r);if(n.replaceText(e),n.smartBackspace){var t=n.strings[n.arrayPos+1];t&&e===t.substr(0,r)?n.stopNum=r:n.stopNum=0}r>n.stopNum?(r--,n.backspace(i,r)):r<=n.stopNum&&(n.arrayPos++,n.arrayPos===n.strings.length?(n.arrayPos=0,n.options.onLastStringBackspaced(),n.shuffleStringsIfNeeded(),n.begin()):n.typewrite(n.strings[n.sequence[n.arrayPos]],r))},e)}else this.setPauseStatus(i,r,!0)}},{key:"complete",value:function(){this.options.onComplete(this),this.loop?this.curLoop++:this.typingComplete=!0}},{key:"setPauseStatus",value:function(e,t,i){this.pause.typewrite=i,this.pause.curString=e,this.pause.curStrPos=t}},{key:"toggleBlinking",value:function(e){this.cursor&&(this.pause.status||this.cursorBlinking!==e&&((this.cursorBlinking=e)?this.cursor.classList.add("typed-cursor--blink"):this.cursor.classList.remove("typed-cursor--blink")))}},{key:"humanizer",value:function(e){return Math.round(Math.random()*e/2)+e}},{key:"shuffleStringsIfNeeded",value:function(){this.shuffle&&(this.sequence=this.sequence.sort(function(){return Math.random()-.5}))}},{key:"initFadeOut",value:function(){var e=this;return this.el.className+=" "+this.fadeOutClass,this.cursor&&(this.cursor.className+=" "+this.fadeOutClass),setTimeout(function(){e.arrayPos++,e.replaceText(""),e.strings.length>e.arrayPos?e.typewrite(e.strings[e.sequence[e.arrayPos]],0):(e.typewrite(e.strings[0],0),e.arrayPos=0)},this.fadeOutDelay)}},{key:"replaceText",value:function(e){this.attr?this.el.setAttribute(this.attr,e):this.isInput?this.el.value=e:"html"===this.contentType?this.el.innerHTML=e:this.el.textContent=e}},{key:"bindFocusEvents",value:function(){var t=this;this.isInput&&(this.el.addEventListener("focus",function(e){t.stop()}),this.el.addEventListener("blur",function(e){t.el.value&&0!==t.el.value.length||t.start()}))}},{key:"insertCursor",value:function(){this.showCursor&&(this.cursor||(this.cursor=document.createElement("span"),this.cursor.className="typed-cursor",this.cursor.innerHTML=this.cursorChar,this.el.parentNode&&this.el.parentNode.insertBefore(this.cursor,this.el.nextSibling)))}}]),i}();t.default=o,e.exports=t.default},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},r=function(){function r(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}}();var n,o=i(2),l=(n=o)&&n.__esModule?n:{default:n},a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"load",value:function(e,t,i){if(e.el="string"==typeof i?document.querySelector(i):i,e.options=s({},l.default,t),e.isInput="input"===e.el.tagName.toLowerCase(),e.attr=e.options.attr,e.bindInputFocusEvents=e.options.bindInputFocusEvents,e.showCursor=!e.isInput&&e.options.showCursor,e.cursorChar=e.options.cursorChar,e.cursorBlinking=!0,e.elContent=e.attr?e.el.getAttribute(e.attr):e.el.textContent,e.contentType=e.options.contentType,e.typeSpeed=e.options.typeSpeed,e.startDelay=e.options.startDelay,e.backSpeed=e.options.backSpeed,e.smartBackspace=e.options.smartBackspace,e.backDelay=e.options.backDelay,e.fadeOut=e.options.fadeOut,e.fadeOutClass=e.options.fadeOutClass,e.fadeOutDelay=e.options.fadeOutDelay,e.isPaused=!1,e.strings=e.options.strings.map(function(e){return e.trim()}),"string"==typeof e.options.stringsElement?e.stringsElement=document.querySelector(e.options.stringsElement):e.stringsElement=e.options.stringsElement,e.stringsElement){e.strings=[],e.stringsElement.style.display="none";var r=Array.prototype.slice.apply(e.stringsElement.children),n=r.length;if(n)for(var o=0;o<n;o+=1){var a=r[o];e.strings.push(a.innerHTML.trim())}}for(var o in e.strPos=0,e.arrayPos=0,e.stopNum=0,e.loop=e.options.loop,e.loopCount=e.options.loopCount,e.curLoop=0,e.shuffle=e.options.shuffle,e.sequence=[],e.pause={status:!1,typewrite:!0,curString:"",curStrPos:0},e.typingComplete=!1,e.strings)e.sequence[o]=o;e.currentElContent=this.getCurrentElContent(e),e.autoInsertCss=e.options.autoInsertCss,this.appendAnimationCss(e)}},{key:"getCurrentElContent",value:function(e){return e.attr?e.el.getAttribute(e.attr):e.isInput?e.el.value:"html"===e.contentType?e.el.innerHTML:e.el.textContent}},{key:"appendAnimationCss",value:function(e){var t="data-typed-js-css";if(e.autoInsertCss&&(e.showCursor||e.fadeOut)&&!document.querySelector("["+t+"]")){var i=document.createElement("style");i.type="text/css",i.setAttribute(t,!0);var r="";e.showCursor&&(r+="\n        .typed-cursor{\n          opacity: 1;\n        }\n        .typed-cursor.typed-cursor--blink{\n          animation: typedjsBlink 0.7s infinite;\n          -webkit-animation: typedjsBlink 0.7s infinite;\n                  animation: typedjsBlink 0.7s infinite;\n        }\n        @keyframes typedjsBlink{\n          50% { opacity: 0.0; }\n        }\n        @-webkit-keyframes typedjsBlink{\n          0% { opacity: 1; }\n          50% { opacity: 0.0; }\n          100% { opacity: 1; }\n        }\n      "),e.fadeOut&&(r+="\n        .typed-fade-out{\n          opacity: 0;\n          transition: opacity .25s;\n        }\n        .typed-cursor.typed-cursor--blink.typed-fade-out{\n          -webkit-animation: 0;\n          animation: 0;\n        }\n      "),0!==i.length&&(i.innerHTML=r,document.body.appendChild(i))}}}]),e}(),h=new(t.default=a);t.initializer=h},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={strings:["These are the default values...","You know what you should do?","Use your own!","Have a great day!"],stringsElement:null,typeSpeed:0,startDelay:0,backSpeed:0,smartBackspace:!0,shuffle:!1,backDelay:700,fadeOut:!1,fadeOutClass:"typed-fade-out",fadeOutDelay:500,loop:!1,loopCount:1/0,showCursor:!0,cursorChar:"|",autoInsertCss:!0,attr:null,bindInputFocusEvents:!1,contentType:"html",onComplete:function(e){},preStringTyped:function(e,t){},onStringTyped:function(e,t){},onLastStringBackspaced:function(e){},onTypingPaused:function(e,t){},onTypingResumed:function(e,t){},onReset:function(e){},onStop:function(e,t){},onStart:function(e,t){},onDestroy:function(e){}};t.default=i,e.exports=t.default},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function r(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}}();var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"typeHtmlChars",value:function(e,t,i){if("html"!==i.contentType)return t;var r=e.substr(t).charAt(0);if("<"===r||"&"===r){var n="";for(n="<"===r?">":";";e.substr(t+1).charAt(0)!==n&&!(++t+1>e.length););t++}return t}},{key:"backSpaceHtmlChars",value:function(e,t,i){if("html"!==i.contentType)return t;var r=e.substr(t).charAt(0);if(">"===r||";"===r){var n="";for(n=">"===r?"<":"&";e.substr(t-1).charAt(0)!==n&&!(--t<0););t--}return t}}]),e}(),n=new(t.default=r);t.htmlParser=n}])}),$(document).ready(function(){var h=h||{};h.window=$(window),h.document=$(document),h.Width=h.window.width(),h.Height=h.window.height();var c=function(){};c.headparticle=function(){function e(){c.camera.position.x+=1*(-.5*i-c.camera.position.x),c.camera.position.y+=.5*(.5*r-c.camera.position.y),c.camera.lookAt(c.scene.position),c.renderer.render(c.scene,c.camera)}var t;Modernizr.webgl||alert("Your browser dosent support WebGL");var i=0,r=0,n=h.Width/2,o=h.Height/2;(c.camera=new THREE.PerspectiveCamera(40,h.Width/h.Height,1,2e3)).position.z=300,c.scene=new THREE.Scene;var a=new THREE.LoadingManager,s=new THREE.Geometry,l=new THREE.ParticleBasicMaterial({color:660521,size:1.1});new THREE.OBJLoader(a).load("face.obj",function(e){e.traverse(function(e){e instanceof THREE.Mesh&&$(e.geometry.vertices).each(function(){s.vertices.push(new THREE.Vector3(7*this.x+100,7*this.y-5,7*this.z))})}),c.scene.add(t)}),t=new THREE.ParticleSystem(s,l),(c.renderer=new THREE.WebGLRenderer({alpha:!0})).setSize(h.Width,h.Height),c.renderer.setClearColor(0,0),$(".particlehead").append(c.renderer.domElement),$(".particlehead").on("mousemove",function(e){i=(e.clientX-n)/2-300,r=(e.clientY-o)/2}),h.window.on("resize",function(){n=h.Width/2,o=h.Height/2,c.camera.aspect=h.Width/h.Height,c.camera.updateProjectionMatrix(),c.renderer.setSize(h.Width,h.Height)}),c.animate=function(){(c.ticker=TweenMax.ticker).addEventListener("tick",c.animate),e()},e(),c.animate()},c.headparticle();var e=$(".custom-cursor"),t=$(".follow-cursor"),i=0,r=0,n=0,o=0;TweenMax.to({},.016,{repeat:-1,onRepeat:function(){i+=(n-i)/9,r+=(o-r)/9,TweenMax.set(t,{css:{left:i-12,top:r-12}}),TweenMax.set(e,{css:{left:n,top:o}})}}),$(document).on("mousemove",function(e){n=e.pageX,o=e.pageY}),$("a").on("mouseenter",function(){e.addClass("active"),t.addClass("active")}),$("a").on("mouseleave",function(){e.removeClass("active"),t.removeClass("active")})}),jQuery(document).ready(function(t){var i=t(".cd-overlay-nav"),r=t(".cd-overlay-content"),e=t(".cd-primary-nav"),n=t(".cd-nav-trigger");function o(){var e=2*Math.sqrt(Math.pow(t(window).height(),2)+Math.pow(t(window).width(),2));i.children("span").velocity({scaleX:0,scaleY:0,translateZ:0},50).velocity({height:e+"px",width:e+"px",top:-e/2+"px",left:-e/2+"px"},0),r.children("span").velocity({scaleX:0,scaleY:0,translateZ:0},50).velocity({height:e+"px",width:e+"px",top:-e/2+"px",left:-e/2+"px"},0)}o(),t(window).on("resize",function(){window.requestAnimationFrame(o)}),n.on("click",function(){n.hasClass("close-nav")?(n.removeClass("close-nav"),r.children("span").velocity({translateZ:0,scaleX:1,scaleY:1},500,"easeInCubic",function(){e.removeClass("fade-in"),i.children("span").velocity({translateZ:0,scaleX:0,scaleY:0},0),r.addClass("is-hidden").one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){r.children("span").velocity({translateZ:0,scaleX:0,scaleY:0},0,function(){r.removeClass("is-hidden")})}),t("html").hasClass("no-csstransitions")&&r.children("span").velocity({translateZ:0,scaleX:0,scaleY:0},0,function(){r.removeClass("is-hidden")})})):(n.addClass("close-nav"),i.children("span").velocity({translateZ:0,scaleX:1,scaleY:1},500,"easeInCubic",function(){e.addClass("fade-in")}))})}),$(document).ready(function(){var i=new Typed("#typed",{strings:['Web designer &amp; <br> front-end developer <br><span style="font-family: LibreBaskerville-Italic; color: #98a4b8;font-size: 28px;">Creative and passionate</span>'],typeSpeed:80,backDelay:1600,loop:!0,contentType:"html",loopCount:null,onReset:function(e){},onDestroy:function(e){}});$("nav");$("#fullpage").fullpage({sectionSelector:".vertical-scrolling",slideSelector:".horizontal-scrolling",navigation:!0,slidesNavigation:!0,controlArrows:!1,loopBottom:!0,afterLoad:function(e,t){2==t&&i.reset(),4==t&&$("#fp-nav").hide(),2==t||5==t?$(".navbar-brand svg .st0").css({fill:"#fff"}):$(".navbar-brand svg .st0").css({fill:"#0A1529"}),5==t?$(".menu-text").css({color:"#98a4b8"}):$(".menu-text").css({color:"#0a1529"})},onLeave:function(e){2==e&&i.destroy(),4==e&&$("#fp-nav").show()}})}),function(t){function s(e){var t=e.length,i=c.type(e);return"function"!==i&&!c.isWindow(e)&&(!(1!==e.nodeType||!t)||("array"===i||0===t||"number"==typeof t&&0<t&&t-1 in e))}if(!t.jQuery){var c=function(e,t){return new c.fn.init(e,t)};c.isWindow=function(e){return null!=e&&e==e.window},c.type=function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?i[n.call(e)]||"object":typeof e},c.isArray=Array.isArray||function(e){return"array"===c.type(e)},c.isPlainObject=function(e){var t;if(!e||"object"!==c.type(e)||e.nodeType||c.isWindow(e))return!1;try{if(e.constructor&&!r.call(e,"constructor")&&!r.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}for(t in e);return void 0===t||r.call(e,t)},c.each=function(e,t,i){var r=0,n=e.length,o=s(e);if(i){if(o)for(;r<n&&!1!==t.apply(e[r],i);r++);else for(r in e)if(!1===t.apply(e[r],i))break}else if(o)for(;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},c.data=function(e,t,i){if(void 0===i){var r=(n=e[c.expando])&&o[n];if(void 0===t)return r;if(r&&t in r)return r[t]}else if(void 0!==t){var n=e[c.expando]||(e[c.expando]=++c.uuid);return o[n]=o[n]||{},o[n][t]=i}},c.removeData=function(e,t){var i=e[c.expando],r=i&&o[i];r&&c.each(t,function(e,t){delete r[t]})},c.extend=function(){var e,t,i,r,n,o,a=arguments[0]||{},s=1,l=arguments.length,h=!1;for("boolean"==typeof a&&(h=a,a=arguments[s]||{},s++),"object"!=typeof a&&"function"!==c.type(a)&&(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(n=arguments[s]))for(r in n)e=a[r],a!==(i=n[r])&&(h&&i&&(c.isPlainObject(i)||(t=c.isArray(i)))?(o=t?(t=!1,e&&c.isArray(e)?e:[]):e&&c.isPlainObject(e)?e:{},a[r]=c.extend(h,o,i)):void 0!==i&&(a[r]=i));return a},c.queue=function(e,t,i){if(e){t=(t||"fx")+"queue";var r=c.data(e,t);return i?(!r||c.isArray(i)?r=c.data(e,t,(a=o||[],null!=(n=i)&&(s(Object(n))?function(e,t){for(var i=+t.length,r=0,n=e.length;r<i;)e[n++]=t[r++];if(i!=i)for(;void 0!==t[r];)e[n++]=t[r++];e.length=n}(a,"string"==typeof n?[n]:n):[].push.call(a,n)),a)):r.push(i),r):r||[]}var n,o,a},c.dequeue=function(e,n){c.each(e.nodeType?[e]:e,function(e,t){n=n||"fx";var i=c.queue(t,n),r=i.shift();"inprogress"===r&&(r=i.shift()),r&&("fx"===n&&i.unshift("inprogress"),r.call(t,function(){c.dequeue(t,n)}))})},c.fn=c.prototype={init:function(e){if(e.nodeType)return this[0]=e,this;throw new Error("Not a DOM node.")},offset:function(){var e=this[0].getBoundingClientRect?this[0].getBoundingClientRect():{top:0,left:0};return{top:e.top+(t.pageYOffset||document.scrollTop||0)-(document.clientTop||0),left:e.left+(t.pageXOffset||document.scrollLeft||0)-(document.clientLeft||0)}},position:function(){function e(){for(var e=this.offsetParent||document;e&&"html"===!e.nodeType.toLowerCase&&"static"===e.style.position;)e=e.offsetParent;return e||document}var t=this[0],e=e.apply(t),i=this.offset(),r=/^(?:body|html)$/i.test(e.nodeName)?{top:0,left:0}:c(e).offset();return i.top-=parseFloat(t.style.marginTop)||0,i.left-=parseFloat(t.style.marginLeft)||0,e.style&&(r.top+=parseFloat(e.style.borderTopWidth)||0,r.left+=parseFloat(e.style.borderLeftWidth)||0),{top:i.top-r.top,left:i.left-r.left}}};var o={};c.expando="velocity"+(new Date).getTime(),c.uuid=0;for(var i={},r=i.hasOwnProperty,n=i.toString,e="Boolean Number String Function Array Date RegExp Object Error".split(" "),a=0;a<e.length;a++)i["[object "+e[a]+"]"]=e[a].toLowerCase();c.fn.init.prototype=c.fn,t.Velocity={Utilities:c}}}(window),function(e){"object"==typeof module&&"object"==typeof module.exports?module.exports=e():"function"==typeof define&&define.amd?define(e):e()}(function(){return function(e,V,I,N){function d(e){return W.isWrapped(e)?e=[].slice.call(e):W.isNode(e)&&(e=[e]),e}function U(e){var t=j.data(e,"velocity");return null===t?N:t}function r(a,t,s,i){function r(e,t){return 1-3*t+3*e}function n(e,t){return 3*t-6*e}function o(e){return 3*e}function l(e,t,i){return((r(t,i)*e+n(t,i))*e+o(t))*e}function h(e,t,i){return 3*r(t,i)*e*e+2*n(t,i)*e+o(t)}function c(e){for(var t=0,i=1,r=m-1;i!=r&&v[i]<=e;++i)t+=g;var n=t+(e-v[--i])/(v[i+1]-v[i])*g,o=h(n,a,s);return.001<=o?function(e,t){for(var i=0;i<f;++i){var r=h(t,a,s);if(0===r)return t;t-=(l(t,a,s)-e)/r}return t}(e,n):0==o?n:function(e,t,i){for(var r,n,o=0;0<(r=l(n=t+(i-t)/2,a,s)-e)?i=n:t=n,Math.abs(r)>p&&++o<d;);return n}(e,t,t+g)}function u(){y=!0,(a!=t||s!=i)&&function(){for(var e=0;e<m;++e)v[e]=l(e*g,a,s)}()}var f=4,p=1e-7,d=10,m=11,g=1/(m-1),e="Float32Array"in V;if(4!==arguments.length)return!1;for(var E=0;E<4;++E)if("number"!=typeof arguments[E]||isNaN(arguments[E])||!isFinite(arguments[E]))return!1;a=Math.min(a,1),s=Math.min(s,1),a=Math.max(a,0),s=Math.max(s,0);var v=e?new Float32Array(m):new Array(m),y=!1,T=function(e){return y||u(),a===t&&s===i?e:0===e?0:1===e?1:l(c(e),t,i)};T.getControlPoints=function(){return[{x:a,y:t},{x:s,y:i}]};var _="generateBezier("+[a,t,s,i]+")";return T.toString=function(){return _},T}function z(e,t){var i=e;return W.isString(e)?G.Easings[e]||(i=!1):i=W.isArray(e)&&1===e.length?function(t){return function(e){return Math.round(e*t)*(1/t)}}.apply(null,e):W.isArray(e)&&2===e.length?a.apply(null,e.concat([t])):!(!W.isArray(e)||4!==e.length)&&r.apply(null,e),!1===i&&(i=G.Easings[G.defaults.easing]?G.defaults.easing:o),i}function B(e){if(e)for(var t=(new Date).getTime(),i=0,r=G.State.calls.length;i<r;i++)if(G.State.calls[i]){var n=G.State.calls[i],o=n[0],a=n[2],s=n[3],l=!!s;s||(s=G.State.calls[i][3]=t-16);for(var h=Math.min((t-s)/a.duration,1),c=0,u=o.length;c<u;c++){var f=o[c],p=f.element;if(U(p)){var d=!1;if(a.display!==N&&null!==a.display&&"none"!==a.display){if("flex"===a.display){j.each(["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex"],function(e,t){X.setPropertyValue(p,"display",t)})}X.setPropertyValue(p,"display",a.display)}for(var m in a.visibility!==N&&"hidden"!==a.visibility&&X.setPropertyValue(p,"visibility",a.visibility),f)if("element"!==m){var g,E=f[m],v=W.isString(E.easing)?G.Easings[E.easing]:E.easing;if(1===h)g=E.endValue;else if(g=E.startValue+(E.endValue-E.startValue)*v(h),!l&&g===E.currentValue)continue;if(E.currentValue=g,X.Hooks.registered[m]){var y=X.Hooks.getRoot(m),T=U(p).rootPropertyValueCache[y];T&&(E.rootPropertyValue=T)}var _=X.setPropertyValue(p,m,E.currentValue+(0===parseFloat(g)?"":E.unitType),E.rootPropertyValue,E.scrollData);X.Hooks.registered[m]&&(U(p).rootPropertyValueCache[y]=X.Normalizations.registered[y]?X.Normalizations.registered[y]("extract",null,_[1]):_[1]),"transform"===_[0]&&(d=!0)}a.mobileHA&&U(p).transformCache.translate3d===N&&(U(p).transformCache.translate3d="(0px, 0px, 0px)",d=!0),d&&X.flushTransformCache(p)}}a.display!==N&&"none"!==a.display&&(G.State.calls[i][2].display=!1),a.visibility!==N&&"hidden"!==a.visibility&&(G.State.calls[i][2].visibility=!1),a.progress&&a.progress.call(n[1],n[1],h,Math.max(0,s+a.duration-t),s),1===h&&x(i)}G.State.isTicking&&R(B)}function x(e,t){if(!G.State.calls[e])return!1;for(var i=G.State.calls[e][0],r=G.State.calls[e][1],n=G.State.calls[e][2],o=G.State.calls[e][4],a=!1,s=0,l=i.length;s<l;s++){var h=i[s].element;if(t||n.loop||("none"===n.display&&X.setPropertyValue(h,"display",n.display),"hidden"===n.visibility&&X.setPropertyValue(h,"visibility",n.visibility)),!0!==n.loop&&(j.queue(h)[1]===N||!/\.velocityQueueEntryFlag/i.test(j.queue(h)[1]))&&U(h)){U(h).isAnimating=!1;var c=!(U(h).rootPropertyValueCache={});j.each(X.Lists.transforms3D,function(e,t){var i=/^scale/.test(t)?1:0,r=U(h).transformCache[t];U(h).transformCache[t]!==N&&new RegExp("^\\("+i+"[^.]").test(r)&&(c=!0,delete U(h).transformCache[t])}),n.mobileHA&&(c=!0,delete U(h).transformCache.translate3d),c&&X.flushTransformCache(h),X.Values.removeClass(h,"velocity-animating")}if(!t&&n.complete&&!n.loop&&s===l-1)try{n.complete.call(r,r)}catch(e){setTimeout(function(){throw e},1)}o&&!0!==n.loop&&o(r),!0!==n.loop||t||(j.each(U(h).tweensContainer,function(e,t){/^rotate/.test(e)&&360===parseFloat(t.endValue)&&(t.endValue=0,t.startValue=360)}),G(h,"reverse",{loop:!0,delay:n.delay})),!1!==n.queue&&j.dequeue(h,n.queue)}G.State.calls[e]=!1;for(var u=0,f=G.State.calls.length;u<f;u++)if(!1!==G.State.calls[u]){a=!0;break}!1===a&&(G.State.isTicking=!1,delete G.State.calls,G.State.calls=[])}var j,n,u=function(){if(I.documentMode)return I.documentMode;for(var e=7;4<e;e--){var t=I.createElement("div");if(t.innerHTML="\x3c!--[if IE "+e+"]><span></span><![endif]--\x3e",t.getElementsByTagName("span").length)return t=null,e}return N}(),t=(n=0,V.webkitRequestAnimationFrame||V.mozRequestAnimationFrame||function(e){var t,i=(new Date).getTime();return t=Math.max(0,16-(i-n)),n=i+t,setTimeout(function(){e(i+t)},t)}),W={isString:function(e){return"string"==typeof e},isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)},isNode:function(e){return e&&e.nodeType},isNodeList:function(e){return"object"==typeof e&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(e))&&e.length!==N&&(0===e.length||"object"==typeof e[0]&&0<e[0].nodeType)},isWrapped:function(e){return e&&(e.jquery||V.Zepto&&V.Zepto.zepto.isZ(e))},isSVG:function(e){return V.SVGElement&&e instanceof V.SVGElement},isEmptyObject:function(e){for(var t in e)return!1;return!0}},i=!1;if(e.fn&&e.fn.jquery?(j=e,i=!0):j=V.Velocity.Utilities,u<=8&&!i)throw new Error("Velocity: IE8 and below require jQuery to be loaded before Velocity.");if(!(u<=7)){var o="swing",G={State:{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isAndroid:/Android/i.test(navigator.userAgent),isGingerbread:/Android 2\.3\.[3-7]/i.test(navigator.userAgent),isChrome:V.chrome,isFirefox:/Firefox/i.test(navigator.userAgent),prefixElement:I.createElement("div"),prefixMatches:{},scrollAnchor:null,scrollPropertyLeft:null,scrollPropertyTop:null,isTicking:!1,calls:[]},CSS:{},Utilities:j,Redirects:{},Easings:{},Promise:V.Promise,defaults:{queue:"",duration:400,easing:o,begin:N,complete:N,progress:N,display:N,visibility:N,loop:!1,delay:!1,mobileHA:!0,_cacheValues:!0},init:function(e){j.data(e,"velocity",{isSVG:W.isSVG(e),isAnimating:!1,computedStyle:null,tweensContainer:null,rootPropertyValueCache:{},transformCache:{}})},hook:null,mock:!1,version:{major:1,minor:1,patch:0},debug:!1};V.pageYOffset!==N?(G.State.scrollAnchor=V,G.State.scrollPropertyLeft="pageXOffset",G.State.scrollPropertyTop="pageYOffset"):(G.State.scrollAnchor=I.documentElement||I.body.parentNode||I.body,G.State.scrollPropertyLeft="scrollLeft",G.State.scrollPropertyTop="scrollTop");var a=function(){function v(e){return-e.tension*e.x-e.friction*e.v}function y(e,t,i){var r={x:e.x+i.dx*t,v:e.v+i.dv*t,tension:e.tension,friction:e.friction};return{dx:r.v,dv:v(r)}}return function e(t,i,r){var n,o,a,s,l,h,c,u,f,p,d,m={x:-1,v:0,tension:null,friction:null},g=[0],E=0;for(t=parseFloat(t)||500,i=parseFloat(i)||20,r=r||null,m.tension=t,m.friction=i,o=(n=null!==r)?(E=e(t,i))/r*.016:.016;l=o,void 0,h={dx:(s=a||m).v,dv:v(s)},c=y(s,.5*l,h),u=y(s,.5*l,c),f=y(s,l,u),p=1/6*(h.dx+2*(c.dx+u.dx)+f.dx),d=1/6*(h.dv+2*(c.dv+u.dv)+f.dv),s.x=s.x+p*l,s.v=s.v+d*l,a=s,g.push(1+a.x),E+=16,1e-4<Math.abs(a.x)&&1e-4<Math.abs(a.v););return n?function(e){return g[e*(g.length-1)|0]}:E}}();G.Easings={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},spring:function(e){return 1-Math.cos(4.5*e*Math.PI)*Math.exp(6*-e)}},j.each([["ease",[.25,.1,.25,1]],["ease-in",[.42,0,1,1]],["ease-out",[0,0,.58,1]],["ease-in-out",[.42,0,.58,1]],["easeInSine",[.47,0,.745,.715]],["easeOutSine",[.39,.575,.565,1]],["easeInOutSine",[.445,.05,.55,.95]],["easeInQuad",[.55,.085,.68,.53]],["easeOutQuad",[.25,.46,.45,.94]],["easeInOutQuad",[.455,.03,.515,.955]],["easeInCubic",[.55,.055,.675,.19]],["easeOutCubic",[.215,.61,.355,1]],["easeInOutCubic",[.645,.045,.355,1]],["easeInQuart",[.895,.03,.685,.22]],["easeOutQuart",[.165,.84,.44,1]],["easeInOutQuart",[.77,0,.175,1]],["easeInQuint",[.755,.05,.855,.06]],["easeOutQuint",[.23,1,.32,1]],["easeInOutQuint",[.86,0,.07,1]],["easeInExpo",[.95,.05,.795,.035]],["easeOutExpo",[.19,1,.22,1]],["easeInOutExpo",[1,0,0,1]],["easeInCirc",[.6,.04,.98,.335]],["easeOutCirc",[.075,.82,.165,1]],["easeInOutCirc",[.785,.135,.15,.86]]],function(e,t){G.Easings[t[0]]=r.apply(null,t[1])});var X=G.CSS={RegEx:{isHex:/^#([A-f\d]{3}){1,2}$/i,valueUnwrap:/^[A-z]+\((.*)\)$/i,wrappedValueAlreadyExtracted:/[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,valueSplit:/([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/gi},Lists:{colors:["fill","stroke","stopColor","color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","outlineColor"],transformsBase:["translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ"],transforms3D:["transformPerspective","translateZ","scaleZ","rotateX","rotateY"]},Hooks:{templates:{textShadow:["Color X Y Blur","black 0px 0px 0px"],boxShadow:["Color X Y Blur Spread","black 0px 0px 0px 0px"],clip:["Top Right Bottom Left","0px 0px 0px 0px"],backgroundPosition:["X Y","0% 0%"],transformOrigin:["X Y Z","50% 50% 0px"],perspectiveOrigin:["X Y","50% 50%"]},registered:{},register:function(){for(var e=0;e<X.Lists.colors.length;e++){var t="color"===X.Lists.colors[e]?"0 0 0 1":"255 255 255 1";X.Hooks.templates[X.Lists.colors[e]]=["Red Green Blue Alpha",t]}var i,r,n;if(u)for(i in X.Hooks.templates){n=(r=X.Hooks.templates[i])[0].split(" ");var o=r[1].match(X.RegEx.valueSplit);"Color"===n[0]&&(n.push(n.shift()),o.push(o.shift()),X.Hooks.templates[i]=[n.join(" "),o.join(" ")])}for(i in X.Hooks.templates)for(var e in n=(r=X.Hooks.templates[i])[0].split(" ")){var a=i+n[e],s=e;X.Hooks.registered[a]=[i,s]}},getRoot:function(e){var t=X.Hooks.registered[e];return t?t[0]:e},cleanRootPropertyValue:function(e,t){return X.RegEx.valueUnwrap.test(t)&&(t=t.match(X.RegEx.valueUnwrap)[1]),X.Values.isCSSNullValue(t)&&(t=X.Hooks.templates[e][1]),t},extractValue:function(e,t){var i=X.Hooks.registered[e];if(i){var r=i[0],n=i[1];return(t=X.Hooks.cleanRootPropertyValue(r,t)).toString().match(X.RegEx.valueSplit)[n]}return t},injectValue:function(e,t,i){var r=X.Hooks.registered[e];if(r){var n,o=r[0],a=r[1];return(n=(i=X.Hooks.cleanRootPropertyValue(o,i)).toString().match(X.RegEx.valueSplit))[a]=t,n.join(" ")}return i}},Normalizations:{registered:{clip:function(e,t,i){switch(e){case"name":return"clip";case"extract":var r;return r=X.RegEx.wrappedValueAlreadyExtracted.test(i)?i:(r=i.toString().match(X.RegEx.valueUnwrap))?r[1].replace(/,(\s+)?/g," "):i;case"inject":return"rect("+i+")"}},blur:function(e,t,i){switch(e){case"name":return"-webkit-filter";case"extract":var r=parseFloat(i);if(!r&&0!==r){var n=i.toString().match(/blur\(([0-9]+[A-z]+)\)/i);r=n?n[1]:0}return r;case"inject":return parseFloat(i)?"blur("+i+")":"none"}},opacity:function(e,t,i){if(u<=8)switch(e){case"name":return"filter";case"extract":var r=i.toString().match(/alpha\(opacity=(.*)\)/i);return r?r[1]/100:1;case"inject":return(t.style.zoom=1)<=parseFloat(i)?"":"alpha(opacity="+parseInt(100*parseFloat(i),10)+")"}else switch(e){case"name":return"opacity";case"extract":case"inject":return i}}},register:function(){u<=9||G.State.isGingerbread||(X.Lists.transformsBase=X.Lists.transformsBase.concat(X.Lists.transforms3D));for(var e=0;e<X.Lists.transformsBase.length;e++)!function(){var n=X.Lists.transformsBase[e];X.Normalizations.registered[n]=function(e,t,i){switch(e){case"name":return"transform";case"extract":return U(t)===N||U(t).transformCache[n]===N?/^scale/i.test(n)?1:0:U(t).transformCache[n].replace(/[()]/g,"");case"inject":var r=!1;switch(n.substr(0,n.length-1)){case"translate":r=!/(%|px|em|rem|vw|vh|\d)$/i.test(i);break;case"scal":case"scale":G.State.isAndroid&&U(t).transformCache[n]===N&&i<1&&(i=1),r=!/(\d)$/i.test(i);break;case"skew":r=!/(deg|\d)$/i.test(i);break;case"rotate":r=!/(deg|\d)$/i.test(i)}return r||(U(t).transformCache[n]="("+i+")"),U(t).transformCache[n]}}}();for(e=0;e<X.Lists.colors.length;e++)!function(){var a=X.Lists.colors[e];X.Normalizations.registered[a]=function(e,t,i){switch(e){case"name":return a;case"extract":var r;if(X.RegEx.wrappedValueAlreadyExtracted.test(i))r=i;else{var n,o={black:"rgb(0, 0, 0)",blue:"rgb(0, 0, 255)",gray:"rgb(128, 128, 128)",green:"rgb(0, 128, 0)",red:"rgb(255, 0, 0)",white:"rgb(255, 255, 255)"};/^[A-z]+$/i.test(i)?n=o[i]!==N?o[i]:o.black:X.RegEx.isHex.test(i)?n="rgb("+X.Values.hexToRgb(i).join(" ")+")":/^rgba?\(/i.test(i)||(n=o.black),r=(n||i).toString().match(X.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g," ")}return u<=8||3!==r.split(" ").length||(r+=" 1"),r;case"inject":return u<=8?4===i.split(" ").length&&(i=i.split(/\s+/).slice(0,3).join(" ")):3===i.split(" ").length&&(i+=" 1"),(u<=8?"rgb":"rgba")+"("+i.replace(/\s+/g,",").replace(/\.(\d)+(?=,)/g,"")+")"}}}()}},Names:{camelCase:function(e){return e.replace(/-(\w)/g,function(e,t){return t.toUpperCase()})},SVGAttribute:function(e){var t="width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y2";return(u||G.State.isAndroid&&!G.State.isChrome)&&(t+="|transform"),new RegExp("^("+t+")$","i").test(e)},prefixCheck:function(e){if(G.State.prefixMatches[e])return[G.State.prefixMatches[e],!0];for(var t=["","Webkit","Moz","ms","O"],i=0,r=t.length;i<r;i++){var n;if(n=0===i?e:t[i]+e.replace(/^\w/,function(e){return e.toUpperCase()}),W.isString(G.State.prefixElement.style[n]))return[G.State.prefixMatches[e]=n,!0]}return[e,!1]}},Values:{hexToRgb:function(e){var t;return e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,i,r){return t+t+i+i+r+r}),(t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e))?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:[0,0,0]},isCSSNullValue:function(e){return 0==e||/^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(e)},getUnitType:function(e){return/^(rotate|skew)/i.test(e)?"deg":/(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(e)?"":"px"},getDisplayType:function(e){var t=e&&e.tagName.toString().toLowerCase();return/^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(t)?"inline":/^(li)$/i.test(t)?"list-item":/^(tr)$/i.test(t)?"table-row":"block"},addClass:function(e,t){e.classList?e.classList.add(t):e.className+=(e.className.length?" ":"")+t},removeClass:function(e,t){e.classList?e.classList.remove(t):e.className=e.className.toString().replace(new RegExp("(^|\\s)"+t.split(" ").join("|")+"(\\s|$)","gi")," ")}},getPropertyValue:function(e,t,i,h){function c(e,t){function i(){o&&X.setPropertyValue(e,"display","none")}var r=0;if(u<=8)r=j.css(e,t);else{var n,o=!1;if(/^(width|height)$/.test(t)&&0===X.getPropertyValue(e,"display")&&(o=!0,X.setPropertyValue(e,"display",X.Values.getDisplayType(e))),!h){if("height"===t&&"border-box"!==X.getPropertyValue(e,"boxSizing").toString().toLowerCase()){var a=e.offsetHeight-(parseFloat(X.getPropertyValue(e,"borderTopWidth"))||0)-(parseFloat(X.getPropertyValue(e,"borderBottomWidth"))||0)-(parseFloat(X.getPropertyValue(e,"paddingTop"))||0)-(parseFloat(X.getPropertyValue(e,"paddingBottom"))||0);return i(),a}if("width"===t&&"border-box"!==X.getPropertyValue(e,"boxSizing").toString().toLowerCase()){var s=e.offsetWidth-(parseFloat(X.getPropertyValue(e,"borderLeftWidth"))||0)-(parseFloat(X.getPropertyValue(e,"borderRightWidth"))||0)-(parseFloat(X.getPropertyValue(e,"paddingLeft"))||0)-(parseFloat(X.getPropertyValue(e,"paddingRight"))||0);return i(),s}}n=U(e)===N?V.getComputedStyle(e,null):U(e).computedStyle?U(e).computedStyle:U(e).computedStyle=V.getComputedStyle(e,null),(u||G.State.isFirefox)&&"borderColor"===t&&(t="borderTopColor"),(""===(r=9===u&&"filter"===t?n.getPropertyValue(t):n[t])||null===r)&&(r=e.style[t]),i()}if("auto"===r&&/^(top|right|bottom|left)$/i.test(t)){var l=c(e,"position");("fixed"===l||"absolute"===l&&/top|left/i.test(t))&&(r=j(e).position()[t]+"px")}return r}var r;if(X.Hooks.registered[t]){var n=t,o=X.Hooks.getRoot(n);i===N&&(i=X.getPropertyValue(e,X.Names.prefixCheck(o)[0])),X.Normalizations.registered[o]&&(i=X.Normalizations.registered[o]("extract",e,i)),r=X.Hooks.extractValue(n,i)}else if(X.Normalizations.registered[t]){var a,s;"transform"!==(a=X.Normalizations.registered[t]("name",e))&&(s=c(e,X.Names.prefixCheck(a)[0]),X.Values.isCSSNullValue(s)&&X.Hooks.templates[t]&&(s=X.Hooks.templates[t][1])),r=X.Normalizations.registered[t]("extract",e,s)}return/^[\d-]/.test(r)||(r=U(e)&&U(e).isSVG&&X.Names.SVGAttribute(t)?/^(height|width)$/i.test(t)?e.getBBox()[t]:e.getAttribute(t):c(e,X.Names.prefixCheck(t)[0])),X.Values.isCSSNullValue(r)&&(r=0),2<=G.debug&&console.log("Get "+t+": "+r),r},setPropertyValue:function(e,t,i,r,n){var o=t;if("scroll"===t)n.container?n.container["scroll"+n.direction]=i:"Left"===n.direction?V.scrollTo(i,n.alternateValue):V.scrollTo(n.alternateValue,i);else if(X.Normalizations.registered[t]&&"transform"===X.Normalizations.registered[t]("name",e))X.Normalizations.registered[t]("inject",e,i),o="transform",i=U(e).transformCache[t];else{if(X.Hooks.registered[t]){var a=t,s=X.Hooks.getRoot(t);r=r||X.getPropertyValue(e,s),i=X.Hooks.injectValue(a,i,r),t=s}if(X.Normalizations.registered[t]&&(i=X.Normalizations.registered[t]("inject",e,i),t=X.Normalizations.registered[t]("name",e)),o=X.Names.prefixCheck(t)[0],u<=8)try{e.style[o]=i}catch(e){G.debug&&console.log("Browser does not support ["+i+"] for ["+o+"]")}else U(e)&&U(e).isSVG&&X.Names.SVGAttribute(t)?e.setAttribute(t,i):e.style[o]=i;2<=G.debug&&console.log("Set "+t+" ("+o+"): "+i)}return[o,i]},flushTransformCache:function(t){function e(e){return parseFloat(X.getPropertyValue(t,e))}var i="";if((u||G.State.isAndroid&&!G.State.isChrome)&&U(t).isSVG){var r={translate:[e("translateX"),e("translateY")],skewX:[e("skewX")],skewY:[e("skewY")],scale:1!==e("scale")?[e("scale"),e("scale")]:[e("scaleX"),e("scaleY")],rotate:[e("rotateZ"),0,0]};j.each(U(t).transformCache,function(e){/^translate/i.test(e)?e="translate":/^scale/i.test(e)?e="scale":/^rotate/i.test(e)&&(e="rotate"),r[e]&&(i+=e+"("+r[e].join(" ")+") ",delete r[e])})}else{var n,o;j.each(U(t).transformCache,function(e){return n=U(t).transformCache[e],"transformPerspective"===e?(o=n,!0):(9===u&&"rotateZ"===e&&(e="rotate"),void(i+=e+n+" "))}),o&&(i="perspective"+o+" "+i)}X.setPropertyValue(t,"transform",i)}};X.Hooks.register(),X.Normalizations.register(),G.hook=function(e,r,n){var o=N;return e=d(e),j.each(e,function(e,t){if(U(t)===N&&G.init(t),n===N)o===N&&(o=G.CSS.getPropertyValue(t,r));else{var i=G.CSS.setPropertyValue(t,r,n);"transform"===i[0]&&G.CSS.flushTransformCache(t),o=i}}),o};var m=function(){function e(){return t?F.promise||null:i}var t,i,r,M,C,A,n=arguments[0]&&(j.isPlainObject(arguments[0].properties)&&!arguments[0].properties.names||W.isString(arguments[0].properties));if(W.isWrapped(this)?(t=!1,r=0,i=M=this):(t=!0,r=1,M=n?arguments[0].elements:arguments[0]),M=d(M)){A=n?(C=arguments[0].properties,arguments[0].options):(C=arguments[r],arguments[r+1]);var P=M.length,D=0;if("stop"!==C&&!j.isPlainObject(A)){A={};for(var o=r+1;o<arguments.length;o++)W.isArray(arguments[o])||!/^(fast|normal|slow)$/i.test(arguments[o])&&!/^\d/.test(arguments[o])?W.isString(arguments[o])||W.isArray(arguments[o])?A.easing=arguments[o]:W.isFunction(arguments[o])&&(A.complete=arguments[o]):A.duration=arguments[o]}var L,F={promise:null,resolver:null,rejecter:null};switch(t&&G.Promise&&(F.promise=new G.Promise(function(e,t){F.resolver=e,F.rejecter=t})),C){case"scroll":L="scroll";break;case"reverse":L="reverse";break;case"stop":j.each(M,function(e,t){U(t)&&U(t).delayTimer&&(clearTimeout(U(t).delayTimer.setTimeout),U(t).delayTimer.next&&U(t).delayTimer.next(),delete U(t).delayTimer)});var a=[];return j.each(G.State.calls,function(n,t){t&&j.each(t[1],function(e,i){var r=W.isString(A)?A:"";return A!==N&&t[2].queue!==r||void j.each(M,function(e,t){t===i&&(A!==N&&(j.each(j.queue(t,r),function(e,t){W.isFunction(t)&&t(null,!0)}),j.queue(t,r,[])),U(t)&&""===r&&j.each(U(t).tweensContainer,function(e,t){t.endValue=t.currentValue}),a.push(n))})})}),j.each(a,function(e,t){x(t,!0)}),F.promise&&F.resolver(M),e();default:if(!j.isPlainObject(C)||W.isEmptyObject(C)){if(W.isString(C)&&G.Redirects[C]){var s=(c=j.extend({},A)).duration,l=c.delay||0;return!0===c.backwards&&(M=j.extend(!0,[],M).reverse()),j.each(M,function(e,t){parseFloat(c.stagger)?c.delay=l+parseFloat(c.stagger)*e:W.isFunction(c.stagger)&&(c.delay=l+c.stagger.call(t,e,P)),c.drag&&(c.duration=parseFloat(s)||(/^(callout|transition)/.test(C)?1e3:400),c.duration=Math.max(c.duration*(c.backwards?1-e/P:(e+1)/P),.75*c.duration,200)),G.Redirects[C].call(t,t,c||{},e,P,M,F.promise?F:N)}),e()}var h="Velocity: First argument ("+C+") was not a property map, a known action, or a registered redirect. Aborting.";return F.promise?F.rejecter(new Error(h)):console.log(h),e()}L="start"}var c,u,O={lastParent:null,lastPosition:null,lastFontSize:null,lastPercentToPxWidth:null,lastPercentToPxHeight:null,lastEmToPx:null,remToPx:null,vwToPx:null,vhToPx:null},k=[];if(j.each(M,function(e,t){W.isNode(t)&&function(){function i(e){function u(e,t){var i=N,r=N,n=N;return W.isArray(e)?(i=e[0],!W.isArray(e[1])&&/^[\d-]/.test(e[1])||W.isFunction(e[1])||X.RegEx.isHex.test(e[1])?n=e[1]:(W.isString(e[1])&&!X.RegEx.isHex.test(e[1])||W.isArray(e[1]))&&(r=t?e[1]:z(e[1],H.duration),e[2]!==N&&(n=e[2]))):i=e,t||(r=r||H.easing),W.isFunction(i)&&(i=i.call(w,D,P)),W.isFunction(n)&&(n=n.call(w,D,P)),[i||0,r,n]}function t(e,t){var i,r;return r=(t||"0").toString().toLowerCase().replace(/[%A-z]+$/,function(e){return i=e,""}),i||(i=X.Values.getUnitType(e)),[r,i]}function i(){var e={myParent:w.parentNode||I.body,position:X.getPropertyValue(w,"position"),fontSize:X.getPropertyValue(w,"fontSize")},t=e.position===O.lastPosition&&e.myParent===O.lastParent,i=e.fontSize===O.lastFontSize;O.lastParent=e.myParent,O.lastPosition=e.position,O.lastFontSize=e.fontSize;var r={};if(i&&t)r.emToPx=O.lastEmToPx,r.percentToPxWidth=O.lastPercentToPxWidth,r.percentToPxHeight=O.lastPercentToPxHeight;else{var n=U(w).isSVG?I.createElementNS("http://www.w3.org/2000/svg","rect"):I.createElement("div");G.init(n),e.myParent.appendChild(n),j.each(["overflow","overflowX","overflowY"],function(e,t){G.CSS.setPropertyValue(n,t,"hidden")}),G.CSS.setPropertyValue(n,"position",e.position),G.CSS.setPropertyValue(n,"fontSize",e.fontSize),G.CSS.setPropertyValue(n,"boxSizing","content-box"),j.each(["minWidth","maxWidth","width","minHeight","maxHeight","height"],function(e,t){G.CSS.setPropertyValue(n,t,"100%")}),G.CSS.setPropertyValue(n,"paddingLeft","100em"),r.percentToPxWidth=O.lastPercentToPxWidth=(parseFloat(X.getPropertyValue(n,"width",null,!0))||1)/100,r.percentToPxHeight=O.lastPercentToPxHeight=(parseFloat(X.getPropertyValue(n,"height",null,!0))||1)/100,r.emToPx=O.lastEmToPx=(parseFloat(X.getPropertyValue(n,"paddingLeft"))||1)/100,e.myParent.removeChild(n)}return null===O.remToPx&&(O.remToPx=parseFloat(X.getPropertyValue(I.body,"fontSize"))||16),null===O.vwToPx&&(O.vwToPx=parseFloat(V.innerWidth)/100,O.vhToPx=parseFloat(V.innerHeight)/100),r.remToPx=O.remToPx,r.vwToPx=O.vwToPx,r.vhToPx=O.vhToPx,1<=G.debug&&console.log("Unit ratios: "+JSON.stringify(r),w),r}if(H.begin&&0===D)try{H.begin.call(M,M)}catch(e){setTimeout(function(){throw e},1)}if("scroll"===L){var r,n,o,a=/^x$/i.test(H.axis)?"Left":"Top",s=parseFloat(H.offset)||0;H.container?W.isWrapped(H.container)||W.isNode(H.container)?(H.container=H.container[0]||H.container,o=(r=H.container["scroll"+a])+j(w).position()[a.toLowerCase()]+s):H.container=null:(r=G.State.scrollAnchor[G.State["scrollProperty"+a]],n=G.State.scrollAnchor[G.State["scrollProperty"+("Left"===a?"Top":"Left")]],o=j(w).offset()[a.toLowerCase()]+s),S={scroll:{rootPropertyValue:!1,startValue:r,currentValue:r,endValue:o,unitType:"",easing:H.easing,scrollData:{container:H.container,direction:a,alternateValue:n}},element:w},G.debug&&console.log("tweensContainer (scroll): ",S.scroll,w)}else if("reverse"===L){if(!U(w).tweensContainer)return void j.dequeue(w,H.queue);"none"===U(w).opts.display&&(U(w).opts.display="auto"),"hidden"===U(w).opts.visibility&&(U(w).opts.visibility="visible"),U(w).opts.loop=!1,U(w).opts.begin=null,U(w).opts.complete=null,A.easing||delete H.easing,A.duration||delete H.duration,H=j.extend({},U(w).opts,H);var l=j.extend(!0,{},U(w).tweensContainer);for(var h in l)if("element"!==h){var c=l[h].startValue;l[h].startValue=l[h].currentValue=l[h].endValue,l[h].endValue=c,W.isEmptyObject(A)||(l[h].easing=H.easing),G.debug&&console.log("reverse tweensContainer ("+h+"): "+JSON.stringify(l[h]),w)}S=l}else if("start"===L){for(var f in U(w).tweensContainer&&!0===U(w).isAnimating&&(l=U(w).tweensContainer),j.each(C,function(e,t){if(RegExp("^"+X.Lists.colors.join("$|^")+"$").test(e)){var i=u(t,!0),r=i[0],n=i[1],o=i[2];if(X.RegEx.isHex.test(r)){for(var a=["Red","Green","Blue"],s=X.Values.hexToRgb(r),l=o?X.Values.hexToRgb(o):N,h=0;h<a.length;h++){var c=[s[h]];n&&c.push(n),l!==N&&c.push(l[h]),C[e+a[h]]=c}delete C[e]}}}),C){var p=u(C[f]),d=p[0],m=p[1],g=p[2];f=X.Names.camelCase(f);var E=X.Hooks.getRoot(f),v=!1;if(U(w).isSVG||!1!==X.Names.prefixCheck(E)[1]||X.Normalizations.registered[E]!==N){(H.display!==N&&null!==H.display&&"none"!==H.display||H.visibility!==N&&"hidden"!==H.visibility)&&/opacity|filter/.test(f)&&!g&&0!==d&&(g=0),H._cacheValues&&l&&l[f]?(g===N&&(g=l[f].endValue+l[f].unitType),v=U(w).rootPropertyValueCache[E]):X.Hooks.registered[f]?g===N?(v=X.getPropertyValue(w,E),g=X.getPropertyValue(w,f,v)):v=X.Hooks.templates[E][1]:g===N&&(g=X.getPropertyValue(w,f));var y,T,_,x=!1;if(g=(y=t(f,g))[0],_=y[1],d=(y=t(f,d))[0].replace(/^([+-\/*])=/,function(e,t){return x=t,""}),T=y[1],g=parseFloat(g)||0,d=parseFloat(d)||0,"%"===T&&(/^(fontSize|lineHeight)$/.test(f)?(d/=100,T="em"):/^scale/.test(f)?(d/=100,T=""):/(Red|Green|Blue)$/i.test(f)&&(d=d/100*255,T="")),/[\/*]/.test(x))T=_;else if(_!==T&&0!==g)if(0===d)T=_;else{b=b||i();var R=/margin|padding|left|right|width|text|word|letter/i.test(f)||/X$/.test(f)||"x"===f?"x":"y";switch(_){case"%":g*="x"===R?b.percentToPxWidth:b.percentToPxHeight;break;case"px":break;default:g*=b[_+"ToPx"]}switch(T){case"%":g*=1/("x"===R?b.percentToPxWidth:b.percentToPxHeight);break;case"px":break;default:g*=1/b[T+"ToPx"]}}switch(x){case"+":d=g+d;break;case"-":d=g-d;break;case"*":d*=g;break;case"/":d=g/d}S[f]={rootPropertyValue:v,startValue:g,currentValue:g,endValue:d,unitType:T,easing:m},G.debug&&console.log("tweensContainer ("+f+"): "+JSON.stringify(S[f]),w)}else G.debug&&console.log("Skipping ["+E+"] due to a lack of browser support.")}S.element=w}S.element&&(X.Values.addClass(w,"velocity-animating"),k.push(S),""===H.queue&&(U(w).tweensContainer=S,U(w).opts=H),U(w).isAnimating=!0,D===P-1?(1e4<G.State.calls.length&&(G.State.calls=function(e){for(var t=-1,i=e?e.length:0,r=[];++t<i;){var n=e[t];n&&r.push(n)}return r}(G.State.calls)),G.State.calls.push([k,M,H,null,F.resolver]),!1===G.State.isTicking&&(G.State.isTicking=!0,B())):D++)}var b,w=this,H=j.extend({},G.defaults,A),S={};switch(U(w)===N&&G.init(w),parseFloat(H.delay)&&!1!==H.queue&&j.queue(w,H.queue,function(e){G.velocityQueueEntryFlag=!0,U(w).delayTimer={setTimeout:setTimeout(e,parseFloat(H.delay)),next:e}}),H.duration.toString().toLowerCase()){case"fast":H.duration=200;break;case"normal":H.duration=400;break;case"slow":H.duration=600;break;default:H.duration=parseFloat(H.duration)||1}!1!==G.mock&&(!0===G.mock?H.duration=H.delay=1:(H.duration*=parseFloat(G.mock)||1,H.delay*=parseFloat(G.mock)||1)),H.easing=z(H.easing,H.duration),H.begin&&!W.isFunction(H.begin)&&(H.begin=null),H.progress&&!W.isFunction(H.progress)&&(H.progress=null),H.complete&&!W.isFunction(H.complete)&&(H.complete=null),H.display!==N&&null!==H.display&&(H.display=H.display.toString().toLowerCase(),"auto"===H.display&&(H.display=G.CSS.Values.getDisplayType(w))),H.visibility!==N&&null!==H.visibility&&(H.visibility=H.visibility.toString().toLowerCase()),H.mobileHA=H.mobileHA&&G.State.isMobile&&!G.State.isGingerbread,!1===H.queue?H.delay?setTimeout(i,H.delay):i():j.queue(w,H.queue,function(e,t){return!0===t?(F.promise&&F.resolver(M),!0):(G.velocityQueueEntryFlag=!0,void i())}),""!==H.queue&&"fx"!==H.queue||"inprogress"===j.queue(w)[0]||j.dequeue(w)}.call(t)}),(c=j.extend({},G.defaults,A)).loop=parseInt(c.loop),u=2*c.loop-1,c.loop)for(var f=0;f<u;f++){var p={delay:c.delay,progress:c.progress};f===u-1&&(p.display=c.display,p.visibility=c.visibility,p.complete=c.complete),m(M,"reverse",p)}return e()}};(G=j.extend(m,G)).animate=m;var R=V.requestAnimationFrame||t;return G.State.isMobile||I.hidden===N||I.addEventListener("visibilitychange",function(){I.hidden?(R=function(e){return setTimeout(function(){e(!0)},16)},B()):R=V.requestAnimationFrame||t}),e.Velocity=G,e!==V&&(e.fn.velocity=m,e.fn.velocity.defaults=G.defaults),j.each(["Down","Up"],function(e,u){G.Redirects["slide"+u]=function(i,e,t,r,n,o){var a=j.extend({},e),s=a.begin,l=a.complete,h={height:"",marginTop:"",marginBottom:"",paddingTop:"",paddingBottom:""},c={};a.display===N&&(a.display="Down"===u?"inline"===G.CSS.Values.getDisplayType(i)?"inline-block":"block":"none"),a.begin=function(){for(var e in s&&s.call(n,n),h){c[e]=i.style[e];var t=G.CSS.getPropertyValue(i,e);h[e]="Down"===u?[t,0]:[0,t]}c.overflow=i.style.overflow,i.style.overflow="hidden"},a.complete=function(){for(var e in c)i.style[e]=c[e];l&&l.call(n,n),o&&o.resolver(n)},G(i,h,a)}}),j.each(["In","Out"],function(e,h){G.Redirects["fade"+h]=function(e,t,i,r,n,o){var a=j.extend({},t),s={opacity:"In"===h?1:0},l=a.complete;a.complete=i!==r-1?a.begin=null:function(){l&&l.call(n,n),o&&o.resolver(n)},a.display===N&&(a.display="In"===h?"auto":"none"),G(this,s,a)}}),G}jQuery.fn.velocity=jQuery.fn.animate}(window.jQuery||window.Zepto||window,window,document)});
//# sourceMappingURL=app.min.js.map
